"use strict";(self.webpackChunkPorfolio_Roman_Dario_Esquivel=self.webpackChunkPorfolio_Roman_Dario_Esquivel||[]).push([[179],{2011:(ct,Ae,U)=>{U.d(Ae,{Dh:()=>fe,GT:()=>_e,cc:()=>Pe,hO:()=>je,on:()=>z,pX:()=>ue,xv:()=>ve});var l=U(4650),$=U(127),P=U(5813);ct=U.hmd(ct);const se=["ngOnDestroy"],ue=(me,Je,Ye,Fe={})=>new Proxy(me,{get:(Re,Ie)=>Ye.runOutsideAngular(()=>{var qe;if(me[Ie])return!(null===(qe=Fe?.spy)||void 0===qe)&&qe.get&&Fe.spy.get(Ie,me[Ie]),me[Ie];if(se.indexOf(Ie)>-1)return()=>{};const ie=Je.toPromise().then(ce=>{const we=ce&&ce[Ie];return"function"==typeof we?we.bind(ce):we&&we.then?we.then(Q=>Ye.run(()=>Q)):Ye.run(()=>we)});return new Proxy(()=>{},{get:(ce,we)=>ie[we],apply:(ce,we,Q)=>ie.then(ee=>{var pe;const oe=ee&&ee(...Q);return!(null===(pe=Fe?.spy)||void 0===pe)&&pe.apply&&Fe.spy.apply(Ie,Q,oe),oe})})})}),_e=(me,Je)=>{Je.forEach(Ye=>{Object.getOwnPropertyNames(Ye.prototype||Ye).forEach(Fe=>{Object.defineProperty(me.prototype,Fe,Object.getOwnPropertyDescriptor(Ye.prototype||Ye,Fe))})})};class ge{constructor(Je){return Je}}const fe=new l.OlP("angularfire2.app.options"),ve=new l.OlP("angularfire2.app.name");function z(me,Je,Ye){const Re="object"==typeof Ye&&Ye||{};Re.name=Re.name||"string"==typeof Ye&&Ye||"[DEFAULT]";const qe=$.Z.apps.filter(ie=>ie&&ie.name===Re.name)[0]||Je.runOutsideAngular(()=>$.Z.initializeApp(me,Re));try{JSON.stringify(me)!==JSON.stringify(qe.options)&&W("error",`${qe.name} Firebase App already initialized with different options${ct.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ge(qe)}const W=(me,...Je)=>{(0,l.X6Q)()&&typeof console<"u"&&console[me](...Je)},X={provide:ge,useFactory:z,deps:[fe,l.R0b,[new l.FiY,ve]]};let je=(()=>{class me{constructor(Ye){$.Z.registerVersion("angularfire",P.q4.full,"core"),$.Z.registerVersion("angularfire",P.q4.full,"app-compat"),$.Z.registerVersion("angular",l.q4F.full,Ye.toString())}static initializeApp(Ye,Fe){return{ngModule:me,providers:[{provide:fe,useValue:Ye},{provide:ve,useValue:Fe}]}}}return me.\u0275fac=function(Ye){return new(Ye||me)(l.LFG(l.Lbi))},me.\u0275mod=l.oAB({type:me}),me.\u0275inj=l.cJS({providers:[X]}),me})();function Pe(me,Je,Ye,Fe,Re){const[,Ie,qe]=globalThis.\u0275AngularfireInstanceCache.find(ie=>ie[0]===me)||[];if(Ie)return function Te(me,Je){try{return me.toString()===Je.toString()}catch{return me===Je}}(Re,qe)||(Ce("error",`${Je} was already initialized on the ${Ye} Firebase App with different settings.${rt?" You may need to reload as Firebase is not HMR aware.":""}`),Ce("warn",{is:Re,was:qe})),Ie;{const ie=Fe();return globalThis.\u0275AngularfireInstanceCache.push([me,ie,Re]),ie}}const rt=!!ct.hot,Ce=(me,...Je)=>{(0,l.X6Q)()&&typeof console<"u"&&console[me](...Je)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ct,Ae,U)=>{U.d(Ae,{q4:()=>ql,iC:()=>zl,fc:()=>mo,HU:()=>ad,vb:()=>Xa,JM:()=>Ri,u3:()=>tu});var l=U(4650),$=U(5867),P=U(5861),se=U(9681),ue=U(2090),_e=U(4859),ge=U(1877),fe=U(8766);const ve="@firebase/installations",z="0.5.16",X=`w:${z}`,je="FIS_v2",Je=new ue.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ye(T){return T instanceof ue.ZR&&T.code.includes("request-failed")}function Fe({projectId:T}){return`https://firebaseinstallations.googleapis.com/v1/projects/${T}/installations`}function Re(T){return{token:T.token,requestStatus:2,expiresIn:ee(T.expiresIn),creationTime:Date.now()}}function Ie(T,D){return qe.apply(this,arguments)}function qe(){return(qe=(0,P.Z)(function*(T,D){const j=(yield D.json()).error;return Je.create("request-failed",{requestName:T,serverCode:j.code,serverMessage:j.message,serverStatus:j.status})})).apply(this,arguments)}function ie({apiKey:T}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T})}function ce(T,{refreshToken:D}){const M=ie(T);return M.append("Authorization",function pe(T){return`${je} ${T}`}(D)),M}function we(T){return Q.apply(this,arguments)}function Q(){return(Q=(0,P.Z)(function*(T){const D=yield T();return D.status>=500&&D.status<600?T():D})).apply(this,arguments)}function ee(T){return Number(T.replace("s","000"))}function oe(T,D){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,P.Z)(function*({appConfig:T,heartbeatServiceProvider:D},{fid:M}){const j=Fe(T),J=ie(T),ae=D.getImmediate({optional:!0});if(ae){const kt=yield ae.getHeartbeatsHeader();kt&&J.append("x-firebase-client",kt)}const We={method:"POST",headers:J,body:JSON.stringify({fid:M,authVersion:je,appId:T.appId,sdkVersion:X})},pt=yield we(()=>fetch(j,We));if(pt.ok){const kt=yield pt.json();return{fid:kt.fid||M,registrationStatus:2,refreshToken:kt.refreshToken,authToken:Re(kt.authToken)}}throw yield Ie("Create Installation",pt)})).apply(this,arguments)}function Be(T){return new Promise(D=>{setTimeout(D,T)})}const an=/^[cdef][\w-]{21}$/;function Ze(){try{const T=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(T),T[0]=112+T[0]%16;const M=function hn(T){return function gt(T){return btoa(String.fromCharCode(...T)).replace(/\+/g,"-").replace(/\//g,"_")}(T).substr(0,22)}(T);return an.test(M)?M:""}catch{return""}}function In(T){return`${T.appName}!${T.appId}`}const tn=new Map;function nn(T,D){const M=In(T);Cr(M,D),function qi(T,D){const M=function On(){return!Br&&"BroadcastChannel"in self&&(Br=new BroadcastChannel("[Firebase] FID Change"),Br.onmessage=T=>{Cr(T.data.key,T.data.fid)}),Br}();M&&M.postMessage({key:T,fid:D}),function Wi(){0===tn.size&&Br&&(Br.close(),Br=null)}()}(M,D)}function Cr(T,D){const M=tn.get(T);if(M)for(const j of M)j(D)}let Br=null;const Un="firebase-installations-store";let Ti=null;function zi(){return Ti||(Ti=(0,fe.X3)("firebase-installations-database",1,{upgrade:(T,D)=>{0===D&&T.createObjectStore(Un)}})),Ti}function Qe(T,D){return er.apply(this,arguments)}function er(){return(er=(0,P.Z)(function*(T,D){const M=In(T),J=(yield zi()).transaction(Un,"readwrite"),ae=J.objectStore(Un),Me=yield ae.get(M);return yield ae.put(D,M),yield J.done,(!Me||Me.fid!==D.fid)&&nn(T,D.fid),D})).apply(this,arguments)}function Zn(T){return wn.apply(this,arguments)}function wn(){return(wn=(0,P.Z)(function*(T){const D=In(T),j=(yield zi()).transaction(Un,"readwrite");yield j.objectStore(Un).delete(D),yield j.done})).apply(this,arguments)}function gr(T,D){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,P.Z)(function*(T,D){const M=In(T),J=(yield zi()).transaction(Un,"readwrite"),ae=J.objectStore(Un),Me=yield ae.get(M),We=D(Me);return void 0===We?yield ae.delete(M):yield ae.put(We,M),yield J.done,We&&(!Me||Me.fid!==We.fid)&&nn(T,We.fid),We})).apply(this,arguments)}function En(T){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,P.Z)(function*(T){let D;const M=yield gr(T.appConfig,j=>{const J=yn(j),ae=mt(T,J);return D=ae.registrationPromise,ae.installationEntry});return""===M.fid?{installationEntry:yield D}:{installationEntry:M,registrationPromise:D}})).apply(this,arguments)}function yn(T){return St(T||{fid:Ze(),registrationStatus:0})}function mt(T,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(Je.create("app-offline"))};const M={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},j=function _t(T,D){return xt.apply(this,arguments)}(T,M);return{installationEntry:M,registrationPromise:j}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:Hr(T)}:{installationEntry:D}}function xt(){return(xt=(0,P.Z)(function*(T,D){try{const M=yield oe(T,D);return Qe(T.appConfig,M)}catch(M){throw Ye(M)&&409===M.customData.serverCode?yield Zn(T.appConfig):yield Qe(T.appConfig,{fid:D.fid,registrationStatus:0}),M}})).apply(this,arguments)}function Hr(T){return zn.apply(this,arguments)}function zn(){return(zn=(0,P.Z)(function*(T){let D=yield Rr(T.appConfig);for(;1===D.registrationStatus;)yield Be(100),D=yield Rr(T.appConfig);if(0===D.registrationStatus){const{installationEntry:M,registrationPromise:j}=yield En(T);return j||M}return D})).apply(this,arguments)}function Rr(T){return gr(T,D=>{if(!D)throw Je.create("installation-not-found");return St(D)})}function St(T){return function kr(T){return 1===T.registrationStatus&&T.registrationTime+1e4<Date.now()}(T)?{fid:T.fid,registrationStatus:0}:T}function Nt(T,D){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,P.Z)(function*({appConfig:T,heartbeatServiceProvider:D},M){const j=Kt(T,M),J=ce(T,M),ae=D.getImmediate({optional:!0});if(ae){const kt=yield ae.getHeartbeatsHeader();kt&&J.append("x-firebase-client",kt)}const We={method:"POST",headers:J,body:JSON.stringify({installation:{sdkVersion:X,appId:T.appId}})},pt=yield we(()=>fetch(j,We));if(pt.ok)return Re(yield pt.json());throw yield Ie("Generate Auth Token",pt)})).apply(this,arguments)}function Kt(T,{fid:D}){return`${Fe(T)}/${D}/authTokens:generate`}function lr(T){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,P.Z)(function*(T,D=!1){let M;const j=yield gr(T.appConfig,ae=>{if(!Xt(ae))throw Je.create("not-registered");const Me=ae.authToken;if(!D&&Z(Me))return ae;if(1===Me.requestStatus)return M=et(T,D),ae;{if(!navigator.onLine)throw Je.create("app-offline");const We=Y(ae);return M=bt(T,We),We}});return M?yield M:j.authToken})).apply(this,arguments)}function et(T,D){return De.apply(this,arguments)}function De(){return(De=(0,P.Z)(function*(T,D){let M=yield tt(T.appConfig);for(;1===M.authToken.requestStatus;)yield Be(100),M=yield tt(T.appConfig);const j=M.authToken;return 0===j.requestStatus?lr(T,D):j})).apply(this,arguments)}function tt(T){return gr(T,D=>{if(!Xt(D))throw Je.create("not-registered");return function H(T){return 1===T.requestStatus&&T.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function bt(T,D){return It.apply(this,arguments)}function It(){return(It=(0,P.Z)(function*(T,D){try{const M=yield Nt(T,D),j=Object.assign(Object.assign({},D),{authToken:M});return yield Qe(T.appConfig,j),M}catch(M){if(!Ye(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const j=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield Qe(T.appConfig,j)}else yield Zn(T.appConfig);throw M}})).apply(this,arguments)}function Xt(T){return void 0!==T&&2===T.registrationStatus}function Z(T){return 2===T.requestStatus&&!function q(T){const D=Date.now();return D<T.creationTime||T.creationTime+T.expiresIn<D+36e5}(T)}function Y(T){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},T),{authToken:D})}function B(){return(B=(0,P.Z)(function*(T){const D=T,{installationEntry:M,registrationPromise:j}=yield En(D);return j?j.catch(console.error):lr(D).catch(console.error),M.fid})).apply(this,arguments)}function Oe(){return(Oe=(0,P.Z)(function*(T,D=!1){const M=T;return yield st(M),(yield lr(M,D)).token})).apply(this,arguments)}function st(T){return ot.apply(this,arguments)}function ot(){return(ot=(0,P.Z)(function*(T){const{registrationPromise:D}=yield En(T);D&&(yield D)})).apply(this,arguments)}function eo(T){return Je.create("missing-app-config-values",{valueName:T})}const Uo="installations",to=T=>{const D=T.getProvider("app").getImmediate(),M=function Dn(T){if(!T||!T.options)throw eo("App Configuration");if(!T.name)throw eo("App Name");const D=["projectId","apiKey","appId"];for(const M of D)if(!T.options[M])throw eo(M);return{appName:T.name,projectId:T.options.projectId,apiKey:T.options.apiKey,appId:T.options.appId}}(D);return{app:D,appConfig:M,heartbeatServiceProvider:(0,se._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},no=T=>{const D=T.getProvider("app").getImmediate(),M=(0,se._getProvider)(D,Uo).getImmediate();return{getId:()=>function k(T){return B.apply(this,arguments)}(M),getToken:J=>function re(T){return Oe.apply(this,arguments)}(M,J)}};(function Au(){(0,se._registerComponent)(new _e.wA(Uo,to,"PUBLIC")),(0,se._registerComponent)(new _e.wA("installations-internal",no,"PRIVATE"))})(),(0,se.registerVersion)(ve,z),(0,se.registerVersion)(ve,z,"esm2017");const ls="@firebase/remote-config",Yn=new ue.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Tl{constructor(D,M,j,J){this.client=D,this.storage=M,this.storageCache=j,this.logger=J}isCachedDataFresh(D,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const j=Date.now()-M,J=j<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${j}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${J}.`),J}fetch(D){var M=this;return(0,P.Z)(function*(){const[j,J]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(J&&M.isCachedDataFresh(D.cacheMaxAgeMillis,j))return J;D.eTag=J&&J.eTag;const ae=yield M.client.fetch(D),Me=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ae.status&&Me.push(M.storage.setLastSuccessfulFetchResponse(ae)),yield Promise.all(Me),ae})()}}function Ra(T=navigator){return T.languages&&T.languages[0]||T.language}class oo{constructor(D,M,j,J,ae,Me){this.firebaseInstallations=D,this.sdkVersion=M,this.namespace=j,this.projectId=J,this.apiKey=ae,this.appId=Me}fetch(D){var M=this;return(0,P.Z)(function*(){var j,J,ae;const[Me,We]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),kt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,Ut={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},wt={sdk_version:M.sdkVersion,app_instance_id:Me,app_instance_id_token:We,app_id:M.appId,language_code:Ra()},Gn={method:"POST",headers:Ut,body:JSON.stringify(wt)},_r=fetch(kt,Gn),Bs=new Promise((vs,yo)=>{D.signal.addEventListener(()=>{const tg=new Error("The operation was aborted.");tg.name="AbortError",yo(tg)})});let fa;try{yield Promise.race([_r,Bs]),fa=yield _r}catch(vs){let yo="fetch-client-network";throw"AbortError"===(null===(j=vs)||void 0===j?void 0:j.name)&&(yo="fetch-timeout"),Yn.create(yo,{originalErrorMessage:null===(J=vs)||void 0===J?void 0:J.message})}let Xr=fa.status;const js=fa.headers.get("ETag")||void 0;let yr,Ni;if(200===fa.status){let vs;try{vs=yield fa.json()}catch(yo){throw Yn.create("fetch-client-parse",{originalErrorMessage:null===(ae=yo)||void 0===ae?void 0:ae.message})}yr=vs.entries,Ni=vs.state}if("INSTANCE_STATE_UNSPECIFIED"===Ni?Xr=500:"NO_CHANGE"===Ni?Xr=304:("NO_TEMPLATE"===Ni||"EMPTY_CONFIG"===Ni)&&(yr={}),304!==Xr&&200!==Xr)throw Yn.create("fetch-status",{httpStatus:Xr});return{status:Xr,eTag:js,config:yr}})()}}class ds{constructor(D,M){this.client=D,this.storage=M}fetch(D){var M=this;return(0,P.Z)(function*(){const j=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(D,j)})()}attemptFetch(D,{throttleEndTimeMillis:M,backoffCount:j}){var J=this;return(0,P.Z)(function*(){yield function ci(T,D){return new Promise((M,j)=>{const J=Math.max(D-Date.now(),0),ae=setTimeout(M,J);T.addEventListener(()=>{clearTimeout(ae),j(Yn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,M);try{const ae=yield J.client.fetch(D);return yield J.storage.deleteThrottleMetadata(),ae}catch(ae){if(!function qp(T){if(!(T instanceof ue.ZR&&T.customData))return!1;const D=Number(T.customData.httpStatus);return 429===D||500===D||503===D||504===D}(ae))throw ae;const Me={throttleEndTimeMillis:Date.now()+(0,ue.$s)(j),backoffCount:j+1};return yield J.storage.setThrottleMetadata(Me),J.attemptFetch(D,Me)}})()}}class Zp{constructor(D,M,j,J,ae){this.app=D,this._client=M,this._storageCache=j,this._storage=J,this._logger=ae,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ka(T,D){var M;const j=T.target.error||void 0;return Yn.create(D,{originalErrorMessage:j&&(null===(M=j)||void 0===M?void 0:M.message)})}const Bo="app_namespace_store";class Vc{constructor(D,M,j,J=function Kp(){return new Promise((T,D)=>{var M;try{const j=indexedDB.open("firebase_remote_config",1);j.onerror=J=>{D(ka(J,"storage-open"))},j.onsuccess=J=>{T(J.target.result)},j.onupgradeneeded=J=>{0===J.oldVersion&&J.target.result.createObjectStore(Bo,{keyPath:"compositeKey"})}}catch(j){D(Yn.create("storage-open",{originalErrorMessage:null===(M=j)||void 0===M?void 0:M.message}))}})}()){this.appId=D,this.appName=M,this.namespace=j,this.openDbPromise=J}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var M=this;return(0,P.Z)(function*(){const j=yield M.openDbPromise;return new Promise((J,ae)=>{var Me;const pt=j.transaction([Bo],"readonly").objectStore(Bo),kt=M.createCompositeKey(D);try{const Ut=pt.get(kt);Ut.onerror=wt=>{ae(ka(wt,"storage-get"))},Ut.onsuccess=wt=>{const Gn=wt.target.result;J(Gn?Gn.value:void 0)}}catch(Ut){ae(Yn.create("storage-get",{originalErrorMessage:null===(Me=Ut)||void 0===Me?void 0:Me.message}))}})})()}set(D,M){var j=this;return(0,P.Z)(function*(){const J=yield j.openDbPromise;return new Promise((ae,Me)=>{var We;const kt=J.transaction([Bo],"readwrite").objectStore(Bo),Ut=j.createCompositeKey(D);try{const wt=kt.put({compositeKey:Ut,value:M});wt.onerror=Gn=>{Me(ka(Gn,"storage-set"))},wt.onsuccess=()=>{ae()}}catch(wt){Me(Yn.create("storage-set",{originalErrorMessage:null===(We=wt)||void 0===We?void 0:We.message}))}})})()}delete(D){var M=this;return(0,P.Z)(function*(){const j=yield M.openDbPromise;return new Promise((J,ae)=>{var Me;const pt=j.transaction([Bo],"readwrite").objectStore(Bo),kt=M.createCompositeKey(D);try{const Ut=pt.delete(kt);Ut.onerror=wt=>{ae(ka(wt,"storage-delete"))},Ut.onsuccess=()=>{J()}}catch(Ut){ae(Yn.create("storage-delete",{originalErrorMessage:null===(Me=Ut)||void 0===Me?void 0:Me.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class jo{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,P.Z)(function*(){const M=D.storage.getLastFetchStatus(),j=D.storage.getLastSuccessfulFetchTimestampMillis(),J=D.storage.getActiveConfig(),ae=yield M;ae&&(D.lastFetchStatus=ae);const Me=yield j;Me&&(D.lastSuccessfulFetchTimestampMillis=Me);const We=yield J;We&&(D.activeConfig=We)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function y_(){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,P.Z)(function*(){if(!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch{return!1}})).apply(this,arguments)}!function Bc(){(0,se._registerComponent)(new _e.wA("remote-config",function T(D,{instanceIdentifier:M}){const j=D.getProvider("app").getImmediate(),J=D.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Yn.create("registration-window");if(!(0,ue.hl)())throw Yn.create("indexed-db-unavailable");const{projectId:ae,apiKey:Me,appId:We}=j.options;if(!ae)throw Yn.create("registration-project-id");if(!Me)throw Yn.create("registration-api-key");if(!We)throw Yn.create("registration-app-id");const pt=new Vc(We,j.name,M=M||"firebase"),kt=new jo(pt),Ut=new ge.Yd(ls);Ut.logLevel=ge.in.ERROR;const wt=new oo(J,se.SDK_VERSION,M,ae,Me,We),Gn=new ds(wt,pt),_r=new Tl(Gn,pt,kt,Ut),Bs=new Zp(j,_r,kt,pt,Ut);return function en(T){const D=(0,ue.m9)(T);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(Bs),Bs},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(ls,"0.3.15"),(0,se.registerVersion)(ls,"0.3.15","esm2017")}();const br="/firebase-messaging-sw.js",$o="/firebase-cloud-messaging-push-scope",Ns="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ru="google.c.a.c_id",Dl="google.c.a.c_l",$c="google.c.a.ts",Go="google.c.a.e";var di=(()=>{return(T=di||(di={})).PUSH_RECEIVED="push-received",T.NOTIFICATION_CLICKED="notification-clicked",di;var T})();function hs(T){const D=new Uint8Array(T);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Yr(T){const M=(T+"=".repeat((4-T.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),j=atob(M),J=new Uint8Array(j.length);for(let ae=0;ae<j.length;++ae)J[ae]=j.charCodeAt(ae);return J}const ao="fcm_token_details_db",qo="fcm_token_object_Store";function Yp(T){return Sl.apply(this,arguments)}function Sl(){return Sl=(0,P.Z)(function*(T){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ae=>ae.name).includes(ao))return null;let D=null;return(yield(0,fe.X3)(ao,5,{upgrade:(j=(0,P.Z)(function*(J,ae,Me,We){var pt;if(ae<2||!J.objectStoreNames.contains(qo))return;const kt=We.objectStore(qo),Ut=yield kt.index("fcmSenderId").get(T);if(yield kt.clear(),Ut)if(2===ae){const wt=Ut;if(!wt.auth||!wt.p256dh||!wt.endpoint)return;D={token:wt.fcmToken,createTime:null!==(pt=wt.createTime)&&void 0!==pt?pt:Date.now(),subscriptionOptions:{auth:wt.auth,p256dh:wt.p256dh,endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:"string"==typeof wt.vapidKey?wt.vapidKey:hs(wt.vapidKey)}}}else if(3===ae){const wt=Ut;D={token:wt.fcmToken,createTime:wt.createTime,subscriptionOptions:{auth:hs(wt.auth),p256dh:hs(wt.p256dh),endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:hs(wt.vapidKey)}}}else if(4===ae){const wt=Ut;D={token:wt.fcmToken,createTime:wt.createTime,subscriptionOptions:{auth:hs(wt.auth),p256dh:hs(wt.p256dh),endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:hs(wt.vapidKey)}}}}),function(ae,Me,We,pt){return j.apply(this,arguments)})})).close(),yield(0,fe.Lj)(ao),yield(0,fe.Lj)("fcm_vapid_details_db"),yield(0,fe.Lj)("undefined"),Fn(D)?D:null;var j}),Sl.apply(this,arguments)}function Fn(T){if(!T||!T.subscriptionOptions)return!1;const{subscriptionOptions:D}=T;return"number"==typeof T.createTime&&T.createTime>0&&"string"==typeof T.token&&T.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const Si="firebase-messaging-store";let Ir=null;function ku(){return Ir||(Ir=(0,fe.X3)("firebase-messaging-database",1,{upgrade:(T,D)=>{0===D&&T.createObjectStore(Si)}})),Ir}function uo(T){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,P.Z)(function*(T){const D=hi(T),j=yield(yield ku()).transaction(Si).objectStore(Si).get(D);if(j)return j;{const J=yield Yp(T.appConfig.senderId);if(J)return yield un(T,J),J}})).apply(this,arguments)}function un(T,D){return Al.apply(this,arguments)}function Al(){return(Al=(0,P.Z)(function*(T,D){const M=hi(T),J=(yield ku()).transaction(Si,"readwrite");return yield J.objectStore(Si).put(D,M),yield J.done,D})).apply(this,arguments)}function Ps(T){return xl.apply(this,arguments)}function xl(){return(xl=(0,P.Z)(function*(T){const D=hi(T),j=(yield ku()).transaction(Si,"readwrite");yield j.objectStore(Si).delete(D),yield j.done})).apply(this,arguments)}function hi({appConfig:T}){return T.appId}const Vn=new ue.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Rt(T,D){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,P.Z)(function*(T,D){var M;const j=yield La(T),J=ke(D),ae={method:"POST",headers:j,body:JSON.stringify(J)};let Me;try{Me=yield(yield fetch(lo(T.appConfig),ae)).json()}catch(We){throw Vn.create("token-subscribe-failed",{errorInfo:null===(M=We)||void 0===M?void 0:M.toString()})}if(Me.error)throw Vn.create("token-subscribe-failed",{errorInfo:Me.error.message});if(!Me.token)throw Vn.create("token-subscribe-no-token");return Me.token})).apply(this,arguments)}function Qp(T,D){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,P.Z)(function*(T,D){var M;const j=yield La(T),J=ke(D.subscriptionOptions),ae={method:"PATCH",headers:j,body:JSON.stringify(J)};let Me;try{Me=yield(yield fetch(`${lo(T.appConfig)}/${D.token}`,ae)).json()}catch(We){throw Vn.create("token-update-failed",{errorInfo:null===(M=We)||void 0===M?void 0:M.toString()})}if(Me.error)throw Vn.create("token-update-failed",{errorInfo:Me.error.message});if(!Me.token)throw Vn.create("token-update-no-token");return Me.token})).apply(this,arguments)}function qc(T,D){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,P.Z)(function*(T,D){var M;const J={method:"DELETE",headers:yield La(T)};try{const Me=yield(yield fetch(`${lo(T.appConfig)}/${D}`,J)).json();if(Me.error)throw Vn.create("token-unsubscribe-failed",{errorInfo:Me.error.message})}catch(ae){throw Vn.create("token-unsubscribe-failed",{errorInfo:null===(M=ae)||void 0===M?void 0:M.toString()})}})).apply(this,arguments)}function lo({projectId:T}){return`https://fcmregistrations.googleapis.com/v1/projects/${T}/registrations`}function La(T){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,P.Z)(function*({appConfig:T,installations:D}){const M=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function ke({p256dh:T,auth:D,endpoint:M,vapidKey:j}){const J={web:{endpoint:M,auth:D,p256dh:T}};return j!==Ns&&(J.web.applicationPubKey=j),J}const Wt=6048e5;function xh(T){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,P.Z)(function*(T){const D=yield Mh(T.swRegistration,T.vapidKey),M={vapidKey:T.vapidKey,swScope:T.swRegistration.scope,endpoint:D.endpoint,auth:hs(D.getKey("auth")),p256dh:hs(D.getKey("p256dh"))},j=yield uo(T.firebaseDependencies);if(j){if(Jp(j.subscriptionOptions,M))return Date.now()>=j.createTime+Wt?Nu(T,{token:j.token,createTime:Date.now(),subscriptionOptions:M}):j.token;try{yield qc(T.firebaseDependencies,j.token)}catch(J){console.warn(J)}return Pu(T.firebaseDependencies,M)}return Pu(T.firebaseDependencies,M)})).apply(this,arguments)}function nr(T){return zo.apply(this,arguments)}function zo(){return(zo=(0,P.Z)(function*(T){const D=yield uo(T.firebaseDependencies);D&&(yield qc(T.firebaseDependencies,D.token),yield Ps(T.firebaseDependencies));const M=yield T.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function Nu(T,D){return $r.apply(this,arguments)}function $r(){return($r=(0,P.Z)(function*(T,D){try{const M=yield Qp(T.firebaseDependencies,D),j=Object.assign(Object.assign({},D),{token:M,createTime:Date.now()});return yield un(T.firebaseDependencies,j),M}catch(M){throw yield nr(T),M}})).apply(this,arguments)}function Pu(T,D){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,P.Z)(function*(T,D){const j={token:yield Rt(T,D),createTime:Date.now(),subscriptionOptions:D};return yield un(T,j),j.token})).apply(this,arguments)}function Mh(T,D){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,P.Z)(function*(T,D){return(yield T.pushManager.getSubscription())||T.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Yr(D)})})).apply(this,arguments)}function Jp(T,D){return D.vapidKey===T.vapidKey&&D.endpoint===T.endpoint&&D.auth===T.auth&&D.p256dh===T.p256dh}function co(T){const D={from:T.from,collapseKey:T.collapse_key,messageId:T.fcmMessageId};return function rr(T,D){if(!D.notification)return;T.notification={};const M=D.notification.title;M&&(T.notification.title=M);const j=D.notification.body;j&&(T.notification.body=j);const J=D.notification.image;J&&(T.notification.image=J);const ae=D.notification.icon;ae&&(T.notification.icon=ae)}(D,T),function Yi(T,D){!D.data||(T.data=D.data)}(D,T),function Va(T,D){var M,j,J,ae,Me;if(!(D.fcmOptions||null!==(M=D.notification)&&void 0!==M&&M.click_action))return;T.fcmOptions={};const We=null!==(J=null===(j=D.fcmOptions)||void 0===j?void 0:j.link)&&void 0!==J?J:null===(ae=D.notification)||void 0===ae?void 0:ae.click_action;We&&(T.fcmOptions.link=We);const pt=null===(Me=D.fcmOptions)||void 0===Me?void 0:Me.analytics_label;pt&&(T.fcmOptions.analyticsLabel=pt)}(D,T),D}function Ba(T){return"object"==typeof T&&!!T&&Ru in T}function fs(T,D){const M=[];for(let j=0;j<T.length;j++)M.push(T.charAt(j)),j<D.length&&M.push(D.charAt(j));return M.join("")}function Ml(T){return Vn.create("missing-app-config-values",{valueName:T})}fs("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),fs("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Zc{constructor(D,M,j){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const J=function Wc(T){if(!T||!T.options)throw Ml("App Configuration Object");if(!T.name)throw Ml("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:M}=T;for(const j of D)if(!M[j])throw Ml(j);return{appName:T.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:J,installations:M,analyticsProvider:j}}_delete(){return Promise.resolve()}}function Rh(T){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,P.Z)(function*(T){var D;try{T.swRegistration=yield navigator.serviceWorker.register(br,{scope:$o}),T.swRegistration.update().catch(()=>{})}catch(M){throw Vn.create("failed-service-worker-registration",{browserErrorMessage:null===(D=M)||void 0===D?void 0:D.message})}})).apply(this,arguments)}function Rl(T,D){return ja.apply(this,arguments)}function ja(){return(ja=(0,P.Z)(function*(T,D){if(!D&&!T.swRegistration&&(yield Rh(T)),D||!T.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw Vn.create("invalid-sw-registration");T.swRegistration=D}})).apply(this,arguments)}function kl(T,D){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,P.Z)(function*(T,D){D?T.vapidKey=D:T.vapidKey||(T.vapidKey=Ns)})).apply(this,arguments)}function Qo(){return(Qo=(0,P.Z)(function*(T,D){if(!navigator)throw Vn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Vn.create("permission-blocked");return yield kl(T,D?.vapidKey),yield Rl(T,D?.serviceWorkerRegistration),xh(T)})).apply(this,arguments)}function kh(T,D,M){return $a.apply(this,arguments)}function $a(){return($a=(0,P.Z)(function*(T,D,M){const j=Nh(D);(yield T.firebaseDependencies.analyticsProvider.get()).logEvent(j,{message_id:M[Ru],message_name:M[Dl],message_time:M[$c],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Nh(T){switch(T){case di.NOTIFICATION_CLICKED:return"notification_open";case di.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Os(){return(Os=(0,P.Z)(function*(T,D){const M=D.data;if(!M.isFirebaseMessaging)return;T.onMessageHandler&&M.messageType===di.PUSH_RECEIVED&&("function"==typeof T.onMessageHandler?T.onMessageHandler(co(M)):T.onMessageHandler.next(co(M)));const j=M.data;Ba(j)&&"1"===j[Go]&&(yield kh(T,M.messageType,j))})).apply(this,arguments)}const Fs="@firebase/messaging",kn=T=>{const D=new Zc(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),T.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function Kc(T,D){return Os.apply(this,arguments)}(D,M)),D},ps=T=>{const D=T.getProvider("messaging").getImmediate();return{getToken:j=>function zc(T,D){return Qo.apply(this,arguments)}(D,j)}};function Nl(){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,P.Z)(function*(){try{yield(0,ue.eu)()}catch{return!1}return typeof window<"u"&&(0,ue.hl)()&&(0,ue.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Nn(){(0,se._registerComponent)(new _e.wA("messaging",kn,"PUBLIC")),(0,se._registerComponent)(new _e.wA("messaging-internal",ps,"PRIVATE")),(0,se.registerVersion)(Fs,"0.11.0"),(0,se.registerVersion)(Fs,"0.11.0","esm2017")}();const ea="analytics",Jc="firebase_id",Ul="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Xc="https://www.googletagmanager.com/gtag/js",Bn=new ge.Yd("@firebase/analytics");function Fu(T){return Promise.all(T.map(D=>D.catch(M=>M)))}function Lu(T,D){const M=document.createElement("script");M.src=`${Xc}?l=${T}&id=${D}`,M.async=!0,document.head.appendChild(M)}function Oh(T,D,M,j,J,ae){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,P.Z)(function*(T,D,M,j,J,ae){const Me=j[J];try{if(Me)yield D[Me];else{const pt=(yield Fu(M)).find(kt=>kt.measurementId===J);pt&&(yield D[pt.appId])}}catch(We){Bn.error(We)}T("config",J,ae)})).apply(this,arguments)}function gs(T,D,M,j,J){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,P.Z)(function*(T,D,M,j,J){try{let ae=[];if(J&&J.send_to){let Me=J.send_to;Array.isArray(Me)||(Me=[Me]);const We=yield Fu(M);for(const pt of Me){const kt=We.find(wt=>wt.measurementId===pt),Ut=kt&&D[kt.appId];if(!Ut){ae=[];break}ae.push(Ut)}}0===ae.length&&(ae=Object.values(D)),yield Promise.all(ae),T("event",j,J||{})}catch(ae){Bn.error(ae)}})).apply(this,arguments)}function ed(T){const D=window.document.getElementsByTagName("script");for(const M of Object.values(D))if(M.src&&M.src.includes(Xc)&&M.src.includes(T))return M;return null}const ir=new ue.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Wa=new class Bl{constructor(D={},M=1e3){this.throttleMetadata=D,this.intervalMillis=M}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,M){this.throttleMetadata[D]=M}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function ta(T){return new Headers({Accept:"application/json","x-goog-api-key":T})}function Uh(T){return jn.apply(this,arguments)}function jn(){return(jn=(0,P.Z)(function*(T){var D;const{appId:M,apiKey:j}=T,J={method:"GET",headers:ta(j)},ae=Ul.replace("{app-id}",M),Me=yield fetch(ae,J);if(200!==Me.status&&304!==Me.status){let We="";try{const pt=yield Me.json();null!==(D=pt.error)&&void 0!==D&&D.message&&(We=pt.error.message)}catch{}throw ir.create("config-fetch-failed",{httpStatus:Me.status,responseMessage:We})}return Me.json()})).apply(this,arguments)}function td(T){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,P.Z)(function*(T,D=Wa,M){const{appId:j,apiKey:J,measurementId:ae}=T.options;if(!j)throw ir.create("no-app-id");if(!J){if(ae)return{measurementId:ae,appId:j};throw ir.create("no-api-key")}const Me=D.getThrottleMetadata(j)||{backoffCount:0,throttleEndTimeMillis:Date.now()},We=new Za;return setTimeout((0,P.Z)(function*(){We.abort()}),void 0!==M?M:6e4),nd({appId:j,apiKey:J,measurementId:ae},Me,We,D)})).apply(this,arguments)}function nd(T,D,M){return ms.apply(this,arguments)}function ms(){return(ms=(0,P.Z)(function*(T,{throttleEndTimeMillis:D,backoffCount:M},j,J=Wa){var ae,Me;const{appId:We,measurementId:pt}=T;try{yield jl(j,D)}catch(kt){if(pt)return Bn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${pt} provided in the "measurementId" field in the local Firebase config. [${null===(ae=kt)||void 0===ae?void 0:ae.message}]`),{appId:We,measurementId:pt};throw kt}try{const kt=yield Uh(T);return J.deleteThrottleMetadata(We),kt}catch(kt){const Ut=kt;if(!Bu(Ut)){if(J.deleteThrottleMetadata(We),pt)return Bn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${pt} provided in the "measurementId" field in the local Firebase config. [${Ut?.message}]`),{appId:We,measurementId:pt};throw kt}const wt=503===Number(null===(Me=Ut?.customData)||void 0===Me?void 0:Me.httpStatus)?(0,ue.$s)(M,J.intervalMillis,30):(0,ue.$s)(M,J.intervalMillis),Gn={throttleEndTimeMillis:Date.now()+wt,backoffCount:M+1};return J.setThrottleMetadata(We,Gn),Bn.debug(`Calling attemptFetch again in ${wt} millis`),nd(T,Gn,j,J)}})).apply(this,arguments)}function jl(T,D){return new Promise((M,j)=>{const J=Math.max(D-Date.now(),0),ae=setTimeout(M,J);T.addEventListener(()=>{clearTimeout(ae),j(ir.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function Bu(T){if(!(T instanceof ue.ZR&&T.customData))return!1;const D=Number(T.customData.httpStatus);return 429===D||500===D||503===D||504===D}class Za{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let ho,Hu;function na(){return(na=(0,P.Z)(function*(T,D,M,j,J){if(J&&J.global)T("event",M,j);else{const ae=yield D;T("event",M,Object.assign(Object.assign({},j),{send_to:ae}))}})).apply(this,arguments)}function oa(T){Hu=T}function Hl(T){ho=T}function Us(){return aa.apply(this,arguments)}function aa(){return(aa=(0,P.Z)(function*(){var T;if(!(0,ue.hl)())return Bn.warn(ir.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ue.eu)()}catch(D){return Bn.warn(ir.create("indexeddb-unavailable",{errorInfo:null===(T=D)||void 0===T?void 0:T.toString()}).message),!1}return!0})).apply(this,arguments)}function ua(){return(ua=(0,P.Z)(function*(T,D,M,j,J,ae,Me){var We;const pt=td(T);pt.then(_r=>{M[_r.measurementId]=_r.appId,T.options.measurementId&&_r.measurementId!==T.options.measurementId&&Bn.warn(`The measurement ID in the local Firebase config (${T.options.measurementId}) does not match the measurement ID fetched from the server (${_r.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(_r=>Bn.error(_r)),D.push(pt);const kt=Us().then(_r=>{if(_r)return j.getId()}),[Ut,wt]=yield Promise.all([pt,kt]);ed(ae)||Lu(ae,Ut.measurementId),Hu&&(J("consent","default",Hu),oa(void 0)),J("js",new Date);const Gn=null!==(We=Me?.config)&&void 0!==We?We:{};return Gn.origin="firebase",Gn.update=!0,null!=wt&&(Gn[Jc]=wt),J("config",Ut.measurementId,Gn),ho&&(J("set",ho),Hl(void 0)),Ut.measurementId})).apply(this,arguments)}class $u{constructor(D){this.app=D}_delete(){return delete Nr[this.app.options.appId],Promise.resolve()}}let Nr={},la=[];const fo={};let da,Ji,ca="dataLayer",id=!1;function jh(T,D,M){!function Xp(){const T=[];if((0,ue.ru)()&&T.push("This is a browser extension environment."),(0,ue.zI)()||T.push("Cookies are not available."),T.length>0){const D=T.map((j,J)=>`(${J+1}) ${j}`).join(" "),M=ir.create("invalid-analytics-context",{errorInfo:D});Bn.warn(M.message)}}();const j=T.options.appId;if(!j)throw ir.create("no-app-id");if(!T.options.apiKey){if(!T.options.measurementId)throw ir.create("no-api-key");Bn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${T.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Nr[j])throw ir.create("already-exists",{id:j});if(!id){!function Uu(T){let D=[];Array.isArray(window[T])?D=window[T]:window[T]=D}(ca);const{wrappedGtag:ae,gtagCore:Me}=function qa(T,D,M,j,J){let ae=function(...Me){window[j].push(arguments)};return window[J]&&"function"==typeof window[J]&&(ae=window[J]),window[J]=function Vl(T,D,M,j){function ae(){return(ae=(0,P.Z)(function*(Me,We,pt){try{"event"===Me?yield gs(T,D,M,We,pt):"config"===Me?yield Oh(T,D,M,j,We,pt):"consent"===Me?T("consent","update",pt):T("set",We)}catch(kt){Bn.error(kt)}})).apply(this,arguments)}return function J(Me,We,pt){return ae.apply(this,arguments)}}(ae,T,D,M),{gtagCore:ae,wrappedGtag:window[J]}}(Nr,la,fo,ca,"gtag");Ji=ae,da=Me,id=!0}return Nr[j]=function Bh(T,D,M,j,J,ae,Me){return ua.apply(this,arguments)}(T,la,fo,D,da,ca,M),new $u(T)}function w_(){return Hh.apply(this,arguments)}function Hh(){return(Hh=(0,P.Z)(function*(){if((0,ue.ru)()||!(0,ue.zI)()||!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch{return!1}})).apply(this,arguments)}const Gl="@firebase/analytics";!function Pr(){(0,se._registerComponent)(new _e.wA(ea,(D,{options:M})=>jh(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,se._registerComponent)(new _e.wA("analytics-internal",function T(D){try{const M=D.getProvider(ea).getImmediate();return{logEvent:(j,J,ae)=>function rn(T,D,M,j){T=(0,ue.m9)(T),function za(T,D,M,j,J){return na.apply(this,arguments)}(Ji,Nr[T.app.options.appId],D,M,j).catch(J=>Bn.error(J))}(M,j,J,ae)}}catch(M){throw ir.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,se.registerVersion)(Gl,"0.8.4"),(0,se.registerVersion)(Gl,"0.8.4","esm2017")}();var _s=U(4408),po=U(7565);const Vs=new class xi extends po.v{}(class Ya extends _s.o{constructor(D,M){super(D,M),this.scheduler=D,this.work=M}schedule(D,M=0){return M>0?super.schedule(D,M):(this.delay=M,this.state=D,this.scheduler.flush(this),this)}execute(D,M){return M>0||this.closed?super.execute(D,M):this._execute(D,M)}requestAsyncId(D,M,j=0){return null!=j&&j>0||null==j&&this.delay>0?super.requestAsyncId(D,M,j):(D.flush(this),0)}});var yt=U(4986),go=U(9751),od=U(8505),Qa=U(5363),Or=U(9468);const ql=new l.GfV("7.4.1"),Mi="__angularfire_symbol__analyticsIsSupportedValue",ys="__angularfire_symbol__analyticsIsSupported",Jr="__angularfire_symbol__remoteConfigIsSupportedValue",Wl="__angularfire_symbol__remoteConfigIsSupported",Xi="__angularfire_symbol__messagingIsSupportedValue",Zl="__angularfire_symbol__messagingIsSupported";function Ri(T,D,M){if(D){if(1===D.length)return D[0];const ae=D.filter(Me=>Me.app===M);if(1===ae.length)return ae[0]}return M.container.getProvider(T).getImmediate({optional:!0})}globalThis[ys]||(globalThis[ys]=w_().then(T=>globalThis[Mi]=T).catch(()=>globalThis[Mi]=!1)),globalThis[Zl]||(globalThis[Zl]=Nl().then(T=>globalThis[Xi]=T).catch(()=>globalThis[Xi]=!1)),globalThis[Wl]||(globalThis[Wl]=y_().then(T=>globalThis[Jr]=T).catch(()=>globalThis[Jr]=!1));const Xa=(T,D)=>{const M=D?[D]:(0,$.C6)(),j=[];return M.forEach(J=>{J.container.getProvider(T).instances.forEach(Me=>{j.includes(Me)||j.push(Me)})}),j};function An(){}class ki{constructor(D,M=Vs){this.zone=D,this.delegate=M}now(){return this.delegate.now()}schedule(D,M,j){const J=this.zone;return this.delegate.schedule(function(Me){J.runGuarded(()=>{D.apply(this,[Me])})},M,j)}}class ha{constructor(D){this.zone=D,this.task=null}call(D,M){const j=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",An,{},An,An)),M.pipe((0,od.b)({next:j,complete:j,error:j})).subscribe(D).add(j)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ad=(()=>{class T{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new ki(Zone.current)),this.insideAngular=M.run(()=>new ki(Zone.current,yt.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return T.\u0275fac=function(M){return new(M||T)(l.LFG(l.R0b))},T.\u0275prov=l.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function es(){const T=globalThis.\u0275AngularFireScheduler;if(!T)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return T}function ud(T){return es().ngZone.runOutsideAngular(()=>T())}function ts(T){return es().ngZone.run(()=>T())}function mo(T){return T.pipe((0,Qa.Q)(es().outsideAngular))}function zl(T){return es(),function $n(T){return function(M){return(M=M.lift(new ha(T.ngZone))).pipe((0,Or.R)(T.outsideAngular),(0,Qa.Q)(T.insideAngular))}}(es())(T)}const eu=(T,D)=>function(){const j=arguments;return D&&setTimeout(()=>{"scheduled"===D.state&&D.invoke()},10),ts(()=>T.apply(void 0,j))},tu=(T,D)=>function(){let M;const j=arguments;for(let ae=0;ae<arguments.length;ae++)"function"==typeof j[ae]&&(D&&(M||(M=ts(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",An,{},An,An)))),j[ae]=eu(j[ae],M));const J=ud(()=>T.apply(this,j));if(!D){if(J instanceof go.y){const ae=es();return J.pipe((0,Or.R)(ae.outsideAngular),(0,Qa.Q)(ae.insideAngular))}return ts(()=>J)}return J instanceof go.y?J.pipe(zl):J instanceof Promise?ts(()=>new Promise((ae,Me)=>J.then(We=>ts(()=>ae(We)),We=>ts(()=>Me(We))))):"function"==typeof J&&M?function(){return setTimeout(()=>{M&&"scheduled"===M.state&&M.invoke()},10),J.apply(this,arguments)}:ts(()=>J)}},8247:(ct,Ae,U)=>{U.d(Ae,{$:()=>lo,A:()=>W,B:()=>Pe,G:()=>no,H:()=>zr,J:()=>ds,L:()=>Z,M:()=>Mu,N:()=>Hc,P:()=>yt,Q:()=>Ru,R:()=>E_,T:()=>Dl,U:()=>Ns,V:()=>di,W:()=>hs,X:()=>Yp,Y:()=>Na,Z:()=>Rt,_:()=>Qp,a:()=>Ls,a0:()=>xh,a1:()=>nr,a2:()=>Nu,a3:()=>Pu,a4:()=>Mh,a5:()=>Jp,a6:()=>rr,a7:()=>Yi,a8:()=>Ba,a9:()=>fs,aA:()=>q,aB:()=>We,aC:()=>ts,aD:()=>ud,aE:()=>Et,aI:()=>ta,aL:()=>Go,aa:()=>Rh,ab:()=>Rl,ac:()=>kl,af:()=>kh,ag:()=>Nh,ah:()=>Kc,ak:()=>Si,al:()=>Ol,an:()=>Xc,ao:()=>Vu,ap:()=>we,aq:()=>Ue,ar:()=>st,as:()=>Ye,at:()=>pa,au:()=>Xr,av:()=>Mt,aw:()=>Fe,ax:()=>ie,ay:()=>Gn,az:()=>ee,b:()=>ir,c:()=>Wl,d:()=>eg,e:()=>Zl,f:()=>zl,g:()=>M,h:()=>tu,i:()=>aa,j:()=>ae,k:()=>Kh,l:()=>sd,m:()=>vo,n:()=>gd,o:()=>fe,r:()=>_s,s:()=>Tr,u:()=>Vs});var l=U(5861),$=U(2090),P=U(9681),se=U(1877),ue=U(655),_e=U(4859);const fe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},W={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Pe=function X(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Te=function je(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},rt=new $.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),me=new se.Yd("@firebase/auth");function Je(w,...m){me.logLevel<=se.in.ERROR&&me.error(`Auth (${P.SDK_VERSION}): ${w}`,...m)}function Ye(w,...m){throw qe(w,...m)}function Fe(w,...m){return qe(w,...m)}function Re(w,m,_){const C=Object.assign(Object.assign({},Te()),{[m]:_});return new $.LL("auth","Firebase",C).create(m,{appName:w.name})}function Ie(w,m,_){if(!(m instanceof _))throw _.name!==m.constructor.name&&Ye(w,"argument-error"),Re(w,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function qe(w,...m){if("string"!=typeof w){const _=m[0],C=[...m.slice(1)];return C[0]&&(C[0].appName=w.name),w._errorFactory.create(_,...C)}return rt.create(w,...m)}function ie(w,m,..._){if(!w)throw qe(m,..._)}function ce(w){const m="INTERNAL ASSERTION FAILED: "+w;throw Je(m),new Error(m)}function we(w,m){w||ce(m)}const Q=new Map;function ee(w){we(w instanceof Function,"Expected a class definition");let m=Q.get(w);return m?(we(m instanceof w,"Instance stored in cache mismatched with class"),m):(m=new w,Q.set(w,m),m)}function Ve(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function Be(){return"http:"===gt()||"https:"===gt()}function gt(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class Ze{constructor(m,_){this.shortDelay=m,this.longDelay=_,we(_>m,"Short delay should be less than long delay!"),this.isMobile=(0,$.uI)()||(0,$.b$)()}get(){return function an(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Be()||(0,$.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function hn(w,m){we(w.emulator,"Emulator should always be set here");const{url:_}=w.emulator;return m?`${_}${m.startsWith("/")?m.slice(1):m}`:_}class In{static initialize(m,_,C){this.fetchImpl=m,_&&(this.headersImpl=_),C&&(this.responseImpl=C)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ce("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ce("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ce("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const tn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},nn=new Ze(3e4,6e4);function qt(w,m){return w.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:w.tenantId}):m}function Lt(w,m,_,C){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,l.Z)(function*(w,m,_,C,x={}){return qi(w,x,(0,l.Z)(function*(){let O={},ne={};C&&("GET"===m?ne=C:O={body:JSON.stringify(C)});const Se=(0,$.xO)(Object.assign({key:w.config.apiKey},ne)).slice(1),it=yield w._getAdditionalHeaders();return it["Content-Type"]="application/json",w.languageCode&&(it["X-Firebase-Locale"]=w.languageCode),In.fetch()(Zi(w,w.config.apiHost,_,Se),Object.assign({method:m,headers:it,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function qi(w,m,_){return Br.apply(this,arguments)}function Br(){return(Br=(0,l.Z)(function*(w,m,_){w._canInitEmulator=!1;const C=Object.assign(Object.assign({},tn),m);try{const x=new jr(w),O=yield Promise.race([_(),x.promise]);x.clearNetworkTimeout();const ne=yield O.json();if("needConfirmation"in ne)throw Un(w,"account-exists-with-different-credential",ne);if(O.ok&&!("errorMessage"in ne))return ne;{const Se=O.ok?ne.errorMessage:ne.error.message,[it,Tt]=Se.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===it)throw Un(w,"credential-already-in-use",ne);if("EMAIL_EXISTS"===it)throw Un(w,"email-already-in-use",ne);if("USER_DISABLED"===it)throw Un(w,"user-disabled",ne);const Zt=C[it]||it.toLowerCase().replace(/[_\s]+/g,"-");if(Tt)throw Re(w,Zt,Tt);Ye(w,Zt)}}catch(x){if(x instanceof $.ZR)throw x;Ye(w,"network-request-failed")}})).apply(this,arguments)}function On(w,m,_,C){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,l.Z)(function*(w,m,_,C,x={}){const O=yield Lt(w,m,_,C,x);return"mfaPendingCredential"in O&&Ye(w,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function Zi(w,m,_,C){const x=`${m}${_}?${C}`;return w.config.emulator?hn(w.config,x):`${w.config.apiScheme}://${x}`}class jr{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((_,C)=>{this.timer=setTimeout(()=>C(Fe(this.auth,"network-request-failed")),nn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Un(w,m,_){const C={appName:w.name};_.email&&(C.email=_.email),_.phoneNumber&&(C.phoneNumber=_.phoneNumber);const x=Fe(w,m,C);return x.customData._tokenResponse=_,x}function zi(){return(zi=(0,l.Z)(function*(w,m){return Lt(w,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function Qe(w,m){return er.apply(this,arguments)}function er(){return(er=(0,l.Z)(function*(w,m){return Lt(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Zn(w,m){return wn.apply(this,arguments)}function wn(){return(wn=(0,l.Z)(function*(w,m){return Lt(w,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function gr(w){if(w)try{const m=new Date(Number(w));if(!isNaN(m.getTime()))return m.toUTCString()}catch{}}function Tn(){return(Tn=(0,l.Z)(function*(w,m=!1){const _=(0,$.m9)(w),C=yield _.getIdToken(m),x=mt(C);ie(x&&x.exp&&x.auth_time&&x.iat,_.auth,"internal-error");const O="object"==typeof x.firebase?x.firebase:void 0,ne=O?.sign_in_provider;return{claims:x,token:C,authTime:gr(yn(x.auth_time)),issuedAtTime:gr(yn(x.iat)),expirationTime:gr(yn(x.exp)),signInProvider:ne||null,signInSecondFactor:O?.sign_in_second_factor||null}})).apply(this,arguments)}function yn(w){return 1e3*Number(w)}function mt(w){var m;const[_,C,x]=w.split(".");if(void 0===_||void 0===C||void 0===x)return Je("JWT malformed, contained fewer than 3 sections"),null;try{const O=(0,$.tV)(C);return O?JSON.parse(O):(Je("Failed to decode base64 JWT payload"),null)}catch(O){return Je("Caught error parsing JWT payload as JSON",null===(m=O)||void 0===m?void 0:m.toString()),null}}function xt(w,m){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,l.Z)(function*(w,m,_=!1){if(_)return m;try{return yield m}catch(C){throw C instanceof $.ZR&&zn(C)&&w.auth.currentUser===w&&(yield w.auth.signOut()),C}})).apply(this,arguments)}function zn({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class Rr{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var _;if(m){const C=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),C}{this.errorBackoff=3e4;const x=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(m=!1){var _=this;if(!this.isRunning)return;const C=this.getInterval(m);this.timerId=setTimeout((0,l.Z)(function*(){yield _.iteration()}),C)}iteration(){var m=this;return(0,l.Z)(function*(){var _;try{yield m.user.getIdToken(!0)}catch(C){return void("auth/network-request-failed"===(null===(_=C)||void 0===_?void 0:_.code)&&m.schedule(!0))}m.schedule()})()}}class St{constructor(m,_){this.createdAt=m,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=gr(this.lastLoginAt),this.creationTime=gr(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function kr(w){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,l.Z)(function*(w){var m;const _=w.auth,C=yield w.getIdToken(),x=yield xt(w,Zn(_,{idToken:C}));ie(x?.users.length,_,"internal-error");const O=x.users[0];w._notifyReloadListener(O);const ne=null!==(m=O.providerUserInfo)&&void 0!==m&&m.length?Mn(O.providerUserInfo):[],Se=lr(w.providerData,ne),Zt=!!w.isAnonymous&&!(w.email&&O.passwordHash||Se?.length),xn={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:Se,metadata:new St(O.createdAt,O.lastLoginAt),isAnonymous:Zt};Object.assign(w,xn)})).apply(this,arguments)}function Kt(){return(Kt=(0,l.Z)(function*(w){const m=(0,$.m9)(w);yield kr(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function lr(w,m){return[...w.filter(C=>!m.some(x=>x.providerId===C.providerId)),...m]}function Mn(w){return w.map(m=>{var{providerId:_}=m,C=(0,ue._T)(m,["providerId"]);return{providerId:_,uid:C.rawId||"",displayName:C.displayName||null,email:C.email||null,phoneNumber:C.phoneNumber||null,photoURL:C.photoUrl||null}})}function De(){return(De=(0,l.Z)(function*(w,m){const _=yield qi(w,{},(0,l.Z)(function*(){const C=(0,$.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:x,apiKey:O}=w.config,ne=Zi(w,x,"/v1/token",`key=${O}`),Se=yield w._getAdditionalHeaders();return Se["Content-Type"]="application/x-www-form-urlencoded",In.fetch()(ne,{method:"POST",headers:Se,body:C})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class tt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){ie(m.idToken,"internal-error"),ie(typeof m.idToken<"u","internal-error"),ie(typeof m.refreshToken<"u","internal-error");const _="expiresIn"in m&&typeof m.expiresIn<"u"?Number(m.expiresIn):function _t(w){const m=mt(w);return ie(m,"internal-error"),ie(typeof m.exp<"u","internal-error"),ie(typeof m.iat<"u","internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,_)}getToken(m,_=!1){var C=this;return(0,l.Z)(function*(){return ie(!C.accessToken||C.refreshToken,m,"user-token-expired"),_||!C.accessToken||C.isExpired?C.refreshToken?(yield C.refresh(m,C.refreshToken),C.accessToken):null:C.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,_){var C=this;return(0,l.Z)(function*(){const{accessToken:x,refreshToken:O,expiresIn:ne}=yield function et(w,m){return De.apply(this,arguments)}(m,_);C.updateTokensAndExpiration(x,O,Number(ne))})()}updateTokensAndExpiration(m,_,C){this.refreshToken=_||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*C}static fromJSON(m,_){const{refreshToken:C,accessToken:x,expirationTime:O}=_,ne=new tt;return C&&(ie("string"==typeof C,"internal-error",{appName:m}),ne.refreshToken=C),x&&(ie("string"==typeof x,"internal-error",{appName:m}),ne.accessToken=x),O&&(ie("number"==typeof O,"internal-error",{appName:m}),ne.expirationTime=O),ne}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new tt,this.toJSON())}_performRefresh(){return ce("not implemented")}}function bt(w,m){ie("string"==typeof w||typeof w>"u","internal-error",{appName:m})}class It{constructor(m){var{uid:_,auth:C,stsTokenManager:x}=m,O=(0,ue._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Rr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=C,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new St(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(m){var _=this;return(0,l.Z)(function*(){const C=yield xt(_,_.stsTokenManager.getToken(_.auth,m));return ie(C,_.auth,"internal-error"),_.accessToken!==C&&(_.accessToken=C,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),C})()}getIdTokenResult(m){return function En(w){return Tn.apply(this,arguments)}(this,m)}reload(){return function Zr(w){return Kt.apply(this,arguments)}(this)}_assign(m){this!==m&&(ie(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(_=>Object.assign({},_)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){return new It(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(m){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,_=!1){var C=this;return(0,l.Z)(function*(){let x=!1;m.idToken&&m.idToken!==C.stsTokenManager.accessToken&&(C.stsTokenManager.updateFromServerResponse(m),x=!0),_&&(yield kr(C)),yield C.auth._persistUserIfCurrent(C),x&&C.auth._notifyListenersIfCurrent(C)})()}delete(){var m=this;return(0,l.Z)(function*(){const _=yield m.getIdToken();return yield xt(m,function Ti(w,m){return zi.apply(this,arguments)}(m.auth,{idToken:_})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,_){var C,x,O,ne,Se,it,Tt,Zt;const xn=null!==(C=_.displayName)&&void 0!==C?C:void 0,Es=null!==(x=_.email)&&void 0!==x?x:void 0,wo=null!==(O=_.phoneNumber)&&void 0!==O?O:void 0,Qh=null!==(ne=_.photoURL)&&void 0!==ne?ne:void 0,md=null!==(Se=_.tenantId)&&void 0!==Se?Se:void 0,Yl=null!==(it=_._redirectEventId)&&void 0!==it?it:void 0,sg=null!==(Tt=_.createdAt)&&void 0!==Tt?Tt:void 0,D_=null!==(Zt=_.lastLoginAt)&&void 0!==Zt?Zt:void 0,{uid:Jh,emailVerified:au,isAnonymous:Fr,providerData:_d,stsTokenManager:Ql}=_;ie(Jh&&Ql,m,"internal-error");const og=tt.fromJSON(this.name,Ql);ie("string"==typeof Jh,m,"internal-error"),bt(xn,m.name),bt(Es,m.name),ie("boolean"==typeof au,m,"internal-error"),ie("boolean"==typeof Fr,m,"internal-error"),bt(wo,m.name),bt(Qh,m.name),bt(md,m.name),bt(Yl,m.name),bt(sg,m.name),bt(D_,m.name);const sr=new It({uid:Jh,auth:m,email:Es,emailVerified:au,displayName:xn,isAnonymous:Fr,photoURL:Qh,phoneNumber:wo,tenantId:md,stsTokenManager:og,createdAt:sg,lastLoginAt:D_});return _d&&Array.isArray(_d)&&(sr.providerData=_d.map(S_=>Object.assign({},S_))),Yl&&(sr._redirectEventId=Yl),sr}static _fromIdTokenResponse(m,_,C=!1){return(0,l.Z)(function*(){const x=new tt;x.updateFromServerResponse(_);const O=new It({uid:_.localId,auth:m,stsTokenManager:x,isAnonymous:C});return yield kr(O),O})()}}const Z=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,l.Z)(function*(){return!0})()}_set(_,C){var x=this;return(0,l.Z)(function*(){x.storage[_]=C})()}_get(_){var C=this;return(0,l.Z)(function*(){const x=C.storage[_];return void 0===x?null:x})()}_remove(_){var C=this;return(0,l.Z)(function*(){delete C.storage[_]})()}_addListener(_,C){}_removeListener(_,C){}}return w.type="NONE",w})();function q(w,m,_){return`firebase:${w}:${m}:${_}`}class Y{constructor(m,_,C){this.persistence=m,this.auth=_,this.userKey=C;const{config:x,name:O}=this.auth;this.fullUserKey=q(this.userKey,x.apiKey,O),this.fullPersistenceKey=q("persistence",x.apiKey,O),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,l.Z)(function*(){const _=yield m.persistence._get(m.fullUserKey);return _?It._fromJSON(m.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var _=this;return(0,l.Z)(function*(){if(_.persistence===m)return;const C=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=m,C?_.setCurrentUser(C):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,_,C="authUser"){return(0,l.Z)(function*(){if(!_.length)return new Y(ee(Z),m,C);const x=(yield Promise.all(_.map(function(){var Tt=(0,l.Z)(function*(Zt){if(yield Zt._isAvailable())return Zt});return function(Zt){return Tt.apply(this,arguments)}}()))).filter(Tt=>Tt);let O=x[0]||ee(Z);const ne=q(C,m.config.apiKey,m.name);let Se=null;for(const Tt of _)try{const Zt=yield Tt._get(ne);if(Zt){const xn=It._fromJSON(m,Zt);Tt!==O&&(Se=xn),O=Tt;break}}catch{}const it=x.filter(Tt=>Tt._shouldAllowMigration);return O._shouldAllowMigration&&it.length?(O=it[0],Se&&(yield O._set(ne,Se.toJSON())),yield Promise.all(_.map(function(){var Tt=(0,l.Z)(function*(Zt){if(Zt!==O)try{yield Zt._remove(ne)}catch{}});return function(Zt){return Tt.apply(this,arguments)}}())),new Y(O,m,C)):new Y(O,m,C)})()}}function H(w){const m=w.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(Oe(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(k(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(ot(m))return"Blackberry";if(xe(m))return"Webos";if(B(m))return"Safari";if((m.includes("chrome/")||re(m))&&!m.includes("edge/"))return"Chrome";if(st(m))return"Android";{const C=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===C?.length)return C[1]}return"Other"}function k(w=(0,$.z$)()){return/firefox\//i.test(w)}function B(w=(0,$.z$)()){const m=w.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function re(w=(0,$.z$)()){return/crios\//i.test(w)}function Oe(w=(0,$.z$)()){return/iemobile/i.test(w)}function st(w=(0,$.z$)()){return/android/i.test(w)}function ot(w=(0,$.z$)()){return/blackberry/i.test(w)}function xe(w=(0,$.z$)()){return/webos/i.test(w)}function Ue(w=(0,$.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function Mt(w=(0,$.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function pn(w=(0,$.z$)()){return Ue(w)||st(w)||xe(w)||ot(w)||/windows phone/i.test(w)||Oe(w)}function Dn(w,m=[]){let _;switch(w){case"Browser":_=H((0,$.z$)());break;case"Worker":_=`${H((0,$.z$)())}-${w}`;break;default:_=w}const C=m.length?m.join(","):"FirebaseCore-web";return`${_}/JsCore/${P.SDK_VERSION}/${C}`}class eo{constructor(m){this.auth=m,this.queue=[]}pushCallback(m,_){const C=O=>new Promise((ne,Se)=>{try{ne(m(O))}catch(it){Se(it)}});C.onAbort=_,this.queue.push(C);const x=this.queue.length-1;return()=>{this.queue[x]=()=>Promise.resolve()}}runMiddleware(m){var _=this;return(0,l.Z)(function*(){var C;if(_.auth.currentUser===m)return;const x=[];try{for(const O of _.queue)yield O(m),O.onAbort&&x.push(O.onAbort)}catch(O){x.reverse();for(const ne of x)try{ne()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:null===(C=O)||void 0===C?void 0:C.message})}})()}}class Uo{constructor(m,_,C){this.app=m,this.heartbeatServiceProvider=_,this.config=C,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new to(this),this.idTokenSubscription=new to(this),this.beforeStateQueue=new eo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=C.sdkClientVersion}_initializeWithPersistence(m,_){var C=this;return _&&(this._popupRedirectResolver=ee(_)),this._initializationPromise=this.queue((0,l.Z)(function*(){var x,O;if(!C._deleted&&(C.persistenceManager=yield Y.create(C,m),!C._deleted)){if(null!==(x=C._popupRedirectResolver)&&void 0!==x&&x._shouldInitProactively)try{yield C._popupRedirectResolver._initialize(C)}catch{}yield C.initializeCurrentUser(_),C.lastNotifiedUid=(null===(O=C.currentUser)||void 0===O?void 0:O.uid)||null,!C._deleted&&(C._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,l.Z)(function*(){if(m._deleted)return;const _=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||_){if(m.currentUser&&_&&m.currentUser.uid===_.uid)return m._currentUser._assign(_),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(_,!0)}})()}initializeCurrentUser(m){var _=this;return(0,l.Z)(function*(){var C;const x=yield _.assertedPersistence.getCurrentUser();let O=x,ne=!1;if(m&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const Se=null===(C=_.redirectUser)||void 0===C?void 0:C._redirectEventId,it=O?._redirectEventId,Tt=yield _.tryRedirectSignIn(m);(!Se||Se===it)&&Tt?.user&&(O=Tt.user,ne=!0)}if(!O)return _.directlySetCurrentUser(null);if(!O._redirectEventId){if(ne)try{yield _.beforeStateQueue.runMiddleware(O)}catch(Se){O=x,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(Se))}return O?_.reloadAndSetCurrentUserOrClear(O):_.directlySetCurrentUser(null)}return ie(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===O._redirectEventId?_.directlySetCurrentUser(O):_.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(m){var _=this;return(0,l.Z)(function*(){let C=null;try{C=yield _._popupRedirectResolver._completeRedirectFn(_,m,!0)}catch{yield _._setRedirectUser(null)}return C})()}reloadAndSetCurrentUserOrClear(m){var _=this;return(0,l.Z)(function*(){var C;try{yield kr(m)}catch(x){if("auth/network-request-failed"!==(null===(C=x)||void 0===C?void 0:C.code))return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function Bt(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var m=this;return(0,l.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var _=this;return(0,l.Z)(function*(){const C=m?(0,$.m9)(m):null;return C&&ie(C.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(C&&C._clone(_))})()}_updateCurrentUser(m,_=!1){var C=this;return(0,l.Z)(function*(){if(!C._deleted)return m&&ie(C.tenantId===m.tenantId,C,"tenant-id-mismatch"),_||(yield C.beforeStateQueue.runMiddleware(m)),C.queue((0,l.Z)(function*(){yield C.directlySetCurrentUser(m),C.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,l.Z)(function*(){return yield m.beforeStateQueue.runMiddleware(null),(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null,!0)})()}setPersistence(m){var _=this;return this.queue((0,l.Z)(function*(){yield _.assertedPersistence.setPersistence(ee(m))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new $.LL("auth","Firebase",m())}onAuthStateChanged(m,_,C){return this.registerStateListener(this.authStateSubscription,m,_,C)}beforeAuthStateChanged(m,_){return this.beforeStateQueue.pushCallback(m,_)}onIdTokenChanged(m,_,C){return this.registerStateListener(this.idTokenSubscription,m,_,C)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,_){var C=this;return(0,l.Z)(function*(){const x=yield C.getOrInitRedirectPersistenceManager(_);return null===m?x.removeCurrentUser():x.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var _=this;return(0,l.Z)(function*(){if(!_.redirectPersistenceManager){const C=m&&ee(m)||_._popupRedirectResolver;ie(C,_,"argument-error"),_.redirectPersistenceManager=yield Y.create(_,[ee(C._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(m){var _=this;return(0,l.Z)(function*(){var C,x;return _._isInitialized&&(yield _.queue((0,l.Z)(function*(){}))),(null===(C=_._currentUser)||void 0===C?void 0:C._redirectEventId)===m?_._currentUser:(null===(x=_.redirectUser)||void 0===x?void 0:x._redirectEventId)===m?_.redirectUser:null})()}_persistUserIfCurrent(m){var _=this;return(0,l.Z)(function*(){if(m===_.currentUser)return _.queue((0,l.Z)(function*(){return _.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const C=null!==(_=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==C&&(this.lastNotifiedUid=C,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,_,C,x){if(this._deleted)return()=>{};const O="function"==typeof _?_:_.next.bind(_),ne=this._isInitialized?Promise.resolve():this._initializationPromise;return ie(ne,this,"internal-error"),ne.then(()=>O(this.currentUser)),"function"==typeof _?m.addObserver(_,C,x):m.addObserver(_)}directlySetCurrentUser(m){var _=this;return(0,l.Z)(function*(){_.currentUser&&_.currentUser!==m&&_._currentUser._stopProactiveRefresh(),m&&_.isProactiveRefreshEnabled&&m._startProactiveRefresh(),_.currentUser=m,m?yield _.assertedPersistence.setCurrentUser(m):yield _.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=Dn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,l.Z)(function*(){var _;const C={"X-Client-Version":m.clientVersion};m.app.options.appId&&(C["X-Firebase-gmpid"]=m.app.options.appId);const x=yield null===(_=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return x&&(C["X-Firebase-Client"]=x),C})()}}function Et(w){return(0,$.m9)(w)}class to{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,$.ne)(_=>this.observer=_)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function no(w,m,_){const C=Et(w);ie(C._canInitEmulator,C,"emulator-config-failed"),ie(/^https?:\/\//.test(m),C,"invalid-emulator-scheme");const x=!!_?.disableWarnings,O=Au(m),{host:ne,port:Se}=function ls(w){const m=Au(w),_=/(\/\/)?([^?#/]+)/.exec(w.substr(m.length));if(!_)return{host:"",port:null};const C=_[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(C);if(x){const O=x[1];return{host:O,port:Kn(C.substr(O.length+1))}}{const[O,ne]=C.split(":");return{host:O,port:Kn(ne)}}}(m);C.config.emulator={url:`${O}//${ne}${null===Se?"":`:${Se}`}/`},C.settings.appVerificationDisabledForTesting=!0,C.emulatorConfig=Object.freeze({host:ne,port:Se,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function ro(){function w(){const m=document.createElement("p"),_=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function Au(w){const m=w.indexOf(":");return m<0?"":w.substr(0,m+1)}function Kn(w){if(!w)return null;const m=Number(w);return isNaN(m)?null:m}class zr{constructor(m,_){this.providerId=m,this.signInMethod=_}toJSON(){return ce("not implemented")}_getIdTokenResponse(m){return ce("not implemented")}_linkToIdToken(m,_){return ce("not implemented")}_getReauthenticationResolver(m){return ce("not implemented")}}function ai(w,m){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,l.Z)(function*(w,m){return Lt(w,"POST","/v1/accounts:resetPassword",qt(w,m))})).apply(this,arguments)}function xu(w,m){return gn.apply(this,arguments)}function gn(){return(gn=(0,l.Z)(function*(w,m){return Lt(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Th(w,m){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,l.Z)(function*(w,m){return Lt(w,"POST","/v1/accounts:update",qt(w,m))})).apply(this,arguments)}function io(){return(io=(0,l.Z)(function*(w,m){return On(w,"POST","/v1/accounts:signInWithPassword",qt(w,m))})).apply(this,arguments)}function ui(w,m){return so.apply(this,arguments)}function so(){return(so=(0,l.Z)(function*(w,m){return Lt(w,"POST","/v1/accounts:sendOobCode",qt(w,m))})).apply(this,arguments)}function cs(w,m){return en.apply(this,arguments)}function en(){return(en=(0,l.Z)(function*(w,m){return ui(w,m)})).apply(this,arguments)}function Dh(w,m){return tr.apply(this,arguments)}function tr(){return(tr=(0,l.Z)(function*(w,m){return ui(w,m)})).apply(this,arguments)}function li(w,m){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,l.Z)(function*(w,m){return ui(w,m)})).apply(this,arguments)}function bl(w,m){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,l.Z)(function*(w,m){return ui(w,m)})).apply(this,arguments)}function Il(){return(Il=(0,l.Z)(function*(w,m){return On(w,"POST","/v1/accounts:signInWithEmailLink",qt(w,m))})).apply(this,arguments)}function Tl(){return(Tl=(0,l.Z)(function*(w,m){return On(w,"POST","/v1/accounts:signInWithEmailLink",qt(w,m))})).apply(this,arguments)}class Ra extends zr{constructor(m,_,C,x=null){super("password",C),this._email=m,this._password=_,this._tenantId=x}static _fromEmailAndPassword(m,_){return new Ra(m,_,"password")}static _fromEmailAndCode(m,_,C=null){return new Ra(m,_,"emailLink",C)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(m){var _=this;return(0,l.Z)(function*(){switch(_.signInMethod){case"password":return function xa(w,m){return io.apply(this,arguments)}(m,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Kr(w,m){return Il.apply(this,arguments)}(m,{email:_._email,oobCode:_._password});default:Ye(m,"internal-error")}})()}_linkToIdToken(m,_){var C=this;return(0,l.Z)(function*(){switch(C.signInMethod){case"password":return xu(m,{idToken:_,returnSecureToken:!0,email:C._email,password:C._password});case"emailLink":return function Gp(w,m){return Tl.apply(this,arguments)}(m,{idToken:_,email:C._email,oobCode:C._password});default:Ye(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function oo(w,m){return ci.apply(this,arguments)}function ci(){return(ci=(0,l.Z)(function*(w,m){return On(w,"POST","/v1/accounts:signInWithIdp",qt(w,m))})).apply(this,arguments)}class ds extends zr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const _=new ds(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(_.idToken=m.idToken),m.accessToken&&(_.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(_.nonce=m.nonce),m.pendingToken&&(_.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(_.accessToken=m.oauthToken,_.secret=m.oauthTokenSecret):Ye("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:C,signInMethod:x}=_,O=(0,ue._T)(_,["providerId","signInMethod"]);if(!C||!x)return null;const ne=new ds(C,x);return ne.idToken=O.idToken||void 0,ne.accessToken=O.accessToken||void 0,ne.secret=O.secret,ne.nonce=O.nonce,ne.pendingToken=O.pendingToken||null,ne}_getIdTokenResponse(m){return oo(m,this.buildRequest())}_linkToIdToken(m,_){const C=this.buildRequest();return C.idToken=_,oo(m,C)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,oo(m,_)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),m.postBody=(0,$.xO)(_)}return m}}function Wp(w,m){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,l.Z)(function*(w,m){return Lt(w,"POST","/v1/accounts:sendVerificationCode",qt(w,m))})).apply(this,arguments)}function ka(){return(ka=(0,l.Z)(function*(w,m){return On(w,"POST","/v1/accounts:signInWithPhoneNumber",qt(w,m))})).apply(this,arguments)}function Uc(){return(Uc=(0,l.Z)(function*(w,m){const _=yield On(w,"POST","/v1/accounts:signInWithPhoneNumber",qt(w,m));if(_.temporaryProof)throw Un(w,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const zp={USER_NOT_FOUND:"user-not-found"};function Vc(){return(Vc=(0,l.Z)(function*(w,m){return On(w,"POST","/v1/accounts:signInWithPhoneNumber",qt(w,Object.assign(Object.assign({},m),{operation:"REAUTH"})),zp)})).apply(this,arguments)}class jo extends zr{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,_){return new jo({verificationId:m,verificationCode:_})}static _fromTokenResponse(m,_){return new jo({phoneNumber:m,temporaryProof:_})}_getIdTokenResponse(m){return function Zp(w,m){return ka.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,_){return function Bo(w,m){return Uc.apply(this,arguments)}(m,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function Kp(w,m){return Vc.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:_,verificationId:C,verificationCode:x}=this.params;return m&&_?{temporaryProof:m,phoneNumber:_}:{sessionInfo:C,code:x}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:_,verificationCode:C,phoneNumber:x,temporaryProof:O}=m;return C||_||x||O?new jo({verificationId:_,verificationCode:C,phoneNumber:x,temporaryProof:O}):null}}class Ho{constructor(m){var _,C,x,O,ne,Se;const it=(0,$.zd)((0,$.pd)(m)),Tt=null!==(_=it.apiKey)&&void 0!==_?_:null,Zt=null!==(C=it.oobCode)&&void 0!==C?C:null,xn=function Bc(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=it.mode)&&void 0!==x?x:null);ie(Tt&&Zt&&xn,"argument-error"),this.apiKey=Tt,this.operation=xn,this.code=Zt,this.continueUrl=null!==(O=it.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(ne=it.languageCode)&&void 0!==ne?ne:null,this.tenantId=null!==(Se=it.tenantId)&&void 0!==Se?Se:null}static parseLink(m){const _=function jc(w){const m=(0,$.zd)((0,$.pd)(w)).link,_=m?(0,$.zd)((0,$.pd)(m)).deep_link_id:null,C=(0,$.zd)((0,$.pd)(w)).deep_link_id;return(C?(0,$.zd)((0,$.pd)(C)).link:null)||C||_||m||w}(m);try{return new Ho(_)}catch{return null}}}let Mu=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(_,C){return Ra._fromEmailAndPassword(_,C)}static credentialWithLink(_,C){const x=Ho.parseLink(C);return ie(x,"argument-error"),Ra._fromEmailAndCode(_,x.code,x.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class br{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class $o extends br{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class Ns extends $o{static credentialFromJSON(m){const _="string"==typeof m?JSON.parse(m):m;return ie("providerId"in _&&"signInMethod"in _,"argument-error"),ds._fromParams(_)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return ie(m.idToken||m.accessToken,"argument-error"),ds._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return Ns.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return Ns.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:_,oauthAccessToken:C,oauthTokenSecret:x,pendingToken:O,nonce:ne,providerId:Se}=m;if(!C&&!x&&!_&&!O||!Se)return null;try{return new Ns(Se)._credential({idToken:_,accessToken:C,nonce:ne,pendingToken:O})}catch{return null}}}let Hc=(()=>{class w extends $o{constructor(){super("facebook.com")}static credential(_){return ds._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),Ru=(()=>{class w extends $o{constructor(){super("google.com"),this.addScope("profile")}static credential(_,C){return ds._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:C})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:C,oauthAccessToken:x}=_;if(!C&&!x)return null;try{return w.credential(C,x)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),Dl=(()=>{class w extends $o{constructor(){super("github.com")}static credential(_){return ds._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class Go extends zr{constructor(m,_){super(m,m),this.pendingToken=_}_getIdTokenResponse(m){return oo(m,this.buildRequest())}_linkToIdToken(m,_){const C=this.buildRequest();return C.idToken=_,oo(m,C)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,oo(m,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:C,signInMethod:x,pendingToken:O}=_;return C&&x&&O&&C===x?new Go(C,O):null}static _create(m,_){return new Go(m,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class di extends br{constructor(m){ie(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return di.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return di.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const _=Go.fromJSON(m);return ie(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:_,providerId:C}=m;if(!_||!C)return null;try{return Go._create(C,_)}catch{return null}}}let hs=(()=>{class w extends $o{constructor(){super("twitter.com")}static credential(_,C){return ds._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:C})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:C,oauthTokenSecret:x}=_;if(!C||!x)return null;try{return w.credential(C,x)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function Yr(w,m){return ao.apply(this,arguments)}function ao(){return(ao=(0,l.Z)(function*(w,m){return On(w,"POST","/v1/accounts:signUp",qt(w,m))})).apply(this,arguments)}class Di{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,_,C,x=!1){return(0,l.Z)(function*(){const O=yield It._fromIdTokenResponse(m,C,x),ne=qo(C);return new Di({user:O,providerId:ne,_tokenResponse:C,operationType:_})})()}static _forOperation(m,_,C){return(0,l.Z)(function*(){yield m._updateTokensIfNecessary(C,!0);const x=qo(C);return new Di({user:m,providerId:x,_tokenResponse:C,operationType:_})})()}}function qo(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function Yp(w){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,l.Z)(function*(w){var m;const _=Et(w);if(yield _._initializationPromise,null!==(m=_.currentUser)&&void 0!==m&&m.isAnonymous)return new Di({user:_.currentUser,providerId:null,operationType:"signIn"});const C=yield Yr(_,{returnSecureToken:!0}),x=yield Di._fromIdTokenResponse(_,"signIn",C,!0);return yield _._updateCurrentUser(x.user),x})).apply(this,arguments)}class Fn extends $.ZR{constructor(m,_,C,x){var O;super(_.code,_.message),this.operationType=C,this.user=x,Object.setPrototypeOf(this,Fn.prototype),this.customData={appName:m.name,tenantId:null!==(O=m.tenantId)&&void 0!==O?O:void 0,_serverResponse:_.customData._serverResponse,operationType:C}}static _fromErrorAndOperation(m,_,C,x){return new Fn(m,_,C,x)}}function Gc(w,m,_,C){return("reauthenticate"===m?_._getReauthenticationResolver(w):_._getIdTokenResponse(w)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?Fn._fromErrorAndOperation(w,O,m,C):O})}function Ah(w){return new Set(w.map(({providerId:m})=>m).filter(m=>!!m))}function Si(w,m){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,l.Z)(function*(w,m){const _=(0,$.m9)(w);yield Ki(!0,_,m);const{providerUserInfo:C}=yield Qe(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[m]}),x=Ah(C||[]);return _.providerData=_.providerData.filter(O=>x.has(O.providerId)),x.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function ku(w,m){return uo.apply(this,arguments)}function uo(){return(uo=(0,l.Z)(function*(w,m,_=!1){const C=yield xt(w,m._linkToIdToken(w.auth,yield w.getIdToken()),_);return Di._forOperation(w,"link",C)})).apply(this,arguments)}function Ki(w,m,_){return un.apply(this,arguments)}function un(){return(un=(0,l.Z)(function*(w,m,_){yield kr(m);const x=!1===w?"provider-already-linked":"no-such-provider";ie(Ah(m.providerData).has(_)===w,m.auth,x)})).apply(this,arguments)}function Al(w,m){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,l.Z)(function*(w,m,_=!1){var C;const{auth:x}=w,O="reauthenticate";try{const ne=yield xt(w,Gc(x,O,m,w),_);ie(ne.idToken,x,"internal-error");const Se=mt(ne.idToken);ie(Se,x,"internal-error");const{sub:it}=Se;return ie(w.uid===it,x,"user-mismatch"),Di._forOperation(w,O,ne)}catch(ne){throw"auth/user-not-found"===(null===(C=ne)||void 0===C?void 0:C.code)&&Ye(x,"user-mismatch"),ne}})).apply(this,arguments)}function xl(w,m){return hi.apply(this,arguments)}function hi(){return(hi=(0,l.Z)(function*(w,m,_=!1){const C="signIn",x=yield Gc(w,C,m),O=yield Di._fromIdTokenResponse(w,C,x);return _||(yield w._updateCurrentUser(O.user)),O})).apply(this,arguments)}function Na(w,m){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,l.Z)(function*(w,m){return xl(Et(w),m)})).apply(this,arguments)}function Rt(w,m){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,l.Z)(function*(w,m){const _=(0,$.m9)(w);return yield Ki(!1,_,m.providerId),ku(_,m)})).apply(this,arguments)}function Qp(w,m){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,l.Z)(function*(w,m){return Al((0,$.m9)(w),m)})).apply(this,arguments)}function qc(w,m){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,l.Z)(function*(w,m){return On(w,"POST","/v1/accounts:signInWithCustomToken",qt(w,m))})).apply(this,arguments)}function lo(w,m){return La.apply(this,arguments)}function La(){return(La=(0,l.Z)(function*(w,m){const _=Et(w),C=yield qc(_,{token:m,returnSecureToken:!0}),x=yield Di._fromIdTokenResponse(_,"signIn",C);return yield _._updateCurrentUser(x.user),x})).apply(this,arguments)}class Wo{constructor(m,_){this.factorId=m,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(m,_){return"phoneInfo"in _?ke._fromServerResponse(m,_):Ye(m,"internal-error")}}class ke extends Wo{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,_){return new ke(_)}}function Wt(w,m,_){var C;ie((null===(C=_.url)||void 0===C?void 0:C.length)>0,w,"invalid-continue-uri"),ie(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),m.continueUrl=_.url,m.dynamicLinkDomain=_.dynamicLinkDomain,m.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(ie(_.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),m.iOSBundleId=_.iOS.bundleId),_.android&&(ie(_.android.packageName.length>0,w,"missing-android-pkg-name"),m.androidInstallApp=_.android.installApp,m.androidMinimumVersionCode=_.android.minimumVersion,m.androidPackageName=_.android.packageName)}function xh(w,m,_){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,l.Z)(function*(w,m,_){const C=(0,$.m9)(w),x={requestType:"PASSWORD_RESET",email:m};_&&Wt(C,x,_),yield Dh(C,x)})).apply(this,arguments)}function nr(w,m,_){return zo.apply(this,arguments)}function zo(){return(zo=(0,l.Z)(function*(w,m,_){yield ai((0,$.m9)(w),{oobCode:m,newPassword:_})})).apply(this,arguments)}function Nu(w,m){return $r.apply(this,arguments)}function $r(){return($r=(0,l.Z)(function*(w,m){yield Th((0,$.m9)(w),{oobCode:m})})).apply(this,arguments)}function Pu(w,m){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,l.Z)(function*(w,m){const _=(0,$.m9)(w),C=yield ai(_,{oobCode:m}),x=C.requestType;switch(ie(x,_,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ie(C.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ie(C.mfaInfo,_,"internal-error");default:ie(C.email,_,"internal-error")}let O=null;return C.mfaInfo&&(O=Wo._fromServerResponse(Et(_),C.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.newEmail:C.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.email:C.newEmail)||null,multiFactorInfo:O},operation:x}})).apply(this,arguments)}function Mh(w,m){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,l.Z)(function*(w,m){const{data:_}=yield Pu((0,$.m9)(w),m);return _.email})).apply(this,arguments)}function Jp(w,m,_){return co.apply(this,arguments)}function co(){return(co=(0,l.Z)(function*(w,m,_){const C=Et(w),x=yield Yr(C,{returnSecureToken:!0,email:m,password:_}),O=yield Di._fromIdTokenResponse(C,"signIn",x);return yield C._updateCurrentUser(O.user),O})).apply(this,arguments)}function rr(w,m,_){return Na((0,$.m9)(w),Mu.credential(m,_))}function Yi(w,m,_){return Va.apply(this,arguments)}function Va(){return(Va=(0,l.Z)(function*(w,m,_){const C=(0,$.m9)(w),x={requestType:"EMAIL_SIGNIN",email:m};ie(_.handleCodeInApp,C,"argument-error"),_&&Wt(C,x,_),yield li(C,x)})).apply(this,arguments)}function Ba(w,m){return"EMAIL_SIGNIN"===Ho.parseLink(m)?.operation}function fs(w,m,_){return Wc.apply(this,arguments)}function Wc(){return(Wc=(0,l.Z)(function*(w,m,_){const C=(0,$.m9)(w),x=Mu.credentialWithLink(m,_||Ve());return ie(x._tenantId===(C.tenantId||null),C,"tenant-id-mismatch"),Na(C,x)})).apply(this,arguments)}function Ml(w,m){return Zc.apply(this,arguments)}function Zc(){return(Zc=(0,l.Z)(function*(w,m){return Lt(w,"POST","/v1/accounts:createAuthUri",qt(w,m))})).apply(this,arguments)}function Rh(w,m){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,l.Z)(function*(w,m){const C={identifier:m,continueUri:Be()?Ve():"http://localhost"},{signinMethods:x}=yield Ml((0,$.m9)(w),C);return x||[]})).apply(this,arguments)}function Rl(w,m){return ja.apply(this,arguments)}function ja(){return(ja=(0,l.Z)(function*(w,m){const _=(0,$.m9)(w),x={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};m&&Wt(_.auth,x,m);const{email:O}=yield cs(_.auth,x);O!==w.email&&(yield w.reload())})).apply(this,arguments)}function kl(w,m,_){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,l.Z)(function*(w,m,_){const C=(0,$.m9)(w),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:m};_&&Wt(C.auth,O,_);const{email:ne}=yield bl(C.auth,O);ne!==w.email&&(yield w.reload())})).apply(this,arguments)}function zc(w,m){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,l.Z)(function*(w,m){return Lt(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function kh(w,m){return $a.apply(this,arguments)}function $a(){return($a=(0,l.Z)(function*(w,{displayName:m,photoURL:_}){if(void 0===m&&void 0===_)return;const C=(0,$.m9)(w),O={idToken:yield C.getIdToken(),displayName:m,photoUrl:_,returnSecureToken:!0},ne=yield xt(C,zc(C.auth,O));C.displayName=ne.displayName||null,C.photoURL=ne.photoUrl||null;const Se=C.providerData.find(({providerId:it})=>"password"===it);Se&&(Se.displayName=C.displayName,Se.photoURL=C.photoURL),yield C._updateTokensIfNecessary(ne)})).apply(this,arguments)}function Nh(w,m){return Os((0,$.m9)(w),m,null)}function Kc(w,m){return Os((0,$.m9)(w),null,m)}function Os(w,m,_){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,l.Z)(function*(w,m,_){const{auth:C}=w,O={idToken:yield w.getIdToken(),returnSecureToken:!0};m&&(O.email=m),_&&(O.password=_);const ne=yield xt(w,xu(C,O));yield w._updateTokensIfNecessary(ne,!0)})).apply(this,arguments)}class kn{constructor(m,_,C={}){this.isNewUser=m,this.providerId=_,this.profile=C}}class ps extends kn{constructor(m,_,C,x){super(m,_,C),this.username=x}}class Nn extends kn{constructor(m,_){super(m,"facebook.com",_)}}class Nl extends ps{constructor(m,_){super(m,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class Pl extends kn{constructor(m,_){super(m,"google.com",_)}}class Ph extends ps{constructor(m,_,C){super(m,"twitter.com",_,C)}}function Ol(w){const{user:m,_tokenResponse:_}=w;return m.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Yc(w){var m,_;if(!w)return null;const{providerId:C}=w,x=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},O=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!C&&w?.idToken){const ne=null===(_=null===(m=mt(w.idToken))||void 0===m?void 0:m.firebase)||void 0===_?void 0:_.sign_in_provider;if(ne)return new kn(O,"anonymous"!==ne&&"custom"!==ne?ne:null)}if(!C)return null;switch(C){case"facebook.com":return new Nn(O,x);case"github.com":return new Nl(O,x);case"google.com":return new Pl(O,x);case"twitter.com":return new Ph(O,x,w.screenName||null);case"custom":case"anonymous":return new kn(O,null);default:return new kn(O,C,x)}}(_)}class fi{constructor(m,_,C){this.type=m,this.credential=_,this.auth=C}static _fromIdtoken(m,_){return new fi("enroll",m,_)}static _fromMfaPendingCredential(m){return new fi("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var _,C;if(m?.multiFactorSession){if(null!==(_=m.multiFactorSession)&&void 0!==_&&_.pendingCredential)return fi._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null!==(C=m.multiFactorSession)&&void 0!==C&&C.idToken)return fi._fromIdtoken(m.multiFactorSession.idToken)}return null}}class Ul{constructor(m,_,C){this.session=m,this.hints=_,this.signInResolver=C}static _fromError(m,_){const C=Et(m),x=_.customData._serverResponse,O=(x.mfaInfo||[]).map(Se=>Wo._fromServerResponse(C,Se));ie(x.mfaPendingCredential,C,"internal-error");const ne=fi._fromMfaPendingCredential(x.mfaPendingCredential);return new Ul(ne,O,function(){var Se=(0,l.Z)(function*(it){const Tt=yield it._process(C,ne);delete x.mfaInfo,delete x.mfaPendingCredential;const Zt=Object.assign(Object.assign({},x),{idToken:Tt.idToken,refreshToken:Tt.refreshToken});switch(_.operationType){case"signIn":const xn=yield Di._fromIdTokenResponse(C,_.operationType,Zt);return yield C._updateCurrentUser(xn.user),xn;case"reauthenticate":return ie(_.user,C,"internal-error"),Di._forOperation(_.user,_.operationType,Zt);default:Ye(C,"internal-error")}});return function(it){return Se.apply(this,arguments)}}())}resolveSignIn(m){var _=this;return(0,l.Z)(function*(){return _.signInResolver(m)})()}}function Xc(w,m){var _;const C=(0,$.m9)(w),x=m;return ie(m.customData.operationType,C,"argument-error"),ie(null===(_=x.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,C,"argument-error"),Ul._fromError(C,x)}function Bn(w,m){return Lt(w,"POST","/v2/accounts/mfaEnrollment:start",qt(w,m))}class Uu{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(C=>Wo._fromServerResponse(m.auth,C)))})}static _fromUser(m){return new Uu(m)}getSession(){var m=this;return(0,l.Z)(function*(){return fi._fromIdtoken(yield m.user.getIdToken(),m.user.auth)})()}enroll(m,_){var C=this;return(0,l.Z)(function*(){const x=m,O=yield C.getSession(),ne=yield xt(C.user,x._process(C.user.auth,O,_));return yield C.user._updateTokensIfNecessary(ne),C.user.reload()})()}unenroll(m){var _=this;return(0,l.Z)(function*(){var C;const x="string"==typeof m?m:m.uid,O=yield _.user.getIdToken(),ne=yield xt(_.user,function Lu(w,m){return Lt(w,"POST","/v2/accounts/mfaEnrollment:withdraw",qt(w,m))}(_.user.auth,{idToken:O,mfaEnrollmentId:x}));_.enrolledFactors=_.enrolledFactors.filter(({uid:Se})=>Se!==x),yield _.user._updateTokensIfNecessary(ne);try{yield _.user.reload()}catch(Se){if("auth/user-token-expired"!==(null===(C=Se)||void 0===C?void 0:C.code))throw Se}})()}}const Oh=new WeakMap;function Vu(w){const m=(0,$.m9)(w);return Oh.has(m)||Oh.set(m,Uu._fromUser(m)),Oh.get(m)}const gs="__sak";class Ga{constructor(m,_){this.storageRetriever=m,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(gs,"1"),this.storage.removeItem(gs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(m,_){return this.storage.setItem(m,JSON.stringify(_)),Promise.resolve()}_get(m){const _=this.storage.getItem(m);return Promise.resolve(_?JSON.parse(_):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const ir=(()=>{class w extends Ga{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,C)=>this.onStorageEvent(_,C),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Vl(){const w=(0,$.z$)();return B(w)||Ue(w)}()&&function us(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=pn(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const C of Object.keys(this.listeners)){const x=this.storage.getItem(C),O=this.localCache[C];x!==O&&_(C,O,x)}}onStorageEvent(_,C=!1){if(!_.key)return void this.forAllChangedKeys((Se,it,Tt)=>{this.notifyListeners(Se,Tt)});const x=_.key;if(C?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Se=this.storage.getItem(x);if(_.newValue!==Se)null!==_.newValue?this.storage.setItem(x,_.newValue):this.storage.removeItem(x);else if(this.localCache[x]===_.newValue&&!C)return}const O=()=>{const Se=this.storage.getItem(x);!C&&this.localCache[x]===Se||this.notifyListeners(x,Se)},ne=this.storage.getItem(x);!function Pt(){return(0,$.w1)()&&10===document.documentMode}()||ne===_.newValue||_.newValue===_.oldValue?O():setTimeout(O,10)}notifyListeners(_,C){this.localCache[_]=C;const x=this.listeners[_];if(x)for(const O of Array.from(x))O(C&&JSON.parse(C))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,C,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:C,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,C){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(C)}_removeListener(_,C){this.listeners[_]&&(this.listeners[_].delete(C),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,C){var x=()=>super._set,O=this;return(0,l.Z)(function*(){yield x().call(O,_,C),O.localCache[_]=JSON.stringify(C)})()}_get(_){var C=()=>super._get,x=this;return(0,l.Z)(function*(){const O=yield C().call(x,_);return x.localCache[_]=JSON.stringify(O),O})()}_remove(_){var C=()=>super._remove,x=this;return(0,l.Z)(function*(){yield C().call(x,_),delete x.localCache[_]})()}}return w.type="LOCAL",w})(),Ls=(()=>{class w extends Ga{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,C){}_removeListener(_,C){}}return w.type="SESSION",w})();let Wa=(()=>{class w{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const C=this.receivers.find(O=>O.isListeningto(_));if(C)return C;const x=new w(_);return this.receivers.push(x),x}isListeningto(_){return this.eventTarget===_}handleEvent(_){var C=this;return(0,l.Z)(function*(){const x=_,{eventId:O,eventType:ne,data:Se}=x.data,it=C.handlersMap[ne];if(!it?.size)return;x.ports[0].postMessage({status:"ack",eventId:O,eventType:ne});const Tt=Array.from(it).map(function(){var xn=(0,l.Z)(function*(Es){return Es(x.origin,Se)});return function(Es){return xn.apply(this,arguments)}}()),Zt=yield function Bl(w){return Promise.all(w.map(function(){var m=(0,l.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(C){return{fulfilled:!1,reason:C}}});return function(_){return m.apply(this,arguments)}}()))}(Tt);x.ports[0].postMessage({status:"done",eventId:O,eventType:ne,response:Zt})})()}_subscribe(_,C){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(C)}_unsubscribe(_,C){this.handlersMap[_]&&C&&this.handlersMap[_].delete(C),(!C||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function ta(w="",m=10){let _="";for(let C=0;C<m;C++)_+=Math.floor(10*Math.random());return w+_}class Uh{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,_,C=50){var x=this;return(0,l.Z)(function*(){const O=typeof MessageChannel<"u"?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let ne,Se;return new Promise((it,Tt)=>{const Zt=ta("",20);O.port1.start();const xn=setTimeout(()=>{Tt(new Error("unsupported_event"))},C);Se={messageChannel:O,onMessage(Es){const wo=Es;if(wo.data.eventId===Zt)switch(wo.data.status){case"ack":clearTimeout(xn),ne=setTimeout(()=>{Tt(new Error("timeout"))},3e3);break;case"done":clearTimeout(ne),it(wo.data.response);break;default:clearTimeout(xn),clearTimeout(ne),Tt(new Error("invalid_response"))}}},x.handlers.add(Se),O.port1.addEventListener("message",Se.onMessage),x.target.postMessage({eventType:m,eventId:Zt,data:_},[O.port2])}).finally(()=>{Se&&x.removeMessageHandler(Se)})})()}}function jn(){return window}function Qr(){return typeof jn().WorkerGlobalScope<"u"&&"function"==typeof jn().importScripts}function ms(){return(ms=(0,l.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Za="firebaseLocalStorageDb",za="firebaseLocalStorage",na="fbase_key";class ra{constructor(m){this.request=m}toPromise(){return new Promise((m,_)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function ia(w,m){return w.transaction([za],m?"readwrite":"readonly").objectStore(za)}function ju(){const w=indexedDB.open(Za,1);return new Promise((m,_)=>{w.addEventListener("error",()=>{_(w.error)}),w.addEventListener("upgradeneeded",()=>{const C=w.result;try{C.createObjectStore(za,{keyPath:na})}catch(x){_(x)}}),w.addEventListener("success",(0,l.Z)(function*(){const C=w.result;C.objectStoreNames.contains(za)?m(C):(C.close(),yield function rd(){const w=indexedDB.deleteDatabase(Za);return new ra(w).toPromise()}(),m(yield ju()))}))})}function Ka(w,m,_){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,l.Z)(function*(w,m,_){const C=ia(w,!0).put({[na]:m,value:_});return new ra(C).toPromise()})).apply(this,arguments)}function sa(){return(sa=(0,l.Z)(function*(w,m){const _=ia(w,!1).get(m),C=yield new ra(_).toPromise();return void 0===C?null:C.value})).apply(this,arguments)}function Hu(w,m){const _=ia(w,!0).delete(m);return new ra(_).toPromise()}const aa=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,l.Z)(function*(){return _.db||(_.db=yield ju()),_.db})()}_withRetries(_){var C=this;return(0,l.Z)(function*(){let x=0;for(;;)try{const O=yield C._openDb();return yield _(O)}catch(O){if(x++>3)throw O;C.db&&(C.db.close(),C.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,l.Z)(function*(){return Qr()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,l.Z)(function*(){_.receiver=Wa._getInstance(function Bu(){return Qr()?self:null}()),_.receiver._subscribe("keyChanged",function(){var C=(0,l.Z)(function*(x,O){return{keyProcessed:(yield _._poll()).includes(O.key)}});return function(x,O){return C.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var C=(0,l.Z)(function*(x,O){return["keyChanged"]});return function(x,O){return C.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,l.Z)(function*(){var C,x;if(_.activeServiceWorker=yield function nd(){return ms.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Uh(_.activeServiceWorker);const O=yield _.sender._send("ping",{},800);!O||(null===(C=O[0])||void 0===C?void 0:C.fulfilled)&&(null===(x=O[0])||void 0===x?void 0:x.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var C=this;return(0,l.Z)(function*(){if(C.sender&&C.activeServiceWorker&&function jl(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===C.activeServiceWorker)try{yield C.sender._send("keyChanged",{key:_},C.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,l.Z)(function*(){try{if(!indexedDB)return!1;const _=yield ju();return yield Ka(_,gs,"1"),yield Hu(_,gs),!0}catch{}return!1})()}_withPendingWrite(_){var C=this;return(0,l.Z)(function*(){C.pendingWrites++;try{yield _()}finally{C.pendingWrites--}})()}_set(_,C){var x=this;return(0,l.Z)(function*(){return x._withPendingWrite((0,l.Z)(function*(){return yield x._withRetries(O=>Ka(O,_,C)),x.localCache[_]=C,x.notifyServiceWorker(_)}))})()}_get(_){var C=this;return(0,l.Z)(function*(){const x=yield C._withRetries(O=>function Vh(w,m){return sa.apply(this,arguments)}(O,_));return C.localCache[_]=x,x})()}_remove(_){var C=this;return(0,l.Z)(function*(){return C._withPendingWrite((0,l.Z)(function*(){return yield C._withRetries(x=>Hu(x,_)),delete C.localCache[_],C.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,l.Z)(function*(){const C=yield _._withRetries(ne=>{const Se=ia(ne,!1).getAll();return new ra(Se).toPromise()});if(!C)return[];if(0!==_.pendingWrites)return[];const x=[],O=new Set;for(const{fbase_key:ne,value:Se}of C)O.add(ne),JSON.stringify(_.localCache[ne])!==JSON.stringify(Se)&&(_.notifyListeners(ne,Se),x.push(ne));for(const ne of Object.keys(_.localCache))_.localCache[ne]&&!O.has(ne)&&(_.notifyListeners(ne,null),x.push(ne));return x})()}notifyListeners(_,C){this.localCache[_]=C;const x=this.listeners[_];if(x)for(const O of Array.from(x))O(C)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,l.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,C){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(C)}_removeListener(_,C){this.listeners[_]&&(this.listeners[_].delete(C),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function Bh(w,m){return Lt(w,"POST","/v2/accounts/mfaSignIn:start",qt(w,m))}function Nr(){return(Nr=(0,l.Z)(function*(w){return(yield Lt(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function fo(w){return new Promise((m,_)=>{const C=document.createElement("script");C.setAttribute("src",w),C.onload=m,C.onerror=x=>{const O=Fe("internal-error");O.customData=x,_(O)},C.type="text/javascript",C.charset="UTF-8",function la(){var w,m;return null!==(m=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==m?m:document}().appendChild(C)})}function ca(w){return`__${w}${Math.floor(1e6*Math.random())}`}const Ji=1e12;class id{constructor(m){this.auth=m,this.counter=Ji,this._widgets=new Map}render(m,_){const C=this.counter;return this._widgets.set(C,new Sn(m,this.auth.name,_||{})),this.counter++,C}reset(m){var _;const C=m||Ji;null===(_=this._widgets.get(C))||void 0===_||_.delete(),this._widgets.delete(C)}getResponse(m){var _;return(null===(_=this._widgets.get(m||Ji))||void 0===_?void 0:_.getResponse())||""}execute(m){var _=this;return(0,l.Z)(function*(){var C;return null===(C=_._widgets.get(m||Ji))||void 0===C||C.execute(),""})()}}class Sn{constructor(m,_,C){this.params=C,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof m?document.getElementById(m):m;ie(x,"argument-error",{appName:_}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Xp(w){const m=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let C=0;C<w;C++)m.push(_.charAt(Math.floor(Math.random()*_.length)));return m.join("")}(50);const{callback:m,"expired-callback":_}=this.params;if(m)try{m(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const jh=ca("rcb"),Fw=new Ze(3e4,6e4);class w_{constructor(){var m;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(m=jn().grecaptcha)||void 0===m||!m.render)}load(m,_=""){return ie(function Hh(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(_),m,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(jn().grecaptcha):new Promise((C,x)=>{const O=jn().setTimeout(()=>{x(Fe(m,"network-request-failed"))},Fw.get());jn()[jh]=()=>{jn().clearTimeout(O),delete jn()[jh];const Se=jn().grecaptcha;if(!Se)return void x(Fe(m,"internal-error"));const it=Se.render;Se.render=(Tt,Zt)=>{const xn=it(Tt,Zt);return this.counter++,xn},this.hostLanguage=_,C(Se)},fo(`https://www.google.com/recaptcha/api.js??${(0,$.xO)({onload:jh,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(O),x(Fe(m,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){var _;return!(null===(_=jn().grecaptcha)||void 0===_||!_.render)&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Lw{load(m){return(0,l.Z)(function*(){return new id(m)})()}clearedOneInstance(){}}const Gu="recaptcha",Uw={theme:"light",type:"image"};class E_{constructor(m,_=Object.assign({},Uw),C){this.parameters=_,this.type=Gu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Et(C),this.isInvisible="invisible"===this.parameters.size,ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof m?document.getElementById(m):m;ie(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Lw:new w_,this.validateStartingState()}verify(){var m=this;return(0,l.Z)(function*(){m.assertNotDestroyed();const _=yield m.render(),C=m.getAssertedRecaptcha();return C.getResponse(_)||new Promise(O=>{const ne=Se=>{!Se||(m.tokenChangeListeners.delete(ne),O(Se))};m.tokenChangeListeners.add(ne),m.isInvisible&&C.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){ie(!this.parameters.sitekey,this.auth,"argument-error"),ie(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return _=>{if(this.tokenChangeListeners.forEach(C=>C(_)),"function"==typeof m)m(_);else if("string"==typeof m){const C=jn()[m];"function"==typeof C&&C(_)}}}assertNotDestroyed(){ie(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,l.Z)(function*(){if(yield m.init(),!m.widgetId){let _=m.container;if(!m.isInvisible){const C=document.createElement("div");_.appendChild(C),_=C}m.widgetId=m.getAssertedRecaptcha().render(_,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,l.Z)(function*(){ie(Be()&&!Qr(),m.auth,"internal-error"),yield function mr(){let w=null;return new Promise(m=>{"complete"!==document.readyState?(w=()=>m(),window.addEventListener("load",w)):m()}).catch(m=>{throw w&&window.removeEventListener("load",w),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const _=yield function $u(w){return Nr.apply(this,arguments)}(m.auth);ie(_,m.auth,"internal-error"),m.parameters.sitekey=_})()}getAssertedRecaptcha(){return ie(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class rn{constructor(m,_){this.verificationId=m,this.onConfirmation=_}confirm(m){const _=jo._fromVerification(this.verificationId,m);return this.onConfirmation(_)}}function Tr(w,m,_){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,l.Z)(function*(w,m,_){const C=Et(w),x=yield po(C,m,(0,$.m9)(_));return new rn(x,O=>Na(C,O))})).apply(this,arguments)}function sd(w,m,_){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,l.Z)(function*(w,m,_){const C=(0,$.m9)(w);yield Ki(!1,C,"phone");const x=yield po(C.auth,m,(0,$.m9)(_));return new rn(x,O=>Rt(C,O))})).apply(this,arguments)}function _s(w,m,_){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,l.Z)(function*(w,m,_){const C=(0,$.m9)(w),x=yield po(C.auth,m,(0,$.m9)(_));return new rn(x,O=>Qp(C,O))})).apply(this,arguments)}function po(w,m,_){return xi.apply(this,arguments)}function xi(){return(xi=(0,l.Z)(function*(w,m,_){var C;const x=yield _.verify();try{let O;if(ie("string"==typeof x,w,"argument-error"),ie(_.type===Gu,w,"argument-error"),O="string"==typeof m?{phoneNumber:m}:m,"session"in O){const ne=O.session;if("phoneNumber"in O)return ie("enroll"===ne.type,w,"internal-error"),(yield Bn(w,{idToken:ne.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{ie("signin"===ne.type,w,"internal-error");const Se=(null===(C=O.multiFactorHint)||void 0===C?void 0:C.uid)||O.multiFactorUid;return ie(Se,w,"missing-multi-factor-info"),(yield Bh(w,{mfaPendingCredential:ne.credential,mfaEnrollmentId:Se,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ne}=yield Wp(w,{phoneNumber:O.phoneNumber,recaptchaToken:x});return ne}}finally{_._reset()}})).apply(this,arguments)}function Vs(w,m){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,l.Z)(function*(w,m){yield ku((0,$.m9)(w),m)})).apply(this,arguments)}let yt=(()=>{class w{constructor(_){this.providerId=w.PROVIDER_ID,this.auth=Et(_)}verifyPhoneNumber(_,C){return po(this.auth,_,(0,$.m9)(C))}static credential(_,C){return jo._fromVerification(_,C)}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:C,temporaryProof:x}=_;return C&&x?jo._fromTokenResponse(C,x):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function go(w,m){return m?ee(m):(ie(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class od extends zr{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return oo(m,this._buildIdpRequest())}_linkToIdToken(m,_){return oo(m,this._buildIdpRequest(_))}_getReauthenticationResolver(m){return oo(m,this._buildIdpRequest())}_buildIdpRequest(m){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(_.idToken=m),_}}function Qa(w){return xl(w.auth,new od(w),w.bypassAuthState)}function Or(w){const{auth:m,user:_}=w;return ie(_,m,"internal-error"),Al(_,new od(w),w.bypassAuthState)}function ql(w){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,l.Z)(function*(w){const{auth:m,user:_}=w;return ie(_,m,"internal-error"),ku(_,new od(w),w.bypassAuthState)})).apply(this,arguments)}class ys{constructor(m,_,C,x,O=!1){this.auth=m,this.resolver=C,this.user=x,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var m=this;return new Promise(function(){var _=(0,l.Z)(function*(C,x){m.pendingPromise={resolve:C,reject:x};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(O){m.reject(O)}});return function(C,x){return _.apply(this,arguments)}}())}onAuthEvent(m){var _=this;return(0,l.Z)(function*(){const{urlResponse:C,sessionId:x,postBody:O,tenantId:ne,error:Se,type:it}=m;if(Se)return void _.reject(Se);const Tt={auth:_.auth,requestUri:C,sessionId:x,tenantId:ne||void 0,postBody:O||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(it)(Tt))}catch(Zt){_.reject(Zt)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return Qa;case"linkViaPopup":case"linkViaRedirect":return ql;case"reauthViaPopup":case"reauthViaRedirect":return Or;default:Ye(this.auth,"internal-error")}}resolve(m){we(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){we(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Jr=new Ze(2e3,1e4);function Wl(w,m,_){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,l.Z)(function*(w,m,_){const C=Et(w);Ie(w,m,br);const x=go(C,_);return new qu(C,"signInViaPopup",m,x).executeNotNull()})).apply(this,arguments)}function Zl(w,m,_){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,l.Z)(function*(w,m,_){const C=(0,$.m9)(w);Ie(C.auth,m,br);const x=go(C.auth,_);return new qu(C.auth,"reauthViaPopup",m,x,C).executeNotNull()})).apply(this,arguments)}function eg(w,m,_){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,l.Z)(function*(w,m,_){const C=(0,$.m9)(w);Ie(C.auth,m,br);const x=go(C.auth,_);return new qu(C.auth,"linkViaPopup",m,x,C).executeNotNull()})).apply(this,arguments)}let qu=(()=>{class w extends ys{constructor(_,C,x,O,ne){super(_,C,O,ne),this.provider=x,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var _=this;return(0,l.Z)(function*(){const C=yield _.execute();return ie(C,_.auth,"internal-error"),C})()}onExecution(){var _=this;return(0,l.Z)(function*(){we(1===_.filter.length,"Popup operations only handle one event");const C=ta();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],C),_.authWindow.associatedEvent=C,_.resolver._originValidation(_.auth).catch(x=>{_.reject(x)}),_.resolver._isIframeWebStorageSupported(_.auth,x=>{x||_.reject(Fe(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Fe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const _=()=>{var C,x;this.pollId=null!==(x=null===(C=this.authWindow)||void 0===C?void 0:C.window)&&void 0!==x&&x.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Fe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,Jr.get())};_()}}return w.currentPopupAction=null,w})();const Xa=new Map;class An extends ys{constructor(m,_,C=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,C),this.eventId=null}execute(){var m=()=>super.execute,_=this;return(0,l.Z)(function*(){let C=Xa.get(_.auth._key());if(!C){try{const O=(yield function ki(w,m){return ha.apply(this,arguments)}(_.resolver,_.auth))?yield m().call(_):null;C=()=>Promise.resolve(O)}catch(x){C=()=>Promise.reject(x)}Xa.set(_.auth._key(),C)}return _.bypassAuthState||Xa.set(_.auth._key(),()=>Promise.resolve(null)),C()})()}onAuthEvent(m){var _=()=>super.onAuthEvent,C=this;return(0,l.Z)(function*(){if("signInViaRedirect"===m.type)return _().call(C,m);if("unknown"!==m.type){if(m.eventId){const x=yield C.auth._redirectUserForId(m.eventId);if(x)return C.user=x,_().call(C,m);C.resolve(null)}}else C.resolve(null)})()}onExecution(){return(0,l.Z)(function*(){})()}cleanUp(){}}function ha(){return(ha=(0,l.Z)(function*(w,m){const _=_o(m),C=mo(w);if(!(yield C._isAvailable()))return!1;const x="true"===(yield C._get(_));return yield C._remove(_),x})).apply(this,arguments)}function ad(w,m){return es.apply(this,arguments)}function es(){return(es=(0,l.Z)(function*(w,m){return mo(w)._set(_o(m),"true")})).apply(this,arguments)}function ud(){Xa.clear()}function ts(w,m){Xa.set(w._key(),m)}function mo(w){return ee(w._redirectPersistence)}function _o(w){return q("pendingRedirect",w.config.apiKey,w.name)}function zl(w,m,_){return function $n(w,m,_){return eu.apply(this,arguments)}(w,m,_)}function eu(){return(eu=(0,l.Z)(function*(w,m,_){const C=Et(w);Ie(w,m,br);const x=go(C,_);return yield ad(x,C),x._openRedirect(C,m,"signInViaRedirect")})).apply(this,arguments)}function tu(w,m,_){return function T(w,m,_){return D.apply(this,arguments)}(w,m,_)}function D(){return(D=(0,l.Z)(function*(w,m,_){const C=(0,$.m9)(w);Ie(C.auth,m,br);const x=go(C.auth,_);yield ad(x,C.auth);const O=yield kt(C);return x._openRedirect(C.auth,m,"reauthViaRedirect",O)})).apply(this,arguments)}function M(w,m,_){return function j(w,m,_){return J.apply(this,arguments)}(w,m,_)}function J(){return(J=(0,l.Z)(function*(w,m,_){const C=(0,$.m9)(w);Ie(C.auth,m,br);const x=go(C.auth,_);yield Ki(!1,C,m.providerId),yield ad(x,C.auth);const O=yield kt(C);return x._openRedirect(C.auth,m,"linkViaRedirect",O)})).apply(this,arguments)}function ae(w,m){return Me.apply(this,arguments)}function Me(){return(Me=(0,l.Z)(function*(w,m){return yield Et(w)._initializationPromise,We(w,m,!1)})).apply(this,arguments)}function We(w,m){return pt.apply(this,arguments)}function pt(){return(pt=(0,l.Z)(function*(w,m,_=!1){const C=Et(w),x=go(C,m),ne=yield new An(C,x,_).execute();return ne&&!_&&(delete ne.user._redirectEventId,yield C._persistUserIfCurrent(ne.user),yield C._setRedirectUser(null,m)),ne})).apply(this,arguments)}function kt(w){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,l.Z)(function*(w){const m=ta(`${w.uid}:::`);return w._redirectEventId=m,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),m})).apply(this,arguments)}class Gn{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let _=!1;return this.consumers.forEach(C=>{this.isEventForConsumer(m,C)&&(_=!0,this.sendToConsumer(m,C),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function fa(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Bs(w);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=m,_=!0)),_}sendToConsumer(m,_){var C;if(m.error&&!Bs(m)){const x=(null===(C=m.error.code)||void 0===C?void 0:C.split("auth/")[1])||"internal-error";_.onError(Fe(this.auth,x))}else _.onAuthEvent(m)}isEventForConsumer(m,_){const C=null===_.eventId||!!m.eventId&&m.eventId===_.eventId;return _.filter.includes(m.type)&&C}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(_r(m))}saveEventToCache(m){this.cachedEventUids.add(_r(m)),this.lastProcessedEventTime=Date.now()}}function _r(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(m=>m).join("-")}function Bs({type:w,error:m}){return"unknown"===w&&"auth/no-auth-event"===m?.code}function Xr(w){return js.apply(this,arguments)}function js(){return(js=(0,l.Z)(function*(w,m={}){return Lt(w,"GET","/v1/projects",m)})).apply(this,arguments)}const yr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ni=/^https?/;function yo(){return(yo=(0,l.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:m}=yield Xr(w);for(const _ of m)try{if(tg(_))return}catch{}Ye(w,"unauthorized-domain")})).apply(this,arguments)}function tg(w){const m=Ve(),{protocol:_,hostname:C}=new URL(m);if(w.startsWith("chrome-extension://")){const ne=new URL(w);return""===ne.hostname&&""===C?"chrome-extension:"===_&&w.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===_&&ne.hostname===C}if(!Ni.test(_))return!1;if(yr.test(w))return C===w;const x=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(C)}const ws=new Ze(3e4,6e4);function ns(){const w=jn().___jsl;if(w?.H)for(const m of Object.keys(w.H))if(w.H[m].r=w.H[m].r||[],w.H[m].L=w.H[m].L||[],w.H[m].r=[...w.H[m].L],w.CP)for(let _=0;_<w.CP.length;_++)w.CP[_]=null}let Hs=null;function ng(w){return Hs=Hs||function $h(w){return new Promise((m,_)=>{var C,x,O;function ne(){ns(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{ns(),_(Fe(w,"network-request-failed"))},timeout:ws.get()})}if(null!==(x=null===(C=jn().gapi)||void 0===C?void 0:C.iframes)&&void 0!==x&&x.Iframe)m(gapi.iframes.getContext());else{if(null===(O=jn().gapi)||void 0===O||!O.load){const Se=ca("iframefcb");return jn()[Se]=()=>{gapi.load?ne():_(Fe(w,"network-request-failed"))},fo(`https://apis.google.com/js/api.js?onload=${Se}`).catch(it=>_(it))}ne()}}).catch(m=>{throw Hs=null,m})}(w),Hs}const Gh=new Ze(5e3,15e3),C_={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_D=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ig(w){const m=w.config;ie(m.authDomain,w,"auth-domain-config-required");const _=m.emulator?hn(m,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,C={apiKey:m.apiKey,appName:w.name,v:P.SDK_VERSION},x=_D.get(w.config.apiHost);x&&(C.eid=x);const O=w._getFrameworks();return O.length&&(C.fw=O.join(",")),`${_}?${(0,$.xO)(C).slice(1)}`}function qh(){return qh=(0,l.Z)(function*(w){const m=yield ng(w),_=jn().gapi;return ie(_,w,"internal-error"),m.open({where:document.body,url:ig(w),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:C_,dontclear:!0},C=>new Promise(function(){var x=(0,l.Z)(function*(O,ne){yield C.restyle({setHideOnLeave:!1});const Se=Fe(w,"network-request-failed"),it=jn().setTimeout(()=>{ne(Se)},Gh.get());function Tt(){jn().clearTimeout(it),O(C)}C.ping(Tt).then(Tt,()=>{ne(Se)})});return function(O,ne){return x.apply(this,arguments)}}()))}),qh.apply(this,arguments)}const Wh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class T_{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function pa(w,m,_,C,x,O){ie(w.config.authDomain,w,"auth-domain-config-required"),ie(w.config.apiKey,w,"invalid-api-key");const ne={apiKey:w.config.apiKey,appName:w.name,authType:_,redirectUrl:C,v:P.SDK_VERSION,eventId:x};if(m instanceof br){m.setDefaultLanguage(w.languageCode),ne.providerId=m.providerId||"",(0,$.xb)(m.getCustomParameters())||(ne.customParameters=JSON.stringify(m.getCustomParameters()));for(const[it,Tt]of Object.entries(O||{}))ne[it]=Tt}if(m instanceof $o){const it=m.getScopes().filter(Tt=>""!==Tt);it.length>0&&(ne.scopes=it.join(","))}w.tenantId&&(ne.tid=w.tenantId);const Se=ne;for(const it of Object.keys(Se))void 0===Se[it]&&delete Se[it];return`${function ld({config:w}){return w.emulator?hn(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,$.xO)(Se).slice(1)}`}const cd="webStorageSupport",Kh=class zh{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ls,this._completeRedirectFn=We,this._overrideRedirectResult=ts}_openPopup(m,_,C,x){var O=this;return(0,l.Z)(function*(){var ne;we(null===(ne=O.eventManagers[m._key()])||void 0===ne?void 0:ne.manager,"_initialize() not called before _openPopup()");const Se=pa(m,_,C,Ve(),x);return function Wu(w,m,_,C=500,x=600){const O=Math.max((window.screen.availHeight-x)/2,0).toString(),ne=Math.max((window.screen.availWidth-C)/2,0).toString();let Se="";const it=Object.assign(Object.assign({},Wh),{width:C.toString(),height:x.toString(),top:O,left:ne}),Tt=(0,$.z$)().toLowerCase();_&&(Se=re(Tt)?"_blank":_),k(Tt)&&(m=m||"http://localhost",it.scrollbars="yes");const Zt=Object.entries(it).reduce((Es,[wo,Qh])=>`${Es}${wo}=${Qh},`,"");if(function fn(w=(0,$.z$)()){var m;return Ue(w)&&!(null===(m=window.navigator)||void 0===m||!m.standalone)}(Tt)&&"_self"!==Se)return function ru(w,m){const _=document.createElement("a");_.href=w,_.target=m;const C=document.createEvent("MouseEvent");C.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(C)}(m||"",Se),new T_(null);const xn=window.open(m||"",Se,Zt);ie(xn,w,"popup-blocked");try{xn.focus()}catch{}return new T_(xn)}(m,Se,ta())})()}_openRedirect(m,_,C,x){var O=this;return(0,l.Z)(function*(){return yield O._originValidation(m),function td(w){jn().location.href=w}(pa(m,_,C,Ve(),x)),new Promise(()=>{})})()}_initialize(m){const _=m._key();if(this.eventManagers[_]){const{manager:x,promise:O}=this.eventManagers[_];return x?Promise.resolve(x):(we(O,"If manager is not set, promise should be"),O)}const C=this.initAndGetManager(m);return this.eventManagers[_]={promise:C},C.catch(()=>{delete this.eventManagers[_]}),C}initAndGetManager(m){var _=this;return(0,l.Z)(function*(){const C=yield function Vw(w){return qh.apply(this,arguments)}(m),x=new Gn(m);return C.register("authEvent",O=>(ie(O?.authEvent,m,"invalid-auth-event"),{status:x.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[m._key()]={manager:x},_.iframes[m._key()]=C,x})()}_isIframeWebStorageSupported(m,_){this.iframes[m._key()].send(cd,{type:cd},x=>{var O;const ne=null===(O=x?.[0])||void 0===O?void 0:O[cd];void 0!==ne&&_(!!ne),Ye(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const _=m._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function vs(w){return yo.apply(this,arguments)}(m)),this.originValidationPromises[_]}get _shouldInitProactively(){return pn()||B()||Ue()}};class hd extends class dd{constructor(m){this.factorId=m}_process(m,_,C){switch(_.type){case"enroll":return this._finalizeEnroll(m,_.credential,C);case"signin":return this._finalizeSignIn(m,_.credential);default:return ce("unexpected MultiFactorSessionType")}}}{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new hd(m)}_finalizeEnroll(m,_,C){return function Fu(w,m){return Lt(w,"POST","/v2/accounts/mfaEnrollment:finalize",qt(w,m))}(m,{idToken:_,displayName:C,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,_){return function ua(w,m){return Lt(w,"POST","/v2/accounts/mfaSignIn:finalize",qt(w,m))}(m,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let vo=(()=>{class w{constructor(){}static assertion(_){return hd._fromCredential(_)}}return w.FACTOR_ID="phone",w})();var su="@firebase/auth",fd="0.20.11";class yD{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var _=this;return(0,l.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const _=this.auth.onIdTokenChanged(C=>{var x;m((null===(x=C)||void 0===x?void 0:x.stsTokenManager.accessToken)||null)});this.internalListeners.set(m,_),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const _=this.internalListeners.get(m);!_||(this.internalListeners.delete(m),_(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Yh=(0,$.Pz)("authIdTokenMaxAge")||300;let ou=null;const pd=w=>function(){var m=(0,l.Z)(function*(_){const C=_&&(yield _.getIdTokenResult()),x=C&&((new Date).getTime()-Date.parse(C.issuedAtTime))/1e3;if(x&&x>Yh)return;const O=C?.token;ou!==O&&(ou=O,yield fetch(w,{method:O?"POST":"DELETE",headers:O?{Authorization:`Bearer ${O}`}:{}}))});return function(_){return m.apply(this,arguments)}}();function gd(w=(0,P.getApp)()){const m=(0,P._getProvider)(w,"auth");if(m.isInitialized())return m.getImmediate();const _=function pe(w,m){const _=(0,P._getProvider)(w,"auth");if(_.isInitialized()){const x=_.getImmediate(),O=_.getOptions();if((0,$.vZ)(O,m??{}))return x;Ye(x,"already-initialized")}return _.initialize({options:m})}(w,{popupRedirectResolver:Kh,persistence:[aa,ir,Ls]}),C=(0,$.Pz)("authTokenSyncURL");if(C){const O=pd(C);(function Ou(w,m,_){(0,$.m9)(w).beforeAuthStateChanged(m,_)})(_,O,()=>O(_.currentUser)),function Ll(w,m,_,C){(0,$.m9)(w).onIdTokenChanged(m,_,C)}(_,ne=>O(ne))}const x=(0,$.q4)("auth");return x&&no(_,`http://${x}`),_}!function Bw(w){(0,P._registerComponent)(new _e.wA("auth",(m,{options:_})=>{const C=m.getProvider("app").getImmediate(),x=m.getProvider("heartbeat"),{apiKey:O,authDomain:ne}=C.options;return((Se,it)=>{ie(O&&!O.includes(":"),"invalid-api-key",{appName:Se.name}),ie(!ne?.includes(":"),"argument-error",{appName:Se.name});const Tt={apiKey:O,authDomain:ne,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Dn(w)},Zt=new Uo(Se,it,Tt);return function oe(w,m){const _=m?.persistence||[],C=(Array.isArray(_)?_:[_]).map(ee);m?.errorMap&&w._updateErrorMap(m.errorMap),w._initializeWithPersistence(C,m?.popupRedirectResolver)}(Zt,_),Zt})(C,x)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,_,C)=>{m.getProvider("auth-internal").initialize()})),(0,P._registerComponent)(new _e.wA("auth-internal",m=>{const _=Et(m.getProvider("auth").getImmediate());return new yD(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,P.registerVersion)(su,fd,function vD(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,P.registerVersion)(su,fd,"esm2017")}("Browser")},2090:(ct,Ae,U)=>{U.d(Ae,{$s:()=>tt,BH:()=>Bt,DV:()=>Un,Dv:()=>Hr,G6:()=>Ie,GJ:()=>Zi,L:()=>fe,LL:()=>tn,Pz:()=>an,Sg:()=>Ze,UG:()=>Te,UI:()=>zi,US:()=>_e,Wj:()=>St,Wl:()=>Cr,Yr:()=>Re,ZB:()=>W,ZR:()=>In,aH:()=>gt,b$:()=>me,cI:()=>Lt,dS:()=>Nt,eu:()=>ie,g5:()=>P,gK:()=>zn,gQ:()=>En,h$:()=>ge,hl:()=>qe,hu:()=>$,jU:()=>rt,lb:()=>kr,m9:()=>Xt,ne:()=>Tn,p$:()=>z,pd:()=>Xs,q4:()=>Ve,r3:()=>jr,ru:()=>Ce,tV:()=>ve,uI:()=>Pe,ug:()=>Zr,vZ:()=>Qe,w1:()=>Ye,w9:()=>Wi,xO:()=>wn,xb:()=>Ti,z$:()=>je,zI:()=>ce,zd:()=>gr});const $=function(Z,q){if(!Z)throw P(q)},P=function(Z){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Z)},se=function(Z){const q=[];let Y=0;for(let H=0;H<Z.length;H++){let k=Z.charCodeAt(H);k<128?q[Y++]=k:k<2048?(q[Y++]=k>>6|192,q[Y++]=63&k|128):55296==(64512&k)&&H+1<Z.length&&56320==(64512&Z.charCodeAt(H+1))?(k=65536+((1023&k)<<10)+(1023&Z.charCodeAt(++H)),q[Y++]=k>>18|240,q[Y++]=k>>12&63|128,q[Y++]=k>>6&63|128,q[Y++]=63&k|128):(q[Y++]=k>>12|224,q[Y++]=k>>6&63|128,q[Y++]=63&k|128)}return q},_e={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Z,q){if(!Array.isArray(Z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Y=q?this.byteToCharMapWebSafe_:this.byteToCharMap_,H=[];for(let k=0;k<Z.length;k+=3){const B=Z[k],re=k+1<Z.length,Oe=re?Z[k+1]:0,st=k+2<Z.length,ot=st?Z[k+2]:0;let Mt=(15&Oe)<<2|ot>>6,fn=63&ot;st||(fn=64,re||(Mt=64)),H.push(Y[B>>2],Y[(3&B)<<4|Oe>>4],Y[Mt],Y[fn])}return H.join("")},encodeString(Z,q){return this.HAS_NATIVE_SUPPORT&&!q?btoa(Z):this.encodeByteArray(se(Z),q)},decodeString(Z,q){return this.HAS_NATIVE_SUPPORT&&!q?atob(Z):function(Z){const q=[];let Y=0,H=0;for(;Y<Z.length;){const k=Z[Y++];if(k<128)q[H++]=String.fromCharCode(k);else if(k>191&&k<224){const B=Z[Y++];q[H++]=String.fromCharCode((31&k)<<6|63&B)}else if(k>239&&k<365){const st=((7&k)<<18|(63&Z[Y++])<<12|(63&Z[Y++])<<6|63&Z[Y++])-65536;q[H++]=String.fromCharCode(55296+(st>>10)),q[H++]=String.fromCharCode(56320+(1023&st))}else{const B=Z[Y++],re=Z[Y++];q[H++]=String.fromCharCode((15&k)<<12|(63&B)<<6|63&re)}}return q.join("")}(this.decodeStringToByteArray(Z,q))},decodeStringToByteArray(Z,q){this.init_();const Y=q?this.charToByteMapWebSafe_:this.charToByteMap_,H=[];for(let k=0;k<Z.length;){const B=Y[Z.charAt(k++)],Oe=k<Z.length?Y[Z.charAt(k)]:0;++k;const ot=k<Z.length?Y[Z.charAt(k)]:64;++k;const Ue=k<Z.length?Y[Z.charAt(k)]:64;if(++k,null==B||null==Oe||null==ot||null==Ue)throw Error();H.push(B<<2|Oe>>4),64!==ot&&(H.push(Oe<<4&240|ot>>2),64!==Ue&&H.push(ot<<6&192|Ue))}return H},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Z=0;Z<this.ENCODED_VALS.length;Z++)this.byteToCharMap_[Z]=this.ENCODED_VALS.charAt(Z),this.charToByteMap_[this.byteToCharMap_[Z]]=Z,this.byteToCharMapWebSafe_[Z]=this.ENCODED_VALS_WEBSAFE.charAt(Z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Z]]=Z,Z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Z)]=Z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Z)]=Z)}}},ge=function(Z){const q=se(Z);return _e.encodeByteArray(q,!0)},fe=function(Z){return ge(Z).replace(/\./g,"")},ve=function(Z){try{return _e.decodeString(Z,!0)}catch(q){console.error("base64Decode failed: ",q)}return null};function z(Z){return W(void 0,Z)}function W(Z,q){if(!(q instanceof Object))return q;switch(q.constructor){case Date:return new Date(q.getTime());case Object:void 0===Z&&(Z={});break;case Array:Z=[];break;default:return q}for(const Y in q)!q.hasOwnProperty(Y)||!X(Y)||(Z[Y]=W(Z[Y],q[Y]));return Z}function X(Z){return"__proto__"!==Z}function je(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Pe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(je())}function Te(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function rt(){return"object"==typeof self&&self.self===self}function Ce(){const Z="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Z&&void 0!==Z.id}function me(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ye(){const Z=je();return Z.indexOf("MSIE ")>=0||Z.indexOf("Trident/")>=0}function Re(){return!1}function Ie(){return!Te()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qe(){return"object"==typeof indexedDB}function ie(){return new Promise((Z,q)=>{try{let Y=!0;const H="validate-browser-context-for-indexeddb-analytics-module",k=self.indexedDB.open(H);k.onsuccess=()=>{k.result.close(),Y||self.indexedDB.deleteDatabase(H),Z(!0)},k.onupgradeneeded=()=>{Y=!1},k.onerror=()=>{var B;q((null===(B=k.error)||void 0===B?void 0:B.message)||"")}}catch(Y){q(Y)}})}function ce(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const oe=()=>{try{return function we(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const Z=process.env.__FIREBASE_DEFAULTS__;return Z?JSON.parse(Z):void 0})()||(()=>{if(typeof document>"u")return;let Z;try{Z=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const q=Z&&ve(Z[1]);return q&&JSON.parse(q)})()}catch(Z){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Z}`)}},Ve=Z=>{var q,Y;return null===(Y=null===(q=oe())||void 0===q?void 0:q.emulatorHosts)||void 0===Y?void 0:Y[Z]},gt=()=>{var Z;return null===(Z=oe())||void 0===Z?void 0:Z.config},an=Z=>{var q;return null===(q=oe())||void 0===q?void 0:q[`_${Z}`]};class Bt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((q,Y)=>{this.resolve=q,this.reject=Y})}wrapCallback(q){return(Y,H)=>{Y?this.reject(Y):this.resolve(H),"function"==typeof q&&(this.promise.catch(()=>{}),1===q.length?q(Y):q(Y,H))}}}function Ze(Z,q){if(Z.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const H=q||"demo-project",k=Z.iat||0,B=Z.sub||Z.user_id;if(!B)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const re=Object.assign({iss:`https://securetoken.google.com/${H}`,aud:H,iat:k,exp:k+3600,auth_time:k,sub:B,user_id:B,firebase:{sign_in_provider:"custom",identities:{}}},Z);return[fe(JSON.stringify({alg:"none",type:"JWT"})),fe(JSON.stringify(re)),""].join(".")}class In extends Error{constructor(q,Y,H){super(Y),this.code=q,this.customData=H,this.name="FirebaseError",Object.setPrototypeOf(this,In.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tn.prototype.create)}}class tn{constructor(q,Y,H){this.service=q,this.serviceName=Y,this.errors=H}create(q,...Y){const H=Y[0]||{},k=`${this.service}/${q}`,B=this.errors[q],re=B?function nn(Z,q){return Z.replace(qt,(Y,H)=>{const k=q[H];return null!=k?String(k):`<${H}?>`})}(B,H):"Error";return new In(k,`${this.serviceName}: ${re} (${k}).`,H)}}const qt=/\{\$([^}]+)}/g;function Lt(Z){return JSON.parse(Z)}function Cr(Z){return JSON.stringify(Z)}const qi=function(Z){let q={},Y={},H={},k="";try{const B=Z.split(".");q=Lt(ve(B[0])||""),Y=Lt(ve(B[1])||""),k=B[2],H=Y.d||{},delete Y.d}catch{}return{header:q,claims:Y,data:H,signature:k}},Wi=function(Z){const Y=qi(Z).claims;return!!Y&&"object"==typeof Y&&Y.hasOwnProperty("iat")},Zi=function(Z){const q=qi(Z).claims;return"object"==typeof q&&!0===q.admin};function jr(Z,q){return Object.prototype.hasOwnProperty.call(Z,q)}function Un(Z,q){if(Object.prototype.hasOwnProperty.call(Z,q))return Z[q]}function Ti(Z){for(const q in Z)if(Object.prototype.hasOwnProperty.call(Z,q))return!1;return!0}function zi(Z,q,Y){const H={};for(const k in Z)Object.prototype.hasOwnProperty.call(Z,k)&&(H[k]=q.call(Y,Z[k],k,Z));return H}function Qe(Z,q){if(Z===q)return!0;const Y=Object.keys(Z),H=Object.keys(q);for(const k of Y){if(!H.includes(k))return!1;const B=Z[k],re=q[k];if(er(B)&&er(re)){if(!Qe(B,re))return!1}else if(B!==re)return!1}for(const k of H)if(!Y.includes(k))return!1;return!0}function er(Z){return null!==Z&&"object"==typeof Z}function wn(Z){const q=[];for(const[Y,H]of Object.entries(Z))Array.isArray(H)?H.forEach(k=>{q.push(encodeURIComponent(Y)+"="+encodeURIComponent(k))}):q.push(encodeURIComponent(Y)+"="+encodeURIComponent(H));return q.length?"&"+q.join("&"):""}function gr(Z){const q={};return Z.replace(/^\?/,"").split("&").forEach(H=>{if(H){const[k,B]=H.split("=");q[decodeURIComponent(k)]=decodeURIComponent(B)}}),q}function Xs(Z){const q=Z.indexOf("?");if(!q)return"";const Y=Z.indexOf("#",q);return Z.substring(q,Y>0?Y:void 0)}class En{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let q=1;q<this.blockSize;++q)this.pad_[q]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(q,Y){Y||(Y=0);const H=this.W_;if("string"==typeof q)for(let Ue=0;Ue<16;Ue++)H[Ue]=q.charCodeAt(Y)<<24|q.charCodeAt(Y+1)<<16|q.charCodeAt(Y+2)<<8|q.charCodeAt(Y+3),Y+=4;else for(let Ue=0;Ue<16;Ue++)H[Ue]=q[Y]<<24|q[Y+1]<<16|q[Y+2]<<8|q[Y+3],Y+=4;for(let Ue=16;Ue<80;Ue++){const Mt=H[Ue-3]^H[Ue-8]^H[Ue-14]^H[Ue-16];H[Ue]=4294967295&(Mt<<1|Mt>>>31)}let ot,xe,k=this.chain_[0],B=this.chain_[1],re=this.chain_[2],Oe=this.chain_[3],st=this.chain_[4];for(let Ue=0;Ue<80;Ue++){Ue<40?Ue<20?(ot=Oe^B&(re^Oe),xe=1518500249):(ot=B^re^Oe,xe=1859775393):Ue<60?(ot=B&re|Oe&(B|re),xe=2400959708):(ot=B^re^Oe,xe=3395469782);const Mt=(k<<5|k>>>27)+ot+st+xe+H[Ue]&4294967295;st=Oe,Oe=re,re=4294967295&(B<<30|B>>>2),B=k,k=Mt}this.chain_[0]=this.chain_[0]+k&4294967295,this.chain_[1]=this.chain_[1]+B&4294967295,this.chain_[2]=this.chain_[2]+re&4294967295,this.chain_[3]=this.chain_[3]+Oe&4294967295,this.chain_[4]=this.chain_[4]+st&4294967295}update(q,Y){if(null==q)return;void 0===Y&&(Y=q.length);const H=Y-this.blockSize;let k=0;const B=this.buf_;let re=this.inbuf_;for(;k<Y;){if(0===re)for(;k<=H;)this.compress_(q,k),k+=this.blockSize;if("string"==typeof q){for(;k<Y;)if(B[re]=q.charCodeAt(k),++re,++k,re===this.blockSize){this.compress_(B),re=0;break}}else for(;k<Y;)if(B[re]=q[k],++re,++k,re===this.blockSize){this.compress_(B),re=0;break}}this.inbuf_=re,this.total_+=Y}digest(){const q=[];let Y=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let k=this.blockSize-1;k>=56;k--)this.buf_[k]=255&Y,Y/=256;this.compress_(this.buf_);let H=0;for(let k=0;k<5;k++)for(let B=24;B>=0;B-=8)q[H]=this.chain_[k]>>B&255,++H;return q}}function Tn(Z,q){const Y=new yn(Z,q);return Y.subscribe.bind(Y)}class yn{constructor(q,Y){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Y,this.task.then(()=>{q(this)}).catch(H=>{this.error(H)})}next(q){this.forEachObserver(Y=>{Y.next(q)})}error(q){this.forEachObserver(Y=>{Y.error(q)}),this.close(q)}complete(){this.forEachObserver(q=>{q.complete()}),this.close()}subscribe(q,Y,H){let k;if(void 0===q&&void 0===Y&&void 0===H)throw new Error("Missing Observer.");k=function _t(Z,q){if("object"!=typeof Z||null===Z)return!1;for(const Y of q)if(Y in Z&&"function"==typeof Z[Y])return!0;return!1}(q,["next","error","complete"])?q:{next:q,error:Y,complete:H},void 0===k.next&&(k.next=xt),void 0===k.error&&(k.error=xt),void 0===k.complete&&(k.complete=xt);const B=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?k.error(this.finalError):k.complete()}catch{}}),this.observers.push(k),B}unsubscribeOne(q){void 0===this.observers||void 0===this.observers[q]||(delete this.observers[q],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(q){if(!this.finalized)for(let Y=0;Y<this.observers.length;Y++)this.sendOne(Y,q)}sendOne(q,Y){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[q])try{Y(this.observers[q])}catch(H){typeof console<"u"&&console.error&&console.error(H)}})}close(q){this.finalized||(this.finalized=!0,void 0!==q&&(this.finalError=q),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xt(){}const Hr=function(Z,q,Y,H){let k;if(H<q?k="at least "+q:H>Y&&(k=0===Y?"none":"no more than "+Y),k)throw new Error(Z+" failed: Was called with "+H+(1===H?" argument.":" arguments.")+" Expects "+k+".")};function zn(Z,q){return`${Z} failed: ${q} argument `}function St(Z,q,Y,H){if((!H||Y)&&"function"!=typeof Y)throw new Error(zn(Z,q)+"must be a valid function.")}function kr(Z,q,Y,H){if((!H||Y)&&("object"!=typeof Y||null===Y))throw new Error(zn(Z,q)+"must be a valid context object.")}const Nt=function(Z){const q=[];let Y=0;for(let H=0;H<Z.length;H++){let k=Z.charCodeAt(H);if(k>=55296&&k<=56319){const B=k-55296;H++,$(H<Z.length,"Surrogate pair missing trail surrogate."),k=65536+(B<<10)+(Z.charCodeAt(H)-56320)}k<128?q[Y++]=k:k<2048?(q[Y++]=k>>6|192,q[Y++]=63&k|128):k<65536?(q[Y++]=k>>12|224,q[Y++]=k>>6&63|128,q[Y++]=63&k|128):(q[Y++]=k>>18|240,q[Y++]=k>>12&63|128,q[Y++]=k>>6&63|128,q[Y++]=63&k|128)}return q},Zr=function(Z){let q=0;for(let Y=0;Y<Z.length;Y++){const H=Z.charCodeAt(Y);H<128?q++:H<2048?q+=2:H>=55296&&H<=56319?(q+=4,Y++):q+=3}return q};function tt(Z,q=1e3,Y=2){const H=q*Math.pow(Y,Z),k=Math.round(.5*H*(Math.random()-.5)*2);return Math.min(144e5,H+k)}function Xt(Z){return Z&&Z._delegate?Z._delegate:Z}},7233:(ct,Ae,U)=>{var l=U(4650);let $=null;function P(){return $}const ge=new l.OlP("DocumentToken");let fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return function ve(){return(0,l.LFG)(W)}()},providedIn:"platform"}),n})();const z=new l.OlP("Location Initialized");let W=(()=>{class n extends fe{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){X()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){X()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ge))},n.\u0275prov=l.Yz7({token:n,factory:function(){return function je(){return new W((0,l.LFG)(ge))}()},providedIn:"platform"}),n})();function X(){return!!window.history.pushState}function Pe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Te(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function rt(n){return n&&"?"!==n[0]?"?"+n:n}let Ce=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return(0,l.f3M)(Je)},providedIn:"root"}),n})();const me=new l.OlP("appBaseHref");let Je=(()=>{class n extends Ce{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,l.f3M)(ge).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Pe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+rt(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const c=this.prepareExternalUrl(i+rt(a));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){const c=this.prepareExternalUrl(i+rt(a));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(fe),l.LFG(me,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ye=(()=>{class n extends Ce{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Pe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let c=this.prepareExternalUrl(i+rt(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){let c=this.prepareExternalUrl(i+rt(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(fe),l.LFG(me,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Fe=(()=>{class n{constructor(t){this._subject=new l.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=Te(qe(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+rt(r))}normalize(t){return n.stripTrailingSlash(function Ie(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,qe(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+rt(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+rt(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=rt,n.joinWithSlash=Pe,n.stripTrailingSlash=Te,n.\u0275fac=function(t){return new(t||n)(l.LFG(Ce))},n.\u0275prov=l.Yz7({token:n,factory:function(){return function Re(){return new Fe((0,l.LFG)(Ce))}()},providedIn:"root"}),n})();function qe(n){return n.replace(/\/index.html$/,"")}function xu(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}class io{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ui=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new io(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===a?void 0:a);else if(null!==a){const h=r.get(a);r.move(h,c),so(h,i)}});for(let i=0,a=r.length;i<a;i++){const h=r.get(i).context;h.index=i,h.count=a,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{so(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.s_b),l.Y36(l.Rgc),l.Y36(l.ZZ4))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function so(n,e){n.context.$implicit=e.item}let en=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Dh,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){tr("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){tr("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.s_b),l.Y36(l.Rgc))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Dh{constructor(){this.$implicit=null,this.ngIf=null}}function tr(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,l.AaK)(e)}'.`)}let Sh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();function qo(n){return"server"===n}let Gc=(()=>{class n{}return n.\u0275prov=(0,l.Yz7)({token:n,providedIn:"root",factory:()=>new Ah((0,l.LFG)(ge),window)}),n})();class Ah{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Ir(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const c=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Si(this.window.history)||Si(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Si(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class uo{}class Os extends class Kc extends class _e{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ue(n){$||($=n)}(new Os)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Yc(){return Fs=Fs||document.querySelector("base"),Fs?Fs.getAttribute("href"):null}();return null==t?null:function ps(n){kn=kn||document.createElement("a"),kn.setAttribute("href",n);const e=kn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Fs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return xu(document.cookie,e)}}let kn,Fs=null;const Nn=new l.OlP("TRANSITION_ID"),Pl=[{provide:l.ip1,useFactory:function Nl(n,e,t){return()=>{t.get(l.CZH).donePromise.then(()=>{const r=P(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[Nn,ge,l.zs3],multi:!0}];let Ol=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const Fl=new l.OlP("EventManagerPlugins");let Ll=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const c=i[a];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Fl),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class Ou{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=P().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Jo=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Xo=(()=>{class n extends Jo{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const c=this._doc.createElement("style");c.textContent=a,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Qc),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Qc))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ge))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function Qc(n){P().remove(n)}const ea={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Jc=/%COMP%/g;function Lu(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Lu(n,i,t):(i=i.replace(Jc,n),t.push(i))}return t}function Uu(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Vu=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new gs(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case l.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new ed(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case l.ifc.ShadowDom:return new Fh(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Lu(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Ll),l.LFG(Xo),l.LFG(l.AFp))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class gs{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ea[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(qa(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(qa(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=ea[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=ea[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(l.JOm.DashCase|l.JOm.Important)?e.style.setProperty(t,r,i&l.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&l.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Uu(r)):this.eventManager.addEventListener(e,t,Uu(r))}}function qa(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class ed extends gs{constructor(e,t,r,i){super(e),this.component=r;const a=Lu(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function Bn(n){return"_ngcontent-%COMP%".replace(Jc,n)}(i+"-"+r.id),this.hostAttr=function Fu(n){return"_nghost-%COMP%".replace(Jc,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Fh extends gs{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Lu(i.id,i.styles,[]);for(let c=0;c<a.length;c++){const h=document.createElement("style");h.textContent=a[c],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let ir=(()=>{class n extends Ou{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ge))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const Lh=["alt","control","meta","shift"],Ls={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Bl={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Wa=(()=>{class n extends Ou{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),c=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,a.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let c="",h=r.indexOf("code");if(h>-1&&(r.splice(h,1),c="code."),Lh.forEach(y=>{const I=r.indexOf(y);I>-1&&(r.splice(I,1),c+=y+".")}),c+=a,0!=r.length||0===a.length)return null;const g={};return g.domEventName=i,g.fullKey=c,g}static matchEventFullKeyCode(t,r){let i=Ls[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Lh.forEach(c=>{c!==i&&(0,Bl[c])(t)&&(a+=c+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ge))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const Za=(0,l.eFA)(l._c5,"browser",[{provide:l.Lbi,useValue:"browser"},{provide:l.g9A,useValue:function nd(){Os.makeCurrent()},multi:!0},{provide:ge,useFactory:function jl(){return(0,l.RDi)(document),document},deps:[]}]),ho=new l.OlP(""),za=[{provide:l.rWj,useClass:class Ph{addToWindow(e){l.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},l.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),l.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),l.dqk.frameworkStabilizers||(l.dqk.frameworkStabilizers=[]),l.dqk.frameworkStabilizers.push(r=>{const i=l.dqk.getAllAngularTestabilities();let a=i.length,c=!1;const h=function(g){c=c||g,a--,0==a&&r(c)};i.forEach(function(g){g.whenStable(h)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:l.lri,useClass:l.dDg,deps:[l.R0b,l.eoX,l.rWj]},{provide:l.dDg,useClass:l.dDg,deps:[l.R0b,l.eoX,l.rWj]}],na=[{provide:l.zSh,useValue:"root"},{provide:l.qLn,useFactory:function ms(){return new l.qLn},deps:[]},{provide:Fl,useClass:ir,multi:!0,deps:[ge,l.R0b,l.Lbi]},{provide:Fl,useClass:Wa,multi:!0,deps:[ge]},{provide:Vu,useClass:Vu,deps:[Ll,Xo,l.AFp]},{provide:l.FYo,useExisting:Vu},{provide:Jo,useExisting:Xo},{provide:Xo,useClass:Xo,deps:[ge]},{provide:Ll,useClass:Ll,deps:[Fl,l.R0b]},{provide:uo,useClass:Ol,deps:[]},[]];let ra=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:l.AFp,useValue:t.appId},{provide:Nn,useExisting:l.AFp},Pl]}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ho,12))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[...na,...za],imports:[Sh,l.hGG]}),n})(),Qi=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ge))},n.\u0275prov=l.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Ka(){return new Qi((0,l.LFG)(ge))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var rn=U(8996),Tr=U(9751);const{isArray:Gl}=Array,{getPrototypeOf:sd,prototype:Pr,keys:_s}=Object;function Ya(n){if(1===n.length){const e=n[0];if(Gl(e))return{args:e,keys:null};if(function po(n){return n&&"object"==typeof n&&sd(n)===Pr}(e)){const t=_s(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var xi=U(8421),Vs=U(3269),Hn=U(5403),yt=U(4004);const{isArray:go}=Array;function Qa(n){return(0,yt.U)(e=>function od(n,e){return go(e)?n(...e):n(e)}(n,e))}function Or(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}let Mi=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Qsj),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n}),n})(),ys=(()=>{class n extends Mi{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=l.n5z(n)))(r||n)}}(),n.\u0275dir=l.lG2({type:n,features:[l.qOj]}),n})();const Jr=new l.OlP("NgValueAccessor"),Wl={provide:Jr,useExisting:(0,l.Gpc)(()=>Xi),multi:!0};let Xi=(()=>{class n extends ys{writeValue(t){this.setProperty("checked",t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=l.n5z(n)))(r||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,r){1&t&&l.NdJ("change",function(a){return r.onChange(a.target.checked)})("blur",function(){return r.onTouched()})},features:[l._Bn([Wl]),l.qOj]}),n})();const Zl={provide:Jr,useExisting:(0,l.Gpc)(()=>Gr),multi:!0},eg=new l.OlP("CompositionEventMode");let Gr=(()=>{class n extends Mi{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Ja(){const n=P()?P().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Qsj),l.Y36(l.SBq),l.Y36(eg,8))},n.\u0275dir=l.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&l.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[l._Bn([Zl]),l.qOj]}),n})();const An=new l.OlP("NgValidators"),ki=new l.OlP("NgAsyncValidators");function ts(n){return function Ri(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}(n.value)?{required:!0}:null}function tu(n){return null}function T(n){return null!=n}function D(n){return(0,l.QGY)(n)?(0,rn.D)(n):n}function M(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function j(n,e){return e.map(t=>t(n))}function ae(n){return n.map(e=>function J(n){return!n.validate}(e)?e:t=>e.validate(t))}function We(n){return null!=n?function Me(n){if(!n)return null;const e=n.filter(T);return 0==e.length?null:function(t){return M(j(t,e))}}(ae(n)):null}function kt(n){return null!=n?function pt(n){if(!n)return null;const e=n.filter(T);return 0==e.length?null:function(t){return function ql(...n){const e=(0,Vs.jO)(n),{args:t,keys:r}=Ya(n),i=new Tr.y(a=>{const{length:c}=t;if(!c)return void a.complete();const h=new Array(c);let g=c,y=c;for(let I=0;I<c;I++){let S=!1;(0,xi.Xf)(t[I]).subscribe((0,Hn.x)(a,R=>{S||(S=!0,y--),h[I]=R},()=>g--,void 0,()=>{(!g||!S)&&(y||a.next(r?Or(r,h):h),a.complete())}))}});return e?i.pipe(Qa(e)):i}(j(t,e).map(D)).pipe((0,yt.U)(M))}}(ae(n)):null}function Ut(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function _r(n){return n?Array.isArray(n)?n:[n]:[]}function Bs(n,e){return Array.isArray(n)?n.includes(e):n===e}function fa(n,e){const t=_r(e);return _r(n).forEach(i=>{Bs(t,i)||t.push(i)}),t}function Xr(n,e){return _r(e).filter(t=>!Bs(n,t))}class js{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=We(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=kt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class yr extends js{get formDirective(){return null}get path(){return null}}class Ni extends js{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class vs{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let ws=(()=>{class n extends vs{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Ni,2))},n.\u0275dir=l.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&l.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[l.qOj]}),n})(),ns=(()=>{class n extends vs{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(yr,10))},n.\u0275dir=l.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&l.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[l.qOj]}),n})();const ru="VALID",Kl="INVALID",iu="PENDING",pa="DISABLED";function ld(n){return(dd(n)?n.validators:n)||null}function cd(n){return Array.isArray(n)?We(n):n||null}function zh(n,e){return(dd(e)?e.asyncValidators:n)||null}function Kh(n){return Array.isArray(n)?kt(n):n||null}function dd(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class su{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=cd(this._rawValidators),this._composedAsyncValidatorFn=Kh(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===ru}get invalid(){return this.status===Kl}get pending(){return this.status==iu}get disabled(){return this.status===pa}get enabled(){return this.status!==pa}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=cd(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Kh(e)}addValidators(e){this.setValidators(fa(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(fa(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Xr(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Xr(e,this._rawAsyncValidators))}hasValidator(e){return Bs(this._rawValidators,e)}hasAsyncValidator(e){return Bs(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=iu,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=pa,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=ru,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ru||this.status===iu)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?pa:ru}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=iu,this._hasOwnPendingAsyncValidator=!0;const t=D(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new l.vpe,this.statusChanges=new l.vpe}_calculateStatus(){return this._allControlsDisabled()?pa:this.errors?Kl:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(iu)?iu:this._anyControlsHaveStatus(Kl)?Kl:ru}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){dd(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class fd extends su{constructor(e,t,r){super(ld(t),zh(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function vo(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new l.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function hd(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new l.vHH(1e3,"");if(!r[t])throw new l.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function ou(n,e){m(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function C(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&O(n,e)})}(n,e),function ne(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function x(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&O(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function w(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function gd(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function m(n,e){const t=function wt(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(Ut(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function Gn(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(Ut(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();gd(e._rawValidators,i),gd(e._rawAsyncValidators,i)}function O(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const Jh={provide:yr,useExisting:(0,l.Gpc)(()=>Fr)},au=(()=>Promise.resolve())();let Fr=(()=>{class n extends yr{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new l.vpe,this.form=new fd({},We(t),kt(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){au.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),ou(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){au.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){au.then(()=>{const r=this._findContainer(t.path),i=new fd({});(function Se(n,e){m(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){au.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){au.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function md(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(An,10),l.Y36(ki,10))},n.\u0275dir=l.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&l.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[l._Bn([Jh]),l.qOj]}),n})();function _d(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function Ql(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const og=class extends su{constructor(e=null,t,r){super(ld(t),zh(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),dd(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=Ql(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){_d(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){_d(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){Ql(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},bD={provide:Ni,useExisting:(0,l.Gpc)(()=>Eo)},ID=(()=>Promise.resolve())();let Eo=(()=>{class n extends Ni{constructor(t,r,i,a,c){super(),this._changeDetectorRef=c,this.control=new og,this._registered=!1,this.update=new l.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function Yl(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===Gr?t=a:function Qh(n){return Object.getPrototypeOf(n.constructor)===ys}(a)?r=a:i=a}),i||r||t||null}(0,a)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function wo(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ou(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){ID.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,l.D6c)(r);ID.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function Yh(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(yr,9),l.Y36(An,10),l.Y36(ki,10),l.Y36(Jr,10),l.Y36(l.sBO,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[l._Bn([bD]),l.qOj,l.TTD]}),n})(),Pi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=l.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),qw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})(),Jl=(()=>{class n{constructor(){this._validator=tu}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):tu,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=l.lG2({type:n,features:[l.TTD]}),n})();const kD={provide:An,useExisting:(0,l.Gpc)(()=>ei),multi:!0};let ei=(()=>{class n extends Jl{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=l.D6c,this.createValidator=t=>ts}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=l.n5z(n)))(r||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&l.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[l._Bn([kD]),l.qOj]}),n})(),ZN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[qw]}),n})(),zN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[ZN]}),n})();function dt(...n){const e=(0,Vs.yG)(n);return(0,rn.D)(n,e)}var Co=U(7579);class $s extends Co.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const hg=(0,U(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var zu=U(4671),ef=U(9672);function oE(...n){const e=(0,Vs.yG)(n),t=(0,Vs.jO)(n),{args:r,keys:i}=Ya(n);if(0===r.length)return(0,rn.D)([],e);const a=new Tr.y(function FD(n,e,t=zu.y){return r=>{aE(e,()=>{const{length:i}=n,a=new Array(i);let c=i,h=i;for(let g=0;g<i;g++)aE(e,()=>{const y=(0,rn.D)(n[g],e);let I=!1;y.subscribe((0,Hn.x)(r,S=>{a[g]=S,I||(I=!0,h--),h||r.next(t(a.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>Or(i,c):zu.y));return t?a.pipe(Qa(t)):a}function aE(n,e,t){n?(0,ef.f)(t,n,e):e()}var Ed=U(8189);function H_(...n){return function LD(){return(0,Ed.J)(1)}()((0,rn.D)(n,(0,Vs.yG)(n)))}function uE(n){return new Tr.y(e=>{(0,xi.Xf)(n()).subscribe(e)})}var UD=U(9635),tf=U(576);function nf(n,e){const t=(0,tf.m)(n)?n:()=>n,r=i=>i.error(t());return new Tr.y(e?i=>e.schedule(r,0,i):r)}var Xl=U(515),lE=U(727),Lr=U(4482);function $_(){return(0,Lr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Hn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class cE extends Tr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Lr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new lE.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Hn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=lE.w0.EMPTY)}return e}refCount(){return $_()(this)}}function cn(n,e){return(0,Lr.e)((t,r)=>{let i=null,a=0,c=!1;const h=()=>c&&!i&&r.complete();t.subscribe((0,Hn.x)(r,g=>{i?.unsubscribe();let y=0;const I=a++;(0,xi.Xf)(n(g,I)).subscribe(i=(0,Hn.x)(r,S=>r.next(e?e(g,S,I,y++):S),()=>{i=null,h()}))},()=>{c=!0,h()}))})}function ec(n){return n<=0?()=>Xl.E:(0,Lr.e)((e,t)=>{let r=0;e.subscribe((0,Hn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function rf(...n){const e=(0,Vs.yG)(n);return(0,Lr.e)((t,r)=>{(e?H_(n,t,e):H_(n,t)).subscribe(r)})}function rs(n,e){return(0,Lr.e)((t,r)=>{let i=0;t.subscribe((0,Hn.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var Cn=U(5577);function Ku(n){return(0,Lr.e)((e,t)=>{let r=!1;e.subscribe((0,Hn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function G_(n=VD){return(0,Lr.e)((e,t)=>{let r=!1;e.subscribe((0,Hn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function VD(){return new hg}function lu(n,e){const t=arguments.length>=2;return r=>r.pipe(n?rs((i,a)=>n(i,a,r)):zu.y,ec(1),t?Ku(e):G_(()=>new hg))}function cu(n,e){return(0,tf.m)(e)?(0,Cn.z)(n,e,1):(0,Cn.z)(n,1)}var pi=U(8505);function du(n){return(0,Lr.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,Hn.x)(t,void 0,void 0,c=>{a=(0,xi.Xf)(n(c,du(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function BD(n,e,t,r,i){return(a,c)=>{let h=t,g=e,y=0;a.subscribe((0,Hn.x)(c,I=>{const S=y++;g=h?n(g,I,S):(h=!0,I),r&&c.next(g)},i&&(()=>{h&&c.next(g),c.complete()})))}}function Yu(n,e){return(0,Lr.e)(BD(n,e,arguments.length>=2,!0))}function q_(n){return n<=0?()=>Xl.E:(0,Lr.e)((e,t)=>{let r=[];e.subscribe((0,Hn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function dE(n,e){const t=arguments.length>=2;return r=>r.pipe(n?rs((i,a)=>n(i,a,r)):zu.y,q_(1),t?Ku(e):G_(()=>new hg))}function fg(n){return(0,Lr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const jt="primary",Cs=Symbol("RouteTitle");class $D{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Cd(n){return new $D(n)}function QN(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const c=r[a],h=n[a];if(c.startsWith(":"))i[c.substring(1)]=h;else if(c!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function bo(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!GD(n[i],e[i]))return!1;return!0}function GD(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function Io(n){return Array.prototype.concat.apply([],n)}function pg(n){return n.length>0?n[n.length-1]:null}function ti(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function hu(n){return(0,l.CqO)(n)?n:(0,l.QGY)(n)?(0,rn.D)(Promise.resolve(n)):dt(n)}const qD={exact:function z_(n,e,t){if(!rc(n.segments,e.segments)||!af(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!z_(n.children[r],e.children[r],t))return!1;return!0},subset:tc},fE={exact:function Z_(n,e){return bo(n,e)},subset:function XN(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>GD(n[t],e[t]))},ignored:()=>!0};function gg(n,e,t){return qD[t.paths](n.root,e.root,t.matrixParams)&&fE[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function tc(n,e,t){return mg(n,e,e.segments,t)}function mg(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!rc(i,t)||e.hasChildren()||!af(i,t,r))}if(n.segments.length===t.length){if(!rc(n.segments,t)||!af(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!tc(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(rc(n.segments,i)&&af(n.segments,i,r)&&n.children[jt])&&mg(n.children[jt],e,a,r)}}function af(n,e,t){return e.every((r,i)=>fE[t](n[i].parameters,r.parameters))}class nc{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Cd(this.queryParams)),this._queryParamMap}toString(){return gE.serialize(this)}}class Yt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,ti(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return bd(this)}}class uf{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Cd(this.parameters)),this._parameterMap}toString(){return Y_(this)}}function rc(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let pE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return new K_},providedIn:"root"}),n})();class K_{parse(e){const t=new Q_(e);return new nc(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Id(e.root,!0)}`,r=function KD(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${yg(t)}=${yg(i)}`).join("&"):`${yg(t)}=${yg(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function zD(n){return encodeURI(n)}(e.fragment)}`:""}`}}const gE=new K_;function bd(n){return n.segments.map(e=>Y_(e)).join("/")}function Id(n,e){if(!n.hasChildren())return bd(n);if(e){const t=n.children[jt]?Id(n.children[jt],!1):"",r=[];return ti(n.children,(i,a)=>{a!==jt&&r.push(`${a}:${Id(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function ZD(n,e){let t=[];return ti(n.children,(r,i)=>{i===jt&&(t=t.concat(e(r,i)))}),ti(n.children,(r,i)=>{i!==jt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===jt?[Id(n.children[jt],!1)]:[`${i}:${Id(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[jt]?`${bd(n)}/${t[0]}`:`${bd(n)}/(${t.join("//")})`}}function _g(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function yg(n){return _g(n).replace(/%3B/gi,";")}function vg(n){return _g(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function lf(n){return decodeURIComponent(n)}function Qu(n){return lf(n.replace(/\+/g,"%20"))}function Y_(n){return`${vg(n.path)}${function mE(n){return Object.keys(n).map(e=>`;${vg(e)}=${vg(n[e])}`).join("")}(n.parameters)}`}const eP=/^[^\/()?;=#]+/;function ic(n){const e=n.match(eP);return e?e[0]:""}const YD=/^[^=?&#]+/,yE=/^[^&#]+/;class Q_{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Yt([],{}):new Yt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[jt]=new Yt(e,t)),r}parseSegment(){const e=ic(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new l.vHH(4009,!1);return this.capture(e),new uf(lf(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=ic(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=ic(this.remaining);i&&(r=i,this.capture(r))}e[lf(t)]=lf(r)}parseQueryParam(e){const t=function _E(n){const e=n.match(YD);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function vE(n){const e=n.match(yE);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=Qu(t),a=Qu(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=ic(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new l.vHH(4010,!1);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=jt);const c=this.parseChildren();t[a]=1===Object.keys(c).length?c[jt]:new Yt([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new l.vHH(4011,!1)}}function wg(n){return n.segments.length>0?new Yt([],{[jt]:n}):n}function sc(n){const e={};for(const r of Object.keys(n.children)){const a=sc(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function Eg(n){if(1===n.numberOfChildren&&n.children[jt]){const e=n.children[jt];return new Yt(n.segments.concat(e.segments),e.children)}return n}(new Yt(n.segments,e))}function Ju(n){return n instanceof nc}function JD(n,e,t,r,i){if(0===t.length)return Dd(e.root,e.root,e.root,r,i);const a=function ey(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Cg(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,c)=>{if("object"==typeof a&&null!=a){if(a.outlets){const h={};return ti(a.outlets,(g,y)=>{h[y]="string"==typeof g?g.split("/"):g}),[...i,{outlets:h}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===c?(a.split("/").forEach((h,g)=>{0==g&&"."===h||(0==g&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,a]},[]);return new Cg(t,e,r)}(t);return a.toRoot()?Dd(e.root,e.root,new Yt([],{}),r,i):function c(g){const y=function XD(n,e,t,r){if(n.isAbsolute)return new ff(e.root,!0,0);if(-1===r)return new ff(t,t===e.root,0);return function ty(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new l.vHH(4005,!1);i=r.segments.length}return new ff(r,!1,i-a)}(t,r+(Td(n.commands[0])?0:1),n.numberOfDoubleDots)}(a,e,n.snapshot?._urlSegment,g),I=y.processChildren?Oi(y.segmentGroup,y.index,a.commands):ny(y.segmentGroup,y.index,a.commands);return Dd(e.root,y.segmentGroup,I,r,i)}(n.snapshot?._lastPathIndex)}function Td(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function hf(n){return"object"==typeof n&&null!=n&&n.outlets}function Dd(n,e,t,r,i){let c,a={};r&&ti(r,(g,y)=>{a[y]=Array.isArray(g)?g.map(I=>`${I}`):`${g}`}),c=n===e?t:X_(n,e,t);const h=wg(sc(c));return new nc(h,a,i)}function X_(n,e,t){const r={};return ti(n.children,(i,a)=>{r[a]=i===e?t:X_(i,e,t)}),new Yt(n.segments,r)}class Cg{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Td(r[0]))throw new l.vHH(4003,!1);const i=r.find(hf);if(i&&i!==pg(r))throw new l.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ff{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function ny(n,e,t){if(n||(n=new Yt([],{})),0===n.segments.length&&n.hasChildren())return Oi(n,e,t);const r=function tS(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const c=n.segments[i],h=t[r];if(hf(h))break;const g=`${h}`,y=r<t.length-1?t[r+1]:null;if(i>0&&void 0===g)break;if(g&&y&&"object"==typeof y&&void 0===y.outlets){if(!CE(g,y,c))return a;r+=2}else{if(!CE(g,{},c))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new Yt(n.segments.slice(0,r.pathIndex),{});return a.children[jt]=new Yt(n.segments.slice(r.pathIndex),n.children),Oi(a,0,i)}return r.match&&0===i.length?new Yt(n.segments,{}):r.match&&!n.hasChildren()?bg(n,e,t):r.match?Oi(n,0,i):bg(n,e,t)}function Oi(n,e,t){if(0===t.length)return new Yt(n.segments,{});{const r=function eS(n){return hf(n[0])?n[0].outlets:{[jt]:n}}(t),i={};return ti(r,(a,c)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[c]=ny(n.children[c],e,a))}),ti(n.children,(a,c)=>{void 0===r[c]&&(i[c]=a)}),new Yt(n.segments,i)}}function bg(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(hf(a)){const g=nS(a.outlets);return new Yt(r,g)}if(0===i&&Td(t[0])){r.push(new uf(n.segments[e].path,EE(t[0]))),i++;continue}const c=hf(a)?a.outlets[jt]:`${a}`,h=i<t.length-1?t[i+1]:null;c&&h&&Td(h)?(r.push(new uf(c,EE(h))),i+=2):(r.push(new uf(c,{})),i++)}return new Yt(r,{})}function nS(n){const e={};return ti(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=bg(new Yt([],{}),0,t))}),e}function EE(n){const e={};return ti(n,(t,r)=>e[r]=`${t}`),e}function CE(n,e,t){return n==t.path&&bo(e,t.parameters)}class fu{constructor(e,t){this.id=e,this.url=t}}class Ig extends fu{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class oc extends fu{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Tg extends fu{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class bE extends fu{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ht extends fu{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class IE extends fu{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class TE extends fu{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class DE extends fu{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rS extends fu{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class iS{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class SE{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class sS{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class AE{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class oS{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class aS{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class uS{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class ry{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=pu(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=pu(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=iy(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return iy(e,this._root).map(t=>t.value)}}function pu(n,e){if(n===e.value)return e;for(const t of e.children){const r=pu(n,t);if(r)return r}return null}function iy(n,e){if(n===e.value)return[e];for(const t of e.children){const r=iy(n,t);if(r.length)return r.unshift(e),r}return[]}class To{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Xu(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class ME extends ry{constructor(e,t){super(e),this.snapshot=t,el(this,e)}toString(){return this.snapshot.toString()}}function lS(n,e){const t=function tP(n,e){const c=new sy([],{},{},"",{},jt,e,null,n.root,-1,{});return new NE("",new To(c,[]))}(n,e),r=new $s([new uf("",{})]),i=new $s({}),a=new $s({}),c=new $s({}),h=new $s(""),g=new is(r,i,c,h,a,jt,e,t.root);return g.snapshot=t.root,new ME(new To(g,[]),t)}class is{constructor(e,t,r,i,a,c,h,g){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=h,this.title=this.data?.pipe((0,yt.U)(y=>y[Cs]))??dt(void 0),this._futureSnapshot=g}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,yt.U)(e=>Cd(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,yt.U)(e=>Cd(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function RE(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function kE(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class sy{constructor(e,t,r,i,a,c,h,g,y,I,S,R){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=h,this.title=this.data?.[Cs],this.routeConfig=g,this._urlSegment=y,this._lastPathIndex=I,this._correctedLastPathIndex=R??I,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Cd(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Cd(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class NE extends ry{constructor(e,t){super(t),this.url=e,el(this,t)}toString(){return PE(this._root)}}function el(n,e){e.value._routerState=n,e.children.forEach(t=>el(n,t))}function PE(n){const e=n.children.length>0?` { ${n.children.map(PE).join(", ")} } `:"";return`${n.value}${e}`}function Dg(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,bo(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),bo(e.params,t.params)||n.params.next(t.params),function JN(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!bo(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),bo(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Sd(n,e){const t=bo(n.params,e.params)&&function WD(n,e){return rc(n,e)&&n.every((t,r)=>bo(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Sd(n.parent,e.parent))}function Ad(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function dS(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ad(n,r,i);return Ad(n,r)})}(n,e,t);return new To(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const c=a.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(h=>Ad(n,h)),c}}const r=function hS(n){return new is(new $s(n.url),new $s(n.params),new $s(n.queryParams),new $s(n.fragment),new $s(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>Ad(n,a));return new To(r,i)}}const oy="ngNavigationCancelingError";function OE(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Ju(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=FE(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function FE(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[oy]=!0,r.cancellationCode=e,t&&(r.url=t),r}function ay(n){return LE(n)&&Ju(n.url)}function LE(n){return n&&n[oy]}class UE{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new xd,this.attachRef=null}}let xd=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new UE,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Md=!1;let VE=(()=>{class n{constructor(t,r,i,a,c){this.parentContexts=t,this.location=r,this.changeDetector=a,this.environmentInjector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new l.vpe,this.deactivateEvents=new l.vpe,this.attachEvents=new l.vpe,this.detachEvents=new l.vpe,this.name=i||jt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new l.vHH(4012,Md);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new l.vHH(4012,Md);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new l.vHH(4012,Md);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new l.vHH(4013,Md);this._activatedRoute=t;const i=this.location,c=t._futureSnapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,g=new uy(t,h,i.injector);if(r&&function fS(n){return!!n.resolveComponentFactory}(r)){const y=r.resolveComponentFactory(c);this.activated=i.createComponent(y,i.length,g)}else this.activated=i.createComponent(c,{index:i.length,injector:g,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(xd),l.Y36(l.s_b),l.$8M("name"),l.Y36(l.sBO),l.Y36(l.lqb))},n.\u0275dir=l.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class uy{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===is?this.route:e===xd?this.childContexts:this.parent.get(e,t)}}let BE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[l.jDz],decls:1,vars:0,template:function(t,r){1&t&&l._UZ(0,"router-outlet")},dependencies:[VE],encapsulation:2}),n})();function ac(n,e){return n.providers&&!n._injector&&(n._injector=(0,l.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function pf(n){const e=n.children&&n.children.map(pf),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==jt&&(t.component=BE),t}function bs(n){return n.outlet||jt}function Ag(n,e){const t=n.filter(r=>bs(r)===e);return t.push(...n.filter(r=>bs(r)!==e)),t}function xg(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class nP{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Dg(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Xu(t);e.children.forEach(a=>{const c=a.value.outlet;this.deactivateRoutes(a,i[c],r),delete i[c]}),ti(i,(a,c)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Xu(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);if(r&&r.outlet){const c=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Xu(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Xu(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new aS(a.value.snapshot))}),e.children.length&&this.forwardEvent(new AE(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(Dg(i),i===a)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(h.contexts),c.attachRef=h.componentRef,c.route=h.route.value,c.outlet&&c.outlet.attach(h.componentRef,h.route.value),Dg(h.route.value),this.activateChildRoutes(e,null,c.children)}else{const h=xg(i.snapshot),g=h?.get(l._Vd)??null;c.attachRef=null,c.route=i,c.resolver=g,c.injector=h,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class gf{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class uc{constructor(e,t){this.component=e,this.route=t}}function dy(n,e,t){const r=n._root;return Mg(r,e?e._root:null,t,[r.value])}function tl(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,l.Z0I)(n)?e.get(n):n:r}function Mg(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=Xu(e);return n.children.forEach(c=>{(function _S(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,c=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(c&&a.routeConfig===c.routeConfig){const g=function yS(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!rc(n.url,e.url);case"pathParamsOrQueryParamsChange":return!rc(n.url,e.url)||!bo(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Sd(n,e)||!bo(n.queryParams,e.queryParams);default:return!Sd(n,e)}}(c,a,a.routeConfig.runGuardsAndResolvers);g?i.canActivateChecks.push(new gf(r)):(a.data=c.data,a._resolvedData=c._resolvedData),Mg(n,e,a.component?h?h.children:null:t,r,i),g&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new uc(h.outlet.component,c))}else c&&mf(e,h,i),i.canActivateChecks.push(new gf(r)),Mg(n,null,a.component?h?h.children:null:t,r,i)})(c,a[c.value.outlet],t,r.concat([c.value]),i),delete a[c.value.outlet]}),ti(a,(c,h)=>mf(c,t.getContext(h),i)),i}function mf(n,e,t){const r=Xu(n),i=n.value;ti(r,(a,c)=>{mf(a,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new uc(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function _f(n){return"function"==typeof n}function qE(n){return n instanceof hg||"EmptyError"===n?.name}const py=Symbol("INITIAL_VALUE");function yf(){return cn(n=>oE(n.map(e=>e.pipe(ec(1),rf(py)))).pipe((0,yt.U)(e=>{for(const t of e)if(!0!==t){if(t===py)return py;if(!1===t||t instanceof nc)return t}return!0}),rs(e=>e!==py),ec(1)))}function WE(n){return(0,UD.z)((0,pi.b)(e=>{if(Ju(e))throw OE(0,e)}),(0,yt.U)(e=>!0===e))}const vf={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function my(n,e,t,r,i){const a=wf(n,e,t);return a.matched?function ZE(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?dt(i.map(c=>{const h=tl(c,n);return hu(function GE(n){return n&&_f(n.canMatch)}(h)?h.canMatch(e,t):n.runInContext(()=>h(e,t)))})).pipe(yf(),WE()):dt(!0)}(r=ac(e,r),e,t).pipe((0,yt.U)(c=>!0===c?a:{...vf})):dt(a)}function wf(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...vf}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||QN)(t,n,e);if(!i)return{...vf};const a={};ti(i.posParams,(h,g)=>{a[g]=h.path});const c=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:c,positionalParamSegments:i.posParams??{}}}function Rg(n,e,t,r,i="corrected"){if(t.length>0&&function wS(n,e,t){return t.some(r=>Ef(n,e,r)&&bs(r)!==jt)}(n,t,r)){const c=new Yt(e,function zE(n,e,t,r){const i={};i[jt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&bs(a)!==jt){const c=new Yt([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[bs(a)]=c}return i}(n,e,r,new Yt(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function ES(n,e,t){return t.some(r=>Ef(n,e,r))}(n,t,r)){const c=new Yt(n.segments,function rl(n,e,t,r,i,a){const c={};for(const h of r)if(Ef(n,t,h)&&!i[bs(h)]){const g=new Yt([],{});g._sourceSegment=n,g._segmentIndexShift="legacy"===a?n.segments.length:e.length,c[bs(h)]=g}return{...i,...c}}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const a=new Yt(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function Ef(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function KE(n,e,t,r){return!!(bs(n)===r||r!==jt&&Ef(e,t,n))&&("**"===n.path||wf(e,n,t).matched)}function YE(n,e,t){return 0===e.length&&!n.children[t]}const lc=!1;class mu{constructor(e){this.segmentGroup=e||null}}class kg{constructor(e){this.urlTree=e}}function ma(n){return nf(new mu(n))}function Ng(n){return nf(new kg(n))}class _y{constructor(e,t,r,i,a){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0}apply(){const e=Rg(this.urlTree.root,[],[],this.config).segmentGroup,t=new Yt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,jt).pipe((0,yt.U)(a=>this.createUrlTree(sc(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(du(a=>{if(a instanceof kg)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof mu?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,jt).pipe((0,yt.U)(i=>this.createUrlTree(sc(i),e.queryParams,e.fragment))).pipe(du(i=>{throw i instanceof mu?this.noMatchError(i):i}))}noMatchError(e){return new l.vHH(4002,lc)}createUrlTree(e,t,r){const i=wg(e);return new nc(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,yt.U)(a=>new Yt([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,rn.D)(i).pipe(cu(a=>{const c=r.children[a],h=Ag(t,a);return this.expandSegmentGroup(e,h,c,a).pipe((0,yt.U)(g=>({segment:g,outlet:a})))}),Yu((a,c)=>(a[c.outlet]=c.segment,a),{}),dE())}expandSegment(e,t,r,i,a,c){return(0,rn.D)(r).pipe(cu(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,a,c).pipe(du(y=>{if(y instanceof mu)return dt(null);throw y}))),lu(h=>!!h),du((h,g)=>{if(qE(h))return YE(t,i,a)?dt(new Yt([],{})):ma(t);throw h}))}expandSegmentAgainstRoute(e,t,r,i,a,c,h){return KE(i,t,a,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,c):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c):ma(t):ma(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Ng(a):this.lineralizeSegments(r,a).pipe((0,Cn.z)(c=>{const h=new Yt(c,{});return this.expandSegment(e,h,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){const{matched:h,consumedSegments:g,remainingSegments:y,positionalParamSegments:I}=wf(t,i,a);if(!h)return ma(t);const S=this.applyRedirectCommands(g,i.redirectTo,I);return i.redirectTo.startsWith("/")?Ng(S):this.lineralizeSegments(i,S).pipe((0,Cn.z)(R=>this.expandSegment(e,t,r,R.concat(y),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){return"**"===r.path?(e=ac(r,e),r.loadChildren?(r._loadedRoutes?dt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,yt.U)(h=>(r._loadedRoutes=h.routes,r._loadedInjector=h.injector,new Yt(i,{})))):dt(new Yt(i,{}))):my(t,r,i,e).pipe(cn(({matched:c,consumedSegments:h,remainingSegments:g})=>c?this.getChildConfig(e=r._injector??e,r,i).pipe((0,Cn.z)(I=>{const S=I.injector??e,R=I.routes,{segmentGroup:L,slicedSegments:G}=Rg(t,h,g,R),le=new Yt(L.segments,L.children);if(0===G.length&&le.hasChildren())return this.expandChildren(S,R,le).pipe((0,yt.U)(nt=>new Yt(h,nt)));if(0===R.length&&0===G.length)return dt(new Yt(h,{}));const de=bs(r)===a;return this.expandSegment(S,le,R,G,de?jt:a,!0).pipe((0,yt.U)(at=>new Yt(h.concat(at.segments),at.children)))})):ma(t)))}getChildConfig(e,t,r){return t.children?dt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?dt({routes:t._loadedRoutes,injector:t._loadedInjector}):function gy(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?dt(!0):dt(i.map(c=>{const h=tl(c,n);return hu(function rP(n){return n&&_f(n.canLoad)}(h)?h.canLoad(e,t):n.runInContext(()=>h(e,t)))})).pipe(yf(),WE())}(e,t,r).pipe((0,Cn.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,pi.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function QE(n){return nf(FE(lc,3))}())):dt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return dt(r);if(i.numberOfChildren>1||!i.children[jt])return nf(new l.vHH(4e3,lc));i=i.children[jt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new nc(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return ti(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[a]=t[h]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let c={};return ti(t.children,(h,g)=>{c[g]=this.createSegmentGroup(e,h,r,i)}),new Yt(a,c)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new l.vHH(4001,lc);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class vy{}class bS{constructor(e,t,r,i,a,c,h,g){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=a,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=h,this.urlSerializer=g}recognize(){const e=Rg(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,jt).pipe((0,yt.U)(t=>{if(null===t)return null;const r=new sy([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},jt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new To(r,t),a=new NE(this.url,i);return this.inheritParamsAndData(a._root),a}))}inheritParamsAndData(e){const t=e.value,r=RE(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,rn.D)(Object.keys(r.children)).pipe(cu(i=>{const a=r.children[i],c=Ag(t,i);return this.processSegmentGroup(e,c,a,i)}),Yu((i,a)=>i&&a?(i.push(...a),i):null),function jD(n,e=!1){return(0,Lr.e)((t,r)=>{let i=0;t.subscribe((0,Hn.x)(r,a=>{const c=n(a,i++);(c||e)&&r.next(a),!c&&r.complete()}))})}(i=>null!==i),Ku(null),dE(),(0,yt.U)(i=>{if(null===i)return null;const a=wy(i);return function XE(n){n.sort((e,t)=>e.value.outlet===jt?-1:t.value.outlet===jt?1:e.value.outlet.localeCompare(t.value.outlet))}(a),a}))}processSegment(e,t,r,i,a){return(0,rn.D)(t).pipe(cu(c=>this.processSegmentAgainstRoute(c._injector??e,c,r,i,a)),lu(c=>!!c),du(c=>{if(qE(c))return YE(r,i,a)?dt([]):dt(null);throw c}))}processSegmentAgainstRoute(e,t,r,i,a){if(t.redirectTo||!KE(t,r,i,a))return dt(null);let c;if("**"===t.path){const h=i.length>0?pg(i).parameters:{},g=Ey(r)+i.length;c=dt({snapshot:new sy(i,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,DS(t),bs(t),t.component??t._loadedComponent??null,t,ss(r),g,nC(t),g),consumedSegments:[],remainingSegments:[]})}else c=my(r,t,i,e).pipe((0,yt.U)(({matched:h,consumedSegments:g,remainingSegments:y,parameters:I})=>{if(!h)return null;const S=Ey(r)+g.length;return{snapshot:new sy(g,I,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,DS(t),bs(t),t.component??t._loadedComponent??null,t,ss(r),S,nC(t),S),consumedSegments:g,remainingSegments:y}}));return c.pipe(cn(h=>{if(null===h)return dt(null);const{snapshot:g,consumedSegments:y,remainingSegments:I}=h;e=t._injector??e;const S=t._loadedInjector??e,R=function IS(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:L,slicedSegments:G}=Rg(r,y,I,R.filter(de=>void 0===de.redirectTo),this.relativeLinkResolution);if(0===G.length&&L.hasChildren())return this.processChildren(S,R,L).pipe((0,yt.U)(de=>null===de?null:[new To(g,de)]));if(0===R.length&&0===G.length)return dt([new To(g,[])]);const le=bs(t)===a;return this.processSegment(S,R,L,G,le?jt:a).pipe((0,yt.U)(de=>null===de?null:[new To(g,de)]))}))}}function eC(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function wy(n){const e=[],t=new Set;for(const r of n){if(!eC(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=wy(r.children);e.push(new To(r.value,i))}return e.filter(r=>!t.has(r))}function ss(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Ey(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function DS(n){return n.data||{}}function nC(n){return n.resolve||{}}function sC(n){return"string"==typeof n.title||null===n.title}function Og(n){return cn(e=>{const t=n(e);return t?(0,rn.D)(t).pipe((0,yt.U)(()=>e)):dt(e)})}let oC=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===jt);return r}getResolvedTitleForRoute(t){return t.data[Cs]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return(0,l.f3M)(aC)},providedIn:"root"}),n})(),aC=(()=>{class n extends oC{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Qi))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class uC{}class _a extends class RS{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Fg=new l.OlP("",{providedIn:"root",factory:()=>({})}),cC=new l.OlP("ROUTES");let Lg=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return dt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=hu(t.loadComponent()).pipe((0,pi.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),fg(()=>{this.componentLoaders.delete(t)})),i=new cE(r,()=>new Co.x).pipe($_());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return dt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,yt.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(r);let g,y,I=!1;Array.isArray(h)?y=h:(g=h.create(t).injector,y=Io(g.get(cC,[],l.XFs.Self|l.XFs.Optional)));return{routes:y.map(pf),injector:g}}),fg(()=>{this.childrenLoaders.delete(r)})),c=new cE(a,()=>new Co.x).pipe($_());return this.childrenLoaders.set(r,c),c}loadModuleFactoryOrRoutes(t){return hu(t()).pipe((0,Cn.z)(r=>r instanceof l.YKP||Array.isArray(r)?dt(r):(0,rn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.zs3),l.LFG(l.Sil))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class kS{}class NS{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Iy(n){throw n}function PS(n,e,t){return e.parse("/")}const OS={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Vg={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function bf(){const n=(0,l.f3M)(pE),e=(0,l.f3M)(xd),t=(0,l.f3M)(Fe),r=(0,l.f3M)(l.zs3),i=(0,l.f3M)(l.Sil),a=(0,l.f3M)(cC,{optional:!0})??[],c=(0,l.f3M)(Fg,{optional:!0})??{},h=(0,l.f3M)(aC),g=(0,l.f3M)(oC,{optional:!0}),y=(0,l.f3M)(kS,{optional:!0}),I=(0,l.f3M)(uC,{optional:!0}),S=new Pn(null,n,e,t,r,i,Io(a));return y&&(S.urlHandlingStrategy=y),I&&(S.routeReuseStrategy=I),S.titleStrategy=g??h,function Ty(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,S),S}let Pn=(()=>{class n{constructor(t,r,i,a,c,h,g){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=g,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Co.x,this.errorHandler=Iy,this.malformedUriErrorHandler=PS,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>dt(void 0),this.urlHandlingStrategy=new NS,this.routeReuseStrategy=new _a,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=c.get(Lg),this.configLoader.onLoadEndListener=R=>this.triggerEvent(new SE(R)),this.configLoader.onLoadStartListener=R=>this.triggerEvent(new iS(R)),this.ngModule=c.get(l.h0i),this.console=c.get(l.c2e);const S=c.get(l.R0b);this.isNgZoneEnabled=S instanceof l.R0b&&l.R0b.isInAngularZone(),this.resetConfig(g),this.currentUrlTree=function sf(){return new nc(new Yt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=lS(this.currentUrlTree,this.rootComponentType),this.transitions=new $s({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(rs(i=>0!==i.id),(0,yt.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),cn(i=>{let a=!1,c=!1;return dt(i).pipe((0,pi.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.rawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),cn(h=>{const g=this.browserUrlTree.toString(),y=!this.navigated||h.extractedUrl.toString()!==g||g!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||y)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return FS(h.source)&&(this.browserUrlTree=h.extractedUrl),dt(h).pipe(cn(S=>{const R=this.transitions.getValue();return r.next(new Ig(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),R!==this.transitions.getValue()?Xl.E:Promise.resolve(S)}),function yy(n,e,t,r){return cn(i=>function JE(n,e,t,r,i){return new _y(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,yt.U)(a=>({...i,urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,pi.b)(S=>{this.currentNavigation={...this.currentNavigation,finalUrl:S.urlAfterRedirects},i.urlAfterRedirects=S.urlAfterRedirects}),function Cy(n,e,t,r,i,a){return(0,Cn.z)(c=>function fP(n,e,t,r,i,a,c="emptyOnly",h="legacy"){return new bS(n,e,t,r,i,c,h,a).recognize().pipe(cn(g=>null===g?function CS(n){return new Tr.y(e=>e.error(n))}(new vy):dt(g)))}(n,e,t,c.urlAfterRedirects,r.serialize(c.urlAfterRedirects),r,i,a).pipe((0,yt.U)(h=>({...c,targetSnapshot:h}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,pi.b)(S=>{if(i.targetSnapshot=S.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const L=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(L,S)}this.browserUrlTree=S.urlAfterRedirects}const R=new Ht(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(R)}));if(y&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:R,extractedUrl:L,source:G,restoredState:le,extras:de}=h,Ge=new Ig(R,this.serializeUrl(L),G,le);r.next(Ge);const at=lS(L,this.rootComponentType).snapshot;return dt(i={...h,targetSnapshot:at,urlAfterRedirects:L,extras:{...de,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=h.rawUrl,h.resolve(null),Xl.E}),(0,pi.b)(h=>{const g=new IE(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(g)}),(0,yt.U)(h=>i={...h,guards:dy(h.targetSnapshot,h.currentSnapshot,this.rootContexts)}),function oP(n,e){return(0,Cn.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:c}}=t;return 0===c.length&&0===a.length?dt({...t,guardsResult:!0}):function aP(n,e,t,r){return(0,rn.D)(n).pipe((0,Cn.z)(i=>function nl(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?dt(a.map(h=>{const g=xg(e)??i,y=tl(h,g);return hu(function $E(n){return n&&_f(n.canDeactivate)}(y)?y.canDeactivate(n,e,t,r):g.runInContext(()=>y(n,e,t,r))).pipe(lu())})).pipe(yf()):dt(!0)}(i.component,i.route,t,e,r)),lu(i=>!0!==i,!0))}(c,r,i,n).pipe((0,Cn.z)(h=>h&&function HE(n){return"boolean"==typeof n}(h)?function uP(n,e,t,r){return(0,rn.D)(e).pipe(cu(i=>H_(function cP(n,e){return null!==n&&e&&e(new sS(n)),dt(!0)}(i.route.parent,r),function lP(n,e){return null!==n&&e&&e(new oS(n)),dt(!0)}(i.route,r),function hP(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(c=>function hy(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>uE(()=>dt(c.guards.map(g=>{const y=xg(c.node)??t,I=tl(g,y);return hu(function iP(n){return n&&_f(n.canActivateChild)}(I)?I.canActivateChild(r,n):y.runInContext(()=>I(r,n))).pipe(lu())})).pipe(yf())));return dt(a).pipe(yf())}(n,i.path,t),function dP(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return dt(!0);const i=r.map(a=>uE(()=>{const c=xg(e)??t,h=tl(a,c);return hu(function vS(n){return n&&_f(n.canActivate)}(h)?h.canActivate(e,n):c.runInContext(()=>h(e,n))).pipe(lu())}));return dt(i).pipe(yf())}(n,i.route,t))),lu(i=>!0!==i,!0))}(r,a,n,e):dt(h)),(0,yt.U)(h=>({...t,guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,pi.b)(h=>{if(i.guardsResult=h.guardsResult,Ju(h.guardsResult))throw OE(0,h.guardsResult);const g=new TE(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(g)}),rs(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,"",3),!1)),Og(h=>{if(h.guards.canActivateChecks.length)return dt(h).pipe((0,pi.b)(g=>{const y=new DE(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(y)}),cn(g=>{let y=!1;return dt(g).pipe(function rC(n,e){return(0,Cn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return dt(t);let a=0;return(0,rn.D)(i).pipe(cu(c=>function SS(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!sC(i)&&(a[Cs]=i.title),function AS(n,e,t,r){const i=function xS(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return dt({});const a={};return(0,rn.D)(i).pipe((0,Cn.z)(c=>function iC(n,e,t,r){const i=xg(e)??r,a=tl(n,i);return hu(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[c],e,t,r).pipe(lu(),(0,pi.b)(h=>{a[c]=h}))),q_(1),function HD(n){return(0,yt.U)(()=>n)}(a),du(c=>qE(c)?Xl.E:nf(c)))}(a,n,e,r).pipe((0,yt.U)(c=>(n._resolvedData=c,n.data=RE(n,t).resolve,i&&sC(i)&&(n.data[Cs]=i.title),null)))}(c.route,r,n,e)),(0,pi.b)(()=>a++),q_(1),(0,Cn.z)(c=>a===i.length?dt(t):Xl.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,pi.b)({next:()=>y=!0,complete:()=>{y||(this.restoreHistory(g),this.cancelNavigationTransition(g,"",2))}}))}),(0,pi.b)(g=>{const y=new rS(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(y)}))}),Og(h=>{const g=y=>{const I=[];y.routeConfig?.loadComponent&&!y.routeConfig._loadedComponent&&I.push(this.configLoader.loadComponent(y.routeConfig).pipe((0,pi.b)(S=>{y.component=S}),(0,yt.U)(()=>{})));for(const S of y.children)I.push(...g(S));return I};return oE(g(h.targetSnapshot.root)).pipe(Ku(),ec(1))}),Og(()=>this.afterPreactivation()),(0,yt.U)(h=>{const g=function cS(n,e,t){const r=Ad(n,e._root,t?t._root:void 0);return new ME(r,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return i={...h,targetRouterState:g}}),(0,pi.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,yt.U)(r=>(new nP(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,pi.b)({next(){a=!0},complete(){a=!0}}),fg(()=>{a||c||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),du(h=>{if(c=!0,LE(h)){ay(h)||(this.navigated=!0,this.restoreHistory(i,!0));const g=new Tg(i.id,this.serializeUrl(i.extractedUrl),h.message,h.cancellationCode);if(r.next(g),ay(h)){const y=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),I={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||FS(i.source)};this.scheduleNavigation(y,"imperative",null,I,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const g=new bE(i.id,this.serializeUrl(i.extractedUrl),h,i.targetSnapshot??void 0);r.next(g);try{i.resolve(this.errorHandler(h))}catch(y){i.reject(y)}}return Xl.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},a=t.state?.navigationId?t.state:null;if(a){const h={...a};delete h.navigationId,delete h.\u0275routerPageId,0!==Object.keys(h).length&&(i.state=h)}const c=this.parseUrl(t.url);this.scheduleNavigation(c,r,a,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(pf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:c,queryParamsHandling:h,preserveFragment:g}=r,y=i||this.routerState.root,I=g?this.currentUrlTree.fragment:c;let S=null;switch(h){case"merge":S={...this.currentUrlTree.queryParams,...a};break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=a||null}return null!==S&&(S=this.removeEmptyProps(S)),JD(y,this.currentUrlTree,t,S,I??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Ju(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Dy(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new l.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...OS}:!1===r?{...Vg}:r,Ju(t))return gg(this.currentUrlTree,t,i);const a=this.parseUrl(t);return gg(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new oc(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,c){if(this.disposed)return Promise.resolve(!1);let h,g,y;c?(h=c.resolve,g=c.reject,y=c.promise):y=new Promise((R,L)=>{h=R,g=L});const I=++this.navigationId;let S;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),S=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):S=0,this.setTransition({id:I,targetPageId:S,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:h,reject:g,promise:y,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),y.catch(R=>Promise.reject(R))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const a=new Tg(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(a),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){l.$Z()},n.\u0275prov=l.Yz7({token:n,factory:function(){return bf()},providedIn:"root"}),n})();function FS(n){return"imperative"!==n}let _u=(()=>{class n{constructor(t,r,i,a,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=c,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new Co.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,l.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,l.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,l.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Pn),l.Y36(is),l.$8M("tabindex"),l.Y36(l.Qsj),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&l.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[l.TTD]}),n})();class jg{}let Hg=(()=>{class n{constructor(t,r,i,a,c){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(rs(t=>t instanceof oc),cu(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,l.MMx)(a.providers,t,`Route: ${a.path}`));const c=a._injector??t,h=a._loadedInjector??c;a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent?i.push(this.preloadConfig(c,a)):(a.children||a._loadedRoutes)&&i.push(this.processRoutes(h,a.children??a._loadedRoutes))}return(0,rn.D)(i).pipe((0,Ed.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):dt(null);const a=i.pipe((0,Cn.z)(c=>null===c?dt(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??t,c.routes))));if(r.loadComponent&&!r._loadedComponent){const c=this.loader.loadComponent(r);return(0,rn.D)([a,c]).pipe((0,Ed.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Pn),l.LFG(l.Sil),l.LFG(l.lqb),l.LFG(jg),l.LFG(Lg))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const cc=new l.OlP("");let fC=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ig?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof oc&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof uS&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new uS(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){l.$Z()},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function kd(n,e){return{\u0275kind:n,\u0275providers:e}}function dc(n){return[{provide:cC,multi:!0,useValue:n}]}function US(){const n=(0,l.f3M)(l.zs3);return e=>{const t=n.get(l.z2F);if(e!==t.components[0])return;const r=n.get(Pn),i=n.get(gC);1===n.get(mC)&&r.initialNavigation(),n.get(Ay,null,l.XFs.Optional)?.setUpPreloading(),n.get(cc,null,l.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.next(),i.complete()}}const gC=new l.OlP("",{factory:()=>new Co.x}),mC=new l.OlP("",{providedIn:"root",factory:()=>1});const Ay=new l.OlP("");function xy(n){return kd(0,[{provide:Ay,useExisting:Hg},{provide:jg,useExisting:n}])}const _C=new l.OlP("ROUTER_FORROOT_GUARD"),HS=[Fe,{provide:pE,useClass:K_},{provide:Pn,useFactory:bf},xd,{provide:is,useFactory:function pC(n){return n.routerState.root},deps:[Pn]},Lg];function $S(){return new l.PXZ("Router",Pn)}let yC=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[HS,[],dc(t),{provide:_C,useFactory:_P,deps:[[Pn,new l.FiY,new l.tp0]]},{provide:Fg,useValue:r||{}},r?.useHash?{provide:Ce,useClass:Ye}:{provide:Ce,useClass:Je},{provide:cc,useFactory:()=>{const n=(0,l.f3M)(Pn),e=(0,l.f3M)(Gc),t=(0,l.f3M)(Fg);return t.scrollOffset&&e.setOffset(t.scrollOffset),new fC(n,e,t)}},r?.preloadingStrategy?xy(r.preloadingStrategy).\u0275providers:[],{provide:l.PXZ,multi:!0,useFactory:$S},r?.initialNavigation?If(r):[],[{provide:vC,useFactory:US},{provide:l.tb,multi:!0,useExisting:vC}]]}}static forChild(t){return{ngModule:n,providers:[dc(t)]}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(_C,8))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[BE]}),n})();function _P(n){return"guarded"}function If(n){return["disabled"===n.initialNavigation?kd(3,[{provide:l.ip1,multi:!0,useFactory:()=>{const e=(0,l.f3M)(Pn);return()=>{e.setUpLocationChangeListener()}}},{provide:mC,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?kd(2,[{provide:mC,useValue:0},{provide:l.ip1,multi:!0,deps:[l.zs3],useFactory:e=>{const t=e.get(z,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(a=>{const c=e.get(Pn),h=e.get(gC);(function i(a){e.get(Pn).events.pipe(rs(h=>h instanceof oc||h instanceof Tg||h instanceof bE),(0,yt.U)(h=>h instanceof oc||h instanceof Tg&&(0===h.code||1===h.code)&&null),rs(h=>null!==h),ec(1)).subscribe(()=>{a()})})(()=>{a(!0),r=!0}),c.afterPreactivation=()=>(a(!0),r||h.closed?dt(void 0):h),c.initialNavigation()}))}}]).\u0275providers:[]]}const vC=new l.OlP("");class EC{}class Do{}class Is{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),a=i.toLowerCase(),c=t.slice(r+1).trim();this.maybeSetNormalizedName(i,a),this.headers.has(a)?this.headers.get(a).push(c):this.headers.set(a,[c])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Is?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Is;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Is?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const a=e.value;if(a){let c=this.headers.get(t);if(!c)return;c=c.filter(h=>-1===a.indexOf(h)),0===c.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,c)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class fc{encodeKey(e){return pc(e)}encodeValue(e){return pc(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Gs=/%(\d[a-f0-9])/gi,My={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function pc(n){return encodeURIComponent(n).replace(Gs,(e,t)=>My[t]??e)}function yu(n){return`${n}`}class Ts{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new fc,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Gg(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const a=i.indexOf("="),[c,h]=-1==a?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,a)),e.decodeValue(i.slice(a+1))],g=t.get(c)||[];g.push(h),t.set(c,g)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(yu):[yu(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(a=>{t.push({param:r,value:a,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Ts({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(yu(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(yu(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Pd{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function gc(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function mc(n){return typeof Blob<"u"&&n instanceof Blob}function _c(n){return typeof FormData<"u"&&n instanceof FormData}class Fd{constructor(e,t,r,i){let a;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function Od(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new Is),this.context||(this.context=new Pd),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=t;else{const h=t.indexOf("?");this.urlWithParams=t+(-1===h?"?":h<t.length-1?"&":"")+c}}else this.params=new Ts,this.urlWithParams=t}serializeBody(){return null===this.body?null:gc(this.body)||mc(this.body)||_c(this.body)||function Ry(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ts?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||_c(this.body)?null:mc(this.body)?this.body.type||null:gc(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ts?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,a=void 0!==e.body?e.body:this.body,c=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,h=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let g=e.headers||this.headers,y=e.params||this.params;const I=e.context??this.context;return void 0!==e.setHeaders&&(g=Object.keys(e.setHeaders).reduce((S,R)=>S.set(R,e.setHeaders[R]),g)),e.setParams&&(y=Object.keys(e.setParams).reduce((S,R)=>S.set(R,e.setParams[R]),y)),new Fd(t,r,a,{params:y,headers:g,context:I,reportProgress:h,responseType:i,withCredentials:c})}}var vr=(()=>((vr=vr||{})[vr.Sent=0]="Sent",vr[vr.UploadProgress=1]="UploadProgress",vr[vr.ResponseHeader=2]="ResponseHeader",vr[vr.DownloadProgress=3]="DownloadProgress",vr[vr.Response=4]="Response",vr[vr.User=5]="User",vr))();class qg{constructor(e,t=200,r="OK"){this.headers=e.headers||new Is,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Wg extends qg{constructor(e={}){super(e),this.type=vr.ResponseHeader}clone(e={}){return new Wg({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Df extends qg{constructor(e={}){super(e),this.type=vr.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Df({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class ky extends qg{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Zg(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let sl=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let a;if(t instanceof Fd)a=t;else{let g,y;g=i.headers instanceof Is?i.headers:new Is(i.headers),i.params&&(y=i.params instanceof Ts?i.params:new Ts({fromObject:i.params})),a=new Fd(t,r,void 0!==i.body?i.body:null,{headers:g,context:i.context,params:y,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const c=dt(a).pipe(cu(g=>this.handler.handle(g)));if(t instanceof Fd||"events"===i.observe)return c;const h=c.pipe(rs(g=>g instanceof Df));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return h.pipe((0,yt.U)(g=>{if(null!==g.body&&!(g.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return g.body}));case"blob":return h.pipe((0,yt.U)(g=>{if(null!==g.body&&!(g.body instanceof Blob))throw new Error("Response is not a Blob.");return g.body}));case"text":return h.pipe((0,yt.U)(g=>{if(null!==g.body&&"string"!=typeof g.body)throw new Error("Response is not a string.");return g.body}));default:return h.pipe((0,yt.U)(g=>g.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Ts).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Zg(i,r))}post(t,r,i={}){return this.request("POST",t,Zg(i,r))}put(t,r,i={}){return this.request("PUT",t,Zg(i,r))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(EC))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class CC{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const Ny=new l.OlP("HTTP_INTERCEPTORS");let bC=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const zg=/^\)\]\}',?\n/;let Fy=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Tr.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((L,G)=>i.setRequestHeader(L,G.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const L=t.detectContentTypeHeader();null!==L&&i.setRequestHeader("Content-Type",L)}if(t.responseType){const L=t.responseType.toLowerCase();i.responseType="json"!==L?L:"text"}const a=t.serializeBody();let c=null;const h=()=>{if(null!==c)return c;const L=i.statusText||"OK",G=new Is(i.getAllResponseHeaders()),le=function Kg(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return c=new Wg({headers:G,status:i.status,statusText:L,url:le}),c},g=()=>{let{headers:L,status:G,statusText:le,url:de}=h(),Ge=null;204!==G&&(Ge=typeof i.response>"u"?i.responseText:i.response),0===G&&(G=Ge?200:0);let at=G>=200&&G<300;if("json"===t.responseType&&"string"==typeof Ge){const nt=Ge;Ge=Ge.replace(zg,"");try{Ge=""!==Ge?JSON.parse(Ge):null}catch(ut){Ge=nt,at&&(at=!1,Ge={error:ut,text:Ge})}}at?(r.next(new Df({body:Ge,headers:L,status:G,statusText:le,url:de||void 0})),r.complete()):r.error(new ky({error:Ge,headers:L,status:G,statusText:le,url:de||void 0}))},y=L=>{const{url:G}=h(),le=new ky({error:L,status:i.status||0,statusText:i.statusText||"Unknown Error",url:G||void 0});r.error(le)};let I=!1;const S=L=>{I||(r.next(h()),I=!0);let G={type:vr.DownloadProgress,loaded:L.loaded};L.lengthComputable&&(G.total=L.total),"text"===t.responseType&&!!i.responseText&&(G.partialText=i.responseText),r.next(G)},R=L=>{let G={type:vr.UploadProgress,loaded:L.loaded};L.lengthComputable&&(G.total=L.total),r.next(G)};return i.addEventListener("load",g),i.addEventListener("error",y),i.addEventListener("timeout",y),i.addEventListener("abort",y),t.reportProgress&&(i.addEventListener("progress",S),null!==a&&i.upload&&i.upload.addEventListener("progress",R)),i.send(a),r.next({type:vr.Sent}),()=>{i.removeEventListener("error",y),i.removeEventListener("abort",y),i.removeEventListener("load",g),i.removeEventListener("timeout",y),t.reportProgress&&(i.removeEventListener("progress",S),null!==a&&i.upload&&i.upload.removeEventListener("progress",R)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(uo))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const Yg=new l.OlP("XSRF_COOKIE_NAME"),Sf=new l.OlP("XSRF_HEADER_NAME");class Ly{}let SC=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=xu(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ge),l.LFG(l.Lbi),l.LFG(Yg))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Af=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const a=this.tokenService.getToken();return null!==a&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,a)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Ly),l.LFG(Sf))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),AC=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(Ny,[]);this.chain=r.reduceRight((i,a)=>new CC(i,a),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Do),l.LFG(l.zs3))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),xC=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:Af,useClass:bC}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:Yg,useValue:t.cookieName}:[],t.headerName?{provide:Sf,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[Af,{provide:Ny,useExisting:Af,multi:!0},{provide:Ly,useClass:SC},{provide:Yg,useValue:"XSRF-TOKEN"},{provide:Sf,useValue:"X-XSRF-TOKEN"}]}),n})(),MC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[sl,{provide:EC,useClass:AC},Fy,{provide:Do,useExisting:Fy}],imports:[xC.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})(),Uy=(()=>{class n{constructor(t){this.httpClient=t,this.authURL="https://backendrde.onrender.com/personas/"}lista(){return this.httpClient.get(this.authURL+"lista")}detail(t){return this.httpClient.get(this.authURL+`detail/${t}`)}update(t,r){return this.httpClient.put(this.authURL+`update/${t}`,r)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(sl))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Ee=U(5861),Qt=U(5813);U(5867);var gi=U(9681),F=U(2090),qs=U(4859);const Vy="firebasestorage.googleapis.com",yc="storageBucket";class or extends F.ZR{constructor(e,t,r=0){super(Jg(e),`Firebase Storage: ${t} (${Jg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,or.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Jg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function Jg(n){return"storage/"+n}function OC(){return new or("unknown","An unknown error occurred, please check the error payload for server response.")}function So(){return new or("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function Ws(){return new or("canceled","User canceled the upload/download.")}function VC(){return new or("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function ol(n){return new or("invalid-argument",n)}function Ud(){return new or("app-deleted","The Firebase app was deleted.")}function BC(n){return new or("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Vd(n,e){return new or("invalid-format","String does not match format '"+n+"': "+e)}function Mf(n){throw new or("internal-error","Internal error: "+n)}class ni{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ni.makeFromUrl(e,t)}catch{return new ni(e,"")}if(""===r.path)return r;throw function LC(n){return new or("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function y(ut){ut.path_=decodeURIComponent(ut.path)}const S=t.replace(/[.]/g,"\\."),nt=[{regex:h,indices:{bucket:1,path:3},postModify:function a(ut){"/"===ut.path.charAt(ut.path.length-1)&&(ut.path_=ut.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:y},{regex:new RegExp(`^https?://${t===Vy?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:y}];for(let ut=0;ut<nt.length;ut++){const ft=nt[ut],Vt=ft.regex.exec(e);if(Vt){let Su=Vt[ft.indices.path];Su||(Su=""),r=new ni(Vt[ft.indices.bucket],Su),ft.postModify(r);break}}if(null==r)throw function Ao(n){return new or("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class jC{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function vc(n){return"string"==typeof n||n instanceof String}function em(n){return tm()&&n instanceof Blob}function tm(){return typeof Blob<"u"&&!(0,F.UG)()}function nm(n,e,t,r){if(r<e)throw ol(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw ol(`Invalid value for '${n}'. Expected ${t} or less.`)}function va(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function Hy(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var vu=(()=>{return(n=vu||(vu={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",vu;var n})();function $y(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),a=-1!==e.indexOf(n);return t||i||a}class GC{constructor(e,t,r,i,a,c,h,g,y,I,S,R=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=c,this.callback_=h,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=I,this.connectionFactory_=S,this.retry=R,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((L,G)=>{this.resolve_=L,this.reject_=G,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,c=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const g=this.callback_(h,h.getResponse());!function HC(n){return void 0!==n}(g)?a():a(g)}catch(g){c(g)}else if(null!==h){const g=OC();g.serverResponse=h.getErrorText(),c(this.errorCallback_?this.errorCallback_(h,g):g)}else c(i.canceled?this.appDelete_?Ud():Ws():So())};this.canceled_?t(0,new rm(!1,null,!0)):this.backoffId_=function Xg(n,e,t){let r=1,i=null,a=null,c=!1,h=0;function g(){return 2===h}let y=!1;function I(...de){y||(y=!0,e.apply(null,de))}function S(de){i=setTimeout(()=>{i=null,n(L,g())},de)}function R(){a&&clearTimeout(a)}function L(de,...Ge){if(y)return void R();if(de)return R(),void I.call(null,de,...Ge);if(g()||c)return R(),void I.call(null,de,...Ge);let nt;r<64&&(r*=2),1===h?(h=2,nt=0):nt=1e3*(r+Math.random()),S(nt)}let G=!1;function le(de){G||(G=!0,R(),!y&&(null!==i?(de||(h=2),clearTimeout(i),S(0)):de||(h=1)))}return S(0),a=setTimeout(()=>{c=!0,le(!0)},t),le}((r,i)=>{if(i)return void r(!1,new rm(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const c=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(c),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(c),this.pendingConnection_=null;const h=a.getErrorCode()===vu.NO_ERROR,g=a.getStatus();if((!h||$y(g,this.additionalRetryCodes_))&&this.retry){const I=a.getErrorCode()===vu.ABORT;return void r(!1,new rm(!1,null,I))}const y=-1!==this.successCodes_.indexOf(g);r(!0,new rm(y,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function oA(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class rm{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function fA(...n){const e=function hA(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(tm())return new Blob(n);throw new or("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Ds={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Gy{constructor(e,t){this.data=e,this.contentType=t||null}}function qy(n,e){switch(n){case Ds.RAW:return new Gy(qC(e));case Ds.BASE64:case Ds.BASE64URL:return new Gy(WC(n,e));case Ds.DATA_URL:return new Gy(function _A(n){const e=new ZC(n);return e.base64?WC(Ds.BASE64,e.rest):function mA(n){let e;try{e=decodeURIComponent(n)}catch{throw Vd(Ds.DATA_URL,"Malformed data URL.")}return qC(e)}(e.rest)}(e),function zC(n){return new ZC(n).contentType}(e))}throw OC()}function qC(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function WC(n,e){switch(n){case Ds.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw Vd(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Ds.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw Vd(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function gA(n){if(typeof atob>"u")throw function sA(n){return new or("unsupported-environment",`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:Vd(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class ZC{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Vd(Ds.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function KC(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class xo{constructor(e,t){let r=0,i="";em(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(em(this.data_)){const i=function pA(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new xo(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new xo(r,!0)}}static getBlob(...e){if(tm()){const t=e.map(r=>r instanceof xo?r.data_:r);return new xo(fA.apply(null,t))}{const t=e.map(c=>vc(c)?qy(Ds.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(c=>{for(let h=0;h<c.length;h++)i[a++]=c[h]}),new xo(i,!0)}}uploadData(){return this.data_}}function im(n){let e;try{e=JSON.parse(n)}catch{return null}return function jy(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function Wy(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function JC(n,e){return e}class mi{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||JC}}let Rf=null;function Mo(){if(Rf)return Rf;const n=[];n.push(new mi("bucket")),n.push(new mi("generation")),n.push(new mi("metageneration")),n.push(new mi("name","fullPath",!0));const t=new mi("name");t.xform=function e(a,c){return function XC(n){return!vc(n)||n.length<2?n:Wy(n)}(c)},n.push(t);const i=new mi("size");return i.xform=function r(a,c){return void 0!==c?Number(c):c},n.push(i),n.push(new mi("timeCreated")),n.push(new mi("updated")),n.push(new mi("md5Hash",null,!0)),n.push(new mi("cacheControl",null,!0)),n.push(new mi("contentDisposition",null,!0)),n.push(new mi("contentEncoding",null,!0)),n.push(new mi("contentLanguage",null,!0)),n.push(new mi("contentType",null,!0)),n.push(new mi("metadata","customMetadata",!0)),Rf=n,Rf}function wc(n,e,t){const r=im(e);return null===r?null:function vA(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const c=t[a];r[c.local]=c.xform(r,e[c.server])}return function yA(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new ni(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function kf(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const wA="prefixes";class vt{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function wa(n){if(!n)throw OC()}function sm(n,e){return function t(r,i){const a=wc(n,i,e);return wa(null!==a),a}}function jd(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function tA(){return new or("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function ya(){return new or("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function By(n){return new or("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function nA(n){return new or("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function al(n){const e=jd(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function FC(n){return new or("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function Nf(n,e,t){const i=va(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,h=new vt(i,"GET",sm(n,t),c);return h.errorHandler=al(e),h}function cr(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const h=va(e.bucketOnlyServerUrl(),n.host,n._protocol),y=n.maxOperationRetryTime,I=new vt(h,"GET",function EA(n,e){return function t(r,i){const a=function RP(n,e,t){const r=im(t);return null===r?null:function eb(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[wA])for(const i of t[wA]){const a=i.replace(/\/$/,""),c=n._makeStorageReference(new ni(e,a));r.prefixes.push(c)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new ni(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return wa(null!==a),a}}(n,e.bucket),y);return I.urlParams=a,I.errorHandler=jd(e),I}function zy(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function rb(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}function Ky(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},g=function h(){let nt="";for(let ut=0;ut<2;ut++)nt+=Math.random().toString().slice(2);return nt}();c["Content-Type"]="multipart/related; boundary="+g;const y=zy(e,r,i),I=kf(y,t),L=xo.getBlob("--"+g+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+I+"\r\n--"+g+"\r\nContent-Type: "+y.contentType+"\r\n\r\n",r,"\r\n--"+g+"--");if(null===L)throw VC();const G={name:y.fullPath},le=va(a,n.host,n._protocol),Ge=n.maxUploadRetryTime,at=new vt(le,"POST",sm(n,t),Ge);return at.urlParams=G,at.headers=c,at.body=L.uploadData(),at.errorHandler=jd(e),at}class Pf{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function Yy(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{wa(!1)}return wa(!!t&&-1!==(e||["active"]).indexOf(t)),t}const SA={STATE_CHANGED:"state_changed"},Li={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function $d(n){switch(n){case"running":case"pausing":case"canceling":return Li.RUNNING;case"paused":return Li.PAUSED;case"success":return Li.SUCCESS;case"canceled":return Li.CANCELED;default:return Li.ERROR}}class ib{constructor(e,t,r){if(function $C(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function Ec(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class Of extends class AA{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=vu.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=vu.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=vu.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Mf("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Mf("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Mf("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Mf("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Mf("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Ui(){return new Of}class Jy{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Mo(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if($y(i.status,[])){if(!a)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=So()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function IA(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),c=zy(e,r,i),h={name:c.fullPath},g=va(a,n.host,n._protocol),I={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},S=kf(c,t),G=new vt(g,"POST",function L(le){let de;Yy(le);try{de=le.getResponseHeader("X-Goog-Upload-URL")}catch{wa(!1)}return wa(vc(de)),de},n.maxUploadRetryTime);return G.urlParams=h,G.headers=I,G.body=S,G.errorHandler=jd(e),G}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Ui,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function TA(n,e,t,r){const g=new vt(t,"POST",function a(y){const I=Yy(y,["active","final"]);let S=null;try{S=y.getResponseHeader("X-Goog-Upload-Size-Received")}catch{wa(!1)}S||wa(!1);const R=Number(S);return wa(!isNaN(R)),new Pf(R,r.size(),"final"===I)},n.maxUploadRetryTime);return g.headers={"X-Goog-Upload-Command":"query"},g.errorHandler=jd(e),g}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,Ui,t,r);this._request=a,a.getPromise().then(c=>{this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new Pf(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let c;try{c=function DA(n,e,t,r,i,a,c,h){const g=new Pf(0,0);if(c?(g.current=c.current,g.total=c.total):(g.current=0,g.total=r.size()),r.size()!==g.total)throw function rA(){return new or("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const y=g.total-g.current;let I=y;i>0&&(I=Math.min(I,i));const S=g.current;let L="";L=0===I?"finalize":y===I?"upload, finalize":"upload";const G={"X-Goog-Upload-Command":L,"X-Goog-Upload-Offset":`${g.current}`},le=r.slice(S,S+I);if(null===le)throw VC();const nt=new vt(t,"POST",function de(ut,ft){const Vt=Yy(ut,["active","final"]),Er=g.current+I,Su=r.size();let BN;return BN="final"===Vt?sm(e,a)(ut,ft):null,new Pf(Er,Su,"final"===Vt,BN)},e.maxUploadRetryTime);return nt.headers=G,nt.body=le.uploadData(),nt.progressCallback=h||null,nt.errorHandler=jd(n),nt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(g){return this._error=g,void this._transition("error")}const h=this._ref.storage._makeRequest(c,Ui,i,a,!1);this._request=h,h.getPromise().then(g=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(g.current),g.finalized?(this._metadata=g.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=Nf(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Ui,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=Ky(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Ui,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Ws(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=$d(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new ib(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch($d(this._state)){case Li.SUCCESS:Ec(this._resolve.bind(null,this.snapshot))();break;case Li.CANCELED:case Li.ERROR:Ec(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch($d(this._state)){case Li.RUNNING:case Li.PAUSED:e.next&&Ec(e.next.bind(e,this.snapshot))();break;case Li.SUCCESS:e.complete&&Ec(e.complete.bind(e))();break;default:e.error&&Ec(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class ul{constructor(e,t){this._service=e,this._location=t instanceof ni?t:ni.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ul(e,t)}get root(){const e=new ni(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Wy(this._location.path)}get storage(){return this._service}get parent(){const e=function YC(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ni(this._location.bucket,e);return new ul(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw BC(e)}}function PA(n,e,t){return ub.apply(this,arguments)}function ub(){return(ub=(0,Ee.Z)(function*(n,e,t){const i=yield Xy(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield PA(n,e,i.nextPageToken))})).apply(this,arguments)}function Xy(n,e){null!=e&&"number"==typeof e.maxResults&&nm("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=cr(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Ui)}function FA(n){n._throwIfRoot("getDownloadURL");const e=function tb(n,e,t){const i=va(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,h=new vt(i,"GET",function Bd(n,e){return function t(r,i){const a=wc(n,i,e);return wa(null!==a),function MP(n,e,t,r){const i=im(e);if(null===i||!vc(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const c=encodeURIComponent;return a.split(",").map(y=>{const S=n.fullPath;return va("/b/"+c(n.bucket)+"/o/"+c(S),t,r)+Hy({alt:"media",token:y})})[0]}(a,i,n.host,n._protocol)}}(n,t),c);return h.errorHandler=al(e),h}(n.storage,n._location,Mo());return n.storage.makeRequestWithTokens(e,Ui).then(t=>{if(null===t)throw function iA(){return new or("no-download-url","The given file does not have any download URLs.")}();return t})}function Gd(n,e){const t=function QC(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new ni(n._location.bucket,t);return new ul(n.storage,r)}function cb(n,e){if(n instanceof ev){const t=n;if(null==t._bucket)throw function UC(){return new or("no-default-bucket","No default bucket found. Did you set the '"+yc+"' property when initializing the app?")}();const r=new ul(t,t._bucket);return null!=e?cb(r,e):r}return void 0!==e?Gd(n,e):n}function VA(n,e){if(e&&function LA(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof ev)return function UA(n,e){return new ul(n,e)}(n,e);throw ol("To use ref(service, url), the first argument must be a Storage instance.")}return cb(n,e)}function db(n,e){const t=e?.[yc];return null==t?null:ni.makeFromBucketSpec(t,n)}class ev{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=Vy,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ni.makeFromBucketSpec(i,this._host):db(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ni.makeFromBucketSpec(this._url,e):db(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){nm("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){nm("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Ee.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Ee.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ul(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new jC(Ud());{const c=function dA(n,e,t,r,i,a,c=!0){const h=Hy(n.urlParams),g=n.url+h,y=Object.assign({},n.headers);return function lA(n,e){e&&(n["X-Firebase-GMPID"]=e)}(y,e),function aA(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(y,t),function uA(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(y,a),function cA(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(y,r),new GC(g,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,c)}(e,this._appId,r,i,t,this._firebaseVersion,a);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}makeRequestWithTokens(e,t){var r=this;return(0,Ee.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const fb="@firebase/storage";function jA(n,e,t){return function ab(n,e,t){n._throwIfRoot("uploadBytes");const r=Ky(n.storage,n._location,Mo(),new xo(e,!0),t);return n.storage.makeRequestWithTokens(r,Ui).then(i=>({metadata:i,ref:n}))}(n=(0,F.m9)(n),e,t)}function am(n,e){return Xy(n=(0,F.m9)(n),e)}function tv(n){return FA(n=(0,F.m9)(n))}function nv(n,e){return VA(n=(0,F.m9)(n),e)}function zA(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new ev(t,r,i,e,gi.SDK_VERSION)}!function KA(){(0,gi._registerComponent)(new qs.wA("storage",zA,"PUBLIC").setMultipleInstances(!0)),(0,gi.registerVersion)(fb,"0.9.14",""),(0,gi.registerVersion)(fb,"0.9.14","esm2017")}();class lm{constructor(e){return e}}const iv=(0,Qt.u3)(tv,!0),nx=(0,Qt.u3)(am,!0),Cc=(0,Qt.u3)(nv,!0),sx=(0,Qt.u3)(jA,!0);let wu=(()=>{class n{constructor(t){this.storage=t,this.url=" ",this.auxurl=" ",this.auxbanner=" ",this.auxperfil=" ",this.loading=!1}uploadImage(t,r){const i=t.target.files[0],a=Cc(this.storage,"imagen/"+r);sx(a,i).then(c=>{this.getImages(r)}).catch(c=>console.log(c))}getImages(t){var r=this;const i=Cc(this.storage,"imagen");nx(i).then(function(){var a=(0,Ee.Z)(function*(c){for(let h of c.items)r.auxurl=yield iv(h),r.auxurl.includes(t)&&(r.loading=!1,r.url=r.auxurl),"banner_1"==t?r.auxurl.includes(t)&&(r.loading=!1,r.auxbanner=r.auxurl,r.url=null):"perfil_1"==t&&r.auxurl.includes(t)&&(r.loading=!1,r.auxperfil=r.auxurl,r.url=null)});return function(c){return a.apply(this,arguments)}}()).catch(a=>console.log(a))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(lm))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ax(n,e){if(1&n&&l._UZ(0,"img",22),2&n){const t=l.oxw(2);l.s9C("src",t.persona.imgperfil,l.LSH)}}function sv(n,e){if(1&n&&l._UZ(0,"img",24),2&n){const t=l.oxw(2);l.s9C("src",t.persona.imgbanner,l.LSH)}}function ux(n,e){1&n&&(l.TgZ(0,"div",26),l._UZ(1,"span",27),l.qZA())}function Cb(n,e){1&n&&(l.TgZ(0,"div",26),l._UZ(1,"span",27),l.qZA())}function ov(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"form",5,6),l.NdJ("ngSubmit",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.onUpdate())}),l.TgZ(5,"div",7)(6,"label",8),l._uU(7,"Nombre"),l.qZA(),l.TgZ(8,"input",9),l.NdJ("ngModelChange",function(i){l.CHM(t);const a=l.oxw();return l.KtG(a.persona.nombre=i)}),l.qZA()(),l.TgZ(9,"div",7)(10,"label",10),l._uU(11,"Apellido"),l.qZA(),l.TgZ(12,"input",11),l.NdJ("ngModelChange",function(i){l.CHM(t);const a=l.oxw();return l.KtG(a.persona.apellido=i)}),l.qZA()(),l.TgZ(13,"div",7)(14,"label",12),l._uU(15,"descripcion"),l.qZA(),l.TgZ(16,"input",13),l.NdJ("ngModelChange",function(i){l.CHM(t);const a=l.oxw();return l.KtG(a.persona.descripcion=i)}),l.qZA()(),l.TgZ(17,"p",14),l._uU(18," CARGAR DE A UNA LAS IMAGENES AMEDIDA QUE SE MUESTREN "),l.qZA(),l.TgZ(19,"div",7)(20,"label",15),l._uU(21,"Imagen de perfil"),l.qZA(),l.TgZ(22,"input",16),l.NdJ("ngModelChange",function(i){l.CHM(t);const a=l.oxw();return l.KtG(a.persona.imgperfil=i)})("change",function(i){l.CHM(t);const a=l.oxw();return l.KtG(a.uploadImagePerfil(i))}),l.qZA()(),l.TgZ(23,"div",7)(24,"label",15),l._uU(25,"Imagen de banner"),l.qZA(),l.TgZ(26,"input",16),l.NdJ("ngModelChange",function(i){l.CHM(t);const a=l.oxw();return l.KtG(a.persona.imgbanner=i)})("change",function(i){l.CHM(t);const a=l.oxw();return l.KtG(a.uploadImagebanner(i))}),l.qZA()(),l.TgZ(27,"div",17)(28,"p"),l._uU(29,"Imagen que tiene perfil"),l.qZA(),l.YNc(30,ax,1,1,"img",18),l.qZA(),l.TgZ(31,"div",17)(32,"p"),l._uU(33,"Imagen que tiene banner"),l.qZA(),l.YNc(34,sv,1,1,"img",19),l.qZA(),l.TgZ(35,"div",20)(36,"P"),l._uU(37,"AQUI APARECERA SU IMAGEN DE PERFIL UNA VEZ CARGADA "),l.qZA(),l.YNc(38,ux,2,0,"div",21),l._UZ(39,"img",22),l.qZA(),l.TgZ(40,"div",23)(41,"P"),l._uU(42,"AQUI APARECERA SU IMAGEN DE BARNER UNA VEZ CARGADA "),l.qZA(),l._UZ(43,"img",24),l.YNc(44,Cb,2,0,"div",21),l.qZA(),l.TgZ(45,"button",25),l._uU(46,"Editar Persona"),l.qZA()()()()()}if(2&n){const t=l.oxw();l.xp6(8),l.Q6J("ngModel",t.persona.nombre),l.xp6(4),l.Q6J("ngModel",t.persona.apellido),l.xp6(4),l.Q6J("ngModel",t.persona.descripcion),l.xp6(6),l.Q6J("ngModel",t.persona.imgperfil),l.xp6(4),l.Q6J("ngModel",t.persona.imgbanner),l.xp6(4),l.Q6J("ngIf","vacio"!=t.persona.imgperfil),l.xp6(4),l.Q6J("ngIf","vacio"!=t.persona.imgbanner),l.xp6(4),l.Q6J("ngIf",1==t.imageService.loading&&null==t.imageService.auxperfil&&"perfil_1"==t.name),l.xp6(1),l.Q6J("src",t.imageService.auxperfil,l.LSH),l.xp6(4),l.Q6J("src",t.imageService.auxbanner,l.LSH),l.xp6(1),l.Q6J("ngIf",1==t.imageService.loading&&null==t.imageService.auxbanner&&"banner_1"==t.name)}}let bb=(()=>{class n{constructor(t,r,i,a){this.activatedRouter=t,this.personaService=r,this.router=i,this.imageService=a,this.persona=null,this.name=" "}ngOnInit(){const t=this.activatedRouter.snapshot.params.id;this.imageService.auxbanner=null,this.imageService.auxperfil=null,this.imageService.loading=!1,this.personaService.detail(t).subscribe(r=>{this.persona=r},r=>{alert("Error al modificar"),this.router.navigate([""])})}onUpdate(){const t=this.activatedRouter.snapshot.params.id;null!=this.imageService.auxperfil&&(this.persona.imgperfil=this.imageService.auxperfil),null!=this.imageService.auxbanner&&(this.persona.imgbanner=this.imageService.auxbanner),this.personaService.update(t,this.persona).subscribe(r=>{alert("persona modificado correctamente"),this.router.navigate([""])},r=>{alert("Error al modificar persona"),this.router.navigate([""])})}uploadImagePerfil(t){this.name="perfil_"+this.activatedRouter.snapshot.params.id,this.imageService.uploadImage(t,this.name),this.imageService.loading=!0}uploadImagebanner(t){this.name="banner_"+this.activatedRouter.snapshot.params.id,this.imageService.uploadImage(t,this.name),this.imageService.loading=!0}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(is),l.Y36(Uy),l.Y36(Pn),l.Y36(wu))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-edit-acerca-de"]],decls:2,vars:1,consts:[[1,"fondo"],["class","container",4,"ngIf"],[1,"container"],[1,"row"],[1,"form"],["novalidate","",3,"ngSubmit"],["f","ngForm"],[1,"form-group","mb-4"],["for","nombre"],["type","text","id","nombre","name","nombre","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","apellido"],["type","text","id","apellido","name","apellido","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","descripcion"],["type","text","id","descripcion","name","descripcion","required","",1,"form-control",3,"ngModel","ngModelChange"],["id","mensaje"],["for","img"],["type","file","id","img","name","img","accept",".jpg, .jpeg, .png",1,"form-control",3,"ngModel","ngModelChange","change"],[1,"imagen","mb-4","imagen_muestra"],["width","200px",3,"src",4,"ngIf"],["width","800px","height","auto",3,"src",4,"ngIf"],["id","imagen_perfil",1,"imagen","mb-4"],["class","spinner-border loading","style","width: 3rem; height: 3rem","role","status",4,"ngIf"],["width","200px",3,"src"],["id","imagen_barner",1,"imagen","mb-4"],["width","800px","height","auto",3,"src"],[1,"btn","btn-primary"],["role","status",1,"spinner-border","loading",2,"width","3rem","height","3rem"],[1,"sr-only"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0),l.YNc(1,ov,47,11,"div",1),l.qZA()),2&t&&(l.xp6(1),l.Q6J("ngIf",r.persona))},dependencies:[en,Pi,Gr,ws,ns,ei,Eo,Fr],styles:[".fondo[_ngcontent-%COMP%]{height:100%;background-color:#00796b}.row[_ngcontent-%COMP%]{padding:20px;color:#bdbdbd}.form-group[_ngcontent-%COMP%]{max-width:700px}#imagen_perfil[_ngcontent-%COMP%], #imagen_barner[_ngcontent-%COMP%]{padding:10px}#mensaje[_ngcontent-%COMP%]{margin:10px}.loading[_ngcontent-%COMP%]{padding:10px}@media (min-width: 800px){.form[_ngcontent-%COMP%]{padding-left:25%}.form-group[_ngcontent-%COMP%]{max-width:80%}}"]}),n})(),cm=(()=>{class n{constructor(t){this.httpClient=t,this.URL="https://backendrde.onrender.com/educacion/"}lista(){return this.httpClient.get(this.URL+"lista")}detail(t){return this.httpClient.get(this.URL+`detail/${t}`)}save(t){return this.httpClient.post(this.URL+"create",t)}update(t,r){return this.httpClient.put(this.URL+`update/${t}`,r)}delete(t){return this.httpClient.delete(this.URL+`delete/${t}`)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(sl))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ib(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",27)(1,"label",28),l._uU(2,"fecha de finalizacion"),l.qZA(),l.TgZ(3,"input",29),l.NdJ("ngModelChange",function(i){l.CHM(t);const a=l.oxw();return l.KtG(a.educacion.fecha_fin=i)}),l.qZA()()}if(2&n){const t=l.oxw();l.xp6(3),l.Q6J("ngModel",t.educacion.fecha_fin)}}function Tb(n,e){if(1&n&&l._UZ(0,"img",30),2&n){const t=l.oxw();l.s9C("src",t.educacion.logoimg,l.LSH)}}function lx(n,e){if(1&n&&l._UZ(0,"img",30),2&n){const t=l.oxw();l.Q6J("src",t.imageService.url,l.LSH)}}function cx(n,e){1&n&&(l.TgZ(0,"div",31),l._UZ(1,"span",32),l.qZA())}let dx=(()=>{class n{constructor(t,r,i,a){this.educacionS=t,this.activatedRouter=r,this.router=i,this.imageService=a,this.educacion=null,this.aux_actualmente=!1}ngOnInit(){const t=this.activatedRouter.snapshot.params.id;this.imageService.url=null,this.imageService.loading=!1,this.educacionS.detail(t).subscribe(r=>{this.educacion=r,this.aux_actualmente=Boolean(this.educacion.actualmente)},r=>{alert("Error al modificar Educacion"),this.router.navigate([""])})}onUpdate(){const t=this.activatedRouter.snapshot.params.id;this.educacion.actualmente=this.aux_actualmente?1:0,null!=this.imageService.url&&(this.educacion.logoimg=this.imageService.url),this.educacion.logoimg=this.imageService.url,this.educacionS.update(t,this.educacion).subscribe(r=>{alert("Educacion modificada correctamente"),this.router.navigate([""])},r=>{alert("Error al modificar la Educacion"),this.router.navigate([""])})}uploadImage(t){const r="experiencia_"+this.educacion.institucion.replace(/ /g,"")+"_"+this.educacion.titulacion.replace(/ /g,"");this.imageService.loading=!0,this.imageService.uploadImage(t,r)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(cm),l.Y36(is),l.Y36(Pn),l.Y36(wu))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-edit-educacion"]],decls:43,vars:10,consts:[[1,"fondo"],[1,"container"],[1,"row"],[1,"form"],["novalidate","",3,"ngSubmit"],["f","ngForm"],[1,"form-group","mb-4"],["for","nombreTitulacion"],["type","text","id","nombreTitulacion","name","nombreTitulacion","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","institucion"],["type","text","id","institucion","name","institucion","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","logoimg"],["type","file","id","logoimg","name","logoimg","accept",".jpg, .jpeg, .png",1,"form-control",3,"ngModel","ngModelChange","change"],["for","descripcionE"],["type","text","id","descripcionE","name","descripcionE","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"fechaInicio"],["for","fechaInicio"],["type","date","id","fechaInicio","name","fechaInicio","value","2018-07-22","min","2000-01-01","max","2023-12-31",3,"ngModel","ngModelChange"],[1,"form-check","form-switch"],["type","checkbox","id","formSwitchChecked","value","1","checked","",1,"form-check-input",3,"ngModel","ngModelChange"],["for","formSwitchChecked",1,"form-check-label"],["class","fechaFin",4,"ngIf"],[1,"imagen","mb-4","imagen_muestra"],["width","200px",3,"src",4,"ngIf"],["id","imagen_muestra",1,"imagen","mb-4"],["class","spinner-border loading","style","width: 3rem; height: 3rem","role","status",4,"ngIf"],[1,"btn","btn-primary"],[1,"fechaFin"],["for","fechaFin"],["type","date","id","fechaFin","name","fechaFin","value","2018-07-22","min","fechaInicio","max","2023-12-31",3,"ngModel","ngModelChange"],["width","200px",3,"src"],["role","status",1,"spinner-border","loading",2,"width","3rem","height","3rem"],[1,"sr-only"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"form",4,5),l.NdJ("ngSubmit",function(){return r.onUpdate()}),l.TgZ(6,"div",6)(7,"label",7),l._uU(8,"Nombre de la carrera"),l.qZA(),l.TgZ(9,"input",8),l.NdJ("ngModelChange",function(a){return r.educacion.titulacion=a}),l.qZA()(),l.TgZ(10,"div",6)(11,"label",9),l._uU(12,"Nombre de la institucion"),l.qZA(),l.TgZ(13,"input",10),l.NdJ("ngModelChange",function(a){return r.educacion.institucion=a}),l.qZA()(),l.TgZ(14,"div",6)(15,"label",11),l._uU(16,"logo de la institucion"),l.qZA(),l.TgZ(17,"input",12),l.NdJ("ngModelChange",function(a){return r.educacion.logoimg=a})("change",function(a){return r.uploadImage(a)}),l.qZA()(),l.TgZ(18,"div",6)(19,"label",13),l._uU(20,"Descripcion de su carrera"),l.qZA(),l.TgZ(21,"input",14),l.NdJ("ngModelChange",function(a){return r.educacion.descripcion_edu=a}),l.qZA()(),l.TgZ(22,"div",15)(23,"label",16),l._uU(24,"fecha de Inicio"),l.qZA(),l.TgZ(25,"input",17),l.NdJ("ngModelChange",function(a){return r.educacion.fecha_inicio=a}),l.qZA()(),l.TgZ(26,"div",6)(27,"div",18)(28,"input",19),l.NdJ("ngModelChange",function(a){return r.aux_actualmente=a}),l.qZA(),l.TgZ(29,"label",20),l._uU(30,"actualmente"),l.qZA()()(),l.YNc(31,Ib,4,1,"div",21),l.TgZ(32,"div",22)(33,"p"),l._uU(34,"imagen que tiene"),l.qZA(),l.YNc(35,Tb,1,1,"img",23),l.qZA(),l.TgZ(36,"div",24)(37,"P"),l._uU(38,"AQUI APARECERA SU IMAGEN UNA VEZ CARGADA "),l.qZA(),l.YNc(39,lx,1,1,"img",23),l.YNc(40,cx,2,0,"div",25),l.qZA(),l.TgZ(41,"button",26),l._uU(42,"Modificar Educacion"),l.qZA()()()()()()),2&t&&(l.xp6(9),l.Q6J("ngModel",r.educacion.titulacion),l.xp6(4),l.Q6J("ngModel",r.educacion.institucion),l.xp6(4),l.Q6J("ngModel",r.educacion.logoimg),l.xp6(4),l.Q6J("ngModel",r.educacion.descripcion_edu),l.xp6(4),l.Q6J("ngModel",r.educacion.fecha_inicio),l.xp6(3),l.Q6J("ngModel",r.aux_actualmente),l.xp6(3),l.Q6J("ngIf",!r.aux_actualmente),l.xp6(4),l.Q6J("ngIf","vacio"!=r.educacion.logoimg),l.xp6(4),l.Q6J("ngIf",null!=r.imageService.url),l.xp6(1),l.Q6J("ngIf",1==r.imageService.loading&&null==r.imageService.url))},dependencies:[en,Pi,Gr,Xi,ws,ns,ei,Eo,Fr],styles:[".fondo[_ngcontent-%COMP%]{height:200vh;background-color:#00796b}.row[_ngcontent-%COMP%]{padding:20px;color:#bdbdbd}.form-group[_ngcontent-%COMP%]{max-width:700px}.form[_ngcontent-%COMP%]{margin-top:25%}.imagen_muestra[_ngcontent-%COMP%], .loading[_ngcontent-%COMP%]{padding:10px}@media (min-width: 800px){.form[_ngcontent-%COMP%]{padding-left:25%}.form-group[_ngcontent-%COMP%]{max-width:80%}}"]}),n})();class hx{constructor(e,t,r,i,a,c,h){this.institucion=e,this.titulacion=t,this.descripcion_edu=r,this.actualmente=c,this.logoimg=i,this.fecha_inicio=a,this.actualmente=c,this.fecha_fin=0==c?h:a}}function Db(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",26)(1,"label",27),l._uU(2,"fecha de finalizacion"),l.qZA(),l.TgZ(3,"input",28),l.NdJ("ngModelChange",function(i){l.CHM(t);const a=l.oxw();return l.KtG(a.fechaFin=i)}),l.qZA()()}if(2&n){const t=l.oxw();l.xp6(3),l.Q6J("ngModel",t.fechaFin)}}function $P(n,e){1&n&&(l.TgZ(0,"div",29),l._UZ(1,"span",30),l.qZA())}function Sb(n,e){if(1&n&&l._UZ(0,"img",31),2&n){const t=l.oxw();l.Q6J("src",t.imageService.url,l.LSH)}}let fx=(()=>{class n{constructor(t,r,i,a){this.educacionS=t,this.activatedRouter=r,this.router=i,this.imageService=a,this.actualmente=0,this.aux_actualmente=!1}ngOnInit(){this.imageService.url=null,this.imageService.loading=!1}onCreate(){this.aux_actualmente&&(this.actualmente=1),this.logoimg=this.imageService.url.includes(this.aux)?this.imageService.url:"vacio";const t=new hx(this.institucion,this.nombreTitulacion,this.descripcionE,this.logoimg,this.fechaInicio,this.actualmente,this.fechaFin);this.educacionS.save(t).subscribe(r=>{alert("Educacion a\xf1adida correctamente"),this.router.navigate([""])},r=>{alert("fall\xf3 agregar Educacion"),this.router.navigate([""])})}uploadImage(t){this.aux="educacion_"+this.institucion.replace(/ /g,"")+"_"+this.nombreTitulacion.replace(/ /g,""),this.imageService.loading=!0,this.imageService.uploadImage(t,this.aux)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(cm),l.Y36(is),l.Y36(Pn),l.Y36(wu))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-new-educacion"]],decls:39,vars:9,consts:[[1,"fondo"],[1,"container"],[1,"row"],[1,"form"],["novalidate","",3,"ngSubmit"],["f","ngForm"],[1,"form-group","mb-4"],["for","nombreTitulacion"],["type","text","id","nombreTitulacion","name","nombreTitulacion","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","institucion"],["type","text","id","institucion","name","institucion","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","logoimg"],["type","file","id","logoimg","name","logoimg","accept",".jpg, .jpeg, .png",1,"form-control",3,"ngModel","ngModelChange","change"],["for","descripcionE"],["type","text","id","descripcionE","name","descripcionE","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"fechaInicio"],["for","fechaInicio"],["type","date","id","fechaInicio","name","fechaInicio","value","2018-07-22","min","2000-01-01","max","2023-12-31",3,"ngModel","ngModelChange"],[1,"form-check","form-switch"],["type","checkbox","id","formSwitchChecked","value","1","checked","",1,"form-check-input",3,"ngModel","ngModelChange"],["for","formSwitchChecked",1,"form-check-label"],["class","fechaFin",4,"ngIf"],["id","imagen_muestra",1,"imagen","mb-4"],["class","spinner-border loading","style","width: 3rem; height: 3rem","role","status",4,"ngIf"],["width","200px",3,"src",4,"ngIf"],[1,"btn","btn-primary"],[1,"fechaFin"],["for","fechaFin"],["type","date","id","fechaFin","name","fechaFin","value","2018-07-22","min","fechaInicio","max","2023-12-31",3,"ngModel","ngModelChange"],["role","status",1,"spinner-border","loading",2,"width","3rem","height","3rem"],[1,"sr-only"],["width","200px",3,"src"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"form",4,5),l.NdJ("ngSubmit",function(){return r.onCreate()}),l.TgZ(6,"div",6)(7,"label",7),l._uU(8,"Nombre de la carrera"),l.qZA(),l.TgZ(9,"input",8),l.NdJ("ngModelChange",function(a){return r.nombreTitulacion=a}),l.qZA()(),l.TgZ(10,"div",6)(11,"label",9),l._uU(12,"Nombre de la institucion"),l.qZA(),l.TgZ(13,"input",10),l.NdJ("ngModelChange",function(a){return r.institucion=a}),l.qZA()(),l.TgZ(14,"div",6)(15,"label",11),l._uU(16,"logo de la institucion"),l.qZA(),l.TgZ(17,"input",12),l.NdJ("ngModelChange",function(a){return r.logoimg=a})("change",function(a){return r.uploadImage(a)}),l.qZA()(),l.TgZ(18,"div",6)(19,"label",13),l._uU(20,"Descripcion de su carrera"),l.qZA(),l.TgZ(21,"input",14),l.NdJ("ngModelChange",function(a){return r.descripcionE=a}),l.qZA()(),l.TgZ(22,"div",15)(23,"label",16),l._uU(24,"fecha de Inicio"),l.qZA(),l.TgZ(25,"input",17),l.NdJ("ngModelChange",function(a){return r.fechaInicio=a}),l.qZA()(),l.TgZ(26,"div",6)(27,"div",18)(28,"input",19),l.NdJ("ngModelChange",function(a){return r.aux_actualmente=a}),l.qZA(),l.TgZ(29,"label",20),l._uU(30,"actualmente"),l.qZA()()(),l.YNc(31,Db,4,1,"div",21),l.TgZ(32,"div",22)(33,"P"),l._uU(34,"AQUI APARECERA SU IMAGEN UNA VEZ CARGADA "),l.qZA(),l.YNc(35,$P,2,0,"div",23),l.YNc(36,Sb,1,1,"img",24),l.qZA(),l.TgZ(37,"button",25),l._uU(38,"Agregar Educacion"),l.qZA()()()()()()),2&t&&(l.xp6(9),l.Q6J("ngModel",r.nombreTitulacion),l.xp6(4),l.Q6J("ngModel",r.institucion),l.xp6(4),l.Q6J("ngModel",r.logoimg),l.xp6(4),l.Q6J("ngModel",r.descripcionE),l.xp6(4),l.Q6J("ngModel",r.fechaInicio),l.xp6(3),l.Q6J("ngModel",r.aux_actualmente),l.xp6(3),l.Q6J("ngIf",!r.aux_actualmente),l.xp6(4),l.Q6J("ngIf",1==r.imageService.loading&&null==r.imageService.url),l.xp6(1),l.Q6J("ngIf",null!=r.imageService.url))},dependencies:[en,Pi,Gr,Xi,ws,ns,ei,Eo,Fr],styles:[".fondo[_ngcontent-%COMP%]{height:200vh;background-color:#00796b}.row[_ngcontent-%COMP%]{padding:20px;color:#bdbdbd}.form-group[_ngcontent-%COMP%]{max-width:700px}.form[_ngcontent-%COMP%]{margin-top:25%}.loading[_ngcontent-%COMP%], #imagen_muestra[_ngcontent-%COMP%]{padding:10px}@media (min-width: 800px){.form[_ngcontent-%COMP%]{padding-left:25%}.form-group[_ngcontent-%COMP%]{max-width:80%}}"]}),n})(),av=(()=>{class n{constructor(t){this.httpClient=t,this.expURL="https://backendrde.onrender.com/explab/"}lista(){return this.httpClient.get(this.expURL+"lista")}detail(t){return this.httpClient.get(this.expURL+`detail/${t}`)}save(t){return this.httpClient.post(this.expURL+"create",t)}update(t,r){return this.httpClient.put(this.expURL+`update/${t}`,r)}delete(t){return this.httpClient.delete(this.expURL+`delete/${t}`)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(sl))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function GP(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",26)(1,"label",27),l._uU(2,"fecha de finalizacion"),l.qZA(),l.TgZ(3,"input",28),l.NdJ("ngModelChange",function(i){l.CHM(t);const a=l.oxw();return l.KtG(a.expLab.fecha_fin=i)}),l.qZA()()}if(2&n){const t=l.oxw();l.xp6(3),l.Q6J("ngModel",t.expLab.fecha_fin)}}function qP(n,e){if(1&n&&l._UZ(0,"img",29),2&n){const t=l.oxw();l.s9C("src",t.expLab.logo,l.LSH)}}function px(n,e){1&n&&(l.TgZ(0,"div",30),l._UZ(1,"span",31),l.qZA())}function gx(n,e){if(1&n&&l._UZ(0,"img",29),2&n){const t=l.oxw();l.Q6J("src",t.imageService.url,l.LSH)}}let mx=(()=>{class n{constructor(t,r,i,a){this.sExperiencia=t,this.activatedRouter=r,this.router=i,this.imageService=a,this.expLab=null,this.aux_actualmente=!1}ngOnInit(){const t=this.activatedRouter.snapshot.params.id;this.imageService.url=null,this.imageService.loading=!1,this.sExperiencia.detail(t).subscribe(r=>{this.expLab=r,this.aux_actualmente=Boolean(this.expLab.actualmente)},r=>{alert("Error al modificar experiencia"),this.router.navigate([""])})}onUpdate(){const t=this.activatedRouter.snapshot.params.id;this.expLab.actualmente=this.aux_actualmente?1:0,null!=this.imageService.url&&(this.expLab.logo=this.imageService.url),this.sExperiencia.update(t,this.expLab).subscribe(r=>{alert("se modifico correctamente experiencia"),this.router.navigate([""])},r=>{alert("Error al modificar experiencia"),this.router.navigate([""])})}uploadImage(t){const r="experiencia_"+this.expLab.empresa.replace(/ /g,"")+"_"+this.expLab.puesto.replace(/ /g,"");this.imageService.loading=!0,this.imageService.uploadImage(t,r)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(av),l.Y36(is),l.Y36(Pn),l.Y36(wu))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-edit-experiencia"]],decls:43,vars:10,consts:[[1,"fondo"],[1,"container"],[1,"row"],[1,"form"],["novalidate","",3,"ngSubmit"],["f","ngForm"],[1,"form-group","mb-4"],["for","puesto"],["type","text","id","puesto","name","puesto","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","Empresa"],["type","text","id","Empresa","name","Empresa","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","logoimg"],["type","file","id","logoimg","name","logoimg","accept",".jpg, .jpeg, .png",1,"form-control",3,"ngModel","ngModelChange","change"],["for","descripcionEx"],["type","text","id","descripcionEx","name","descripcionEx","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"fechaInicio"],["for","fechaInicio"],["type","date","id","fecha_inicio","name","fecha_inicio","value","2018-07-22","min","2000-01-01","max","2023-12-31",3,"ngModel","ngModelChange"],[1,"form-check","form-switch"],["type","checkbox","id","formSwitchChecked","value","1","checked","",1,"form-check-input",3,"ngModel","ngModelChange"],["for","formSwitchChecked",1,"form-check-label"],["class","fechaFin",4,"ngIf"],[1,"imagen","mb-4","imagen_muestra"],["width","200px",3,"src",4,"ngIf"],["class","spinner-border loading","style","width: 3rem; height: 3rem","role","status",4,"ngIf"],[1,"btn","btn-primary"],[1,"fechaFin"],["for","fechaFin"],["type","date","id","fechaFin","name","fechaFin","value","2018-07-22","min","2000-01-01","max","2023-12-31",3,"ngModel","ngModelChange"],["width","200px",3,"src"],["role","status",1,"spinner-border","loading",2,"width","3rem","height","3rem"],[1,"sr-only"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"form",4,5),l.NdJ("ngSubmit",function(){return r.onUpdate()}),l.TgZ(6,"div",6)(7,"label",7),l._uU(8,"Nombre de puesto"),l.qZA(),l.TgZ(9,"input",8),l.NdJ("ngModelChange",function(a){return r.expLab.puesto=a}),l.qZA()(),l.TgZ(10,"div",6)(11,"label",9),l._uU(12,"Nombre de la empresa"),l.qZA(),l.TgZ(13,"input",10),l.NdJ("ngModelChange",function(a){return r.expLab.empresa=a}),l.qZA()(),l.TgZ(14,"div",6)(15,"label",11),l._uU(16,"img"),l.qZA(),l.TgZ(17,"input",12),l.NdJ("ngModelChange",function(a){return r.expLab.logo=a})("change",function(a){return r.uploadImage(a)}),l.qZA()(),l.TgZ(18,"div",6)(19,"label",13),l._uU(20,"Descripcion de sus estudios"),l.qZA(),l.TgZ(21,"input",14),l.NdJ("ngModelChange",function(a){return r.expLab.descripcion=a}),l.qZA()(),l.TgZ(22,"div",15)(23,"label",16),l._uU(24,"fecha de Inicio"),l.qZA(),l.TgZ(25,"input",17),l.NdJ("ngModelChange",function(a){return r.expLab.fecha_inicio=a}),l.qZA(),l.TgZ(26,"div",6)(27,"div",18)(28,"input",19),l.NdJ("ngModelChange",function(a){return r.aux_actualmente=a}),l.qZA(),l.TgZ(29,"label",20),l._uU(30,"actualmente"),l.qZA()()(),l.YNc(31,GP,4,1,"div",21),l.qZA(),l.TgZ(32,"div",22)(33,"p"),l._uU(34,"imagen que tiene"),l.qZA(),l.YNc(35,qP,1,1,"img",23),l.qZA(),l.TgZ(36,"div",22)(37,"P"),l._uU(38,"AQUI APARECERA SU IMAGEN UNA VEZ CARGADA "),l.qZA(),l.YNc(39,px,2,0,"div",24),l.YNc(40,gx,1,1,"img",23),l.qZA(),l.TgZ(41,"button",25),l._uU(42,"Agregar educacion"),l.qZA()()()()()()),2&t&&(l.xp6(9),l.Q6J("ngModel",r.expLab.puesto),l.xp6(4),l.Q6J("ngModel",r.expLab.empresa),l.xp6(4),l.Q6J("ngModel",r.expLab.logo),l.xp6(4),l.Q6J("ngModel",r.expLab.descripcion),l.xp6(4),l.Q6J("ngModel",r.expLab.fecha_inicio),l.xp6(3),l.Q6J("ngModel",r.aux_actualmente),l.xp6(3),l.Q6J("ngIf",!r.aux_actualmente),l.xp6(4),l.Q6J("ngIf","vacio"!=r.expLab.logo),l.xp6(4),l.Q6J("ngIf",1==r.imageService.loading&&null==r.imageService.url),l.xp6(1),l.Q6J("ngIf",null!=r.imageService.url))},dependencies:[en,Pi,Gr,Xi,ws,ns,ei,Eo,Fr],styles:[".fondo[_ngcontent-%COMP%]{height:200vh;background-color:#00796b}.row[_ngcontent-%COMP%]{padding:20px;color:#bdbdbd}.form-group[_ngcontent-%COMP%]{max-width:700px}.form[_ngcontent-%COMP%]{margin-top:25%}.imagen_muestra[_ngcontent-%COMP%], .loading[_ngcontent-%COMP%]{padding:10px}@media (min-width: 800px){.form[_ngcontent-%COMP%]{padding-left:25%}.form-group[_ngcontent-%COMP%]{max-width:80%}}"]}),n})();class _x{constructor(e,t,r,i,a,c,h){this.empresa=e,this.puesto=t,this.descripcion=r,this.logo=i,this.fecha_inicio=a,this.actualmente=c,this.fecha_fin=0==c?h:a}}function yx(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",26)(1,"label",27),l._uU(2,"fecha de finalizacion"),l.qZA(),l.TgZ(3,"input",28),l.NdJ("ngModelChange",function(i){l.CHM(t);const a=l.oxw();return l.KtG(a.fechaFin=i)}),l.qZA()()}if(2&n){const t=l.oxw();l.xp6(3),l.Q6J("ngModel",t.fechaFin)}}function vx(n,e){1&n&&(l.TgZ(0,"div",29),l._UZ(1,"span",30),l.qZA())}function wx(n,e){if(1&n&&l._UZ(0,"img",31),2&n){const t=l.oxw();l.Q6J("src",t.imageService.url,l.LSH)}}let Ex=(()=>{class n{constructor(t,r,i,a){this.sExperiencia=t,this.activatedRouter=r,this.router=i,this.imageService=a,this.actualmente=0,this.fechaFin="0000-00-00",this.aux_actualmente=!1}ngOnInit(){this.imageService.url=null,this.imageService.loading=!1}onCreate(){this.aux_actualmente&&(this.actualmente=1),this.logoimg=this.imageService.url.includes(this.aux)?this.imageService.url:"vacio",this.logoimg=this.imageService.url;const t=new _x(this.empresa,this.puesto,this.descripcionEx,this.logoimg,this.fechaInicio,this.actualmente,this.fechaFin);this.sExperiencia.save(t).subscribe(r=>{alert("Experiencia a\xf1adida"),this.router.navigate([""])},r=>{alert("Fall\xf3 agregar Experiencia"),this.router.navigate([""])})}uploadImage(t){this.aux="experiencia_"+this.empresa.replace(/ /g,"")+"_"+this.puesto.replace(/ /g,"");const r=this.aux;this.imageService.loading=!0,this.imageService.uploadImage(t,r)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(av),l.Y36(is),l.Y36(Pn),l.Y36(wu))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-new-experiencia"]],decls:39,vars:9,consts:[[1,"fondo"],[1,"container"],[1,"row"],[1,"form"],["novalidate","",3,"ngSubmit"],["f","ngForm"],[1,"form-group","mb-4"],["for","puesto"],["type","text","id","puesto","name","puesto","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","empresa"],["type","text","id","empresa","name","empresa","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","logoimg"],["type","file","id","logoimg","name","logoimg","accept",".jpg, .jpeg, .png",1,"form-control",3,"ngModel","ngModelChange","change"],["for","descripcionEx"],["type","text","id","descripcionEx","name","descripcionEx","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"fechaInicio"],["for","fechaInicio"],["type","date","id","fechaInicio","name","fechaInicio","value","2018-07-22","min","2000-01-01","max","2023-12-31",3,"ngModel","ngModelChange"],[1,"form-check","form-switch"],["type","checkbox","id","formSwitchChecked","value","1","checked","",1,"form-check-input",3,"ngModel","ngModelChange"],["for","formSwitchChecked",1,"form-check-label"],["class","fechaFin",4,"ngIf"],["id","imagen_muestra",1,"imagen","mb-4"],["class","spinner-border loading","style","width: 3rem; height: 3rem","role","status",4,"ngIf"],["width","200px",3,"src",4,"ngIf"],[1,"btn","btn-primary"],[1,"fechaFin"],["for","fechaFin"],["type","date","id","fechaFin","name","fechaFin","value","2018-07-22","min","fechaInicio","max","2023-12-31",3,"ngModel","ngModelChange"],["role","status",1,"spinner-border","loading",2,"width","3rem","height","3rem"],[1,"sr-only"],["width","200px",3,"src"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"form",4,5),l.NdJ("ngSubmit",function(){return r.onCreate()}),l.TgZ(6,"div",6)(7,"label",7),l._uU(8,"Nombre de puesto"),l.qZA(),l.TgZ(9,"input",8),l.NdJ("ngModelChange",function(a){return r.puesto=a}),l.qZA()(),l.TgZ(10,"div",6)(11,"label",9),l._uU(12,"Nombre de la empresa"),l.qZA(),l.TgZ(13,"input",10),l.NdJ("ngModelChange",function(a){return r.empresa=a}),l.qZA()(),l.TgZ(14,"div",6)(15,"label",11),l._uU(16,"logo de la empresa"),l.qZA(),l.TgZ(17,"input",12),l.NdJ("ngModelChange",function(a){return r.logoimg=a})("change",function(a){return r.uploadImage(a)}),l.qZA()(),l.TgZ(18,"div",6)(19,"label",13),l._uU(20,"Descripcion de su trabajo"),l.qZA(),l.TgZ(21,"input",14),l.NdJ("ngModelChange",function(a){return r.descripcionEx=a}),l.qZA()(),l.TgZ(22,"div",15)(23,"label",16),l._uU(24,"fecha de Inicio"),l.qZA(),l.TgZ(25,"input",17),l.NdJ("ngModelChange",function(a){return r.fechaInicio=a}),l.qZA()(),l.TgZ(26,"div",6)(27,"div",18)(28,"input",19),l.NdJ("ngModelChange",function(a){return r.aux_actualmente=a}),l.qZA(),l.TgZ(29,"label",20),l._uU(30,"actualmente"),l.qZA()()(),l.YNc(31,yx,4,1,"div",21),l.TgZ(32,"div",22)(33,"P"),l._uU(34,"AQUI APARECERA SU IMAGEN UNA VEZ CARGADA "),l.qZA(),l.YNc(35,vx,2,0,"div",23),l.YNc(36,wx,1,1,"img",24),l.qZA(),l.TgZ(37,"button",25),l._uU(38,"Agregar experiencia"),l.qZA()()()()()()),2&t&&(l.xp6(9),l.Q6J("ngModel",r.puesto),l.xp6(4),l.Q6J("ngModel",r.empresa),l.xp6(4),l.Q6J("ngModel",r.logoimg),l.xp6(4),l.Q6J("ngModel",r.descripcionEx),l.xp6(4),l.Q6J("ngModel",r.fechaInicio),l.xp6(3),l.Q6J("ngModel",r.aux_actualmente),l.xp6(3),l.Q6J("ngIf",!r.aux_actualmente),l.xp6(4),l.Q6J("ngIf",1==r.imageService.loading&&null==r.imageService.url),l.xp6(1),l.Q6J("ngIf",null!=r.imageService.url))},dependencies:[en,Pi,Gr,Xi,ws,ns,ei,Eo,Fr],styles:[".fondo[_ngcontent-%COMP%]{height:200vh;background-color:#00796b}.row[_ngcontent-%COMP%]{padding:20px;color:#bdbdbd}.form-group[_ngcontent-%COMP%]{max-width:700px}.form[_ngcontent-%COMP%]{margin-top:25%}#imagen_muestra[_ngcontent-%COMP%], .loading[_ngcontent-%COMP%]{padding:10px}@media (min-width: 800px){.form[_ngcontent-%COMP%]{padding-left:25%}.form-group[_ngcontent-%COMP%]{max-width:80%}}"]}),n})(),uv=(()=>{class n{constructor(t){this.httpClient=t,this.URL="https://backendrde.onrender.com/skill/"}lista(){return this.httpClient.get(this.URL+"lista")}detail(t){return this.httpClient.get(this.URL+`detail/${t}`)}save(t){return this.httpClient.post(this.URL+"create",t)}update(t,r){return this.httpClient.put(this.URL+`update/${t}`,r)}delete(t){return this.httpClient.delete(this.URL+`delete/${t}`)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(sl))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Cx(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"form",5,6),l.NdJ("ngSubmit",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.onUpdate())}),l.TgZ(5,"div",7)(6,"label",8),l._uU(7,"Nombre de la Skill"),l.qZA(),l.TgZ(8,"input",9),l.NdJ("ngModelChange",function(i){l.CHM(t);const a=l.oxw();return l.KtG(a.skill.nombre=i)}),l.qZA()(),l.TgZ(9,"div",7)(10,"label",10),l._uU(11,"Ingrese el porcentaje"),l.qZA(),l.TgZ(12,"input",11),l.NdJ("ngModelChange",function(i){l.CHM(t);const a=l.oxw();return l.KtG(a.skill.porcentaje=i)}),l.qZA()(),l.TgZ(13,"button",12),l._uU(14," Actualizar "),l.qZA()()()()()}if(2&n){const t=l.oxw();l.xp6(8),l.Q6J("ngModel",t.skill.nombre),l.xp6(4),l.Q6J("ngModel",t.skill.porcentaje)}}let bx=(()=>{class n{constructor(t,r,i){this.skillS=t,this.activatedRouter=r,this.router=i,this.skill=null}ngOnInit(){this.skillS.detail(this.activatedRouter.snapshot.params.id).subscribe(r=>{this.skill=r},r=>{alert("Error al modificar Skill"),this.router.navigate([""])})}onUpdate(){this.skillS.update(this.activatedRouter.snapshot.params.id,this.skill).subscribe(r=>{alert("Modificado correctamente skill"),this.router.navigate([""])},r=>{alert("Error al modificar la skill"),this.router.navigate([""])})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(uv),l.Y36(is),l.Y36(Pn))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-edit-skill"]],decls:2,vars:1,consts:[[1,"fondo"],["class","container",4,"ngIf"],[1,"container"],[1,"row"],[1,"form"],["novalidate","",3,"ngSubmit"],["f","ngForm"],[1,"form-group","mb-4"],["for","nombre"],["type","text","id","nombre","name","nombre","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","porcentaje"],["type","text","id","porcentaje","name","porcentaje","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-primary"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0),l.YNc(1,Cx,15,2,"div",1),l.qZA()),2&t&&(l.xp6(1),l.Q6J("ngIf",r.skill))},dependencies:[en,Pi,Gr,ws,ns,ei,Eo,Fr],styles:[".fondo[_ngcontent-%COMP%]{height:100vh;background-color:#00796b}.row[_ngcontent-%COMP%]{padding:20px;color:#bdbdbd}.form-group[_ngcontent-%COMP%]{max-width:700px}.form[_ngcontent-%COMP%]{margin-top:25%}@media (min-width: 800px){.form[_ngcontent-%COMP%]{padding-left:25%}.form-group[_ngcontent-%COMP%]{max-width:80%}}"]}),n})();class Ix{constructor(e,t){this.nombre=e,this.porcentaje=t}}let Ff=(()=>{class n{constructor(t,r){this.skillS=t,this.router=r}ngOnInit(){}onCreate(){const t=new Ix(this.nombre,this.porcentaje);this.skillS.save(t).subscribe(r=>{alert("Skill creada correctamente"),this.router.navigate([""])},r=>{alert("Fallo al a\xf1adir la skill"),this.router.navigate([""])})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(uv),l.Y36(Pn))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-new-skill"]],decls:16,vars:2,consts:[[1,"fondo"],[1,"container"],[1,"row"],[1,"form"],["novalidate","",3,"ngSubmit"],["f","ngForm"],[1,"form-group","mb-4"],["for","nombre"],["type","text","id","nombre","name","nombre","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","porcentaje"],["type","text","id","porcentaje","name","porcentaje","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-primary"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"form",4,5),l.NdJ("ngSubmit",function(){return r.onCreate()}),l.TgZ(6,"div",6)(7,"label",7),l._uU(8,"Nueva Skill"),l.qZA(),l.TgZ(9,"input",8),l.NdJ("ngModelChange",function(a){return r.nombre=a}),l.qZA()(),l.TgZ(10,"div",6)(11,"label",9),l._uU(12,"Porcentaje"),l.qZA(),l.TgZ(13,"input",10),l.NdJ("ngModelChange",function(a){return r.porcentaje=a}),l.qZA()(),l.TgZ(14,"button",11),l._uU(15," Agregar skill "),l.qZA()()()()()()),2&t&&(l.xp6(9),l.Q6J("ngModel",r.nombre),l.xp6(4),l.Q6J("ngModel",r.porcentaje))},dependencies:[Pi,Gr,ws,ns,ei,Eo,Fr],styles:[".fondo[_ngcontent-%COMP%]{height:100vh;background-color:#00796b}.row[_ngcontent-%COMP%]{padding:20px;color:#bdbdbd}.form-group[_ngcontent-%COMP%]{max-width:700px}.form[_ngcontent-%COMP%]{margin-top:25%}@media (min-width: 800px){.form[_ngcontent-%COMP%]{padding-left:25%}.form-group[_ngcontent-%COMP%]{max-width:80%}}"]}),n})();const dm="AuthToken",hm="AuthUsername",Lf="AuthAuthorities";let ll=(()=>{class n{constructor(){this.roles=[]}setToken(t){window.sessionStorage.removeItem(dm),window.sessionStorage.setItem(dm,t)}getToken(){return sessionStorage.getItem(dm)}setUserName(t){window.sessionStorage.removeItem(hm),window.sessionStorage.setItem(hm,t)}getUserName(){return sessionStorage.getItem(hm)}setAuthorities(t){window.sessionStorage.removeItem(Lf),window.sessionStorage.setItem(Lf,JSON.stringify(t))}getAuthorities(){return this.roles=[],sessionStorage.getItem(Lf)&&JSON.parse(sessionStorage.getItem(Lf)).forEach(t=>{this.roles.push(t.authority)}),this.roles}logOut(){window.sessionStorage.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ab(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"button",14),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.login())}),l._uU(1,"INGRESO"),l.qZA()}}function Tx(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"button",14),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.onLogOut())}),l._uU(1,"CERRAR SESION"),l.qZA()}}let Dx=(()=>{class n{constructor(t,r){this.router=t,this.tokenService=r,this.isLogged=!1}ngOnInit(){this.isLogged=!!this.tokenService.getToken()}onLogOut(){this.tokenService.logOut(),window.location.reload()}login(){this.router.navigate(["/login"])}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Pn),l.Y36(ll))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-logo-ap"]],decls:15,vars:2,consts:[[1,"row"],[1,"container"],[1,"logo"],["src","../../../assets/Logos_proyecto/APLogo.png","id","logoAP"],[1,"redes"],["href","https://www.linkedin.com/in/roman-dario-esquivel/","target","_blank"],["src","../../../assets/Logos_proyecto/linkedin.png","id","linkedin"],["href","https://twitter.com/RomanDarioEsqu1","target","_blank"],["src","../../../assets/Logos_proyecto/twitter.png","id","twitter"],["href","https://www.instagram.com/esquivelromandario/","target","_blank"],["src","../../../assets/Logos_proyecto/instagram.png","id","instagram"],["href","https://github.com/Roman-Dario-Esquivel","target","_blank"],["src","../../../assets/Logos_proyecto/github.png","id","github"],["type","button","class","btn btn-outline-light",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-light",3,"click"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0)(1,"div",1)(2,"div",2),l._UZ(3,"img",3),l.qZA(),l.TgZ(4,"div",4)(5,"a",5),l._UZ(6,"img",6),l.qZA(),l.TgZ(7,"a",7),l._UZ(8,"img",8),l.qZA(),l.TgZ(9,"a",9),l._UZ(10,"img",10),l.qZA(),l.TgZ(11,"a",11),l._UZ(12,"img",12),l.qZA(),l.YNc(13,Ab,2,0,"button",13),l.YNc(14,Tx,2,0,"button",13),l.qZA()()()),2&t&&(l.xp6(13),l.Q6J("ngIf",!r.isLogged),l.xp6(1),l.Q6J("ngIf",r.isLogged))},dependencies:[en],styles:[".row[_ngcontent-%COMP%]{background-color:#00695c}.container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}img[_ngcontent-%COMP%]{width:50px}#logoAP[_ngcontent-%COMP%]{width:150px}.redes[_ngcontent-%COMP%]{margin-right:10px}.btn[_ngcontent-%COMP%]{border-width:medium}.redes[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:0 5px}@media (max-width:570px){.container[_ngcontent-%COMP%]{flex-direction:column}.redes[_ngcontent-%COMP%]{display:flex}}"]}),n})();function WP(n,e){if(1&n&&l._UZ(0,"img",1),2&n){const t=l.oxw();l.s9C("src",t.persona.imgbanner,l.LSH)}}let Sx=(()=>{class n{constructor(t){this.personaService=t,this.persona=null}ngOnInit(){this.cargarPersona()}cargarPersona(){this.personaService.detail(1).subscribe(t=>{this.persona=t})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Uy))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-banner"]],decls:2,vars:1,consts:[["alt","",3,"src",4,"ngIf"],["alt","",3,"src"]],template:function(t,r){1&t&&(l.TgZ(0,"div"),l.YNc(1,WP,1,1,"img",0),l.qZA()),2&t&&(l.xp6(1),l.Q6J("ngIf","vacio"!=r.persona.imgbanner))},dependencies:[en],styles:["img[_ngcontent-%COMP%]{width:100%;height:400px;object-fit:cover;object-position:bottom}"]}),n})(),Ax=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-header"]],decls:3,vars:0,consts:[[1,"row"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0),l._UZ(1,"app-logo-ap")(2,"app-banner"),l.qZA())},dependencies:[Dx,Sx],styles:[".row[_ngcontent-%COMP%]{background-color:#00796b}"]}),n})();function xx(n,e){1&n&&(l.TgZ(0,"button",14),l._UZ(1,"i",15),l._uU(2," Editar Persona "),l.qZA())}function Mx(n,e){if(1&n&&l._UZ(0,"img",16),2&n){const t=l.oxw();l.s9C("src",t.persona.imgperfil,l.LSH)}}let Rx=(()=>{class n{constructor(t,r){this.personaService=t,this.tokenService=r,this.persona=null,this.isLogged=!1}ngOnInit(){this.cargarPersona(),this.isLogged=!!this.tokenService.getToken()}cargarPersona(){this.personaService.detail(1).subscribe(t=>{this.persona=t})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Uy),l.Y36(ll))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-acerca-de-mi"]],decls:20,vars:5,consts:[["rel","preconnect","href","https://fonts.googleapis.com"],["rel","preconnect","href","https://fonts.gstatic.com","crossorigin",""],["href","https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap","rel","stylesheet"],[1,"row"],[1,"col-xs-8","col-sm-8","col-md-10","col-lg-10"],[1,"col-xs-4","col-sm-4","col-md-2","col-lg-2","button"],["type","button","class","btn btn-dark","routerLink","/editacercade/1",4,"ngIf"],["id","contenedor_imagi",1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],["class","img-fluid","id","fotodeperfil",3,"src",4,"ngIf"],[1,"col-xs-12","col-sm-4","col-md-4","col-lg-4"],["id","nombre"],["id","senioriti"],["id","presentacion",1,"col-xs-12","col-sm-8","col-md-8","col-lg-8"],["id","descripcion"],["type","button","routerLink","/editacercade/1",1,"btn","btn-dark"],[1,"bi","bi-pencil-fill"],["id","fotodeperfil",1,"img-fluid",3,"src"]],template:function(t,r){1&t&&(l._UZ(0,"link",0)(1,"link",1)(2,"link",2),l.TgZ(3,"div",3),l._UZ(4,"div",4),l.TgZ(5,"div",5),l.YNc(6,xx,3,0,"button",6),l.qZA(),l.TgZ(7,"div",7),l.YNc(8,Mx,1,1,"img",8),l.qZA(),l.TgZ(9,"div",9)(10,"p",10),l._uU(11),l.qZA(),l.TgZ(12,"p",11),l._uU(13,"Full Stack Developer Jr"),l.qZA()(),l.TgZ(14,"div",12)(15,"span")(16,"h1"),l._uU(17,"Acerca de mi"),l.qZA(),l.TgZ(18,"p",13),l._uU(19),l.qZA()()()()),2&t&&(l.xp6(6),l.Q6J("ngIf",r.isLogged),l.xp6(2),l.Q6J("ngIf","vacio"!=r.persona.imgperfil),l.xp6(3),l.AsE("",r.persona.nombre," ",r.persona.apellido,""),l.xp6(8),l.hij(" ",r.persona.descripcion," "))},dependencies:[en,_u],styles:[".row[_ngcontent-%COMP%]{padding:40px;color:#263226}div[_ngcontent-%COMP%]{background-color:#00796b;text-align:center}#fotodeperfil[_ngcontent-%COMP%]{width:100%;border-radius:100%;box-shadow:3px 3px 3px #bdbdbd}#presentacion[_ngcontent-%COMP%]{color:#fff;border-radius:30px;padding-top:3%;background-color:#00000042;text-align:center;left:10%;top:100%}#nombre[_ngcontent-%COMP%]{font-family:Orbitron,sans-serif;font-size:200%;font-weight:700;margin-top:30%}#senioriti[_ngcontent-%COMP%]{font-size:150%}#descripcion[_ngcontent-%COMP%]{word-wrap:break-word}@media (min-width: 800px){#fotodeperfil[_ngcontent-%COMP%]{position:absolute;top:400px;left:11%;width:200px;height:auto}}@media (max-width:800px){#fotodeperfil[_ngcontent-%COMP%]{position:absolute;top:400px;left:20%;width:200px;height:auto}#presentacion[_ngcontent-%COMP%]{text-align:center;top:500px}.row[_ngcontent-%COMP%]{padding-top:150px}}@media (max-width:570px){.row[_ngcontent-%COMP%]{padding-top:30px}#fotodeperfil[_ngcontent-%COMP%]{position:static;width:200px;height:auto}#presentacion[_ngcontent-%COMP%]{text-align:left;top:50px}#nombre[_ngcontent-%COMP%]{font-weight:700;margin-top:30px}}"]}),n})();function Uf(n,e){1&n&&(l.TgZ(0,"button",4),l._uU(1," Nueva Experiencia "),l.qZA())}function kx(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",17)(1,"div")(2,"button",18),l._UZ(3,"i",19),l._uU(4," EDITAR "),l.qZA()(),l.TgZ(5,"div")(6,"button",20),l.NdJ("click",function(){l.CHM(t);const i=l.oxw().$implicit,a=l.oxw();return l.KtG(a.delete(i.id))}),l._UZ(7,"i",21),l._uU(8," BORRAR "),l.qZA()()()}if(2&n){const t=l.oxw().$implicit;l.xp6(2),l.MGl("routerLink","/editexp/",t.id,"")}}function lv(n,e){if(1&n&&(l.TgZ(0,"h5",22),l._uU(1),l.qZA()),2&n){const t=l.oxw().$implicit;l.xp6(1),l.hij(" ",t.fecha_inicio," - Actualmente ")}}function Ea(n,e){if(1&n&&(l.TgZ(0,"h5",23),l._uU(1),l.qZA()),2&n){const t=l.oxw().$implicit;l.xp6(1),l.AsE(" ",t.fecha_inicio," - ",t.fecha_fin," ")}}function Nx(n,e){if(1&n&&l._UZ(0,"img",24),2&n){const t=l.oxw().$implicit;l.s9C("src",t.logo,l.LSH)}}function cv(n,e){if(1&n&&(l.TgZ(0,"div",5),l.YNc(1,kx,9,1,"div",6),l.TgZ(2,"div",7)(3,"div",8),l.YNc(4,lv,2,1,"h5",9),l.YNc(5,Ea,2,2,"h5",10),l.qZA(),l.TgZ(6,"div",11)(7,"h2",12),l._uU(8),l.qZA(),l.TgZ(9,"div",13),l.YNc(10,Nx,1,1,"img",14),l.TgZ(11,"h2",15),l._uU(12),l.qZA()(),l.TgZ(13,"p",16),l._uU(14),l.qZA()()()()),2&n){const t=e.$implicit,r=l.oxw();l.xp6(1),l.Q6J("ngIf",r.isLogged),l.xp6(3),l.Q6J("ngIf",1==t.actualmente),l.xp6(1),l.Q6J("ngIf",0==t.actualmente),l.xp6(3),l.Oqu(t.puesto),l.xp6(2),l.Q6J("ngIf","vacio"!=t.logo),l.xp6(2),l.Oqu(t.empresa),l.xp6(2),l.Oqu(t.descripcion)}}let Vf=(()=>{class n{constructor(t,r){this.sExperiencia=t,this.tokenService=r,this.expe=[],this.isLogged=!1}ngOnInit(){this.cargarExperiencia(),this.isLogged=!!this.tokenService.getToken()}cargarExperiencia(){this.sExperiencia.lista().subscribe(t=>{this.expe=t})}delete(t){null!=t&&this.sExperiencia.delete(t).subscribe(r=>{this.cargarExperiencia()},r=>{alert("No se pudo borrar la experiencia")})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(av),l.Y36(ll))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-experiencia"]],decls:6,vars:2,consts:[[1,"row"],[1,"col-lg-2"],["type","button","class","btn btn-secondary","routerLink","/newexp",4,"ngIf"],["id","expe",4,"ngFor","ngForOf"],["type","button","routerLink","/newexp",1,"btn","btn-secondary"],["id","expe"],["id","botones",4,"ngIf"],["id","experiencia",1,"espaci"],["id","fechas",1,"col-xs-12","col-sm-4","col-md-4","col-lg-4"],["id","actualmente",4,"ngIf"],["id","fecha_fin",4,"ngIf"],["id","parte",1,"col-xs-12","col-sm-8","col-md-8","col-lg-8"],["id","puesto"],["id","emp_logo"],["id","logo",3,"src",4,"ngIf"],["id","empresa"],["id","descripcion"],["id","botones"],[1,"btn","btn-light",3,"routerLink"],[1,"bi","bi-pencil-fill"],[1,"btn","btn-danger",3,"click"],[1,"bi","bi-trash-fill"],["id","actualmente"],["id","fecha_fin"],["id","logo",3,"src"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0)(1,"h1"),l._uU(2,"Experiencia laboral"),l.qZA(),l.TgZ(3,"div",1),l.YNc(4,Uf,2,0,"button",2),l.qZA(),l.YNc(5,cv,15,7,"div",3),l.qZA()),2&t&&(l.xp6(4),l.Q6J("ngIf",r.isLogged),l.xp6(1),l.Q6J("ngForOf",r.expe))},dependencies:[ui,en,_u],styles:[".row[_ngcontent-%COMP%]{padding:20px;color:#bdbdbd}div[_ngcontent-%COMP%]{background-color:#00796b}#experiencia[_ngcontent-%COMP%]{display:flex;gap:20px}#botones[_ngcontent-%COMP%]{display:flex;justify-content:space-around}#logo[_ngcontent-%COMP%]{max-width:50px;max-height:50px;border-radius:100%;margin-right:10px}#fechas[_ngcontent-%COMP%]{margin:10px}#partes[_ngcontent-%COMP%]{margin:10px;width:100%;height:100%;text-align:left}#emp_logo[_ngcontent-%COMP%]{display:flex;justify-content:left}@media (max-width:765px){.row[_ngcontent-%COMP%]{padding-top:30px}#experiencia[_ngcontent-%COMP%]{display:flex}#fechas[_ngcontent-%COMP%]{text-align:right}}@media (max-width:570px){.row[_ngcontent-%COMP%]{padding-top:30px}#experiencia[_ngcontent-%COMP%]{display:inline}#fechas[_ngcontent-%COMP%]{text-align:right;width:100%}}"]}),n})();function Px(n,e){1&n&&(l.TgZ(0,"button",4),l._uU(1," Nueva Educacion "),l.qZA())}function Ox(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",17)(1,"div")(2,"button",18),l._UZ(3,"i",19),l._uU(4," EDITAR "),l.qZA()(),l.TgZ(5,"div")(6,"button",20),l.NdJ("click",function(){l.CHM(t);const i=l.oxw().$implicit,a=l.oxw();return l.KtG(a.delete(i.id))}),l._UZ(7,"i",21),l._uU(8," BORRAR "),l.qZA()()()}if(2&n){const t=l.oxw().$implicit;l.xp6(2),l.MGl("routerLink","/editedu/",t.id,"")}}function Fx(n,e){if(1&n&&(l.TgZ(0,"h5",22),l._uU(1),l.qZA()),2&n){const t=l.oxw().$implicit;l.xp6(1),l.hij(" ",t.fecha_inicio," - Actualmente ")}}function fm(n,e){if(1&n&&(l.TgZ(0,"h5",23),l._uU(1),l.qZA()),2&n){const t=l.oxw().$implicit;l.xp6(1),l.AsE(" ",t.fecha_inicio," - ",t.fecha_fin," ")}}function pm(n,e){if(1&n&&l._UZ(0,"img",24),2&n){const t=l.oxw().$implicit;l.s9C("src",t.logoimg,l.LSH)}}function Lx(n,e){if(1&n&&(l.TgZ(0,"div",5),l.YNc(1,Ox,9,1,"div",6),l.TgZ(2,"div",7)(3,"div",8),l.YNc(4,Fx,2,1,"h5",9),l.YNc(5,fm,2,2,"h5",10),l.qZA(),l.TgZ(6,"div",11)(7,"h2",12),l._uU(8),l.qZA(),l.TgZ(9,"div",13),l.YNc(10,pm,1,1,"img",14),l.TgZ(11,"h2",15),l._uU(12),l.qZA()(),l.TgZ(13,"p",16),l._uU(14),l.qZA()()()()),2&n){const t=e.$implicit,r=l.oxw();l.xp6(1),l.Q6J("ngIf",r.isLogged),l.xp6(3),l.Q6J("ngIf",1==t.actualmente),l.xp6(1),l.Q6J("ngIf",0==t.actualmente),l.xp6(3),l.Oqu(t.titulacion),l.xp6(2),l.Q6J("ngIf","vacio"!=t.logoimg),l.xp6(2),l.Oqu(t.institucion),l.xp6(2),l.Oqu(t.descripcion_edu)}}let Ux=(()=>{class n{constructor(t,r){this.educacionS=t,this.tokenService=r,this.educacion=[],this.isLogged=!1}ngOnInit(){this.cargarEducacion(),this.isLogged=!!this.tokenService.getToken()}cargarEducacion(){this.educacionS.lista().subscribe(t=>{this.educacion=t})}delete(t){null!=t&&this.educacionS.delete(t).subscribe(r=>{this.cargarEducacion()},r=>{alert("No se pudo eliminar")})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(cm),l.Y36(ll))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-educacion"]],decls:6,vars:2,consts:[[1,"row"],[1,"col-lg-2"],["type","button","class","btn btn-secondary","routerLink","/newedu",4,"ngIf"],["id","edu",4,"ngFor","ngForOf"],["type","button","routerLink","/newedu",1,"btn","btn-secondary"],["id","edu"],["id","botones",4,"ngIf"],["id","experiencia",1,"espaci"],["id","fechas",1,"col-xs-12","col-sm-4","col-md-4","col-lg-4"],["id","actualmente",4,"ngIf"],["id","fecha_fin",4,"ngIf"],["id","parte",1,"col-xs-12","col-sm-8","col-md-8","col-lg-8"],["id","titulo"],["id","emp_logo"],["id","logo",3,"src",4,"ngIf"],["id","institucion"],["id","descripcion"],["id","botones"],[1,"btn","btn-light",3,"routerLink"],[1,"bi","bi-pencil-fill"],[1,"btn","btn-danger",3,"click"],[1,"bi","bi-trash-fill"],["id","actualmente"],["id","fecha_fin"],["id","logo",3,"src"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0)(1,"h1"),l._uU(2,"Educacion"),l.qZA(),l.TgZ(3,"div",1),l.YNc(4,Px,2,0,"button",2),l.qZA(),l.YNc(5,Lx,15,7,"div",3),l.qZA()),2&t&&(l.xp6(4),l.Q6J("ngIf",r.isLogged),l.xp6(1),l.Q6J("ngForOf",r.educacion))},dependencies:[ui,en,_u],styles:[".row[_ngcontent-%COMP%]{padding:20px;color:#bdbdbd}div[_ngcontent-%COMP%]{background-color:#00796b}#experiencia[_ngcontent-%COMP%]{display:flex;gap:20px}#logo[_ngcontent-%COMP%]{max-width:50px;max-height:50px;border-radius:100%;margin-right:10px}#botones[_ngcontent-%COMP%]{display:flex;justify-content:space-around}#fechas[_ngcontent-%COMP%]{margin:10px}#partes[_ngcontent-%COMP%]{margin:10px;width:100%;height:100%;text-align:left}#emp_logo[_ngcontent-%COMP%]{display:flex;justify-content:center}@media (max-width:780px){.row[_ngcontent-%COMP%]{padding-top:30px}#experiencia[_ngcontent-%COMP%]{display:inline}#fechas[_ngcontent-%COMP%]{text-align:right;width:100%}}"]}),n})();var Bf=U(4986),xb=U(3532);function gm(n=0,e,t=Bf.P){let r=-1;return null!=e&&((0,xb.K)(e)?t=e:r=e),new Tr.y(i=>{let a=function dv(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;a<0&&(a=0);let c=0;return t.schedule(function(){i.closed||(i.next(c++),0<=r?this.schedule(void 0,r):i.complete())},a)})}function Vx(n,e){if(1&n&&(l.O4$(),l.TgZ(0,"linearGradient"),l._UZ(1,"stop",5)(2,"stop",6),l.qZA()),2&n){const t=l.oxw(2);l.uIk("id",t.svg.outerLinearGradient.id),l.xp6(1),l.uIk("stop-color",t.svg.outerLinearGradient.colorStop1)("stop-opacity",1),l.xp6(1),l.uIk("stop-color",t.svg.outerLinearGradient.colorStop2)("stop-opacity",1)}}function Bx(n,e){if(1&n&&(l.O4$(),l.TgZ(0,"radialGradient"),l._UZ(1,"stop",5)(2,"stop",6),l.qZA()),2&n){const t=l.oxw(2);l.uIk("id",t.svg.radialGradient.id),l.xp6(1),l.uIk("stop-color",t.svg.radialGradient.colorStop1)("stop-opacity",1),l.xp6(1),l.uIk("stop-color",t.svg.radialGradient.colorStop2)("stop-opacity",1)}}function ZP(n,e){if(1&n&&(l.O4$(),l._UZ(0,"circle")),2&n){const t=l.oxw(3);l.uIk("cx",t.svg.backgroundCircle.cx)("cy",t.svg.backgroundCircle.cy)("r",t.svg.backgroundCircle.r)("fill",t.svg.backgroundCircle.fill)("fill-opacity",t.svg.backgroundCircle.fillOpacity)("stroke",t.svg.backgroundCircle.stroke)("stroke-width",t.svg.backgroundCircle.strokeWidth)}}function hv(n,e){if(1&n&&(l.O4$(),l._UZ(0,"circle")),2&n){const t=l.oxw(3);l.Q2q("fill","url(#",t.svg.radialGradient.id,")"),l.uIk("cx",t.svg.backgroundCircle.cx)("cy",t.svg.backgroundCircle.cy)("r",t.svg.backgroundCircle.r)("fill-opacity",t.svg.backgroundCircle.fillOpacity)("stroke",t.svg.backgroundCircle.stroke)("stroke-width",t.svg.backgroundCircle.strokeWidth)}}function fv(n,e){if(1&n&&(l.O4$(),l.ynx(0),l.YNc(1,ZP,1,7,"circle",2),l.YNc(2,hv,1,7,"circle",2),l.BQk()),2&n){const t=l.oxw(2);l.xp6(1),l.Q6J("ngIf",!t.options.backgroundGradient),l.xp6(1),l.Q6J("ngIf",t.options.backgroundGradient)}}function Mb(n,e){if(1&n&&(l.O4$(),l._UZ(0,"circle")),2&n){const t=l.oxw(2);l.uIk("cx",t.svg.circle.cx)("cy",t.svg.circle.cy)("r",t.svg.circle.r)("fill",t.svg.circle.fill)("stroke",t.svg.circle.stroke)("stroke-width",t.svg.circle.strokeWidth)}}function pv(n,e){if(1&n&&(l.O4$(),l._UZ(0,"path")),2&n){const t=l.oxw(3);l.uIk("d",t.svg.path.d)("stroke",t.svg.path.stroke)("stroke-width",t.svg.path.strokeWidth)("stroke-linecap",t.svg.path.strokeLinecap)("fill",t.svg.path.fill)}}function gv(n,e){if(1&n&&(l.O4$(),l._UZ(0,"path")),2&n){const t=l.oxw(3);l.Q2q("stroke","url(#",t.svg.outerLinearGradient.id,")"),l.uIk("d",t.svg.path.d)("stroke-width",t.svg.path.strokeWidth)("stroke-linecap",t.svg.path.strokeLinecap)("fill",t.svg.path.fill)}}function jx(n,e){if(1&n&&(l.O4$(),l.ynx(0),l.YNc(1,pv,1,5,"path",2),l.YNc(2,gv,1,5,"path",2),l.BQk()),2&n){const t=l.oxw(2);l.xp6(1),l.Q6J("ngIf",!t.options.outerStrokeGradient),l.xp6(1),l.Q6J("ngIf",t.options.outerStrokeGradient)}}function Hx(n,e){if(1&n&&(l.O4$(),l.TgZ(0,"tspan"),l._uU(1),l.qZA()),2&n){const t=e.$implicit,r=l.oxw(4);l.uIk("x",r.svg.title.x)("y",r.svg.title.y)("dy",t.dy)("font-size",r.svg.title.fontSize)("font-weight",r.svg.title.fontWeight)("fill",r.svg.title.color),l.xp6(1),l.Oqu(t.span)}}function $x(n,e){if(1&n&&(l.O4$(),l.ynx(0),l.YNc(1,Hx,2,7,"tspan",8),l.BQk()),2&n){const t=l.oxw(3);l.xp6(1),l.Q6J("ngForOf",t.svg.title.tspans)}}function Gx(n,e){if(1&n&&(l.O4$(),l.TgZ(0,"tspan"),l._uU(1),l.qZA()),2&n){const t=l.oxw(3);l.uIk("font-size",t.svg.units.fontSize)("font-weight",t.svg.units.fontWeight)("fill",t.svg.units.color),l.xp6(1),l.Oqu(t.svg.units.text)}}function Rb(n,e){if(1&n&&(l.O4$(),l.TgZ(0,"tspan"),l._uU(1),l.qZA()),2&n){const t=e.$implicit,r=l.oxw(4);l.uIk("x",r.svg.subtitle.x)("y",r.svg.subtitle.y)("dy",t.dy)("font-size",r.svg.subtitle.fontSize)("font-weight",r.svg.subtitle.fontWeight)("fill",r.svg.subtitle.color),l.xp6(1),l.Oqu(t.span)}}function mv(n,e){if(1&n&&(l.O4$(),l.ynx(0),l.YNc(1,Rb,2,7,"tspan",8),l.BQk()),2&n){const t=l.oxw(3);l.xp6(1),l.Q6J("ngForOf",t.svg.subtitle.tspans)}}function kb(n,e){if(1&n&&(l.O4$(),l.TgZ(0,"text",7),l.YNc(1,$x,2,1,"ng-container",2),l.YNc(2,Gx,2,4,"tspan",2),l.YNc(3,mv,2,1,"ng-container",2),l.qZA()),2&n){const t=l.oxw(2);l.uIk("x",t.svg.circle.cx)("y",t.svg.circle.cy)("text-anchor",t.svg.title.textAnchor),l.xp6(1),l.Q6J("ngIf",t.options.showTitle),l.xp6(1),l.Q6J("ngIf",t.options.showUnits),l.xp6(1),l.Q6J("ngIf",t.options.showSubtitle)}}function qx(n,e){if(1&n&&(l.O4$(),l._UZ(0,"image",9)),2&n){const t=l.oxw(2);l.uIk("height",t.svg.image.height)("width",t.svg.image.width)("href",t.svg.image.src,null,"xlink")("x",t.svg.image.x)("y",t.svg.image.y)}}function Nb(n,e){if(1&n){const t=l.EpF();l.O4$(),l.TgZ(0,"svg",1),l.NdJ("click",function(i){l.CHM(t);const a=l.oxw();return l.KtG(a.emitClickEvent(i))}),l.TgZ(1,"defs"),l.YNc(2,Vx,3,5,"linearGradient",2),l.YNc(3,Bx,3,5,"radialGradient",2),l.qZA(),l.YNc(4,fv,3,2,"ng-container",2),l.YNc(5,Mb,1,6,"circle",2),l.YNc(6,jx,3,2,"ng-container",2),l.YNc(7,kb,4,6,"text",3),l.YNc(8,qx,1,5,"image",4),l.qZA()}if(2&n){const t=l.oxw();l.uIk("viewBox",t.svg.viewBox)("height",t.svg.height)("width",t.svg.width)("class",t.options.class),l.xp6(2),l.Q6J("ngIf",t.options.outerStrokeGradient),l.xp6(1),l.Q6J("ngIf",t.options.backgroundGradient),l.xp6(1),l.Q6J("ngIf",t.options.showBackground),l.xp6(1),l.Q6J("ngIf",t.options.showInnerStroke),l.xp6(1),l.Q6J("ngIf",0!=+t.options.percent||t.options.showZeroOuterStroke),l.xp6(1),l.Q6J("ngIf",!t.options.showImage&&(t.options.showTitle||t.options.showUnits||t.options.showSubtitle)),l.xp6(1),l.Q6J("ngIf",t.options.showImage)}}class jf{constructor(){this.class="",this.backgroundGradient=!1,this.backgroundColor="transparent",this.backgroundGradientStopColor="transparent",this.backgroundOpacity=1,this.backgroundStroke="transparent",this.backgroundStrokeWidth=0,this.backgroundPadding=5,this.percent=0,this.radius=90,this.space=4,this.toFixed=0,this.maxPercent=1e3,this.renderOnClick=!0,this.units="%",this.unitsFontSize="10",this.unitsFontWeight="normal",this.unitsColor="#444444",this.outerStrokeGradient=!1,this.outerStrokeWidth=8,this.outerStrokeColor="#78C000",this.outerStrokeGradientStopColor="transparent",this.outerStrokeLinecap="round",this.innerStrokeColor="#C7E596",this.innerStrokeWidth=4,this.titleFormat=void 0,this.title="auto",this.titleColor="#444444",this.titleFontSize="20",this.titleFontWeight="normal",this.subtitleFormat=void 0,this.subtitle="progress",this.subtitleColor="#A9A9A9",this.subtitleFontSize="10",this.subtitleFontWeight="normal",this.imageSrc=void 0,this.imageHeight=void 0,this.imageWidth=void 0,this.animation=!0,this.animateTitle=!0,this.animateSubtitle=!1,this.animationDuration=500,this.showTitle=!0,this.showSubtitle=!0,this.showUnits=!0,this.showImage=!1,this.showBackground=!0,this.showInnerStroke=!0,this.clockwise=!0,this.responsive=!1,this.startFromZero=!0,this.showZeroOuterStroke=!0,this.lazy=!1}}let Wx=(()=>{class n{constructor(t,r,i){this.elRef=r,this.document=i,this.onClick=new l.vpe,this.svgElement=null,this.isInViewport=!1,this.onViewportChanged=new l.vpe,this._viewportChangedSubscriber=null,this.options=new jf,this.defaultOptions=new jf,this._lastPercent=0,this._gradientUUID=null,this.render=()=>{this.applyOptions(),this.options.lazy?(null===this.svgElement&&this.draw(this._lastPercent),this.isInViewport&&(this.options.animation&&this.options.animationDuration>0?this.animate(this._lastPercent,this.options.percent):this.draw(this.options.percent),this._lastPercent=this.options.percent)):(this.options.animation&&this.options.animationDuration>0?this.animate(this._lastPercent,this.options.percent):this.draw(this.options.percent),this._lastPercent=this.options.percent)},this.polarToCartesian=(a,c,h,g)=>{let y=g*Math.PI/180;return{x:a+Math.sin(y)*h,y:c-Math.cos(y)*h}},this.draw=a=>{let c=(a=void 0===a?this.options.percent:Math.abs(a))>100?100:a,h=2*this.options.radius+2*this.options.outerStrokeWidth;this.options.showBackground&&(h+=2*this.options.backgroundStrokeWidth+this.max(0,2*this.options.backgroundPadding));let S,R,g={x:h/2,y:h/2},y_x=g.x,y_y=g.y-this.options.radius,I=this.polarToCartesian(g.x,g.y,this.options.radius,360*(this.options.clockwise?c:100-c)/100);100===c&&(I.x=I.x+(this.options.clockwise?-.01:.01)),[S,R]=c>50?this.options.clockwise?[1,1]:[1,0]:this.options.clockwise?[0,1]:[0,0];let L=this.options.animateTitle?a:this.options.percent,G=L>this.options.maxPercent?`${this.options.maxPercent.toFixed(this.options.toFixed)}+`:L.toFixed(this.options.toFixed),le=this.options.animateSubtitle?a:this.options.percent,de={x:g.x,y:g.y,textAnchor:"middle",color:this.options.titleColor,fontSize:this.options.titleFontSize,fontWeight:this.options.titleFontWeight,texts:[],tspans:[]};if(void 0!==this.options.titleFormat&&"Function"===this.options.titleFormat.constructor.name){let ft=this.options.titleFormat(L);ft instanceof Array?de.texts=[...ft]:de.texts.push(ft.toString())}else"auto"===this.options.title?de.texts.push(G):this.options.title instanceof Array?de.texts=[...this.options.title]:de.texts.push(this.options.title.toString());let Ge={x:g.x,y:g.y,textAnchor:"middle",color:this.options.subtitleColor,fontSize:this.options.subtitleFontSize,fontWeight:this.options.subtitleFontWeight,texts:[],tspans:[]};if(void 0!==this.options.subtitleFormat&&"Function"===this.options.subtitleFormat.constructor.name){let ft=this.options.subtitleFormat(le);ft instanceof Array?Ge.texts=[...ft]:Ge.texts.push(ft.toString())}else this.options.subtitle instanceof Array?Ge.texts=[...this.options.subtitle]:Ge.texts.push(this.options.subtitle.toString());let at={text:`${this.options.units}`,fontSize:this.options.unitsFontSize,fontWeight:this.options.unitsFontWeight,color:this.options.unitsColor},nt=0,ut=1;if(this.options.showTitle&&(nt+=de.texts.length),this.options.showSubtitle&&(nt+=Ge.texts.length),this.options.showTitle)for(let ft of de.texts)de.tspans.push({span:ft,dy:this.getRelativeY(ut,nt)}),ut++;if(this.options.showSubtitle)for(let ft of Ge.texts)Ge.tspans.push({span:ft,dy:this.getRelativeY(ut,nt)}),ut++;null===this._gradientUUID&&(this._gradientUUID=this.uuid()),this.svg={viewBox:`0 0 ${h} ${h}`,width:this.options.responsive?"100%":h,height:this.options.responsive?"100%":h,backgroundCircle:{cx:g.x,cy:g.y,r:this.options.radius+this.options.outerStrokeWidth/2+this.options.backgroundPadding,fill:this.options.backgroundColor,fillOpacity:this.options.backgroundOpacity,stroke:this.options.backgroundStroke,strokeWidth:this.options.backgroundStrokeWidth},path:{d:`M ${y_x} ${y_y}\n        A ${this.options.radius} ${this.options.radius} 0 ${S} ${R} ${I.x} ${I.y}`,stroke:this.options.outerStrokeColor,strokeWidth:this.options.outerStrokeWidth,strokeLinecap:this.options.outerStrokeLinecap,fill:"none"},circle:{cx:g.x,cy:g.y,r:this.options.radius-this.options.space-this.options.outerStrokeWidth/2-this.options.innerStrokeWidth/2,fill:"none",stroke:this.options.innerStrokeColor,strokeWidth:this.options.innerStrokeWidth},title:de,units:at,subtitle:Ge,image:{x:g.x-this.options.imageWidth/2,y:g.y-this.options.imageHeight/2,src:this.options.imageSrc,width:this.options.imageWidth,height:this.options.imageHeight},outerLinearGradient:{id:"outer-linear-"+this._gradientUUID,colorStop1:this.options.outerStrokeColor,colorStop2:"transparent"===this.options.outerStrokeGradientStopColor?"#FFF":this.options.outerStrokeGradientStopColor},radialGradient:{id:"radial-"+this._gradientUUID,colorStop1:this.options.backgroundColor,colorStop2:"transparent"===this.options.backgroundGradientStopColor?"#FFF":this.options.backgroundGradientStopColor}}},this.getAnimationParameters=(a,c)=>{let g,y,I,S=this.options.startFromZero||a<0?0:a,R=c<0?0:this.min(c,this.options.maxPercent),L=Math.abs(Math.round(R-S));return L>=100?(g=100,y=this.options.animateTitle||this.options.animateSubtitle?Math.round(L/g):1):(g=L,y=1),I=Math.round(this.options.animationDuration/g),I<10&&(I=10,g=this.options.animationDuration/I,y=!this.options.animateTitle&&!this.options.animateSubtitle&&L>100?Math.round(100/g):Math.round(L/g)),y<1&&(y=1),{times:g,step:y,interval:I}},this.animate=(a,c)=>{this._timerSubscription&&!this._timerSubscription.closed&&this._timerSubscription.unsubscribe();let h=this.options.startFromZero?0:a,g=c,{step:y,interval:I}=this.getAnimationParameters(h,g),S=h;this._timerSubscription=h<g?gm(0,I).subscribe(()=>{S+=y,S<=g?!this.options.animateTitle&&!this.options.animateSubtitle&&S>=100?(this.draw(g),this._timerSubscription.unsubscribe()):this.draw(S):(this.draw(g),this._timerSubscription.unsubscribe())}):gm(0,I).subscribe(()=>{S-=y,S>=g?!this.options.animateTitle&&!this.options.animateSubtitle&&g>=100?(this.draw(g),this._timerSubscription.unsubscribe()):this.draw(S):(this.draw(g),this._timerSubscription.unsubscribe())})},this.emitClickEvent=a=>{this.options.renderOnClick&&this.animate(0,this.options.percent),this.onClick.emit(a)},this.applyOptions=()=>{for(let a of Object.keys(this.options))this.hasOwnProperty(a)&&void 0!==this[a]?this.options[a]=this[a]:this.templateOptions&&void 0!==this.templateOptions[a]&&(this.options[a]=this.templateOptions[a]);this.options.radius=Math.abs(+this.options.radius),this.options.space=+this.options.space,this.options.percent=+this.options.percent>0?+this.options.percent:0,this.options.maxPercent=Math.abs(+this.options.maxPercent),this.options.animationDuration=Math.abs(this.options.animationDuration),this.options.outerStrokeWidth=Math.abs(+this.options.outerStrokeWidth),this.options.innerStrokeWidth=Math.abs(+this.options.innerStrokeWidth),this.options.backgroundPadding=+this.options.backgroundPadding},this.getRelativeY=(a,c)=>(1*(a-c/2)-.18).toFixed(2)+"em",this.min=(a,c)=>a<c?a:c,this.max=(a,c)=>a>c?a:c,this.uuid=()=>{var a=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(h){var g=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"==h?g:3&g|8).toString(16)})},this.findSvgElement=function(){if(null===this.svgElement){let a=this.elRef.nativeElement.getElementsByTagName("svg");a.length>0&&(this.svgElement=a[0])}},this.checkViewport=()=>{this.findSvgElement();let a=this.isInViewport;this.isInViewport=this.isElementInViewport(this.svgElement),a!==this.isInViewport&&this.onViewportChanged.emit({oldValue:a,newValue:this.isInViewport})},this.onScroll=a=>{this.checkViewport()},this.loadEventsForLazyMode=()=>{if(this.options.lazy){this.document.addEventListener("scroll",this.onScroll,!0),this.window.addEventListener("resize",this.onScroll,!0),null===this._viewportChangedSubscriber&&(this._viewportChangedSubscriber=this.onViewportChanged.subscribe(({newValue:h})=>{h&&this.render()}));let a=gm(0,50).subscribe(()=>{null===this.svgElement?this.checkViewport():a.unsubscribe()})}},this.unloadEventsForLazyMode=()=>{this.document.removeEventListener("scroll",this.onScroll,!0),this.window.removeEventListener("resize",this.onScroll,!0),null!==this._viewportChangedSubscriber&&(this._viewportChangedSubscriber.unsubscribe(),this._viewportChangedSubscriber=null)},this.document=i,this.window=this.document.defaultView,Object.assign(this.options,t),Object.assign(this.defaultOptions,t)}isDrawing(){return this._timerSubscription&&!this._timerSubscription.closed}isElementInViewport(t){if(null==t)return!1;let a,r=t.getBoundingClientRect(),i=t.parentNode;do{if(a=i.getBoundingClientRect(),r.top>=a.bottom||r.bottom<=a.top||r.left>=a.right||r.right<=a.left)return!1;i=i.parentNode}while(i!=this.document.body);return!(r.top>=(this.window.innerHeight||this.document.documentElement.clientHeight)||r.bottom<=0||r.left>=(this.window.innerWidth||this.document.documentElement.clientWidth)||r.right<=0)}ngOnInit(){this.loadEventsForLazyMode()}ngOnDestroy(){this.unloadEventsForLazyMode()}ngOnChanges(t){this.render(),"lazy"in t&&(t.lazy.currentValue?this.loadEventsForLazyMode():this.unloadEventsForLazyMode())}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(jf),l.Y36(l.SBq),l.Y36(ge))},n.\u0275cmp=l.Xpm({type:n,selectors:[["circle-progress"]],inputs:{name:"name",class:"class",backgroundGradient:"backgroundGradient",backgroundColor:"backgroundColor",backgroundGradientStopColor:"backgroundGradientStopColor",backgroundOpacity:"backgroundOpacity",backgroundStroke:"backgroundStroke",backgroundStrokeWidth:"backgroundStrokeWidth",backgroundPadding:"backgroundPadding",radius:"radius",space:"space",percent:"percent",toFixed:"toFixed",maxPercent:"maxPercent",renderOnClick:"renderOnClick",units:"units",unitsFontSize:"unitsFontSize",unitsFontWeight:"unitsFontWeight",unitsColor:"unitsColor",outerStrokeGradient:"outerStrokeGradient",outerStrokeWidth:"outerStrokeWidth",outerStrokeColor:"outerStrokeColor",outerStrokeGradientStopColor:"outerStrokeGradientStopColor",outerStrokeLinecap:"outerStrokeLinecap",innerStrokeColor:"innerStrokeColor",innerStrokeWidth:"innerStrokeWidth",titleFormat:"titleFormat",title:"title",titleColor:"titleColor",titleFontSize:"titleFontSize",titleFontWeight:"titleFontWeight",subtitleFormat:"subtitleFormat",subtitle:"subtitle",subtitleColor:"subtitleColor",subtitleFontSize:"subtitleFontSize",subtitleFontWeight:"subtitleFontWeight",imageSrc:"imageSrc",imageHeight:"imageHeight",imageWidth:"imageWidth",animation:"animation",animateTitle:"animateTitle",animateSubtitle:"animateSubtitle",animationDuration:"animationDuration",showTitle:"showTitle",showSubtitle:"showSubtitle",showUnits:"showUnits",showImage:"showImage",showBackground:"showBackground",showInnerStroke:"showInnerStroke",clockwise:"clockwise",responsive:"responsive",startFromZero:"startFromZero",showZeroOuterStroke:"showZeroOuterStroke",lazy:"lazy",templateOptions:["options","templateOptions"]},outputs:{onClick:"onClick"},features:[l.TTD],decls:1,vars:1,consts:[["xmlns","http://www.w3.org/2000/svg","preserveAspectRatio","xMidYMid meet",3,"click",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","preserveAspectRatio","xMidYMid meet",3,"click"],[4,"ngIf"],["alignment-baseline","baseline",4,"ngIf"],["preserveAspectRatio","none",4,"ngIf"],["offset","5%"],["offset","95%"],["alignment-baseline","baseline"],[4,"ngFor","ngForOf"],["preserveAspectRatio","none"]],template:function(t,r){1&t&&l.YNc(0,Nb,9,11,"svg",0),2&t&&l.Q6J("ngIf",r.svg)},dependencies:[ui,en],encapsulation:2}),n})(),Pb=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[{provide:jf,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Sh]}),n})();function Ob(n,e){1&n&&(l.TgZ(0,"button",4),l._uU(1," Agregar Hard & Soft skill "),l.qZA())}function Zx(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",9)(1,"div")(2,"button",10),l._UZ(3,"i",11),l.qZA()(),l.TgZ(4,"div")(5,"button",12),l.NdJ("click",function(){l.CHM(t);const i=l.oxw().$implicit,a=l.oxw();return l.KtG(a.delete(i.id))}),l._UZ(6,"i",13),l.qZA()()()}if(2&n){const t=l.oxw().$implicit;l.xp6(2),l.MGl("routerLink","/editskill/",t.id,"")}}function Fb(n,e){if(1&n&&(l.TgZ(0,"div",5)(1,"div")(2,"h2"),l._uU(3),l.qZA(),l._UZ(4,"circle-progress",6),l.TgZ(5,"div",7),l.YNc(6,Zx,7,1,"div",8),l.qZA()()()),2&n){const t=e.$implicit,r=l.oxw();l.xp6(3),l.Oqu(t.nombre),l.xp6(1),l.Q6J("percent",t.porcentaje)("radius",80)("outerStrokeWidth",10)("innerStrokeWidth",5)("outerStrokeColor","#beee3b")("innerStrokeColor","#006465")("animation",!0)("animationDuration",700)("responsive",!0)("backgroundColor","#ffffff"),l.xp6(2),l.Q6J("ngIf",r.isLogged)}}let zx=(()=>{class n{constructor(t,r){this.skillS=t,this.tokenService=r,this.skill=[],this.isLogged=!1}ngOnInit(){this.cargarSkills(),this.isLogged=!!this.tokenService.getToken()}cargarSkills(){this.skillS.lista().subscribe(t=>{this.skill=t})}delete(t){null!=t&&this.skillS.delete(t).subscribe(r=>{this.cargarSkills()},r=>{alert("No se pudo borrar la skill")})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(uv),l.Y36(ll))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-hard-soft-skills"]],decls:6,vars:2,consts:[[1,"row"],[1,"col-lg-2"],["type","button","class","btn btn-secondary","routerLink","/newskill",4,"ngIf"],["class","text-center col-sm-4 col-md-4 col-lg-4 circulo",4,"ngFor","ngForOf"],["type","button","routerLink","/newskill",1,"btn","btn-secondary"],[1,"text-center","col-sm-4","col-md-4","col-lg-4","circulo"],[3,"percent","radius","outerStrokeWidth","innerStrokeWidth","outerStrokeColor","innerStrokeColor","animation","animationDuration","responsive","backgroundColor"],[1,"botones"],["id","botones_edit-delete",4,"ngIf"],["id","botones_edit-delete"],[1,"btn","btn-light",3,"routerLink"],[1,"bi","bi-pencil-fill"],[1,"btn","btn-danger",3,"click"],[1,"bi","bi-trash-fill"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0)(1,"h1"),l._uU(2,"Hard & Soft skills"),l.qZA(),l.TgZ(3,"div",1),l.YNc(4,Ob,2,0,"button",2),l.qZA(),l.YNc(5,Fb,7,12,"div",3),l.qZA()),2&t&&(l.xp6(4),l.Q6J("ngIf",r.isLogged),l.xp6(1),l.Q6J("ngForOf",r.skill))},dependencies:[ui,en,_u,Wx],styles:[".row[_ngcontent-%COMP%]{padding:20px 20px 70px;color:#bdbdbd}div[_ngcontent-%COMP%]{background-color:#00796b}.botones[_ngcontent-%COMP%]{height:20%;padding:10px;margin:20px}#botones_edit-delete[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.circulo[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;height:60%;padding:30px}"]}),n})(),ri=(()=>{class n{constructor(t){this.httpClient=t,this.expURL="https://backendrde.onrender.com/proyecto/"}lista(){return this.httpClient.get(this.expURL+"lista")}detail(t){return this.httpClient.get(this.expURL+`detail/${t}`)}save(t){return this.httpClient.post(this.expURL+"create",t)}update(t,r){return this.httpClient.put(this.expURL+`update/${t}`,r)}delete(t){return this.httpClient.delete(this.expURL+`delete/${t}`)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(sl))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Wd(n,e){1&n&&(l.TgZ(0,"button",6),l._uU(1," Agregar "),l.qZA())}function Kx(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",11)(1,"div")(2,"button",12),l._UZ(3,"i",13),l._uU(4," EDITAR "),l.qZA()(),l.TgZ(5,"div")(6,"button",14),l.NdJ("click",function(){l.CHM(t);const i=l.oxw().$implicit,a=l.oxw();return l.KtG(a.delete(i.id))}),l._UZ(7,"i",15),l._uU(8," BORRAR "),l.qZA()()()}if(2&n){const t=l.oxw().$implicit;l.xp6(2),l.MGl("routerLink","/editproyec/",t.id,"")}}function Yx(n,e){if(1&n&&l._UZ(0,"img",16),2&n){const t=l.oxw().$implicit;l.Q6J("src",t.imgProyecto,l.LSH)}}function zP(n,e){if(1&n&&(l.TgZ(0,"div"),l.YNc(1,Kx,9,1,"div",7),l.TgZ(2,"div",8)(3,"span")(4,"h1"),l._uU(5),l.qZA(),l.TgZ(6,"p",9),l._uU(7),l.qZA(),l.TgZ(8,"p",9),l._uU(9),l.qZA(),l.YNc(10,Yx,1,1,"img",10),l.qZA()()()),2&n){const t=e.$implicit,r=l.oxw();l.xp6(1),l.Q6J("ngIf",r.isLogged),l.xp6(4),l.Oqu(t.nombreProyecto),l.xp6(2),l.hij(" ",t.descripcionProyecto," "),l.xp6(2),l.hij(" Enlace al repositorio del proyecto: ",t.enlaceProyecto," "),l.xp6(1),l.Q6J("ngIf","vacio"!=t.imgProyecto)}}let KP=(()=>{class n{constructor(t,r){this.proyectosS=t,this.tokenService=r,this.proyectos=[],this.isLogged=!1}ngOnInit(){this.cargarProyectos(),this.isLogged=!!this.tokenService.getToken()}cargarProyectos(){this.proyectosS.lista().subscribe(t=>{this.proyectos=t})}delete(t){null!=t&&this.proyectosS.delete(t).subscribe(r=>{this.cargarProyectos()},r=>{alert("No se pudo eliminar Proyecto")})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(ri),l.Y36(ll))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-proyectos"]],decls:9,vars:2,consts:[[1,"row"],[1,"col-lg-2"],["type","button","class","btn btn-secondary","routerLink","/newproyec",4,"ngIf"],[1,"col","lg","2"],[1,"col-xs-12","col-sm-8","col-md-8","col-lg-8"],[4,"ngFor","ngForOf"],["type","button","routerLink","/newproyec",1,"btn","btn-secondary"],["id","botones",4,"ngIf"],["id","proyecto"],[1,"textolargo"],["width","200px",3,"src",4,"ngIf"],["id","botones"],[1,"btn","btn-light",3,"routerLink"],[1,"bi","bi-pencil-fill"],[1,"btn","btn-danger",3,"click"],[1,"bi","bi-trash-fill"],["width","200px",3,"src"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0)(1,"h1"),l._uU(2,"Proyectos"),l.qZA(),l.TgZ(3,"div",1),l.YNc(4,Wd,2,0,"button",2),l.qZA(),l._UZ(5,"div",3),l.TgZ(6,"div",4),l.YNc(7,zP,11,5,"div",5),l.qZA(),l._UZ(8,"div",3),l.qZA()),2&t&&(l.xp6(4),l.Q6J("ngIf",r.isLogged),l.xp6(3),l.Q6J("ngForOf",r.proyectos))},dependencies:[ui,en,_u],styles:[".row[_ngcontent-%COMP%]{padding:20px;color:#bdbdbd}div[_ngcontent-%COMP%]{background-color:#00796b}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{display:inline}#botones[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.textolargo[_ngcontent-%COMP%]{word-wrap:break-word}#proyecto[_ngcontent-%COMP%]{color:#fff;border-radius:30px;padding:25px;background-color:#00000042;text-align:center;left:10%;top:100%;margin:25px}@media (min-width: 800px){.textolargo[_ngcontent-%COMP%]{overflow-wrap:break-word}}"]}),n})(),Lb=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-footer"]],decls:6,vars:0,consts:[[1,"row"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0)(1,"footer")(2,"p"),l._uU(3,"Esquivel Roman Dario ----------------\x3e \xa9Argentina Programa "),l.qZA(),l.TgZ(4,"p"),l._uU(5,"Salta, Argentina"),l.qZA()()())}}),n})(),_v=(()=>{class n{constructor(){this.isLoading=new Co.x}show(){this.isLoading.next(!0)}hide(){this.isLoading.next(!1)}clearSecond(){this.second=0}increasessecond(){this.second++}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Hf(n,e){1&n&&(l.TgZ(0,"div",1)(1,"div",2),l._UZ(2,"div",3)(3,"div",4),l.qZA()())}let Qx=(()=>{class n{constructor(t){this.loaderService=t,this.isLoading=this.loaderService.isLoading,this.tiempo=!0}ngOnInit(){this.intervalId=setInterval(()=>{this.loaderService.increasessecond(),this.loaderService.second>=10&&(this.stopInterval(),this.tiempo=!1)},1e3)}stopInterval(){clearInterval(this.intervalId)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(_v))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-loading"]],decls:1,vars:1,consts:[["class","fondoCargando",4,"ngIf"],[1,"fondoCargando"],[1,"contenedorCargando"],[1,"spinner1"],[1,"spinner2"]],template:function(t,r){1&t&&l.YNc(0,Hf,4,0,"div",0),2&t&&l.Q6J("ngIf",r.isLoading&&r.tiempo)},dependencies:[en],styles:[".fondoCargando[_ngcontent-%COMP%]{background-color:#0000004d;position:absolute;z-index:100px;width:100%;height:100%}.contenedorCargando[_ngcontent-%COMP%]{position:relative;width:200px;height:200px;top:50%;left:50%}.spinner1[_ngcontent-%COMP%]{position:absolute;border:solid 10px transparent;width:200px;height:200px;border-left-color:#006465;border-radius:50%;animation:spin 1s linear infinite}.spinner2[_ngcontent-%COMP%]{position:absolute;border:solid 10px transparent;width:150px;height:150px;border-left-color:#beee3b;border-radius:50%;animation:spin2 1s linear infinite}@keyframes spin{0%{transform:translate(-50%,-50%) rotate(0)}to{transform:translate(-50%,-50%) rotate(360deg)}}@keyframes spin2{0%{transform:translate(-50%,-50%) rotate(0)}to{transform:translate(-50%,-50%)rotate(-360deg)}}"]}),n})(),yv=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-home"]],decls:14,vars:0,consts:[[1,"row"]],template:function(t,r){1&t&&(l._UZ(0,"app-loading")(1,"app-header"),l.TgZ(2,"div",0),l._UZ(3,"app-acerca-de-mi")(4,"hr")(5,"app-experiencia")(6,"hr")(7,"app-educacion")(8,"hr")(9,"app-hard-soft-skills")(10,"hr")(11,"app-proyectos")(12,"hr")(13,"app-footer"),l.qZA())},dependencies:[Ax,Rx,Vf,Ux,zx,KP,Lb,Qx],styles:["hr[_ngcontent-%COMP%]{border:0;height:12px;box-shadow:inset 0 12px 12px -12px #000}.loading[_ngcontent-%COMP%]{width:100%;height:100%}div[_ngcontent-%COMP%]{padding:4%;background-color:#00796b}"]}),n})();class Jx{constructor(e,t){this.nombreUsuario=e,this.password=t}}var vv=U(8247),Ro=U(1877),wv=U(6451),mm=U(5363),Ev=U(6063);class Ub extends Co.x{constructor(e=1/0,t=1/0,r=Ev.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:c}=this;t||(r.push(e),!i&&r.push(a.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let c=0;c<a.length&&!e.closed;c+=r?1:2)e.next(a[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const c=t.now();let h=0;for(let g=1;g<r.length&&r[g]<=c;g+=2)h=g;h&&r.splice(0,h+1)}}}var Cv=U(3099);function $f(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,Cv.B)({connector:()=>new Ub(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function _m(n,e){return(0,tf.m)(e)?cn(()=>n,e):cn(()=>n)}var Vb=U(9468),Dr=U(2011);const bv=new Map,Iv={activated:!1,tokenObservers:[]},Zd={initialized:!1,enabled:!1};function ii(n){return bv.get(n)||Object.assign({},Iv)}function zd(){return Zd}class $b{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ee.Z)(function*(){t.stop();try{t.pending=new F.BH,yield function Gb(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new F.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const _i=new F.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function qb(n){if(!ii(n).activated)throw _i.create("use-before-activation",{appName:n.name})}function Dv(n,e){return ym.apply(this,arguments)}function ym(){return(ym=(0,Ee.Z)(function*({url:n,body:e},t){var r,i;const a={"Content-Type":"application/json"},c=t.getImmediate({optional:!0});if(c){const L=yield c.getHeartbeatsHeader();L&&(a["X-Firebase-Client"]=L)}const h={method:"POST",body:JSON.stringify(e),headers:a};let g,y;try{g=yield fetch(n,h)}catch(L){throw _i.create("fetch-network-error",{originalErrorMessage:null===(r=L)||void 0===r?void 0:r.message})}if(200!==g.status)throw _i.create("fetch-status-error",{httpStatus:g.status});try{y=yield g.json()}catch(L){throw _i.create("fetch-parse-error",{originalErrorMessage:null===(i=L)||void 0===i?void 0:i.message})}const I=y.ttl.match(/^([\d.]+)(s)$/);if(!I||!I[2]||isNaN(Number(I[1])))throw _i.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${y.ttl}`});const S=1e3*Number(I[1]),R=Date.now();return{token:y.token,expireTimeMillis:R+S,issuedAtTimeMillis:R}})).apply(this,arguments)}function zb(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const vm="firebase-app-check-store";let Av=null;function sM(){return Av||(Av=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var a;e(_i.create("storage-open",{originalErrorMessage:null===(a=i.target.error)||void 0===a?void 0:a.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(vm,{keyPath:"compositeKey"})}}catch(r){e(_i.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),Av)}function Kb(){return(Kb=(0,Ee.Z)(function*(n,e){const r=(yield sM()).transaction(vm,"readwrite"),a=r.objectStore(vm).put({compositeKey:n,value:e});return new Promise((c,h)=>{a.onsuccess=g=>{c()},r.onerror=g=>{var y;h(_i.create("storage-set",{originalErrorMessage:null===(y=g.target.error)||void 0===y?void 0:y.message}))}})})).apply(this,arguments)}const cl=new Ro.Yd("@firebase/app-check");function Jb(n,e){return(0,F.hl)()?function JP(n,e){return function oM(n,e){return Kb.apply(this,arguments)}(function xv(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{cl.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Xb(){return zd().enabled}function Rv(){return eI.apply(this,arguments)}function eI(){return(eI=(0,Ee.Z)(function*(){const n=zd();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const aM={error:"UNKNOWN_ERROR"};function uM(n){return F.US.encodeString(JSON.stringify(n),!1)}function bc(n){return kv.apply(this,arguments)}function kv(){return(kv=(0,Ee.Z)(function*(n,e=!1){const t=n.app;qb(t);const r=ii(t);let a,i=r.token;if(i&&!Kd(i)&&(r.token=void 0,i=void 0),!i){const g=yield r.cachedTokenPromise;g&&(Kd(g)?i=g:yield Jb(t,void 0))}if(!e&&i&&Kd(i))return{token:i.token};let h,c=!1;if(Xb()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Dv(zb(t,yield Rv()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),c=!0);const g=yield r.exchangeTokenPromise;return yield Jb(t,g),r.token=g,{token:g.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),c=!0),i=yield ii(t).exchangeTokenPromise}catch(g){"appCheck/throttled"===g.code?cl.warn(g.message):cl.error(g),a=g}return i?a?h=Kd(i)?{token:i.token,internalError:a}:dM(a):(h={token:i.token},r.token=i,yield Jb(t,i)):h=dM(a),c&&rI(t,h),h})).apply(this,arguments)}function nI(n,e){const t=ii(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function lM(n){const{app:e}=n,t=ii(e);let r=t.tokenRefresher;r||(r=function cM(n){const{app:e}=n;return new $b((0,Ee.Z)(function*(){let r;if(r=ii(e).token?yield bc(n,!0):yield bc(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=ii(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function rI(n,e){const t=ii(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function Kd(n){return n.expireTimeMillis-Date.now()>0}function dM(n){return{token:uM(aM),error:n}}class hM{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=ii(this.app);for(const t of e)nI(this.app,t.next);return Promise.resolve()}}const _M="app-check-internal";!function yM(){(0,gi._registerComponent)(new qs.wA("app-check",n=>function iI(n,e){return new hM(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(_M).initialize()})),(0,gi._registerComponent)(new qs.wA(_M,n=>function sI(n){return{getToken:e=>bc(n,e),addTokenListener:e=>function tI(n,e,t,r){const{app:i}=n,a=ii(i);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&Kd(a.token)){const h=a.token;Promise.resolve().then(()=>{t({token:h.token}),lM(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>lM(n))}(n,"INTERNAL",e),removeTokenListener:e=>nI(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,gi.registerVersion)("@firebase/app-check","0.5.17")}();class zf{constructor(){return(0,Qt.vb)("app-check")}}typeof window<"u"&&window;var Im=U(127);const Tm=new l.OlP("angularfire2.auth.use-emulator"),Gv=new l.OlP("angularfire2.auth.settings"),qv=new l.OlP("angularfire2.auth.tenant-id"),gI=new l.OlP("angularfire2.auth.langugage-code"),mI=new l.OlP("angularfire2.auth.use-device-language"),Dm=new l.OlP("angularfire.auth.persistence"),Wv=(n,e,t,r,i,a,c,h)=>(0,Dr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const g=e.runOutsideAngular(()=>n.auth());if(t&&g.useEmulator(...t),r&&(g.tenantId=r),g.languageCode=i,a&&g.useDeviceLanguage(),c)for(const[y,I]of Object.entries(c))g.settings[y]=I;return h&&g.setPersistence(h),g},[t,r,i,a,c,h]);let Kf=(()=>{class n{constructor(t,r,i,a,c,h,g,y,I,S,R,L){const G=new Co.x,le=dt(void 0).pipe((0,mm.Q)(c.outsideAngular),cn(()=>a.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,5881)))),(0,yt.U)(()=>(0,Dr.on)(t,a,r)),(0,yt.U)(de=>Wv(de,a,h,y,I,S,g,R)),$f({bufferSize:1,refCount:!1}));if(qo(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=dt(null);else{le.pipe(lu()).subscribe();const Ge=le.pipe(cn(ut=>ut.getRedirectResult().then(ft=>ft,()=>null)),Qt.iC,$f({bufferSize:1,refCount:!1})),at=le.pipe(cn(ut=>new Tr.y(ft=>({unsubscribe:a.runOutsideAngular(()=>ut.onAuthStateChanged(Vt=>ft.next(Vt),Vt=>ft.error(Vt),()=>ft.complete()))})))),nt=le.pipe(cn(ut=>new Tr.y(ft=>({unsubscribe:a.runOutsideAngular(()=>ut.onIdTokenChanged(Vt=>ft.next(Vt),Vt=>ft.error(Vt),()=>ft.complete()))}))));this.authState=Ge.pipe(_m(at),(0,Vb.R)(c.outsideAngular),(0,mm.Q)(c.insideAngular)),this.user=Ge.pipe(_m(nt),(0,Vb.R)(c.outsideAngular),(0,mm.Q)(c.insideAngular)),this.idToken=this.user.pipe(cn(ut=>ut?(0,rn.D)(ut.getIdToken()):dt(null))),this.idTokenResult=this.user.pipe(cn(ut=>ut?(0,rn.D)(ut.getIdTokenResult()):dt(null))),this.credential=(0,wv.T)(Ge,G,this.authState.pipe(rs(ut=>!ut))).pipe((0,yt.U)(ut=>ut?.user?ut:null),(0,Vb.R)(c.outsideAngular),(0,mm.Q)(c.insideAngular))}return(0,Dr.pX)(this,le,a,{spy:{apply:(de,Ge,at)=>{(de.startsWith("signIn")||de.startsWith("createUser"))&&at.then(nt=>G.next(nt))}}})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Dr.Dh),l.LFG(Dr.xv,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(Qt.HU),l.LFG(Tm,8),l.LFG(Gv,8),l.LFG(qv,8),l.LFG(gI,8),l.LFG(mI,8),l.LFG(Dm,8),l.LFG(zf,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),AM=(()=>{class n{constructor(){Im.Z.registerVersion("angularfire",Qt.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[Kf]}),n})(),sO=(()=>{class n{constructor(t,r){this.httpClient=t,this.afAuth=r,this.authURL="https://backendrde.onrender.com/auth/"}nuevo(t){return this.httpClient.post(this.authURL+"nuevo",t)}login(t){return this.httpClient.post(this.authURL+"login",t)}loginWithCustomToken(t){(0,vv.$)((0,vv.n)(),t).then(r=>{console.log(r.user)}).catch(r=>{console.error(r)})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(sl),l.LFG(Kf))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),oO=(()=>{class n{constructor(t,r,i){this.tokenService=t,this.authService=r,this.router=i,this.isLogged=!1,this.isLogginFail=!1,this.roles=[]}ngOnInit(){this.tokenService.getToken()&&(this.isLogged=!0,this.isLogginFail=!1,this.roles=this.tokenService.getAuthorities())}onLogin(){this.loginUsuario=new Jx(this.nombreUsuario,this.password),this.authService.login(this.loginUsuario).subscribe(t=>{this.isLogged=!0,this.isLogginFail=!1,this.tokenService.setToken(t.token),this.tokenService.setUserName(t.nombreUsuario),this.tokenService.setAuthorities(t.authorities),this.authService.loginWithCustomToken(t.token),this.roles=t.authorities,this.router.navigate([""])},t=>{this.isLogged=!1,this.isLogginFail=!0,this.errMsj=t.error.mensaje,console.log(this.errMsj)})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(ll),l.Y36(sO),l.Y36(Pn))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-login"]],decls:25,vars:2,consts:[["href","https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css","rel","stylesheet","integrity","sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT","crossorigin","anonymous"],[1,"vh-100",2,"background-color","#00796B"],[1,"container","py-5","h-100"],[1,"row","d-flex","justify-content-center","align-items-center","h-100"],[1,"col-12","col-md-8","col-lg-6","col-xl-5"],[1,"card","shadow-2-strong",2,"border-radius","1rem"],[1,"card-body","p-5","text-center"],[1,"mb-5"],["novalidate","",3,"ngSubmit"],["f","ngForm"],[1,"form-outline","mb-4"],["type","email","id","nombreUsuario","name","nombreUsuario","required","",1,"form-control","form-control-lg",3,"ngModel","ngModelChange"],["for","nombreUsuario",1,"form-label"],["type","password","id","password","name","password","required","",1,"form-control","form-control-lg",3,"ngModel","ngModelChange"],["for","password",1,"form-label"],[1,"form-check","d-flex","justify-content-start","mb-4"],["type","checkbox","value","","id","form1",1,"form-check-input"],["for","form1",1,"form-check-label"],["type","submit",1,"btn","btn-primary","btn-lg","btn-block"]],template:function(t,r){1&t&&(l._UZ(0,"link",0),l.TgZ(1,"section",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h3",7),l._uU(8,"Login"),l.qZA(),l.TgZ(9,"form",8,9),l.NdJ("ngSubmit",function(){return r.onLogin()}),l.TgZ(11,"div",10)(12,"input",11),l.NdJ("ngModelChange",function(a){return r.nombreUsuario=a}),l.qZA(),l.TgZ(13,"label",12),l._uU(14,"Nombre de usuario"),l.qZA()(),l.TgZ(15,"div",10)(16,"input",13),l.NdJ("ngModelChange",function(a){return r.password=a}),l.qZA(),l.TgZ(17,"label",14),l._uU(18,"Password"),l.qZA()(),l.TgZ(19,"div",15),l._UZ(20,"input",16),l.TgZ(21,"label",17),l._uU(22," Remember password "),l.qZA()(),l.TgZ(23,"button",18),l._uU(24,"Login"),l.qZA()()()()()()()()),2&t&&(l.xp6(12),l.Q6J("ngModel",r.nombreUsuario),l.xp6(4),l.Q6J("ngModel",r.password))},dependencies:[Pi,Gr,ws,ns,ei,Eo,Fr],styles:[".card-body[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-color:#beee3b}.card-body[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-color:#beee3b;background-color:#beee3b}.form-control[_ngcontent-%COMP%]:focus, .form-check-input[_ngcontent-%COMP%]:focus{border-color:#beee3b;box-shadow:inset 0 1px 1px #00000013,0 0 8px #beee3b}.card-body[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{border-color:#00796b;background-color:#00796b}"]}),n})();class aO{constructor(e,t,r,i){this.nombreProyecto=e,this.descripcionProyecto=t,this.enlaceProyecto=r,this.imgProyecto=i}}function uO(n,e){1&n&&(l.TgZ(0,"div",19),l._UZ(1,"span",20),l.qZA())}function lO(n,e){if(1&n&&l._UZ(0,"img",21),2&n){const t=l.oxw();l.Q6J("src",t.imageService.url,l.LSH)}}let xM=(()=>{class n{constructor(t,r,i,a){this.proy=t,this.activatedRouter=r,this.router=i,this.imageService=a}ngOnInit(){this.imageService.url=null,this.imageService.loading=!1}onCreate(){this.ImgProyecto=this.imageService.url.includes(this.aux)?this.imageService.url:"vacio";const t=new aO(this.nombreProyecto,this.descripcionProyecto,this.enlaceProyecto,this.ImgProyecto);this.proy.save(t).subscribe(r=>{alert("Proyecto creado correctamente"),this.router.navigate([""])},r=>{alert("Fallo al a\xf1adir el Proyecto"),this.router.navigate([""])})}uploadImage(t){this.aux="proyecto_"+this.nombreProyecto.replace(/ /g,"");const r=this.aux;this.imageService.loading=!0,this.imageService.uploadImage(t,r)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(ri),l.Y36(is),l.Y36(Pn),l.Y36(wu))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-new-proyectos-s"]],decls:29,vars:6,consts:[[1,"fondo"],[1,"container"],[1,"row"],[1,"form"],["novalidate","",3,"ngSubmit"],["f","ngForm"],[1,"form-group","mb-4"],["for","nombreProyecto"],["type","text","id","nombreProyecto","name","nombreProyecto","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","descripcionProyecto"],["type","text","id","descripcionProyecto","name","descripcionProyecto","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","enlaceProyecto"],["type","text","id","enlaceProyecto","name","enlaceProyecto","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","ImgProyecto"],["type","file","id","ImgProyecto","name","ImgProyecto","accept",".jpg, .jpeg, .png",1,"form-control",3,"ngModel","ngModelChange","change"],["id","imagen_muestra",1,"imagen","mb-4"],["class","spinner-border loading","style","width: 3rem; height: 3rem","role","status",4,"ngIf"],["width","200px",3,"src",4,"ngIf"],[1,"btn","btn-primary"],["role","status",1,"spinner-border","loading",2,"width","3rem","height","3rem"],[1,"sr-only"],["width","200px",3,"src"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"form",4,5),l.NdJ("ngSubmit",function(){return r.onCreate()}),l.TgZ(6,"div",6)(7,"label",7),l._uU(8,"Nombre de Proyecto"),l.qZA(),l.TgZ(9,"input",8),l.NdJ("ngModelChange",function(a){return r.nombreProyecto=a}),l.qZA()(),l.TgZ(10,"div",6)(11,"label",9),l._uU(12,"descripcion de proyecto "),l.qZA(),l.TgZ(13,"input",10),l.NdJ("ngModelChange",function(a){return r.descripcionProyecto=a}),l.qZA()(),l.TgZ(14,"div",6)(15,"label",11),l._uU(16,"enlace de proyecto "),l.qZA(),l.TgZ(17,"input",12),l.NdJ("ngModelChange",function(a){return r.enlaceProyecto=a}),l.qZA()(),l.TgZ(18,"div",6)(19,"label",13),l._uU(20,"logo de la empresa"),l.qZA(),l.TgZ(21,"input",14),l.NdJ("ngModelChange",function(a){return r.ImgProyecto=a})("change",function(a){return r.uploadImage(a)}),l.qZA()(),l.TgZ(22,"div",15)(23,"P"),l._uU(24,"AQUI APARECERA SU IMAGEN UNA VEZ CARGADA "),l.qZA(),l.YNc(25,uO,2,0,"div",16),l.YNc(26,lO,1,1,"img",17),l.qZA(),l.TgZ(27,"button",18),l._uU(28,"Agregar Proyectos"),l.qZA()()()()()()),2&t&&(l.xp6(9),l.Q6J("ngModel",r.nombreProyecto),l.xp6(4),l.Q6J("ngModel",r.descripcionProyecto),l.xp6(4),l.Q6J("ngModel",r.enlaceProyecto),l.xp6(4),l.Q6J("ngModel",r.ImgProyecto),l.xp6(4),l.Q6J("ngIf",1==r.imageService.loading&&null==r.imageService.url),l.xp6(1),l.Q6J("ngIf",null!=r.imageService.url))},dependencies:[en,Pi,Gr,ws,ns,ei,Eo,Fr],styles:[".fondo[_ngcontent-%COMP%]{height:200vh;background-color:#00796b}.row[_ngcontent-%COMP%]{padding:20px;color:#bdbdbd}.form-group[_ngcontent-%COMP%]{max-width:700px}.form[_ngcontent-%COMP%]{margin-top:25%}#imagen_muestra[_ngcontent-%COMP%], .loading[_ngcontent-%COMP%]{padding:10px}@media (min-width: 800px){.form[_ngcontent-%COMP%]{padding-left:25%}.form-group[_ngcontent-%COMP%]{max-width:80%}}"]}),n})();function Sm(n,e){if(1&n&&l._UZ(0,"img",19),2&n){const t=l.oxw();l.s9C("src",t.proyec.imgProyecto,l.LSH)}}function MM(n,e){1&n&&(l.TgZ(0,"div",20),l._UZ(1,"span",21),l.qZA())}function RM(n,e){if(1&n&&l._UZ(0,"img",19),2&n){const t=l.oxw();l.Q6J("src",t.imageService.url,l.LSH)}}const Tc=[{path:"",component:yv},{path:"login",component:oO},{path:"newexp",component:Ex},{path:"editexp/:id",component:mx},{path:"newedu",component:fx},{path:"editedu/:id",component:dx},{path:"newskill",component:Ff},{path:"editskill/:id",component:bx},{path:"newproyec",component:xM},{path:"editproyec/:id",component:(()=>{class n{constructor(t,r,i,a){this.sProyecto=t,this.activatedRouter=r,this.router=i,this.imageService=a,this.proyec=null}ngOnInit(){this.imageService.url=null,this.imageService.loading=!1,this.sProyecto.detail(this.activatedRouter.snapshot.params.id).subscribe(r=>{this.proyec=r},r=>{alert("Error al modificar proyecto"),this.router.navigate([""])})}onUpdate(){const t=this.activatedRouter.snapshot.params.id;null!=this.imageService.url&&(this.proyec.imgProyecto=this.imageService.url),this.sProyecto.update(t,this.proyec).subscribe(r=>{alert("Modificado proyecto"),this.router.navigate([""])},r=>{alert("Error al modificar experiencia"),this.router.navigate([""])})}uploadImage(t){this.aux="proyecto_"+this.proyec.nombreProyecto.replace(/ /g,"");const r=this.aux;this.imageService.loading=!0,this.imageService.uploadImage(t,r)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(ri),l.Y36(is),l.Y36(Pn),l.Y36(wu))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-edit-proyectos-s"]],decls:34,vars:7,consts:[[1,"fondo"],[1,"container"],[1,"row"],[1,"form"],["novalidate","",3,"ngSubmit"],["f","ngForm"],[1,"form-group","mb-4"],["for","nombreProyecto"],["type","text","id","nombreProyecto","name","nombreProyecto","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","descripcionProyecto"],["type","text","id","descripcionProyecto","name","descripcionProyecto","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","enlaceProyecto"],["type","text","id","enlaceProyecto","name","enlaceProyecto","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","ImgProyecto"],["type","file","id","ImgProyecto","name","ImgProyecto","accept",".jpg, .jpeg, .png",1,"form-control",3,"ngModel","ngModelChange","change"],[1,"imagen","mb-4","imagen_muestra"],["width","200px",3,"src",4,"ngIf"],["class","spinner-border loading","style","width: 3rem; height: 3rem","role","status",4,"ngIf"],[1,"btn","btn-primary"],["width","200px",3,"src"],["role","status",1,"spinner-border","loading",2,"width","3rem","height","3rem"],[1,"sr-only"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"form",4,5),l.NdJ("ngSubmit",function(){return r.onUpdate()}),l.TgZ(6,"div",6)(7,"label",7),l._uU(8,"Nombre de Proyecto"),l.qZA(),l.TgZ(9,"input",8),l.NdJ("ngModelChange",function(a){return r.proyec.nombreProyecto=a}),l.qZA()(),l.TgZ(10,"div",6)(11,"label",9),l._uU(12,"descripcion de proyecto "),l.qZA(),l.TgZ(13,"input",10),l.NdJ("ngModelChange",function(a){return r.proyec.descripcionProyecto=a}),l.qZA()(),l._uU(14," < "),l.TgZ(15,"div",6)(16,"label",11),l._uU(17,"descripcion de proyecto "),l.qZA(),l.TgZ(18,"input",12),l.NdJ("ngModelChange",function(a){return r.proyec.enlaceProyecto=a}),l.qZA()(),l.TgZ(19,"div",6)(20,"label",13),l._uU(21,"logo de la empresa"),l.qZA(),l.TgZ(22,"input",14),l.NdJ("ngModelChange",function(a){return r.proyec.imgProyecto=a})("change",function(a){return r.uploadImage(a)}),l.qZA()(),l.TgZ(23,"div",15)(24,"p"),l._uU(25,"imagen que tiene"),l.qZA(),l.YNc(26,Sm,1,1,"img",16),l.qZA(),l.TgZ(27,"div",15)(28,"P"),l._uU(29,"AQUI APARECERA SU IMAGEN UNA VEZ CARGADA "),l.qZA(),l.YNc(30,MM,2,0,"div",17),l.YNc(31,RM,1,1,"img",16),l.qZA(),l.TgZ(32,"button",18),l._uU(33,"Agregar Proyectos"),l.qZA()()()()()()),2&t&&(l.xp6(9),l.Q6J("ngModel",r.proyec.nombreProyecto),l.xp6(4),l.Q6J("ngModel",r.proyec.descripcionProyecto),l.xp6(5),l.Q6J("ngModel",r.proyec.enlaceProyecto),l.xp6(4),l.Q6J("ngModel",r.proyec.imgProyecto),l.xp6(4),l.Q6J("ngIf","vacio"!=r.proyec.imgProyecto),l.xp6(4),l.Q6J("ngIf",1==r.imageService.loading&&null==r.imageService.url),l.xp6(1),l.Q6J("ngIf",null!=r.imageService.url))},dependencies:[en,Pi,Gr,ws,ns,ei,Eo,Fr],styles:[".fondo[_ngcontent-%COMP%]{height:200vh;background-color:#00796b}.row[_ngcontent-%COMP%]{padding:20px;color:#bdbdbd}.form-group[_ngcontent-%COMP%]{max-width:700px}.form[_ngcontent-%COMP%]{margin-top:25%}.imagen_muestra[_ngcontent-%COMP%], .loading[_ngcontent-%COMP%]{padding:10px}@media (min-width: 800px){.form[_ngcontent-%COMP%]{padding-left:25%}.form-group[_ngcontent-%COMP%]{max-width:80%}}"]}),n})()},{path:"editacercade/:id",component:bb}];let _I=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[yC.forRoot(Tc),yC]}),n})(),Zv=(()=>{class n{constructor(){this.title="Porfolio_Roman_Dario_Esquivel"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&l._UZ(0,"router-outlet")},dependencies:[VE]}),n})(),zv=(()=>{class n{constructor(t){this.loaderService=t}intercept(t,r){return this.loaderService.show(),this.loaderService.clearSecond(),r.handle(t).pipe(fg(()=>this.loaderService.hide()))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(_v))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();var Yf=U(3942);class Yd{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Qf{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Yd(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new Yd(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?c=>t(new Yd(c,this,this._ref)):{next:t.next?c=>t.next(new Yd(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class PM{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new hl(e,this._service))}get items(){return this._delegate.items.map(e=>new hl(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class hl{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function WA(n,e){return Gd(n,e)}(this._delegate,e);return new hl(t,this.storage)}get root(){return new hl(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new hl(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new Qf(function $A(n,e,t){return function NA(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new Jy(n,new xo(e),t)}(n=(0,F.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Ds.RAW,r){this._throwIfRoot("putString");const i=qy(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new Qf(new Jy(this._delegate,new xo(i.data,!0),a),this)}listAll(){return function qA(n){return function NP(n){const e={prefixes:[],items:[]};return PA(n,e).then(()=>e)}(n=(0,F.m9)(n))}(this._delegate).then(e=>new PM(e,this.storage))}list(e){return am(this._delegate,e||void 0).then(t=>new PM(t,this.storage))}getMetadata(){return function gb(n){return function om(n){n._throwIfRoot("getMetadata");const e=Nf(n.storage,n._location,Mo());return n.storage.makeRequestWithTokens(e,Ui)}(n=(0,F.m9)(n))}(this._delegate)}updateMetadata(e){return function GA(n,e){return function OA(n,e){n._throwIfRoot("updateMetadata");const t=function nb(n,e,t,r){const a=va(e.fullServerUrl(),n.host,n._protocol),h=kf(t,r),y=n.maxOperationRetryTime,I=new vt(a,"PATCH",sm(n,r),y);return I.headers={"Content-Type":"application/json; charset=utf-8"},I.body=h,I.errorHandler=al(e),I}(n.storage,n._location,e,Mo());return n.storage.makeRequestWithTokens(t,Ui)}(n=(0,F.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return tv(this._delegate)}delete(){return this._throwIfRoot("delete"),function mb(n){return function lb(n){n._throwIfRoot("deleteObject");const e=function bA(n,e){const r=va(e.fullServerUrl(),n.host,n._protocol),h=new vt(r,"DELETE",function c(g,y){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=al(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Ui)}(n=(0,F.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw BC(e)}}class OM{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(FM(e))throw ol("ref() expected a child path but got a URL, use refFromURL instead.");return new hl(nv(this._delegate,e),this)}refFromURL(e){if(!FM(e))throw ol("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ni.makeFromUrl(e,this._delegate.host)}catch{throw ol("refFromUrl() expected a valid full URL but got an invalid one.")}return new hl(nv(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function um(n,e,t,r={}){!function hb(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,F.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function FM(n){return/^[A-Za-z]+:\/\//.test(n)}function VM(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new OM(t,r)}function Kv(n){const e=function vI(n){return new Tr.y(e=>{const t=c=>e.next(c);t(n.snapshot);const a=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){a()}}).pipe(function NM(n,e=Bf.z){return(0,Lr.e)((t,r)=>{let i=null,a=null,c=null;const h=()=>{if(i){i.unsubscribe(),i=null;const y=a;a=null,r.next(y)}};function g(){const y=c+n,I=e.now();if(I<y)return i=this.schedule(void 0,y-I),void r.add(i);h()}t.subscribe((0,Hn.x)(r,y=>{a=y,c=e.now(),i||(i=e.schedule(g,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,yt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function Jf(n){return{getDownloadURL:()=>dt(void 0).pipe(Qt.fc,cn(()=>n.getDownloadURL()),Qt.iC),getMetadata:()=>dt(void 0).pipe(Qt.fc,cn(()=>n.getMetadata()),Qt.iC),delete:()=>(0,rn.D)(n.delete()),child:e=>Jf(n.child(e)),updateMetadata:e=>(0,rn.D)(n.updateMetadata(e)),put:(e,t)=>Kv(n.put(e,t)),putString:(e,t,r)=>Kv(n.putString(e,t,r)),list:e=>(0,rn.D)(n.list(e)),listAll:()=>(0,rn.D)(n.listAll())}}!function BM(n){const e={TaskState:Li,TaskEvent:SA,StringFormat:Ds,Storage:OM,Reference:hl};n.INTERNAL.registerComponent(new qs.wA("storage-compat",VM,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.22")}(Yf.Z);const jM=new l.OlP("angularfire2.storageBucket"),HM=new l.OlP("angularfire2.storage.maxUploadRetryTime"),wI=new l.OlP("angularfire2.storage.maxOperationRetryTime"),Yv=new l.OlP("angularfire2.storage.use-emulator");let cO=(()=>{class n{constructor(t,r,i,a,c,h,g,y,I,S){const R=(0,Dr.on)(t,c,r);this.storage=(0,Dr.cc)(`${R.name}.storage.${i}`,"AngularFireStorage",R.name,()=>{const L=c.runOutsideAngular(()=>R.storage(i||void 0)),G=I;return G&&L.useEmulator(...G),g&&L.setMaxUploadRetryTime(g),y&&L.setMaxOperationRetryTime(y),L},[g,y])}ref(t){return Jf(this.storage.ref(t))}refFromURL(t){return Jf(this.storage.refFromURL(t))}upload(t,r,i){return Jf(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Dr.Dh),l.LFG(Dr.xv,8),l.LFG(jM,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(Qt.HU),l.LFG(HM,8),l.LFG(wI,8),l.LFG(Yv,8),l.LFG(zf,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Qv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})(),GM=(()=>{class n{constructor(){Im.Z.registerVersion("angularfire",Qt.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[cO],imports:[Qv]}),n})();function Jv(){return(0,Lr.e)((n,e)=>{let t,r=!1;n.subscribe((0,Hn.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function qM(n,e=zu.y){return n=n??dO,(0,Lr.e)((t,r)=>{let i,a=!0;t.subscribe((0,Hn.x)(r,c=>{const h=e(c);(a||!n(i,h))&&(a=!1,i=h,r.next(c))}))})}function dO(n,e){return n===e}U(5881);var Ct,WM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Eu={},EI=EI||{},$t=WM||self;function Xv(){}function e0(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Xf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var CI="closure_uid_"+(1e9*Math.random()>>>0),pO=0;function gO(n,e,t){return n.call.apply(n.bind,arguments)}function mO(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Vi(n,e,t){return(Vi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?gO:mO).apply(null,arguments)}function s(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function o(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,a){for(var c=Array(arguments.length-2),h=2;h<arguments.length;h++)c[h-2]=arguments[h];return e.prototype[i].apply(r,c)}}function u(){this.s=this.s,this.o=this.o}u.prototype.s=!1,u.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function fO(n){Object.prototype.hasOwnProperty.call(n,CI)&&n[CI]||(n[CI]=++pO)}(this)},u.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const f=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function p(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function v(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(e0(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let c=0;c<a;c++)n[i+c]=r[c]}else n.push(r)}}function E(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}E.prototype.h=function(){this.defaultPrevented=!0};var b=function(){if(!$t.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{$t.addEventListener("test",Xv,e),$t.removeEventListener("test",Xv,e)}catch{}return n}();function A(n){return/^[\s\xa0]*$/.test(n)}var N=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function V(n,e){return n<e?-1:n>e?1:0}function K(){var n=$t.navigator;return n&&(n=n.userAgent)?n:""}function te(n){return-1!=K().indexOf(n)}function be(n){return be[" "](n),n}be[" "]=Xv;var Ca,n,ze=te("Opera"),lt=te("Trident")||te("MSIE"),Dt=te("Edge"),Ne=Dt||lt,At=te("Gecko")&&!(-1!=K().toLowerCase().indexOf("webkit")&&!te("Edge"))&&!(te("Trident")||te("MSIE"))&&!te("Edge"),vn=-1!=K().toLowerCase().indexOf("webkit")&&!te("Edge");function qn(){var n=$t.document;return n?n.documentMode:void 0}e:{var ep="",tp=(n=K(),At?/rv:([^\);]+)(\)|;)/.exec(n):Dt?/Edge\/([\d\.]+)/.exec(n):lt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):vn?/WebKit\/(\S+)/.exec(n):ze?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(tp&&(ep=tp?tp[1]:""),lt){var np=qn();if(null!=np&&np>parseFloat(ep)){Ca=String(np);break e}}Ca=ep}var t0={};var r0=$t.document&&lt&&(qn()||parseInt(Ca,10))||void 0;function Dc(n,e){if(E.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(At){e:{try{be(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Ej[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Dc.X.h.call(this)}}o(Dc,E);var Ej={2:"touch",3:"pen",4:"mouse"};Dc.prototype.h=function(){Dc.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var s0="closure_listenable_"+(1e6*Math.random()|0),Cj=0;function bj(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++Cj,this.ba=this.ea=!1}function bI(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function ZM(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function _O(n){const e={};for(const t in n)e[t]=n[t];return e}const yO="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function vO(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<yO.length;a++)t=yO[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function II(n){this.src=n,this.g={},this.h=0}function zM(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=f(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(bI(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function KM(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ba&&a.listener==e&&a.capture==!!t&&a.ha==r)return i}return-1}II.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var c=KM(n,e,r,i);return-1<c?(e=n[c],t||(e.ea=!1)):((e=new bj(e,this.src,a,!!r,i)).ea=t,n.push(e)),e};var YM="closure_lm_"+(1e6*Math.random()|0),QM={};function wO(n,e,t,r,i){if(r&&r.once)return CO(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)wO(n,e[a],t,r,i);return null}return t=tR(t),n&&n[s0]?n.N(e,t,Xf(r)?!!r.capture:!!r,i):EO(n,e,t,!1,r,i)}function EO(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var c=Xf(i)?!!i.capture:!!i,h=XM(n);if(h||(n[YM]=h=new II(n)),(t=h.add(e,t,r,c,a)).proxy)return t;if(r=function Ij(){const e=Tj;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)b||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(IO(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function CO(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)CO(n,e[a],t,r,i);return null}return t=tR(t),n&&n[s0]?n.O(e,t,Xf(r)?!!r.capture:!!r,i):EO(n,e,t,!0,r,i)}function bO(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)bO(n,e[a],t,r,i);else r=Xf(r)?!!r.capture:!!r,t=tR(t),n&&n[s0]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=KM(a=n.g[e],t,r,i))&&(bI(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=XM(n))&&(e=n.g[e.toString()],n=-1,e&&(n=KM(e,t,r,i)),(t=-1<n?e[n]:null)&&JM(t))}function JM(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[s0])zM(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(IO(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=XM(e))?(zM(t,n),0==t.h&&(t.src=null,e[YM]=null)):bI(n)}}}function IO(n){return n in QM?QM[n]:QM[n]="on"+n}function Tj(n,e){if(n.ba)n=!0;else{e=new Dc(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&JM(n),n=t.call(r,e)}return n}function XM(n){return(n=n[YM])instanceof II?n:null}var eR="__closure_events_fn_"+(1e9*Math.random()>>>0);function tR(n){return"function"==typeof n?n:(n[eR]||(n[eR]=function(e){return n.handleEvent(e)}),n[eR])}function yi(){u.call(this),this.i=new II(this),this.P=this,this.I=null}function Bi(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new E(e,n);else if(e instanceof E)e.target=e.target||n;else{var i=e;vO(e=new E(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var c=e.g=t[a];i=TI(c,r,!0,e)&&i}if(i=TI(c=e.g=n,r,!0,e)&&i,i=TI(c,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=TI(c=e.g=t[a],r,!1,e)&&i}function TI(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var c=e[a];if(c&&!c.ba&&c.capture==t){var h=c.listener,g=c.ha||c.src;c.ea&&zM(n.i,c),i=!1!==h.call(g,r)&&i}}return i&&!r.defaultPrevented}o(yi,u),yi.prototype[s0]=!0,yi.prototype.removeEventListener=function(n,e,t,r){bO(this,n,e,t,r)},yi.prototype.M=function(){if(yi.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)bI(t[r]);delete n.g[e],n.h--}}this.I=null},yi.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},yi.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var nR=$t.JSON.stringify;function Dj(){var n=SO;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var rR,TO=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Aj,n=>n.reset());class Aj{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function xj(n){$t.setTimeout(()=>{throw n},0)}function DO(n,e){rR||function Mj(){var n=$t.Promise.resolve(void 0);rR=function(){n.then(Rj)}}(),iR||(rR(),iR=!0),SO.add(n,e)}var iR=!1,SO=new class Sj{constructor(){this.h=this.g=null}add(e,t){const r=TO.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Rj(){for(var n;n=Dj();){try{n.h.call(n.g)}catch(t){xj(t)}var e=TO;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}iR=!1}function DI(n,e){yi.call(this),this.h=n||1,this.g=e||$t,this.j=Vi(this.lb,this),this.l=Date.now()}function sR(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function oR(n,e,t){if("function"==typeof n)t&&(n=Vi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Vi(n.handleEvent,n)}return 2147483647<Number(e)?-1:$t.setTimeout(n,e||0)}function AO(n){n.g=oR(()=>{n.g=null,n.i&&(n.i=!1,AO(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}o(DI,yi),(Ct=DI.prototype).ca=!1,Ct.R=null,Ct.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Bi(this,"tick"),this.ca&&(sR(this),this.start()))}},Ct.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ct.M=function(){DI.X.M.call(this),sR(this),delete this.g};class kj extends u{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:AO(this)}M(){super.M(),this.g&&($t.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function o0(n){u.call(this),this.h=n,this.g={}}o(o0,u);var xO=[];function MO(n,e,t,r){Array.isArray(t)||(t&&(xO[0]=t.toString()),t=xO);for(var i=0;i<t.length;i++){var a=wO(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function RO(n){ZM(n.g,function(e,t){this.g.hasOwnProperty(t)&&JM(e)},n),n.g={}}function SI(){this.g=!0}function xm(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Fj(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var c=1;c<i.length;c++)i[c]=""}}}return nR(t)}catch{return e}}(n,t)+(r?" "+r:"")})}o0.prototype.M=function(){o0.X.M.call(this),RO(this)},o0.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},SI.prototype.Aa=function(){this.g=!1},SI.prototype.info=function(){};var ip={},kO=null;function AI(){return kO=kO||new yi}function NO(n){E.call(this,ip.Pa,n)}function a0(n){const e=AI();Bi(e,new NO(e))}function PO(n,e){E.call(this,ip.STAT_EVENT,n),this.stat=e}function Ss(n){const e=AI();Bi(e,new PO(e,n))}function OO(n,e){E.call(this,ip.Qa,n),this.size=e}function u0(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return $t.setTimeout(function(){n()},e)}ip.Pa="serverreachability",o(NO,E),ip.STAT_EVENT="statevent",o(PO,E),ip.Qa="timingevent",o(OO,E);var xI={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},FO={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function aR(){}function UO(){}aR.prototype.h=null;var cR,l0={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function uR(){E.call(this,"d")}function lR(){E.call(this,"c")}function MI(){}function c0(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new o0(this),this.O=Lj,this.T=new DI(n=Ne?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new VO}function VO(){this.i=null,this.g="",this.h=!1}o(uR,E),o(lR,E),o(MI,aR),MI.prototype.g=function(){return new XMLHttpRequest},MI.prototype.i=function(){return{}},cR=new MI;var Lj=45e3,dR={},RI={};function hR(n,e,t){n.K=1,n.v=OI(Sc(e)),n.s=t,n.P=!0,BO(n,null)}function BO(n,e){n.F=Date.now(),d0(n),n.A=Sc(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),YO(t.i,"t",r),n.C=0,t=n.l.H,n.h=new VO,n.g=wF(n.l,t?e:null,!n.s),0<n.N&&(n.L=new kj(Vi(n.La,n,n.g),n.N)),MO(n.S,n.g,"readystatechange",n.ib),e=n.H?_O(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),a0(),function Nj(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var c="",h=a.split("&"),g=0;g<h.length;g++){var y=h[g].split("=");if(1<y.length){var I=y[0];y=y[1];var S=I.split("_");c=2<=S.length&&"type"==S[1]?c+(I+"=")+y+"&":c+(I+"=redacted&")}}else c=null;else c=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.U,n.s)}function jO(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function HO(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=Uj(n,t),i==RI){4==e&&(n.o=4,Ss(14),r=!1),xm(n.j,n.m,null,"[Incomplete Response]");break}if(i==dR){n.o=4,Ss(15),xm(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}xm(n.j,n.m,i,null),fR(n,i)}jO(n)&&i!=RI&&i!=dR&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ss(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),ER(e),e.K=!0,Ss(11))):(xm(n.j,n.m,t,"[Invalid Chunked Response]"),sp(n),h0(n))}function Uj(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?RI:(t=Number(e.substring(t,r)),isNaN(t)?dR:(r+=1)+t>e.length?RI:(e=e.substr(r,t),n.C=r+t,e))}function d0(n){n.V=Date.now()+n.O,$O(n,n.O)}function $O(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=u0(Vi(n.gb,n),e)}function kI(n){n.B&&($t.clearTimeout(n.B),n.B=null)}function h0(n){0==n.l.G||n.I||mF(n.l,n)}function sp(n){kI(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,sR(n.T),RO(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function fR(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||pR(t.h,n)))if(!n.J&&pR(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;jI(t),VI(t)}wR(t),Ss(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=u0(Vi(t.cb,t),6e3));if(1>=XO(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else ap(t,11)}else if((n.J||t.g==n)&&jI(t),!A(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let y=i[e];if(t.T=y[0],y=y[1],2==t.G)if("c"==y[0]){t.I=y[1],t.ka=y[2];const I=y[3];null!=I&&(t.ma=I,t.j.info("VER="+t.ma));const S=y[4];null!=S&&(t.Ca=S,t.j.info("SVER="+t.Ca));const R=y[5];null!=R&&"number"==typeof R&&0<R&&(t.J=r=1.5*R,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const L=n.g;if(L){const G=L.g?L.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(G){var a=r.h;a.g||-1==G.indexOf("spdy")&&-1==G.indexOf("quic")&&-1==G.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(gR(a,a.h),a.h=null))}if(r.D){const le=L.g?L.g.getResponseHeader("X-HTTP-Session-Id"):null;le&&(r.za=le,dr(r.F,r.D,le))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var c=n;if((r=t).sa=vF(r,r.H?r.ka:null,r.V),c.J){eF(r.h,c);var h=c,g=r.J;g&&h.setTimeout(g),h.B&&(kI(h),d0(h)),r.g=c}else pF(r);0<t.i.length&&BI(t)}else"stop"!=y[0]&&"close"!=y[0]||ap(t,7);else 3==t.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?ap(t,7):vR(t):"noop"!=y[0]&&t.l&&t.l.wa(y),t.A=0)}a0()}catch{}}function GO(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(e0(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Bj(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(e0(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function Vj(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(e0(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(Ct=c0.prototype).setTimeout=function(n){this.O=n},Ct.ib=function(n){n=n.target;const e=this.L;e&&3==Ac(n)?e.l():this.La(n)},Ct.La=function(n){try{if(n==this.g)e:{const I=Ac(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>I)&&(3!=I||Ne||this.g&&(this.h.h||this.g.fa()||uF(this.g)))){this.I||4!=I||7==e||a0(),kI(this);var t=this.g.aa();this.Y=t;t:if(jO(this)){var r=uF(this.g);n="";var i=r.length,a=4==Ac(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){sp(this),h0(this);var c="";break t}this.h.i=new $t.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.fa();if(this.i=200==t,function Pj(n,e,t,r,i,a,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+c})}(this.j,this.u,this.A,this.m,this.U,I,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var h,g=this.g;if((h=g.g?g.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(h)){var y=h;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,Ss(12),sp(this),h0(this);break e}xm(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,fR(this,t)}this.P?(HO(this,I,c),Ne&&this.i&&3==I&&(MO(this.S,this.T,"tick",this.hb),this.T.start())):(xm(this.j,this.m,c,null),fR(this,c)),4==I&&sp(this),this.i&&!this.I&&(4==I?mF(this.l,this):(this.i=!1,d0(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Ss(12)):(this.o=0,Ss(13)),sp(this),h0(this)}}}catch{}},Ct.hb=function(){if(this.g){var n=Ac(this.g),e=this.g.fa();this.C<e.length&&(kI(this),HO(this,n,e),this.i&&4!=n&&d0(this))}},Ct.cancel=function(){this.I=!0,sp(this)},Ct.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function Oj(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(a0(),Ss(17)),sp(this),this.o=2,h0(this)):$O(this,this.V-n)};var qO=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function op(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof op){this.h=void 0!==e?e:n.h,NI(this,n.j),this.s=n.s,this.g=n.g,PI(this,n.m),this.l=n.l,e=n.i;var t=new g0;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),WO(this,t),this.o=n.o}else n&&(t=String(n).match(qO))?(this.h=!!e,NI(this,t[1]||"",!0),this.s=f0(t[2]||""),this.g=f0(t[3]||"",!0),PI(this,t[4]),this.l=f0(t[5]||"",!0),WO(this,t[6]||"",!0),this.o=f0(t[7]||"")):(this.h=!!e,this.i=new g0(null,this.h))}function Sc(n){return new op(n)}function NI(n,e,t){n.j=t?f0(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function PI(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function WO(n,e,t){e instanceof g0?(n.i=e,function Zj(n,e){e&&!n.j&&(Qd(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(zO(this,r),YO(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=p0(e,qj)),n.i=new g0(e,n.h))}function dr(n,e,t){n.i.set(e,t)}function OI(n){return dr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function f0(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function p0(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Hj),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Hj(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}op.prototype.toString=function(){var n=[],e=this.j;e&&n.push(p0(e,ZO,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(p0(e,ZO,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(p0(t,"/"==t.charAt(0)?Gj:$j,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",p0(t,Wj)),n.join("")};var ZO=/[#\/\?@]/g,$j=/[#\?:]/g,Gj=/[#\?]/g,qj=/[#\?@]/g,Wj=/#/g;function g0(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Qd(n){n.g||(n.g=new Map,n.h=0,n.i&&function jj(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function zO(n,e){Qd(n),e=Mm(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function KO(n,e){return Qd(n),e=Mm(n,e),n.g.has(e)}function YO(n,e,t){zO(n,e),0<t.length&&(n.i=null,n.g.set(Mm(n,e),p(t)),n.h+=t.length)}function Mm(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function QO(n){this.l=n||Kj,n=$t.PerformanceNavigationTiming?0<(n=$t.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!($t.g&&$t.g.Ga&&$t.g.Ga()&&$t.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ct=g0.prototype).add=function(n,e){Qd(this),this.i=null,n=Mm(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ct.forEach=function(n,e){Qd(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},Ct.oa=function(){Qd(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},Ct.W=function(n){Qd(this);let e=[];if("string"==typeof n)KO(this,n)&&(e=e.concat(this.g.get(Mm(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Ct.set=function(n,e){return Qd(this),this.i=null,KO(this,n=Mm(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ct.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},Ct.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),c=this.W(r);for(r=0;r<c.length;r++){var i=a;""!==c[r]&&(i+="="+encodeURIComponent(String(c[r]))),n.push(i)}}return this.i=n.join("&")};var Kj=10;function JO(n){return!!n.h||!!n.g&&n.g.size>=n.j}function XO(n){return n.h?1:n.g?n.g.size:0}function pR(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function gR(n,e){n.g?n.g.add(e):n.h=e}function eF(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function tF(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return p(n.i)}function mR(){}function Yj(){this.g=new mR}function Qj(n,e,t){const r=t||"";try{GO(n,function(i,a){let c=i;Xf(i)&&(c=nR(i)),e.push(r+a+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function FI(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function m0(n){this.l=n.ac||null,this.j=n.jb||!1}function LI(n,e){yi.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=_R,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}QO.prototype.cancel=function(){if(this.i=tF(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},mR.prototype.stringify=function(n){return $t.JSON.stringify(n,void 0)},mR.prototype.parse=function(n){return $t.JSON.parse(n,void 0)},o(m0,aR),m0.prototype.g=function(){return new LI(this.l,this.j)},m0.prototype.i=function(n){return function(){return n}}({}),o(LI,yi);var _R=0;function nF(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function _0(n){n.readyState=4,n.l=null,n.j=null,n.A=null,y0(n)}function y0(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ct=LI.prototype).open=function(n,e){if(this.readyState!=_R)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,y0(this)},Ct.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||$t).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},Ct.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,_0(this)),this.readyState=_R},Ct.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,y0(this)),this.g&&(this.readyState=3,y0(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof $t.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;nF(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},Ct.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?_0(this):y0(this),3==this.readyState&&nF(this)}},Ct.Va=function(n){this.g&&(this.response=this.responseText=n,_0(this))},Ct.Ua=function(n){this.g&&(this.response=n,_0(this))},Ct.ga=function(){this.g&&_0(this)},Ct.setRequestHeader=function(n,e){this.v.append(n,e)},Ct.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ct.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(LI.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Xj=$t.JSON.parse;function Sr(n){yi.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=rF,this.K=this.L=!1}o(Sr,yi);var rF="",eH=/^https?$/i,tH=["POST","PUT"];function iF(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,sF(n),UI(n)}function sF(n){n.D||(n.D=!0,Bi(n,"complete"),Bi(n,"error"))}function oF(n){if(n.h&&typeof EI<"u"&&(!n.C[1]||4!=Ac(n)||2!=n.aa()))if(n.v&&4==Ac(n))oR(n.Ha,0,n);else if(Bi(n,"readystatechange"),4==Ac(n)){n.h=!1;try{const h=n.aa();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(qO)[1]||null;if(!i&&$t.self&&$t.self.location){var a=$t.self.location.protocol;i=a.substr(0,a.length-1)}r=!eH.test(i?i.toLowerCase():"")}t=r}if(t)Bi(n,"complete"),Bi(n,"success");else{n.m=6;try{var c=2<Ac(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.aa()+"]",sF(n)}}finally{UI(n)}}}function UI(n,e){if(n.g){aF(n);const t=n.g,r=n.C[0]?Xv:null;n.g=null,n.C=null,e||Bi(n,"ready");try{t.onreadystatechange=r}catch{}}}function aF(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&($t.clearTimeout(n.A),n.A=null)}function Ac(n){return n.g?n.g.readyState:0}function uF(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case rF:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function lF(n){let e="";return ZM(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function yR(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=lF(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):dr(n,e,t))}function v0(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function cF(n){this.Ca=0,this.i=[],this.j=new SI,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=v0("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=v0("baseRetryDelayMs",5e3,n),this.bb=v0("retryDelaySeedMs",1e4,n),this.$a=v0("forwardChannelMaxRetries",2,n),this.ta=v0("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new QO(n&&n.concurrentRequestLimit),this.Fa=new Yj,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function vR(n){if(dF(n),3==n.G){var e=n.U++,t=Sc(n.F);dr(t,"SID",n.I),dr(t,"RID",e),dr(t,"TYPE","terminate"),w0(n,t),(e=new c0(n,n.j,e,void 0)).K=2,e.v=OI(Sc(t)),t=!1,$t.navigator&&$t.navigator.sendBeacon&&(t=$t.navigator.sendBeacon(e.v.toString(),"")),!t&&$t.Image&&((new Image).src=e.v,t=!0),t||(e.g=wF(e.l,null),e.g.da(e.v)),e.F=Date.now(),d0(e)}yF(n)}function VI(n){n.g&&(ER(n),n.g.cancel(),n.g=null)}function dF(n){VI(n),n.u&&($t.clearTimeout(n.u),n.u=null),jI(n),n.h.cancel(),n.m&&("number"==typeof n.m&&$t.clearTimeout(n.m),n.m=null)}function BI(n){JO(n.h)||n.m||(n.m=!0,DO(n.Ja,n),n.C=0)}function hF(n,e){var t;t=e?e.m:n.U++;const r=Sc(n.F);dr(r,"SID",n.I),dr(r,"RID",t),dr(r,"AID",n.T),w0(n,r),n.o&&n.s&&yR(r,n.o,n.s),t=new c0(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=fF(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),gR(n.h,t),hR(t,r,e)}function w0(n,e){n.ia&&ZM(n.ia,function(t,r){dr(e,r,t)}),n.l&&GO({},function(t,r){dr(e,r,t)})}function fF(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Vi(n.l.Ra,n.l,n):null;e:{var i=n.i;let a=-1;for(;;){const c=["count="+t];-1==a?0<t?(a=i[0].h,c.push("ofs="+a)):a=0:c.push("ofs="+a);let h=!0;for(let g=0;g<t;g++){let y=i[g].h;const I=i[g].g;if(y-=a,0>y)a=Math.max(0,i[g].h-100),h=!1;else try{Qj(I,c,"req"+y+"_")}catch{r&&r(I)}}if(h){r=c.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function pF(n){n.g||n.u||(n.Z=1,DO(n.Ia,n),n.A=0)}function wR(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=u0(Vi(n.Ia,n),_F(n,n.A)),n.A++,0))}function ER(n){null!=n.B&&($t.clearTimeout(n.B),n.B=null)}function gF(n){n.g=new c0(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Sc(n.sa);dr(e,"RID","rpc"),dr(e,"SID",n.I),dr(e,"CI",n.L?"0":"1"),dr(e,"AID",n.T),dr(e,"TYPE","xmlhttp"),w0(n,e),n.o&&n.s&&yR(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=OI(Sc(e)),t.s=null,t.P=!0,BO(t,n)}function jI(n){null!=n.v&&($t.clearTimeout(n.v),n.v=null)}function mF(n,e){var t=null;if(n.g==e){jI(n),ER(n),n.g=null;var r=2}else{if(!pR(n.h,e))return;t=e.D,eF(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Bi(r=AI(),new OO(r,t)),BI(n)}else pF(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function rH(n,e){return!(XO(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=u0(Vi(n.Ja,n,e),_F(n,n.C)),n.C++,0)))}(n,e)||2==r&&wR(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:ap(n,5);break;case 4:ap(n,10);break;case 3:ap(n,6);break;default:ap(n,2)}}function _F(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function ap(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Vi(n.kb,n);t||(t=new op("//www.google.com/images/cleardot.gif"),$t.location&&"http"==$t.location.protocol||NI(t,"https"),OI(t)),function Jj(n,e){const t=new SI;if($t.Image){const r=new Image;r.onload=s(FI,t,r,"TestLoadImage: loaded",!0,e),r.onerror=s(FI,t,r,"TestLoadImage: error",!1,e),r.onabort=s(FI,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=s(FI,t,r,"TestLoadImage: timeout",!1,e),$t.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ss(2);n.G=0,n.l&&n.l.va(e),yF(n),dF(n)}function yF(n){if(n.G=0,n.la=[],n.l){const e=tF(n.h);(0!=e.length||0!=n.i.length)&&(v(n.la,e),v(n.la,n.i),n.h.i.length=0,p(n.i),n.i.length=0),n.l.ua()}}function vF(n,e,t){var r=t instanceof op?Sc(t):new op(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),PI(r,r.m);else{var i=$t.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new op(null,void 0);r&&NI(a,r),e&&(a.g=e),i&&PI(a,i),t&&(a.l=t),r=a}return e=n.za,(t=n.D)&&e&&dr(r,t,e),dr(r,"VER",n.ma),w0(n,r),r}function wF(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Sr(t&&n.Da&&!n.ra?new m0({jb:!0}):n.ra)).Ka(n.H),e}function EF(){}function HI(){if(lt&&!(10<=Number(r0)))throw Error("Environmental error: no available transport.")}function No(n,e){yi.call(this),this.g=new cF(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!A(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!A(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Rm(this)}function CF(n){uR.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function bF(){lR.call(this),this.status=1}function Rm(n){this.g=n}(Ct=Sr.prototype).Ka=function(n){this.L=n},Ct.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():cR.g(),this.C=function LO(n){return n.h||(n.h=n.i())}(this.u?this.u:cR),this.g.onreadystatechange=Vi(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void iF(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=$t.FormData&&n instanceof $t.FormData,!(0<=f(tH,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,c]of t)this.g.setRequestHeader(a,c);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{aF(this),0<this.B&&((this.K=function nH(n){return lt&&function n0(){return function $e(n){var e=t0;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=N(String(Ca)).split("."),t=N("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",a=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=V(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||V(0==i[2].length,0==a[2].length)||V(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Vi(this.qa,this)):this.A=oR(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){iF(this,a)}},Ct.qa=function(){typeof EI<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Bi(this,"timeout"),this.abort(8))},Ct.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Bi(this,"complete"),Bi(this,"abort"),UI(this))},Ct.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),UI(this,!0)),Sr.X.M.call(this)},Ct.Ha=function(){this.s||(this.F||this.v||this.l?oF(this):this.fb())},Ct.fb=function(){oF(this)},Ct.aa=function(){try{return 2<Ac(this)?this.g.status:-1}catch{return-1}},Ct.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},Ct.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Xj(e)}},Ct.Ea=function(){return this.m},Ct.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ct=cF.prototype).ma=8,Ct.G=1,Ct.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new c0(this,this.j,n,void 0);let a=this.s;if(this.S&&(a?(a=_O(a),vO(a,this.S)):a=this.S),null!==this.o||this.N||(i.H=a,a=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=fF(this,i,e),dr(t=Sc(this.F),"RID",n),dr(t,"CVER",22),this.D&&dr(t,"X-HTTP-Session-Id",this.D),w0(this,t),a&&(this.N?e="headers="+encodeURIComponent(String(lF(a)))+"&"+e:this.o&&yR(t,this.o,a)),gR(this.h,i),this.Ya&&dr(t,"TYPE","init"),this.O?(dr(t,"$req",e),dr(t,"SID","null"),i.Z=!0,hR(i,t,null)):hR(i,t,e),this.G=2}}else 3==this.G&&(n?hF(this,n):0==this.i.length||JO(this.h)||hF(this))},Ct.Ia=function(){if(this.u=null,gF(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=u0(Vi(this.eb,this),n)}},Ct.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Ss(10),VI(this),gF(this))},Ct.cb=function(){null!=this.v&&(this.v=null,VI(this),wR(this),Ss(19))},Ct.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Ss(2)):(this.j.info("Failed to ping google.com"),Ss(1))},(Ct=EF.prototype).xa=function(){},Ct.wa=function(){},Ct.va=function(){},Ct.ua=function(){},Ct.Ra=function(){},HI.prototype.g=function(n,e){return new No(n,e)},o(No,yi),No.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Ss(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=vF(n,null,n.V),BI(n)},No.prototype.close=function(){vR(this.g)},No.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=nR(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&BI(e)},No.prototype.M=function(){this.g.l=null,delete this.j,vR(this.g),delete this.g,No.X.M.call(this)},o(CF,uR),o(bF,lR),o(Rm,EF),Rm.prototype.xa=function(){Bi(this.g,"a")},Rm.prototype.wa=function(n){Bi(this.g,new CF(n))},Rm.prototype.va=function(n){Bi(this.g,new bF)},Rm.prototype.ua=function(){Bi(this.g,"b")},HI.prototype.createWebChannel=HI.prototype.g,No.prototype.send=No.prototype.u,No.prototype.open=No.prototype.m,No.prototype.close=No.prototype.close,xI.NO_ERROR=0,xI.TIMEOUT=8,xI.HTTP_ERROR=6,FO.COMPLETE="complete",UO.EventType=l0,l0.OPEN="a",l0.CLOSE="b",l0.ERROR="c",l0.MESSAGE="d",yi.prototype.listen=yi.prototype.N,Sr.prototype.listenOnce=Sr.prototype.O,Sr.prototype.getLastError=Sr.prototype.Oa,Sr.prototype.getLastErrorCode=Sr.prototype.Ea,Sr.prototype.getStatus=Sr.prototype.aa,Sr.prototype.getResponseJson=Sr.prototype.Sa,Sr.prototype.getResponseText=Sr.prototype.fa,Sr.prototype.send=Sr.prototype.da,Sr.prototype.setWithCredentials=Sr.prototype.Ka;var iH=Eu.createWebChannelTransport=function(){return new HI},sH=Eu.getStatEventTarget=function(){return AI()},CR=Eu.ErrorCode=xI,oH=Eu.EventType=FO,aH=Eu.Event=ip,IF=Eu.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},uH=Eu.FetchXmlHttpFactory=m0,$I=Eu.WebChannel=UO,lH=Eu.XhrIo=Sr;const TF="@firebase/firestore";class vi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vi.UNAUTHENTICATED=new vi(null),vi.GOOGLE_CREDENTIALS=new vi("google-credentials-uid"),vi.FIRST_PARTY=new vi("first-party-uid"),vi.MOCK_USER=new vi("mock-user");let km="9.14.0";const Jd=new Ro.Yd("@firebase/firestore");function bR(){return Jd.logLevel}function He(n,...e){if(Jd.logLevel<=Ro.in.DEBUG){const t=e.map(IR);Jd.debug(`Firestore (${km}): ${n}`,...t)}}function Ur(n,...e){if(Jd.logLevel<=Ro.in.ERROR){const t=e.map(IR);Jd.error(`Firestore (${km}): ${n}`,...t)}}function up(n,...e){if(Jd.logLevel<=Ro.in.WARN){const t=e.map(IR);Jd.warn(`Firestore (${km}): ${n}`,...t)}}function IR(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ht(n="Unexpected state"){const e=`FIRESTORE (${km}) INTERNAL ASSERTION FAILED: `+n;throw Ur(e),new Error(e)}function Ot(n,e){n||ht()}function Xe(n,e){return n}const ye={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Le extends F.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class si{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class DF{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class hH{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(vi.UNAUTHENTICATED))}shutdown(){}}class fH{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class pH{constructor(e){this.t=e,this.currentUser=vi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let c=new si;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new si,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const y=c;e.enqueueRetryable((0,Ee.Z)(function*(){yield y.promise,yield a(r.currentUser)}))},g=y=>{He("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(y=>g(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?g(y):(He("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new si)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(He("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ot("string"==typeof r.accessToken),new DF(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ot(null===e||"string"==typeof e),new vi(e)}}class gH{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=vi.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Ot(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class mH{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new gH(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(vi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class SF{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _H{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=a=>{null!=a.error&&He("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.A;return this.A=a.token,He("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{He("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.T.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.T.getImmediate({optional:!0});a?i(a):He("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ot("string"==typeof t.token),this.A=t.token,new SF(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function yH(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class AF{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=yH(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Gt(n,e){return n<e?-1:n>e?1:0}function Nm(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function xF(n){return n+"\0"}class hr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Le(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Le(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Le(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Le(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return hr.fromMillis(Date.now())}static fromDate(e){return hr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new hr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Gt(this.nanoseconds,e.nanoseconds):Gt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ft{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ft(e)}static min(){return new Ft(new hr(0,0))}static max(){return new Ft(new hr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class E0{constructor(e,t,r){void 0===t?t=0:t>e.length&&ht(),void 0===r?r=e.length-t:r>e.length-t&&ht(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===E0.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof E0?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),c=t.get(i);if(a<c)return-1;if(a>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class mn extends E0{construct(e,t,r){return new mn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Le(ye.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new mn(t)}static emptyPath(){return new mn([])}}const vH=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ar extends E0{construct(e,t,r){return new Ar(e,t,r)}static isValidIdentifier(e){return vH.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ar.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ar(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Le(ye.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Le(ye.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[i+1];if("\\"!==g&&"."!==g&&"`"!==g)throw new Le(ye.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,i+=2}else"`"===h?(c=!c,i++):"."!==h||c?(r+=h,i++):(a(),i++)}if(a(),c)throw new Le(ye.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ar(t)}static emptyPath(){return new Ar([])}}class Ke{constructor(e){this.path=e}static fromPath(e){return new Ke(mn.fromString(e))}static fromName(e){return new Ke(mn.fromString(e).popFirst(5))}static empty(){return new Ke(mn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===mn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return mn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ke(new mn(e.slice()))}}class GI{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function TR(n){return n.fields.find(e=>2===e.kind)}function lp(n){return n.fields.filter(e=>2!==e.kind)}GI.UNKNOWN_ID=-1;class qI{constructor(e,t){this.fieldPath=e,this.kind=t}}class C0{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new C0(0,Po.min())}}function MF(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ft.fromTimestamp(1e9===r?new hr(t+1,0):new hr(t,r));return new Po(i,Ke.empty(),e)}function RF(n){return new Po(n.readTime,n.key,-1)}class Po{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Po(Ft.min(),Ke.empty(),-1)}static max(){return new Po(Ft.max(),Ke.empty(),-1)}}function DR(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ke.comparator(n.documentKey,e.documentKey),0!==t?t:Gt(n.largestBatchId,e.largestBatchId))}const kF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class NF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Xd(n){return SR.apply(this,arguments)}function SR(){return SR=(0,Ee.Z)(function*(n){if(n.code!==ye.FAILED_PRECONDITION||n.message!==kF)throw n;He("LocalStore","Unexpectedly lost primary lease")}),SR.apply(this,arguments)}class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ht(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new he((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof he?t:he.resolve(t)}catch(t){return he.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):he.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):he.reject(t)}static resolve(e){return new he((t,r)=>{t(e)})}static reject(e){return new he((t,r)=>{r(e)})}static waitFor(e){return new he((t,r)=>{let i=0,a=0,c=!1;e.forEach(h=>{++i,h.next(()=>{++a,c&&a===i&&t()},g=>r(g))}),c=!0,a===i&&t()})}static or(e){let t=he.resolve(!1);for(const r of e)t=t.next(i=>i?he.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new he((r,i)=>{const a=e.length,c=new Array(a);let h=0;for(let g=0;g<a;g++){const y=g;t(e[y]).next(I=>{c[y]=I,++h,h===a&&r(c)},I=>i(I))}})}static doWhile(e,t){return new he((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class WI{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new si,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new b0(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=AR(r.target.error);this.P.reject(new b0(e,i))}}static open(e,t,r,i){try{return new WI(t,e.transaction(i,r))}catch(a){throw new b0(t,a)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(He("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new bH(t)}}class Cu{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Cu.D((0,F.z$)())&&Ur("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return He("SimpleDb","Removing database:",e),cp(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,F.hl)())return!1;if(Cu.N())return!0;const e=(0,F.z$)(),t=Cu.D(e),r=0<t&&t<10,i=Cu.k(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,Ee.Z)(function*(){return t.db||(He("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=c=>{r(c.target.result)},a.onblocked=()=>{i(new b0(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=c=>{const h=c.target.error;i("VersionError"===h.name?new Le(ye.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Le(ye.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new b0(e,h))},a.onupgradeneeded=c=>{He("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.S.$(c.target.result,a.transaction,c.oldVersion,t.version).next(()=>{He("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,Ee.Z)(function*(){const c="readonly"===t;let h=0;for(;;){++h;try{a.db=yield a.F(e);const g=WI.open(a.db,e,c?"readonly":"readwrite",r),y=i(g).next(I=>(g.V(),I)).catch(I=>(g.abort(I),he.reject(I))).toPromise();return y.catch(()=>{}),yield g.v,y}catch(g){const y=g,I="FirebaseError"!==y.name&&h<3;if(He("SimpleDb","Transaction failed with error:",y.message,"Retrying:",I),a.close(),!I)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class CH{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return cp(this.U.delete())}}class b0 extends Le{constructor(e,t){super(ye.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function eh(n){return"IndexedDbTransactionError"===n.name}class bH{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(He("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(He("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),cp(r)}add(e){return He("SimpleDb","ADD",this.store.name,e,e),cp(this.store.add(e))}get(e){return cp(this.store.get(e)).next(t=>(void 0===t&&(t=null),He("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return He("SimpleDb","DELETE",this.store.name,e),cp(this.store.delete(e))}count(){return He("SimpleDb","COUNT",this.store.name),cp(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.H(i,(c,h)=>{a.push(h)}).next(()=>a)}{const i=this.store.getAll(r.range);return new he((a,c)=>{i.onerror=h=>{c(h.target.error)},i.onsuccess=h=>{a(h.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new he((i,a)=>{r.onerror=c=>{a(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}Y(e,t){He("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(a,c,h)=>h.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new he((r,i)=>{t.onerror=a=>{const c=AR(a.target.error);i(c)},t.onsuccess=a=>{const c=a.target.result;c?e(c.primaryKey,c.value).next(h=>{h?c.continue():r()}):r()}})}H(e,t){const r=[];return new he((i,a)=>{e.onerror=c=>{a(c.target.error)},e.onsuccess=c=>{const h=c.target.result;if(!h)return void i();const g=new CH(h),y=t(h.primaryKey,h.value,g);if(y instanceof he){const I=y.catch(S=>(g.done(),he.reject(S)));r.push(I)}g.isDone?i():null===g.G?h.continue():h.continue(g.G)}}).next(()=>he.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function cp(n){return new he((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=AR(r.target.error);t(i)}})}let PF=!1;function AR(n){const e=Cu.D((0,F.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Le("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return PF||(PF=!0,setTimeout(()=>{throw r},0)),r}}return n}class IH{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;He("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ee.Z)(function*(){t.task=null;try{He("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){eh(r)?He("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Xd(r)}yield t.nt(6e4)}))}}class TH{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,Ee.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,a=!0;return he.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return He("IndexBackiller",`Processing collection: ${c}`),this.rt(e,c,i).next(h=>{i-=h,r.add(c)});a=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const c=a.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.ot(i,a)).next(h=>(He("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>c.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,a)=>{const c=RF(a);DR(c,r)>0&&(r=c)}),new Po(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class zs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function OF(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function dp(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function FF(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}zs.at=-1;class xr{constructor(e,t){this.comparator=e,this.root=t||ji.EMPTY}insert(e,t){return new xr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ji.BLACK,null,null))}remove(e){return new xr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ji.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ZI(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ZI(this.root,e,this.comparator,!1)}getReverseIterator(){return new ZI(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ZI(this.root,e,this.comparator,!0)}}class ZI{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ji{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??ji.RED,this.left=i??ji.EMPTY,this.right=a??ji.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new ji(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ji.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ji.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ji.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ji.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ht();const e=this.left.check();if(e!==this.right.check())throw ht();return e+(this.isRed()?0:1)}}ji.EMPTY=null,ji.RED=!0,ji.BLACK=!1,ji.EMPTY=new class{constructor(){this.size=0}get key(){throw ht()}get value(){throw ht()}get color(){throw ht()}get left(){throw ht()}get right(){throw ht()}copy(n,e,t,r,i){return this}insert(n,e,t){return new ji(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ln{constructor(e){this.comparator=e,this.data=new xr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new LF(this.data.getIterator())}getIteratorFrom(e){return new LF(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Ln)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ln(this.comparator);return t.data=e,t}}class LF{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Pm(n){return n.hasNext()?n.getNext():void 0}class Oo{constructor(e){this.fields=e,e.sort(Ar.comparator)}static empty(){return new Oo([])}unionWith(e){let t=new Ln(Ar.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Oo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Nm(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class oi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new oi(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new oi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Gt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}oi.EMPTY_BYTE_STRING=new oi("");const SH=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function th(n){if(Ot(!!n),"string"==typeof n){let e=0;const t=SH.exec(n);if(Ot(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Mr(n.seconds),nanos:Mr(n.nanos)}}function Mr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function hp(n){return"string"==typeof n?oi.fromBase64String(n):oi.fromUint8Array(n)}function xR(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function UF(n){const e=n.mapValue.fields.__previous_value__;return xR(e)?UF(e):e}function I0(n){const e=th(n.mapValue.fields.__local_write_time__.timestampValue);return new hr(e.seconds,e.nanos)}class AH{constructor(e,t,r,i,a,c,h,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.useFetchStreams=g}}class nh{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new nh("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof nh&&e.projectId===this.projectId&&e.database===this.database}}function T0(n){return null==n}function D0(n){return 0===n&&1/n==-1/0}function VF(n){return"number"==typeof n&&Number.isInteger(n)&&!D0(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const rh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},zI={nullValue:"NULL_VALUE"};function fp(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?xR(n)?4:$F(n)?9007199254740991:10:ht()}function fl(n,e){if(n===e)return!0;const t=fp(n);if(t!==fp(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return I0(n).isEqual(I0(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=th(r.timestampValue),c=th(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,hp(n.bytesValue).isEqual(hp(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Mr(r.geoPointValue.latitude)===Mr(i.geoPointValue.latitude)&&Mr(r.geoPointValue.longitude)===Mr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Mr(r.integerValue)===Mr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Mr(r.doubleValue),c=Mr(i.doubleValue);return a===c?D0(a)===D0(c):isNaN(a)&&isNaN(c)}return!1}(n,e);case 9:return Nm(n.arrayValue.values||[],e.arrayValue.values||[],fl);case 10:return function(r,i){const a=r.mapValue.fields||{},c=i.mapValue.fields||{};if(OF(a)!==OF(c))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(void 0===c[h]||!fl(a[h],c[h])))return!1;return!0}(n,e);default:return ht()}var i}function S0(n,e){return void 0!==(n.values||[]).find(t=>fl(t,e))}function ih(n,e){if(n===e)return 0;const t=fp(n),r=fp(e);if(t!==r)return Gt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Gt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const c=Mr(i.integerValue||i.doubleValue),h=Mr(a.integerValue||a.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,e);case 3:return BF(n.timestampValue,e.timestampValue);case 4:return BF(I0(n),I0(e));case 5:return Gt(n.stringValue,e.stringValue);case 6:return function(i,a){const c=hp(i),h=hp(a);return c.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const c=i.split("/"),h=a.split("/");for(let g=0;g<c.length&&g<h.length;g++){const y=Gt(c[g],h[g]);if(0!==y)return y}return Gt(c.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const c=Gt(Mr(i.latitude),Mr(a.latitude));return 0!==c?c:Gt(Mr(i.longitude),Mr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const c=i.values||[],h=a.values||[];for(let g=0;g<c.length&&g<h.length;++g){const y=ih(c[g],h[g]);if(y)return y}return Gt(c.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===rh.mapValue&&a===rh.mapValue)return 0;if(i===rh.mapValue)return 1;if(a===rh.mapValue)return-1;const c=i.fields||{},h=Object.keys(c),g=a.fields||{},y=Object.keys(g);h.sort(),y.sort();for(let I=0;I<h.length&&I<y.length;++I){const S=Gt(h[I],y[I]);if(0!==S)return S;const R=ih(c[h[I]],g[y[I]]);if(0!==R)return R}return Gt(h.length,y.length)}(n.mapValue,e.mapValue);default:throw ht()}}function BF(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Gt(n,e);const t=th(n),r=th(e),i=Gt(t.seconds,r.seconds);return 0!==i?i:Gt(t.nanos,r.nanos)}function Om(n){return MR(n)}function MR(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=th(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?hp(n.bytesValue).toBase64():"referenceValue"in n?Ke.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const c of r.values||[])a?a=!1:i+=",",i+=MR(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",c=!0;for(const h of i)c?c=!1:a+=",",a+=`${h}:${MR(r.fields[h])}`;return a+"}"}(n.mapValue):ht();var e}function pp(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function RR(n){return!!n&&"integerValue"in n}function A0(n){return!!n&&"arrayValue"in n}function jF(n){return!!n&&"nullValue"in n}function HF(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function KI(n){return!!n&&"mapValue"in n}function x0(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return dp(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=x0(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=x0(n.arrayValue.values[t]);return e}return Object.assign({},n)}function $F(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function xH(n){return"nullValue"in n?zI:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?pp(nh.empty(),Ke.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ht()}function MH(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?pp(nh.empty(),Ke.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?rh:ht()}function GF(n,e){const t=ih(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function qF(n,e){const t=ih(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Hi{constructor(e){this.value=e}static empty(){return new Hi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!KI(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=x0(t)}setAll(e){let t=Ar.emptyPath(),r={},i=[];e.forEach((c,h)=>{if(!t.isImmediateParentOf(h)){const g=this.getFieldsMap(t);this.applyChanges(g,r,i),r={},i=[],t=h.popLast()}c?r[h.lastSegment()]=x0(c):i.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());KI(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return fl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];KI(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){dp(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Hi(x0(this.value))}}function WF(n){const e=[];return dp(n.fields,(t,r)=>{const i=new Ar([t]);if(KI(r)){const a=WF(r.mapValue).fields;if(0===a.length)e.push(i);else for(const c of a)e.push(i.child(c))}else e.push(i)}),new Oo(e)}class Qn{constructor(e,t,r,i,a,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=c}static newInvalidDocument(e){return new Qn(e,0,Ft.min(),Ft.min(),Hi.empty(),0)}static newFoundDocument(e,t,r){return new Qn(e,1,t,Ft.min(),r,0)}static newNoDocument(e,t){return new Qn(e,2,t,Ft.min(),Hi.empty(),0)}static newUnknownDocument(e,t){return new Qn(e,3,t,Ft.min(),Hi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ft.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Qn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class RH{constructor(e,t=null,r=[],i=[],a=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=c,this.endAt=h,this.ht=null}}function ZF(n,e=null,t=[],r=[],i=null,a=null,c=null){return new RH(n,e,t,r,i,a,c)}function gp(n){const e=Xe(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Om(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),T0(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Om(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Om(r)).join(",")),e.ht=t}return e.ht}function M0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!BH(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!fl(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!JF(n.startAt,e.startAt)&&JF(n.endAt,e.endAt)}function YI(n){return Ke.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function QI(n,e){return n.filters.filter(t=>t instanceof $i&&t.field.isEqual(e))}function zF(n,e,t){let r=zI,i=!0;for(const a of QI(n,e)){let c=zI,h=!0;switch(a.op){case"<":case"<=":c=xH(a.value);break;case"==":case"in":case">=":c=a.value;break;case">":c=a.value,h=!1;break;case"!=":case"not-in":c=zI}GF({value:r,inclusive:i},{value:c,inclusive:h})<0&&(r=c,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const c=t.position[a];GF({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function KF(n,e,t){let r=rh,i=!0;for(const a of QI(n,e)){let c=rh,h=!0;switch(a.op){case">=":case">":c=MH(a.value),h=!1;break;case"==":case"in":case"<=":c=a.value;break;case"<":c=a.value,h=!1;break;case"!=":case"not-in":c=rh}qF({value:r,inclusive:i},{value:c,inclusive:h})>0&&(r=c,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const c=t.position[a];qF({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class $i extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new NH(e,t,r):"array-contains"===t?new FH(e,r):"in"===t?new LH(e,r):"not-in"===t?new UH(e,r):"array-contains-any"===t?new VH(e,r):new $i(e,t,r)}static lt(e,t,r){return"in"===t?new PH(e,r):new OH(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(ih(t,this.value)):null!==t&&fp(this.value)===fp(t)&&this.ft(ih(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ht()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class NH extends $i{constructor(e,t,r){super(e,t,r),this.key=Ke.fromName(r.referenceValue)}matches(e){const t=Ke.comparator(e.key,this.key);return this.ft(t)}}class PH extends $i{constructor(e,t){super(e,"in",t),this.keys=YF(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class OH extends $i{constructor(e,t){super(e,"not-in",t),this.keys=YF(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function YF(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ke.fromName(r.referenceValue))}class FH extends $i{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return A0(t)&&S0(t.arrayValue,this.value)}}class LH extends $i{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&S0(this.value.arrayValue,t)}}class UH extends $i{constructor(e,t){super(e,"not-in",t)}matches(e){if(S0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!S0(this.value.arrayValue,t)}}class VH extends $i{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!A0(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>S0(this.value.arrayValue,r))}}class sh{constructor(e,t){this.position=e,this.inclusive=t}}class Fm{constructor(e,t="asc"){this.field=e,this.dir=t}}function BH(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function QF(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],c=n.position[i];if(r=a.field.isKeyField()?Ke.comparator(Ke.fromName(c.referenceValue),t.key):ih(c,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function JF(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!fl(n.position[t],e.position[t]))return!1;return!0}class xc{constructor(e,t=null,r=[],i=[],a=null,c="F",h=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=c,this.startAt=h,this.endAt=g,this._t=null,this.wt=null}}function XF(n,e,t,r,i,a,c,h){return new xc(n,e,t,r,i,a,c,h)}function Lm(n){return new xc(n)}function eL(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function kR(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function NR(n){for(const e of n.filters)if(e.dt())return e.field;return null}function PR(n){return null!==n.collectionGroup}function Um(n){const e=Xe(n);if(null===e._t){e._t=[];const t=NR(e),r=kR(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new Fm(t)),e._t.push(new Fm(Ar.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e._t.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Fm(Ar.keyField(),a))}}}return e._t}function As(n){const e=Xe(n);if(!e.wt)if("F"===e.limitType)e.wt=ZF(e.path,e.collectionGroup,Um(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Um(e))t.push(new Fm(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new sh(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new sh(e.startAt.position,e.startAt.inclusive):null;e.wt=ZF(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function JI(n,e,t){return new xc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function R0(n,e){return M0(As(n),As(e))&&n.limitType===e.limitType}function tL(n){return`${gp(As(n))}|lt:${n.limitType}`}function OR(n){return`Query(target=${function kH(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Om(r.value)}`;var r}).join(", ")}]`),T0(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Om(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Om(t)).join(",")),`Target(${e})`}(As(n))}; limitType=${n.limitType})`}function FR(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ke.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,c){const h=QF(i,a,c);return i.inclusive?h<=0:h<0}(t.startAt,Um(t),r)||t.endAt&&!function(i,a,c){const h=QF(i,a,c);return i.inclusive?h>=0:h>0}(t.endAt,Um(t),r)));var t,r}function nL(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function rL(n){return(e,t)=>{let r=!1;for(const i of Um(n)){const a=jH(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function jH(n,e,t){const r=n.field.isKeyField()?Ke.comparator(e.key,t.key):function(i,a,c){const h=a.data.field(i),g=c.data.field(i);return null!==h&&null!==g?ih(h,g):ht()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ht()}}function iL(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:D0(e)?"-0":e}}function sL(n){return{integerValue:""+n}}function oL(n,e){return VF(e)?sL(e):iL(n,e)}class XI{constructor(){this._=void 0}}function HH(n,e,t){return n instanceof Vm?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof mp?uL(n,e):n instanceof _p?lL(n,e):function(r,i){const a=aL(r,i),c=cL(a)+cL(r.yt);return RR(a)&&RR(r.yt)?sL(c):iL(r.It,c)}(n,e)}function $H(n,e,t){return n instanceof mp?uL(n,e):n instanceof _p?lL(n,e):t}function aL(n,e){return n instanceof Bm?RR(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Vm extends XI{}class mp extends XI{constructor(e){super(),this.elements=e}}function uL(n,e){const t=dL(e);for(const r of n.elements)t.some(i=>fl(i,r))||t.push(r);return{arrayValue:{values:t}}}class _p extends XI{constructor(e){super(),this.elements=e}}function lL(n,e){let t=dL(e);for(const r of n.elements)t=t.filter(i=>!fl(i,r));return{arrayValue:{values:t}}}class Bm extends XI{constructor(e,t){super(),this.It=e,this.yt=t}}function cL(n){return Mr(n.integerValue||n.doubleValue)}function dL(n){return A0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class k0{constructor(e,t){this.field=e,this.transform=t}}class qH{constructor(e,t){this.version=e,this.transformResults=t}}class fr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new fr}static exists(e){return new fr(void 0,e)}static updateTime(e){return new fr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function eT(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class tT{}function hL(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Hm(n.key,fr.none()):new jm(n.key,n.data,fr.none());{const t=n.data,r=Hi.empty();let i=new Ln(Ar.comparator);for(let a of e.fields)if(!i.has(a)){let c=t.field(a);null===c&&a.length>1&&(a=a.popLast(),c=t.field(a)),null===c?r.delete(a):r.set(a,c),i=i.add(a)}return new Mc(n.key,r,new Oo(i.toArray()),fr.none())}}function WH(n,e,t){n instanceof jm?function(r,i,a){const c=r.value.clone(),h=gL(r.fieldTransforms,i,a.transformResults);c.setAll(h),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Mc?function(r,i,a){if(!eT(r.precondition,i))return void i.convertToUnknownDocument(a.version);const c=gL(r.fieldTransforms,i,a.transformResults),h=i.data;h.setAll(pL(r)),h.setAll(c),i.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function N0(n,e,t,r){return n instanceof jm?function(i,a,c,h){if(!eT(i.precondition,a))return c;const g=i.value.clone(),y=mL(i.fieldTransforms,h,a);return g.setAll(y),a.convertToFoundDocument(a.version,g).setHasLocalMutations(),null}(n,e,t,r):n instanceof Mc?function(i,a,c,h){if(!eT(i.precondition,a))return c;const g=mL(i.fieldTransforms,h,a),y=a.data;return y.setAll(pL(i)),y.setAll(g),a.convertToFoundDocument(a.version,y).setHasLocalMutations(),null===c?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(I=>I.field))}(n,e,t,r):(c=t,eT(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c);var a,c}function ZH(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=aL(r.transform,i||null);null!=a&&(null===t&&(t=Hi.empty()),t.set(r.field,a))}return t||null}function fL(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Nm(t,r,(i,a)=>function GH(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof mp&&r instanceof mp||t instanceof _p&&r instanceof _p?Nm(t.elements,r.elements,fl):t instanceof Bm&&r instanceof Bm?fl(t.yt,r.yt):t instanceof Vm&&r instanceof Vm);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class jm extends tT{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Mc extends tT{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function pL(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function gL(n,e,t){const r=new Map;Ot(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],c=a.transform,h=e.data.field(a.field);r.set(a.field,$H(c,h,t[i]))}return r}function mL(n,e,t){const r=new Map;for(const i of n){const a=i.transform,c=t.data.field(i.field);r.set(i.field,HH(a,c,e))}return r}class Hm extends tT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class LR extends tT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class zH{constructor(e){this.count=e}}var Wr,_n;function _L(n){switch(n){default:return ht();case ye.CANCELLED:case ye.UNKNOWN:case ye.DEADLINE_EXCEEDED:case ye.RESOURCE_EXHAUSTED:case ye.INTERNAL:case ye.UNAVAILABLE:case ye.UNAUTHENTICATED:return!1;case ye.INVALID_ARGUMENT:case ye.NOT_FOUND:case ye.ALREADY_EXISTS:case ye.PERMISSION_DENIED:case ye.FAILED_PRECONDITION:case ye.ABORTED:case ye.OUT_OF_RANGE:case ye.UNIMPLEMENTED:case ye.DATA_LOSS:return!0}}function yL(n){if(void 0===n)return Ur("GRPC error has no .code"),ye.UNKNOWN;switch(n){case Wr.OK:return ye.OK;case Wr.CANCELLED:return ye.CANCELLED;case Wr.UNKNOWN:return ye.UNKNOWN;case Wr.DEADLINE_EXCEEDED:return ye.DEADLINE_EXCEEDED;case Wr.RESOURCE_EXHAUSTED:return ye.RESOURCE_EXHAUSTED;case Wr.INTERNAL:return ye.INTERNAL;case Wr.UNAVAILABLE:return ye.UNAVAILABLE;case Wr.UNAUTHENTICATED:return ye.UNAUTHENTICATED;case Wr.INVALID_ARGUMENT:return ye.INVALID_ARGUMENT;case Wr.NOT_FOUND:return ye.NOT_FOUND;case Wr.ALREADY_EXISTS:return ye.ALREADY_EXISTS;case Wr.PERMISSION_DENIED:return ye.PERMISSION_DENIED;case Wr.FAILED_PRECONDITION:return ye.FAILED_PRECONDITION;case Wr.ABORTED:return ye.ABORTED;case Wr.OUT_OF_RANGE:return ye.OUT_OF_RANGE;case Wr.UNIMPLEMENTED:return ye.UNIMPLEMENTED;case Wr.DATA_LOSS:return ye.DATA_LOSS;default:return ht()}}(_n=Wr||(Wr={}))[_n.OK=0]="OK",_n[_n.CANCELLED=1]="CANCELLED",_n[_n.UNKNOWN=2]="UNKNOWN",_n[_n.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_n[_n.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_n[_n.NOT_FOUND=5]="NOT_FOUND",_n[_n.ALREADY_EXISTS=6]="ALREADY_EXISTS",_n[_n.PERMISSION_DENIED=7]="PERMISSION_DENIED",_n[_n.UNAUTHENTICATED=16]="UNAUTHENTICATED",_n[_n.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_n[_n.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_n[_n.ABORTED=10]="ABORTED",_n[_n.OUT_OF_RANGE=11]="OUT_OF_RANGE",_n[_n.UNIMPLEMENTED=12]="UNIMPLEMENTED",_n[_n.INTERNAL=13]="INTERNAL",_n[_n.UNAVAILABLE=14]="UNAVAILABLE",_n[_n.DATA_LOSS=15]="DATA_LOSS";class oh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){dp(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return FF(this.inner)}size(){return this.innerSize}}const KH=new xr(Ke.comparator);function Ks(){return KH}const vL=new xr(Ke.comparator);function P0(...n){let e=vL;for(const t of n)e=e.insert(t.key,t);return e}function wL(n){let e=vL;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function pl(){return O0()}function EL(){return O0()}function O0(){return new oh(n=>n.toString(),(n,e)=>n.isEqual(e))}const YH=new xr(Ke.comparator),QH=new Ln(Ke.comparator);function Jt(...n){let e=QH;for(const t of n)e=e.add(t);return e}const JH=new Ln(Gt);function nT(){return JH}class F0{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,L0.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new F0(Ft.min(),i,nT(),Ks(),Jt())}}class L0{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new L0(r,t,Jt(),Jt(),Jt())}}class rT{constructor(e,t,r,i){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=i}}class CL{constructor(e,t){this.targetId=e,this.At=t}}class bL{constructor(e,t,r=oi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class IL{constructor(){this.Rt=0,this.bt=DL(),this.Pt=oi.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Jt(),t=Jt(),r=Jt();return this.bt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ht()}}),new L0(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=DL()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class XH{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Ks(),this.qt=TL(),this.Kt=new Ln(Gt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:ht()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,i)=>{this.Ht(i)&&t(i)})}Yt(e){const t=e.targetId,r=e.At.count,i=this.Xt(t);if(i){const a=i.target;if(YI(a))if(0===r){const c=new Ke(a.path);this.jt(t,c,Qn.newNoDocument(c,Ft.min()))}else Ot(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((a,c)=>{const h=this.Xt(c);if(h){if(a.current&&YI(h.target)){const g=new Ke(h.target.path);null!==this.Ut.get(g)||this.ee(c,g)||this.jt(c,g,Qn.newNoDocument(g,e))}a.Dt&&(t.set(c,a.xt()),a.Nt())}});let r=Jt();this.qt.forEach((a,c)=>{let h=!0;c.forEachWhile(g=>{const y=this.Xt(g);return!y||2===y.purpose||(h=!1,!1)}),h&&(r=r.add(a))}),this.Ut.forEach((a,c)=>c.setReadTime(e));const i=new F0(e,t,this.Kt,this.Ut,r);return this.Ut=Ks(),this.qt=TL(),this.Kt=new Ln(Gt),i}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const i=this.zt(e);this.ee(e,t)?i.kt(t,1):i.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new IL,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new Ln(Gt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||He("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new IL),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function TL(){return new xr(Ke.comparator)}function DL(){return new xr(Ke.comparator)}const e$={asc:"ASCENDING",desc:"DESCENDING"},t$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class n${constructor(e,t){this.databaseId=e,this.gt=t}}function U0(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function SL(n,e){return n.gt?e.toBase64():e.toUint8Array()}function r$(n,e){return U0(n,e.toTimestamp())}function wi(n){return Ot(!!n),Ft.fromTimestamp(function(e){const t=th(e);return new hr(t.seconds,t.nanos)}(n))}function UR(n,e){return(t=n,new mn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function AL(n){const e=mn.fromString(n);return Ot(FL(e)),e}function V0(n,e){return UR(n.databaseId,e.path)}function gl(n,e){const t=AL(e);if(t.get(1)!==n.databaseId.projectId)throw new Le(ye.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Le(ye.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ke(ML(t))}function VR(n,e){return UR(n.databaseId,e)}function xL(n){const e=AL(n);return 4===e.length?mn.emptyPath():ML(e)}function B0(n){return new mn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ML(n){return Ot(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function RL(n,e,t){return{name:V0(n,e),fields:t.value.mapValue.fields}}function kL(n,e,t){const r=gl(n,e.name),i=wi(e.updateTime),a=new Hi({mapValue:{fields:e.fields}}),c=Qn.newFoundDocument(r,i,a);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function j0(n,e){let t;if(e instanceof jm)t={update:RL(n,e.key,e.value)};else if(e instanceof Hm)t={delete:V0(n,e.key)};else if(e instanceof Mc)t={update:RL(n,e.key,e.data),updateMask:h$(e.fieldMask)};else{if(!(e instanceof LR))return ht();t={verify:V0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const c=a.transform;if(c instanceof Vm)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof mp)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof _p)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Bm)return{fieldPath:a.field.canonicalString(),increment:c.yt};throw ht()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:r$(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ht()),t;var i}function BR(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?fr.updateTime(wi(i.updateTime)):void 0!==i.exists?fr.exists(i.exists):fr.none():fr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,c){let h=null;"setToServerValue"in c?(Ot("REQUEST_TIME"===c.setToServerValue),h=new Vm):"appendMissingElements"in c?h=new mp(c.appendMissingElements.values||[]):"removeAllFromArray"in c?h=new _p(c.removeAllFromArray.values||[]):"increment"in c?h=new Bm(a,c.increment):ht();const g=Ar.fromServerFormat(c.fieldPath);return new k0(g,h)}(n,i)):[];var i;if(e.update){const i=gl(n,e.update.name),a=new Hi({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new Oo((e.updateMask.fieldPaths||[]).map(y=>Ar.fromServerFormat(y)));return new Mc(i,a,c,t,r)}return new jm(i,a,t,r)}if(e.delete){const i=gl(n,e.delete);return new Hm(i,t)}if(e.verify){const i=gl(n,e.verify);return new LR(i,t)}return ht()}function NL(n,e){return{documents:[VR(n,e.path)]}}function jR(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=VR(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=VR(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(g){if(0===g.length)return;const y=g.map(I=>function(S){if("=="===S.op){if(HF(S.value))return{unaryFilter:{field:$m(S.field),op:"IS_NAN"}};if(jF(S.value))return{unaryFilter:{field:$m(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(HF(S.value))return{unaryFilter:{field:$m(S.field),op:"IS_NOT_NAN"}};if(jF(S.value))return{unaryFilter:{field:$m(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$m(S.field),op:l$(S.op),value:S.value}}}(I));return 1===y.length?y[0]:{compositeFilter:{op:"AND",filters:y}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(g){if(0!==g.length)return g.map(y=>{return{field:$m((I=y).field),direction:u$(I.dir)};var I})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const c=(y=e.limit,n.gt||T0(y)?y:{value:y});var y,h,g;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(g=e.endAt).inclusive,values:g.position}),t}function PL(n){let e=xL(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ot(1===r);const I=t.from[0];I.allDescendants?i=I.collectionId:e=e.child(I.collectionId)}let a=[];t.where&&(a=OL(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(I=>{return new Fm(Gm((S=I).field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let h=null;t.limit&&(h=function(I){let S;return S="object"==typeof I?I.value:I,T0(S)?null:S}(t.limit));let g=null;var I;t.startAt&&(g=new sh((I=t.startAt).values||[],!!I.before));let y=null;return t.endAt&&(y=function(I){return new sh(I.values||[],!I.before)}(t.endAt)),XF(e,i,c,a,h,"F",g,y)}function OL(n){return n?void 0!==n.unaryFilter?[d$(n)]:void 0!==n.fieldFilter?[c$(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>OL(e)).reduce((e,t)=>e.concat(t)):ht():[]}function u$(n){return e$[n]}function l$(n){return t$[n]}function $m(n){return{fieldPath:n.canonicalString()}}function Gm(n){return Ar.fromServerFormat(n.fieldPath)}function c$(n){return $i.create(Gm(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ht()}}(n.fieldFilter.op),n.fieldFilter.value)}function d$(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Gm(n.unaryFilter.field);return $i.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Gm(n.unaryFilter.field);return $i.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Gm(n.unaryFilter.field);return $i.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Gm(n.unaryFilter.field);return $i.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ht()}}function h$(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function FL(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function xs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=LL(e)),e=f$(n.get(t),e);return LL(e)}function f$(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function LL(n){return n+"\x01\x01"}function ml(n){const e=n.length;if(Ot(e>=2),2===e)return Ot("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),mn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const c=n.indexOf("\x01",a);switch((c<0||c>t)&&ht(),n.charAt(c+1)){case"\x01":const h=n.substring(a,c);let g;0===i.length?g=h:(i+=h,g=i,i=""),r.push(g);break;case"\x10":i+=n.substring(a,c),i+="\0";break;case"\x11":i+=n.substring(a,c+1);break;default:ht()}a=c+2}return new mn(r)}const UL=["userId","batchId"];function iT(n,e){return[n,xs(e)]}function VL(n,e,t){return[n,xs(e),t]}const p$={},g$=["prefixPath","collectionGroup","readTime","documentId"],m$=["prefixPath","collectionGroup","documentId"],_$=["collectionGroup","readTime","prefixPath","documentId"],y$=["canonicalId","targetId"],v$=["targetId","path"],w$=["path","targetId"],E$=["collectionId","parent"],C$=["indexId","uid"],b$=["uid","sequenceNumber"],I$=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],T$=["indexId","uid","orderedDocumentKey"],D$=["userId","collectionPath","documentId"],S$=["userId","collectionPath","largestBatchId"],A$=["userId","collectionGroup","largestBatchId"],BL=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],x$=[...BL,"documentOverlays"],jL=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],HL=jL,M$=[...HL,"indexConfiguration","indexState","indexEntries"];class HR extends NF{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Ei(n,e){const t=Xe(n);return Cu.M(t.ie,e)}class $R{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&WH(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=N0(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=N0(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=EL();return this.mutations.forEach(i=>{const a=e.get(i.key),c=a.overlayedDocument;let h=this.applyToLocalView(c,a.mutatedFields);h=t.has(i.key)?null:h;const g=hL(c,h);null!==g&&r.set(i.key,g),c.isValidDocument()||c.convertToNoDocument(Ft.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Jt())}isEqual(e){return this.batchId===e.batchId&&Nm(this.mutations,e.mutations,(t,r)=>fL(t,r))&&Nm(this.baseMutations,e.baseMutations,(t,r)=>fL(t,r))}}class GR{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ot(e.mutations.length===r.length);let i=YH;const a=e.mutations;for(let c=0;c<a.length;c++)i=i.insert(a[c].key,r[c].version);return new GR(e,t,r,i)}}class qR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ah{constructor(e,t,r,i,a=Ft.min(),c=Ft.min(),h=oi.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h}withSequenceNumber(e){return new ah(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new ah(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ah(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class $L{constructor(e){this.re=e}}function GL(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:sT(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:V0(i=n.re,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:U0(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:yp(e.version)};else{if(!e.isUnknownDocument())return ht();r.unknownDocument={path:t.path.toArray(),version:yp(e.version)}}var i,a;return r}function sT(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function yp(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function vp(n){const e=new hr(n.seconds,n.nanoseconds);return Ft.fromTimestamp(e)}function wp(n,e){const t=(e.baseMutations||[]).map(a=>BR(n.re,a));for(let a=0;a<e.mutations.length-1;++a){const c=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(c.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>BR(n.re,a)),i=hr.fromMillis(e.localWriteTimeMs);return new $R(e.batchId,i,t,r)}function H0(n){const e=vp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?vp(n.lastLimboFreeSnapshotVersion):Ft.min();let r;var i;return void 0!==n.query.documents?(Ot(1===(i=n.query).documents.length),r=As(Lm(xL(i.documents[0])))):r=As(PL(n.query)),new ah(r,n.targetId,0,n.lastListenSequenceNumber,e,t,oi.fromBase64String(n.resumeToken))}function qL(n,e){const t=yp(e.snapshotVersion),r=yp(e.lastLimboFreeSnapshotVersion);let i;i=YI(e.target)?NL(n.re,e.target):jR(n.re,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:gp(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function WR(n){const e=PL({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?JI(e,e.limit,"L"):e}function ZR(n,e){return new qR(e.largestBatchId,BR(n.re,e.overlayMutation))}function WL(n,e){const t=e.path.lastSegment();return[n,xs(e.path.popLast()),t]}function ZL(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:yp(r.readTime),documentKey:xs(r.documentKey.path),largestBatchId:r.largestBatchId}}class k${getBundleMetadata(e,t){return zL(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:vp(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return zL(e).put({bundleId:(r=t).id,createTime:yp(wi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return KL(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:WR(i.bundledQuery),readTime:vp(i.readTime)};var i})}saveNamedQuery(e,t){return KL(e).put({name:(r=t).name,readTime:yp(wi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function zL(n){return Ei(n,"bundles")}function KL(n){return Ei(n,"namedQueries")}class oT{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new oT(e,t.uid||"")}getOverlay(e,t){return $0(e).get(WL(this.userId,t)).next(r=>r?ZR(this.It,r):null)}getOverlays(e,t){const r=pl();return he.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,c)=>{const h=new qR(t,c);i.push(this.ue(e,h))}),he.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(xs(c.getCollectionPath())));const a=[];return i.forEach(c=>{const h=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);a.push($0(e).Y("collectionPathOverlayIndex",h))}),he.waitFor(a)}getOverlaysForCollection(e,t,r){const i=pl(),a=xs(t),c=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return $0(e).W("collectionPathOverlayIndex",c).next(h=>{for(const g of h){const y=ZR(this.It,g);i.set(y.getKey(),y)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=pl();let c;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return $0(e).Z({index:"collectionGroupOverlayIndex",range:h},(g,y,I)=>{const S=ZR(this.It,y);a.size()<i||S.largestBatchId===c?(a.set(S.getKey(),S),c=S.largestBatchId):I.done()}).next(()=>a)}ue(e,t){return $0(e).put(function(r,i,a){const[c,h,g]=WL(i,a.mutation.key);return{userId:i,collectionPath:h,documentId:g,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:j0(r.re,a.mutation)}}(this.It,this.userId,t))}}function $0(n){return Ei(n,"documentOverlays")}class Ep{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Mr(e.integerValue));else if("doubleValue"in e){const r=Mr(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),D0(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(hp(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?$F(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):ht()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const i of Object.keys(r))this._e(i,t),this.ae(r[i],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const i of r)this.ae(i,t)}ge(e,t){this.le(t,37),Ke.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function N$(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function YL(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=N$(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}Ep.Te=new Ep;class P${constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=t.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.ve()}De(e){const t=this.Ce(e),r=YL(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ne(e){const t=this.Ce(e),r=YL(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class O${constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class F${constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class G0{constructor(){this.Be=new P$,this.Le=new O$(this.Be),this.Ue=new F$(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Cp{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Cp(this.indexId,this.documentKey,this.arrayValue,r)}}function bp(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=QL(n.arrayValue,e.arrayValue),0!==t?t:(t=QL(n.directionalValue,e.directionalValue),0!==t?t:Ke.comparator(n.documentKey,e.documentKey)))}function QL(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class L${constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=TR(e);if(void 0!==t&&!this.ze(t))return!1;const r=lp(e);let i=0,a=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.je){const c=r[i];if(!this.He(this.je,c)||!this.Je(this.Ge[a++],c))return!1;++i}for(;i<r.length;++i){const c=r[i];if(a>=this.Ge.length||!this.Je(this.Ge[a++],c))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class U${constructor(){this.Ye=new zR}addToCollectionParentIndex(e,t){return this.Ye.add(t),he.resolve()}getCollectionParents(e,t){return he.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return he.resolve()}deleteFieldIndex(e,t){return he.resolve()}getDocumentsMatchingTarget(e,t){return he.resolve(null)}getIndexType(e,t){return he.resolve(0)}getFieldIndexes(e,t){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}getMinOffset(e,t){return he.resolve(Po.min())}getMinOffsetFromCollectionGroup(e,t){return he.resolve(Po.min())}updateCollectionGroup(e,t,r){return he.resolve()}updateIndexEntries(e,t){return he.resolve()}}class zR{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ln(mn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ln(mn.comparator)).toArray()}}const aT=new Uint8Array(0);class V${constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new zR,this.Ze=new oh(r=>gp(r),(r,i)=>M0(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const a={collectionId:r,parent:xs(i)};return JL(e).put(a)}return he.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[xF(t),""],!1,!0);return JL(e).W(i).next(a=>{for(const c of a){if(c.collectionId!==t)break;r.push(ml(c.parent))}return r})}addFieldIndex(e,t){const r=uT(e),i={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var c;delete i.indexId;const a=r.add(i);if(t.indexState){const c=W0(e);return a.next(h=>{c.put(ZL(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=uT(e),i=W0(e),a=q0(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=q0(e);let i=!0;const a=new Map;return he.forEach(this.tn(t),c=>this.en(e,c).next(h=>{i&&(i=!!h),a.set(c,h)})).next(()=>{if(i){let c=Jt();const h=[];return he.forEach(a,(g,y)=>{var I;He("IndexedDbIndexManager",`Using index ${I=g,`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map(nt=>`${nt.fieldPath}:${nt.kind}`).join(",")}`} to execute ${gp(t)}`);const S=function(nt,ut){const ft=TR(ut);if(void 0===ft)return null;for(const Vt of QI(nt,ft.fieldPath))switch(Vt.op){case"array-contains-any":return Vt.value.arrayValue.values||[];case"array-contains":return[Vt.value]}return null}(y,g),R=function(nt,ut){const ft=new Map;for(const Vt of lp(ut))for(const Er of QI(nt,Vt.fieldPath))switch(Er.op){case"==":case"in":ft.set(Vt.fieldPath.canonicalString(),Er.value);break;case"not-in":case"!=":return ft.set(Vt.fieldPath.canonicalString(),Er.value),Array.from(ft.values())}return null}(y,g),L=function(nt,ut){const ft=[];let Vt=!0;for(const Er of lp(ut)){const Su=0===Er.kind?zF(nt,Er.fieldPath,nt.startAt):KF(nt,Er.fieldPath,nt.startAt);ft.push(Su.value),Vt&&(Vt=Su.inclusive)}return new sh(ft,Vt)}(y,g),G=function(nt,ut){const ft=[];let Vt=!0;for(const Er of lp(ut)){const Su=0===Er.kind?KF(nt,Er.fieldPath,nt.endAt):zF(nt,Er.fieldPath,nt.endAt);ft.push(Su.value),Vt&&(Vt=Su.inclusive)}return new sh(ft,Vt)}(y,g),le=this.nn(g,y,L),de=this.nn(g,y,G),Ge=this.sn(g,y,R),at=this.rn(g.indexId,S,le,L.inclusive,de,G.inclusive,Ge);return he.forEach(at,nt=>r.J(nt,t.limit).next(ut=>{ut.forEach(ft=>{const Vt=Ke.fromSegments(ft.documentKey);c.has(Vt)||(c=c.add(Vt),h.push(Vt))})}))}).next(()=>h)}return he.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,i,a,c,h){const g=(null!=t?t.length:1)*Math.max(r.length,a.length),y=g/(null!=t?t.length:1),I=[];for(let S=0;S<g;++S){const R=t?this.on(t[S/y]):aT,L=this.un(e,R,r[S%y],i),G=this.cn(e,R,a[S%y],c),le=h.map(de=>this.un(e,R,de,!0));I.push(...this.createRange(L,G,le))}return I}un(e,t,r,i){const a=new Cp(e,Ke.empty(),t,r);return i?a:a.Ke()}cn(e,t,r,i){const a=new Cp(e,Ke.empty(),t,r);return i?a.Ke():a}en(e,t){const r=new L$(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let c=null;for(const h of a)r.We(h)&&(!c||h.fields.length>c.fields.length)&&(c=h);return c})}getIndexType(e,t){let r=2;return he.forEach(this.tn(t),i=>this.en(e,i).next(a=>{a?0!==r&&a.fields.length<function(c){let h=new Ln(Ar.comparator),g=!1;for(const y of c.filters){const I=y;I.field.isKeyField()||("array-contains"===I.op||"array-contains-any"===I.op?g=!0:h=h.add(I.field))}for(const y of c.orderBy)y.field.isKeyField()||(h=h.add(y.field));return h.size+(g?1:0)}(i)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new G0;for(const i of lp(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const c=r.qe(i.kind);Ep.Te.ce(a,c)}return r.$e()}on(e){const t=new G0;return Ep.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new G0;return Ep.Te.ce(pp(this.databaseId,t),r.qe(function(i){const a=lp(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let i=[];i.push(new G0);let a=0;for(const c of lp(e)){const h=r[a++];for(const g of i)if(this.ln(t,c.fieldPath)&&A0(h))i=this.fn(i,c,h);else{const y=g.qe(c.kind);Ep.Te.ce(h,y)}}return this.dn(i)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const i=[...e],a=[];for(const c of r.arrayValue.values||[])for(const h of i){const g=new G0;g.seed(h.$e()),Ep.Te.ce(c,g.qe(t.kind)),a.push(g)}return a}ln(e,t){return!!e.filters.find(r=>r instanceof $i&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=uT(e),i=W0(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(a=>{const c=[];return he.forEach(a,h=>i.get([h.indexId,this.uid]).next(g=>{c.push(function(y,I){const S=I?new C0(I.sequenceNumber,new Po(vp(I.readTime),new Ke(ml(I.documentKey)),I.largestBatchId)):C0.empty(),R=y.fields.map(([L,G])=>new qI(Ar.fromServerFormat(L),G));return new GI(y.indexId,y.collectionGroup,R,S)}(h,g))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Gt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=uT(e),a=W0(e);return this._n(e).next(c=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>he.forEach(h,g=>a.put(ZL(g.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return he.forEach(t,(i,a)=>{const c=r.get(i.collectionGroup);return(c?he.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),he.forEach(h,g=>this.wn(e,i,g).next(y=>{const I=this.mn(a,g);return y.isEqual(I)?he.resolve():this.gn(e,a,g,y,I)}))))})}yn(e,t,r,i){return q0(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,i){return q0(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=q0(e);let a=new Ln(bp);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(c,h)=>{a=a.add(new Cp(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>a)}mn(e,t){let r=new Ln(bp);const i=this.an(t,e);if(null==i)return r;const a=TR(t);if(null!=a){const c=e.data.field(a.fieldPath);if(A0(c))for(const h of c.arrayValue.values||[])r=r.add(new Cp(t.indexId,e.key,this.on(h),i))}else r=r.add(new Cp(t.indexId,e.key,aT,i));return r}gn(e,t,r,i,a){He("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(h,g,y,I,S){const R=h.getIterator(),L=g.getIterator();let G=Pm(R),le=Pm(L);for(;G||le;){let de=!1,Ge=!1;if(G&&le){const at=y(G,le);at<0?Ge=!0:at>0&&(de=!0)}else null!=G?Ge=!0:de=!0;de?(I(le),le=Pm(L)):Ge?(S(G),G=Pm(R)):(G=Pm(R),le=Pm(L))}}(i,a,bp,h=>{c.push(this.yn(e,t,r,h))},h=>{c.push(this.pn(e,t,r,h))}),he.waitFor(c)}_n(e){let t=1;return W0(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,h)=>bp(c,h)).filter((c,h,g)=>!h||0!==bp(c,g[h-1]));const i=[];i.push(e);for(const c of r){const h=bp(c,e),g=bp(c,t);if(0===h)i[0]=e.Ke();else if(h>0&&g<0)i.push(c),i.push(c.Ke());else if(g>0)break}i.push(t);const a=[];for(let c=0;c<i.length;c+=2)a.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,aT,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,aT,[]]));return a}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(XL)}getMinOffset(e,t){return he.mapArray(this.tn(t),r=>this.en(e,r).next(i=>i||ht())).next(XL)}}function JL(n){return Ei(n,"collectionParents")}function q0(n){return Ei(n,"indexEntries")}function uT(n){return Ei(n,"indexConfiguration")}function W0(n){return Ei(n,"indexState")}function XL(n){Ot(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;DR(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Po(e.readTime,e.documentKey,t)}const eU={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ys{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ys(e,Ys.DEFAULT_COLLECTION_PERCENTILE,Ys.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function tU(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],c=IDBKeyRange.only(t.batchId);let h=0;const g=r.Z({range:c},(I,S,R)=>(h++,R.delete()));a.push(g.next(()=>{Ot(1===h)}));const y=[];for(const I of t.mutations){const S=VL(e,I.key.path,t.batchId);a.push(i.delete(S)),y.push(I.key)}return he.waitFor(a).next(()=>y)}function lT(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ht();e=n.noDocument}return JSON.stringify(e).length}Ys.DEFAULT_COLLECTION_PERCENTILE=10,Ys.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ys.DEFAULT=new Ys(41943040,Ys.DEFAULT_COLLECTION_PERCENTILE,Ys.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ys.DISABLED=new Ys(-1,0,0);class cT{constructor(e,t,r,i){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static oe(e,t,r,i){Ot(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new cT(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return uh(e).Z({index:"userMutationsIndex",range:r},(i,a,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=qm(e),c=uh(e);return c.add({}).next(h=>{Ot("number"==typeof h);const g=new $R(h,t,r,i),y=function(R,L,G){const le=G.baseMutations.map(Ge=>j0(R.re,Ge)),de=G.mutations.map(Ge=>j0(R.re,Ge));return{userId:L,batchId:G.batchId,localWriteTimeMs:G.localWriteTime.toMillis(),baseMutations:le,mutations:de}}(this.It,this.userId,g),I=[];let S=new Ln((R,L)=>Gt(R.canonicalString(),L.canonicalString()));for(const R of i){const L=VL(this.userId,R.key.path,h);S=S.add(R.key.path.popLast()),I.push(c.put(y)),I.push(a.put(L,p$))}return S.forEach(R=>{I.push(this.indexManager.addToCollectionParentIndex(e,R))}),e.addOnCommittedListener(()=>{this.In[h]=g.keys()}),he.waitFor(I).next(()=>g)})}lookupMutationBatch(e,t){return uh(e).get(t).next(r=>r?(Ot(r.userId===this.userId),wp(this.It,r)):null)}Tn(e,t){return this.In[t]?he.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return uh(e).Z({index:"userMutationsIndex",range:i},(c,h,g)=>{h.userId===this.userId&&(Ot(h.batchId>=r),a=wp(this.It,h)),g.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return uh(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,a,c)=>{r=a.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return uh(e).W("userMutationsIndex",t).next(r=>r.map(i=>wp(this.It,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=iT(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return qm(e).Z({range:i},(c,h,g)=>{const[y,I,S]=c,R=ml(I);if(y===this.userId&&t.path.isEqual(R))return uh(e).get(S).next(L=>{if(!L)throw ht();Ot(L.userId===this.userId),a.push(wp(this.It,L))});g.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ln(Gt);const i=[];return t.forEach(a=>{const c=iT(this.userId,a.path),h=IDBKeyRange.lowerBound(c),g=qm(e).Z({range:h},(y,I,S)=>{const[R,L,G]=y,le=ml(L);R===this.userId&&a.path.isEqual(le)?r=r.add(G):S.done()});i.push(g)}),he.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=iT(this.userId,r),c=IDBKeyRange.lowerBound(a);let h=new Ln(Gt);return qm(e).Z({range:c},(g,y,I)=>{const[S,R,L]=g,G=ml(R);S===this.userId&&r.isPrefixOf(G)?G.length===i&&(h=h.add(L)):I.done()}).next(()=>this.En(e,h))}En(e,t){const r=[],i=[];return t.forEach(a=>{i.push(uh(e).get(a).next(c=>{if(null===c)throw ht();Ot(c.userId===this.userId),r.push(wp(this.It,c))}))}),he.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return tU(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),he.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return he.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return qm(e).Z({range:r},(a,c,h)=>{if(a[0]===this.userId){const g=ml(a[1]);i.push(g)}else h.done()}).next(()=>{Ot(0===i.length)})})}containsKey(e,t){return nU(e,this.userId,t)}Rn(e){return rU(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function nU(n,e,t){const r=iT(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let c=!1;return qm(n).Z({range:a,X:!0},(h,g,y)=>{const[I,S,R]=h;I===e&&S===i&&(c=!0),y.done()}).next(()=>c)}function uh(n){return Ei(n,"mutations")}function qm(n){return Ei(n,"documentMutations")}function rU(n){return Ei(n,"mutationQueues")}class Ip{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Ip(0)}static vn(){return new Ip(-1)}}class B${constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new Ip(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Ft.fromTimestamp(new hr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Wm(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Ot(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return Wm(e).Z((c,h)=>{const g=H0(h);g.sequenceNumber<=t&&null===r.get(g.targetId)&&(i++,a.push(this.removeTargetData(e,g)))}).next(()=>he.waitFor(a)).next(()=>i)}forEachTarget(e,t){return Wm(e).Z((r,i)=>{const a=H0(i);t(a)})}Vn(e){return iU(e).get("targetGlobalKey").next(t=>(Ot(null!==t),t))}Sn(e,t){return iU(e).put("targetGlobalKey",t)}Dn(e,t){return Wm(e).put(qL(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=gp(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return Wm(e).Z({range:i,index:"queryTargetsIndex"},(c,h,g)=>{const y=H0(h);M0(t,y.target)&&(a=y,g.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=lh(e);return t.forEach(c=>{const h=xs(c.path);i.push(a.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,c))}),he.waitFor(i)}removeMatchingKeys(e,t,r){const i=lh(e);return he.forEach(t,a=>{const c=xs(a.path);return he.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=lh(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=lh(e);let a=Jt();return i.Z({range:r,X:!0},(c,h,g)=>{const y=ml(c[1]),I=new Ke(y);a=a.add(I)}).next(()=>a)}containsKey(e,t){const r=xs(t.path),i=IDBKeyRange.bound([r],[xF(r)],!1,!0);let a=0;return lh(e).Z({index:"documentTargetsIndex",X:!0,range:i},([c,h],g,y)=>{0!==c&&(a++,y.done())}).next(()=>a>0)}se(e,t){return Wm(e).get(t).next(r=>r?H0(r):null)}}function Wm(n){return Ei(n,"targets")}function iU(n){return Ei(n,"targetGlobal")}function lh(n){return Ei(n,"targetDocuments")}function sU([n,e],[t,r]){const i=Gt(n,t);return 0===i?Gt(e,r):i}class j${constructor(e){this.xn=e,this.buffer=new Ln(sU),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();sU(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class H${constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;He("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ee.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){eh(r)?He("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Xd(r)}yield t.Fn(3e5)}))}}class $${constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return he.resolve(zs.at);const r=new j$(t);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(He("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(eU)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(He("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),eU):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,i,a,c,h,g,y;const I=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(He("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,c=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,h=Date.now(),this.removeTargets(e,r,t))).next(S=>(a=S,g=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(y=Date.now(),bR()<=Ro.in.DEBUG&&He("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-I}ms\n\tDetermined least recently used ${i} in `+(h-c)+`ms\n\tRemoved ${a} targets in `+(g-h)+`ms\n\tRemoved ${S} documents in `+(y-g)+`ms\nTotal Duration: ${y-I}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:S})))}}class G${constructor(e,t){this.db=e,this.garbageCollector=new $$(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return dT(e,r)}removeReference(e,t,r){return dT(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return dT(e,t)}Gn(e,t){return function(r,i){let a=!1;return rU(r).tt(c=>nU(r,c,i).next(h=>(h&&(a=!0),he.resolve(!h)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Kn(e,(c,h)=>{if(h<=t){const g=this.Gn(e,c).next(y=>{if(!y)return a++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Ft.min()),lh(e).delete([0,xs(c.path)])))});i.push(g)}}).next(()=>he.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return dT(e,t)}Kn(e,t){const r=lh(e);let i,a=zs.at;return r.Z({index:"documentTargetsIndex"},([c,h],{path:g,sequenceNumber:y})=>{0===c?(a!==zs.at&&t(new Ke(ml(i)),a),a=y,i=g):a=zs.at}).next(()=>{a!==zs.at&&t(new Ke(ml(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function dT(n,e){return lh(n).put((r=n.currentSequenceNumber,{targetId:0,path:xs(e.path),sequenceNumber:r}));var r}class oU{constructor(){this.changes=new oh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Qn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?he.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class q${constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Tp(e).put(r)}removeEntry(e,t,r){return Tp(e).delete(function(i,a){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],sT(a),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Qn.newInvalidDocument(t);return Tp(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Z0(t))},(i,a)=>{r=this.jn(t,a)}).next(()=>r)}Wn(e,t){let r={size:0,document:Qn.newInvalidDocument(t)};return Tp(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Z0(t))},(i,a)=>{r={document:this.jn(t,a),size:lT(a)}}).next(()=>r)}getEntries(e,t){let r=Ks();return this.zn(e,t,(i,a)=>{const c=this.jn(i,a);r=r.insert(i,c)}).next(()=>r)}Hn(e,t){let r=Ks(),i=new xr(Ke.comparator);return this.zn(e,t,(a,c)=>{const h=this.jn(a,c);r=r.insert(a,h),i=i.insert(a,lT(c))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return he.resolve();let i=new Ln(cU);t.forEach(g=>i=i.add(g));const a=IDBKeyRange.bound(Z0(i.first()),Z0(i.last())),c=i.getIterator();let h=c.getNext();return Tp(e).Z({index:"documentKeyIndex",range:a},(g,y,I)=>{const S=Ke.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;h&&cU(h,S)<0;)r(h,null),h=c.getNext();h&&h.isEqual(S)&&(r(h,y),h=c.hasNext()?c.getNext():null),h?I.j(Z0(h)):I.done()}).next(()=>{for(;h;)r(h,null),h=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),sT(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Tp(e).W(IDBKeyRange.bound(i,a,!0)).next(c=>{let h=Ks();for(const g of c){const y=this.jn(Ke.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);h=h.insert(y.key,y)}return h})}getAllFromCollectionGroup(e,t,r,i){let a=Ks();const c=lU(t,r),h=lU(t,Po.max());return Tp(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,h,!0)},(g,y,I)=>{const S=this.jn(Ke.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);a=a.insert(S.key,S),a.size===i&&I.done()}).next(()=>a)}newChangeBuffer(e){return new W$(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return uU(e).get("remoteDocumentGlobalKey").next(t=>(Ot(!!t),t))}Qn(e,t){return uU(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function R$(n,e){let t;if(e.document)t=kL(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ke.fromSegments(e.noDocument.path),i=vp(e.noDocument.readTime);t=Qn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ht();{const r=Ke.fromSegments(e.unknownDocument.path),i=vp(e.unknownDocument.version);t=Qn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new hr(r[0],r[1]);return Ft.fromTimestamp(i)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(Ft.min()))return r}return Qn.newInvalidDocument(e)}}function aU(n){return new q$(n)}class W$ extends oU{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new oh(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Ln((a,c)=>Gt(a.canonicalString(),c.canonicalString()));return this.changes.forEach((a,c)=>{const h=this.Xn.get(a);if(t.push(this.Yn.removeEntry(e,a,h.readTime)),c.isValidDocument()){const g=GL(this.Yn.It,c);i=i.add(a.path.popLast()),r+=lT(g)-h.size,t.push(this.Yn.addEntry(e,a,g))}else if(r-=h.size,this.trackRemovals){const g=GL(this.Yn.It,c.convertToNoDocument(Ft.min()));t.push(this.Yn.addEntry(e,a,g))}}),i.forEach(a=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Yn.updateMetadata(e,r)),he.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((a,c)=>{this.Xn.set(a,{size:c,readTime:r.get(a).readTime})}),r))}}function uU(n){return Ei(n,"remoteDocumentGlobal")}function Tp(n){return Ei(n,"remoteDocumentsV14")}function Z0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function lU(n,e){const t=e.documentKey.path.toArray();return[n,sT(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function cU(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Gt(t[a],r[a]),i)return i;return i=Gt(t.length,r.length),i||(i=Gt(t[t.length-2],r[r.length-2]),i||Gt(t[t.length-1],r[r.length-1]))}class Z${constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class dU{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&N0(r.mutation,i,Oo.empty(),hr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Jt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Jt()){const i=pl();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let c=P0();return a.forEach((h,g)=>{c=c.insert(h,g.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=pl();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Jt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((c,h)=>{t.set(c,h)})})}computeViews(e,t,r,i){let a=Ks();const c=O0(),h=O0();return t.forEach((g,y)=>{const I=r.get(y.key);i.has(y.key)&&(void 0===I||I.mutation instanceof Mc)?a=a.insert(y.key,y):void 0!==I&&(c.set(y.key,I.mutation.getFieldMask()),N0(I.mutation,y,I.mutation.getFieldMask(),hr.now()))}),this.recalculateAndSaveOverlays(e,a).next(g=>(g.forEach((y,I)=>c.set(y,I)),t.forEach((y,I)=>{var S;return h.set(y,new Z$(I,null!==(S=c.get(y))&&void 0!==S?S:null))}),h))}recalculateAndSaveOverlays(e,t){const r=O0();let i=new xr((c,h)=>c-h),a=Jt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const h of c)h.keys().forEach(g=>{const y=t.get(g);if(null===y)return;let I=r.get(g)||Oo.empty();I=h.applyToLocalView(y,I),r.set(g,I);const S=(i.get(h.batchId)||Jt()).add(g);i=i.insert(h.batchId,S)})}).next(()=>{const c=[],h=i.getReverseIterator();for(;h.hasNext();){const g=h.getNext(),y=g.key,I=g.value,S=EL();I.forEach(R=>{if(!a.has(R)){const L=hL(t.get(R),r.get(R));null!==L&&S.set(R,L),a=a.add(R)}}),c.push(this.documentOverlayCache.saveOverlays(e,y,S))}return he.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ke.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):PR(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const c=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):he.resolve(pl());let h=-1,g=a;return c.next(y=>he.forEach(y,(I,S)=>(h<S.largestBatchId&&(h=S.largestBatchId),a.get(I)?he.resolve():this.getBaseDocument(e,I,S).next(R=>{g=g.insert(I,R)}))).next(()=>this.populateOverlays(e,y,a)).next(()=>this.computeViews(e,g,y,Jt())).next(I=>({batchId:h,changes:wL(I)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ke(t)).next(r=>{let i=P0();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=P0();return this.indexManager.getCollectionParents(e,i).next(c=>he.forEach(c,h=>{const g=(y=t,I=h.child(i),new xc(I,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,I;return this.getDocumentsMatchingCollectionQuery(e,g,r).next(y=>{y.forEach((I,S)=>{a=a.insert(I,S)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(a=>{a.forEach((h,g)=>{const y=g.getKey();null===i.get(y)&&(i=i.insert(y,Qn.newInvalidDocument(y)))});let c=P0();return i.forEach((h,g)=>{const y=a.get(h);void 0!==y&&N0(y.mutation,g,Oo.empty(),hr.now()),FR(t,g)&&(c=c.insert(h,g))}),c})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):he.resolve(Qn.newInvalidDocument(t))}}class z${constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return he.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:wi(r.createTime)}),he.resolve()}getNamedQuery(e,t){return he.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:WR(r.bundledQuery),readTime:wi(r.readTime)}),he.resolve();var r}}class K${constructor(){this.overlays=new xr(Ke.comparator),this.es=new Map}getOverlay(e,t){return he.resolve(this.overlays.get(t))}getOverlays(e,t){const r=pl();return he.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.ue(e,t,a)}),he.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.es.delete(r)),he.resolve()}getOverlaysForCollection(e,t,r){const i=pl(),a=t.length+1,c=new Ke(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const g=h.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===a&&g.largestBatchId>r&&i.set(g.getKey(),g)}return he.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new xr((y,I)=>y-I);const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let I=a.get(y.largestBatchId);null===I&&(I=pl(),a=a.insert(y.largestBatchId,I)),I.set(y.getKey(),y)}}const h=pl(),g=a.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((y,I)=>h.set(y,I)),!(h.size()>=i)););return he.resolve(h)}ue(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const c=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new qR(t,r));let a=this.es.get(t);void 0===a&&(a=Jt(),this.es.set(t,a)),this.es.set(t,a.add(r.key))}}class KR{constructor(){this.ns=new Ln(Ci.ss),this.rs=new Ln(Ci.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new Ci(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new Ci(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Ke(new mn([])),r=new Ci(t,e),i=new Ci(t,e+1),a=[];return this.rs.forEachInRange([r,i],c=>{this.cs(c),a.push(c.key)}),a}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Ke(new mn([])),r=new Ci(t,e),i=new Ci(t,e+1);let a=Jt();return this.rs.forEachInRange([r,i],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new Ci(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ci{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Ke.comparator(e.key,t.key)||Gt(e._s,t._s)}static os(e,t){return Gt(e._s,t._s)||Ke.comparator(e.key,t.key)}}class Y${constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Ln(Ci.ss)}checkEmpty(e){return he.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.ws;this.ws++;const c=new $R(a,t,r,i);this.mutationQueue.push(c);for(const h of i)this.gs=this.gs.add(new Ci(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return he.resolve(c)}lookupMutationBatch(e,t){return he.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),a=i<0?0:i;return he.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return he.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ci(t,0),i=new Ci(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],c=>{const h=this.ys(c._s);a.push(h)}),he.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ln(Gt);return t.forEach(i=>{const a=new Ci(i,0),c=new Ci(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([a,c],h=>{r=r.add(h._s)})}),he.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Ke.isDocumentKey(a)||(a=a.child(""));const c=new Ci(new Ke(a),0);let h=new Ln(Gt);return this.gs.forEachWhile(g=>{const y=g.key.path;return!!r.isPrefixOf(y)&&(y.length===i&&(h=h.add(g._s)),!0)},c),he.resolve(this.Is(h))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ot(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return he.forEach(t.mutations,i=>{const a=new Ci(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new Ci(t,0),i=this.gs.firstAfterOrEqual(r);return he.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return he.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Q${constructor(e){this.Es=e,this.docs=new xr(Ke.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,c=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return he.resolve(r?r.document.mutableCopy():Qn.newInvalidDocument(t))}getEntries(e,t){let r=Ks();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Qn.newInvalidDocument(i))}),he.resolve(r)}getAllFromCollection(e,t,r){let i=Ks();const a=new Ke(t.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:h,value:{document:g}}=c.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||DR(RF(g),r)<=0||(i=i.insert(g.key,g.mutableCopy()))}return he.resolve(i)}getAllFromCollectionGroup(e,t,r,i){ht()}As(e,t){return he.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new J$(this)}getSize(e){return he.resolve(this.size)}}class J$ extends oU{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),he.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class X${constructor(e){this.persistence=e,this.Rs=new oh(t=>gp(t),M0),this.lastRemoteSnapshotVersion=Ft.min(),this.highestTargetId=0,this.bs=0,this.Ps=new KR,this.targetCount=0,this.vs=Ip.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),he.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Ip(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,he.resolve()}updateTargetData(e,t){return this.Dn(t),he.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Rs.forEach((c,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.Rs.delete(c),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),he.waitFor(a).next(()=>i)}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return he.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),he.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(c=>{a.push(i.markPotentiallyOrphaned(e,c))}),he.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),he.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return he.resolve(r)}containsKey(e,t){return he.resolve(this.Ps.containsKey(t))}}class hU{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new zs(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new X$(this),this.indexManager=new U$,this.remoteDocumentCache=new Q$(r=>this.referenceDelegate.xs(r)),this.It=new $L(t),this.Ns=new z$(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new K$,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new Y$(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){He("MemoryPersistence","Starting transaction:",e);const i=new e3(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(a=>this.referenceDelegate.Os(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ms(e,t){return he.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class e3 extends NF{constructor(e){super(),this.currentSequenceNumber=e}}class hT{constructor(e){this.persistence=e,this.Fs=new KR,this.$s=null}static Bs(e){return new hT(e)}get Ls(){if(this.$s)return this.$s;throw ht()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),he.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),he.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),he.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ls.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.Ls,r=>{const i=Ke.fromPath(r);return this.Us(e,i).next(a=>{a||t.removeEntry(i,Ft.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return he.or([()=>he.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class t3{constructor(e){this.It=e}$(e,t,r,i){const a=new WI("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",UL,{unique:!0}),h.createObjectStore("documentMutations"),fU(e),function(h){h.createObjectStore("remoteDocuments")}(e));let c=he.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),fU(e)),c=c.next(()=>function(h){const g=h.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ft.min().toTimestamp(),targetCount:0};return g.put("targetGlobalKey",y)}(a))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(h,g){return g.store("mutations").W().next(y=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",UL,{unique:!0});const I=g.store("mutations"),S=y.map(R=>I.put(R));return he.waitFor(S)})}(e,a))),c=c.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.qs(a))),r<6&&i>=6&&(c=c.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(a)))),r<7&&i>=7&&(c=c.next(()=>this.Gs(a))),r<8&&i>=8&&(c=c.next(()=>this.Qs(e,a))),r<9&&i>=9&&(c=c.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.js(a))),r<11&&i>=11&&(c=c.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(h){const g=h.createObjectStore("documentOverlays",{keyPath:D$});g.createIndex("collectionPathOverlayIndex",S$,{unique:!1}),g.createIndex("collectionGroupOverlayIndex",A$,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(h){const g=h.createObjectStore("remoteDocumentsV14",{keyPath:g$});g.createIndex("documentKeyIndex",m$),g.createIndex("collectionGroupIndex",_$)}(e)).next(()=>this.Ws(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>this.zs(e,a))),r<15&&i>=15&&(c=c.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:C$}).createIndex("sequenceNumberIndex",b$,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:I$}).createIndex("documentKeyIndex",T$,{unique:!1})}(e))),c}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=lT(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>he.forEach(i,a=>{const c=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",c).next(h=>he.forEach(h,g=>{Ot(g.userId===a.userId);const y=wp(this.It,g);return tU(e,a.userId,y).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Z((c,h)=>{const g=new mn(c),y=[0,xs(g)];a.push(t.get(y).next(I=>I?he.resolve():t.put({targetId:0,path:xs(g),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>he.waitFor(a))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:E$});const r=t.store("collectionParents"),i=new zR,a=c=>{if(i.add(c)){const h=c.lastSegment(),g=c.popLast();return r.put({collectionId:h,parent:xs(g)})}};return t.store("remoteDocuments").Z({X:!0},(c,h)=>{const g=new mn(c);return a(g.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([c,h,g],y)=>{const I=ml(h);return a(I.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const a=H0(i),c=qL(this.It,a);return t.put(c)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((a,c)=>{const h=t.store("remoteDocumentsV14"),g=(y=c,y.document?new Ke(mn.fromString(y.document.name).popFirst(5)):y.noDocument?Ke.fromSegments(y.noDocument.path):y.unknownDocument?Ke.fromSegments(y.unknownDocument.path):ht()).path.toArray();var y;const I={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(h.put(I))}).next(()=>he.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=aU(this.It),a=new hU(hT.Bs,this.It.re);return r.W().next(c=>{const h=new Map;return c.forEach(g=>{var y;let I=null!==(y=h.get(g.userId))&&void 0!==y?y:Jt();wp(this.It,g).keys().forEach(S=>I=I.add(S)),h.set(g.userId,I)}),he.forEach(h,(g,y)=>{const I=new vi(y),S=oT.oe(this.It,I),R=a.getIndexManager(I),L=cT.oe(I,this.It,R,a.referenceDelegate);return new dU(i,L,S,R).recalculateAndSaveOverlaysForDocumentKeys(new HR(t,zs.at),g).next()})})}}function fU(n){n.createObjectStore("targetDocuments",{keyPath:v$}).createIndex("documentTargetsIndex",w$,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",y$,{unique:!0}),n.createObjectStore("targetGlobal")}const YR="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class QR{constructor(e,t,r,i,a,c,h,g,y,I,S=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=a,this.window=c,this.document=h,this.Js=y,this.Ys=I,this.Xs=S,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=R=>Promise.resolve(),!QR.C())throw new Le(ye.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new G$(this,i),this.ii=t+"main",this.It=new $L(g),this.ri=new Cu(this.ii,this.Xs,new t3(this.It)),this.Cs=new B$(this.referenceDelegate,this.It),this.remoteDocumentCache=aU(this.It),this.Ns=new k$,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===I&&Ur("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Le(ye.FAILED_PRECONDITION,YR);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new zs(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,Ee.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,Ee.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,Ee.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>fT(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(eh(e))return He("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return He("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return z0(e).get("owner").next(t=>he.resolve(this.mi(t)))}gi(e){return fT(e).delete(this.clientId)}yi(){var e=this;return(0,Ee.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Ei(r,"clientMetadata");return i.W().next(a=>{const c=e.Ii(a,18e5),h=a.filter(g=>-1===c.indexOf(g));return he.forEach(h,g=>i.delete(g.clientId)).next(()=>h)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?he.resolve(!0):z0(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Le(ye.FAILED_PRECONDITION,YR);return!1}}return!(!this.networkEnabled||!this.inForeground)||fT(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&He("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ee.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new HR(t,zs.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>fT(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return cT.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new V$(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return oT.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){He("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(c=this.Xs)?M$:14===c?HL:13===c?jL:12===c?x$:11===c?BL:void ht();var c;let h;return this.ri.runTransaction(e,i,a,g=>(h=new HR(g,this.Ss?this.Ss.next():zs.at),"readwrite-primary"===t?this.fi(h).next(y=>!!y||this.di(h)).next(y=>{if(!y)throw Ur(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Le(ye.FAILED_PRECONDITION,kF);return r(h)}).next(y=>this.wi(h).next(()=>y)):this.Vi(h).next(()=>r(h)))).then(g=>(h.raiseOnCommittedEvent(),g))}Vi(e){return z0(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Le(ye.FAILED_PRECONDITION,YR)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return z0(e).put("owner",t)}static C(){return Cu.C()}_i(e){const t=z0(e);return t.get("owner").next(r=>this.mi(r)?(He("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):he.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Ur(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,F.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return He("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ur("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Ur("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function z0(n){return Ei(n,"owner")}function fT(n){return Ei(n,"clientMetadata")}function JR(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class XR{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=Jt(),i=Jt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new XR(e,t.fromCache,r,i)}}class pU{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(a=>a||this.Oi(e,t,i,r)).next(a=>a||this.Mi(e,t))}ki(e,t){if(eL(t))return he.resolve(null);let r=As(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=JI(t,null,"F"),r=As(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const c=Jt(...a);return this.Ni.getDocuments(e,c).next(h=>this.indexManager.getMinOffset(e,r).next(g=>{const y=this.Fi(t,h);return this.$i(t,y,c,g.readTime)?this.ki(e,JI(t,null,"F")):this.Bi(e,y,t,g)}))})))}Oi(e,t,r,i){return eL(t)||i.isEqual(Ft.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(a=>{const c=this.Fi(t,a);return this.$i(t,c,r,i)?this.Mi(e,t):(bR()<=Ro.in.DEBUG&&He("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),OR(t)),this.Bi(e,c,t,MF(i,-1)))})}Fi(e,t){let r=new Ln(rL(e));return t.forEach((i,a)=>{FR(e,a)&&(r=r.add(a))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Mi(e,t){return bR()<=Ro.in.DEBUG&&He("QueryEngine","Using full collection scan to execute query:",OR(t)),this.Ni.getDocumentsMatchingQuery(e,t,Po.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(c=>{a=a.insert(c.key,c)}),a))}}class n3{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.It=i,this.Ui=new xr(Gt),this.qi=new oh(a=>gp(a),M0),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new dU(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function gU(n,e,t,r){return new n3(n,e,t,r)}function mU(n,e){return e1.apply(this,arguments)}function e1(){return e1=(0,Ee.Z)(function*(n,e){const t=Xe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const c=[],h=[];let g=Jt();for(const y of i){c.push(y.batchId);for(const I of y.mutations)g=g.add(I.key)}for(const y of a){h.push(y.batchId);for(const I of y.mutations)g=g.add(I.key)}return t.localDocuments.getDocuments(r,g).next(y=>({ji:y,removedBatchIds:c,addedBatchIds:h}))})})}),e1.apply(this,arguments)}function r3(n,e){const t=Xe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Gi.newChangeBuffer({trackRemovals:!0});return function(c,h,g,y){const I=g.batch,S=I.keys();let R=he.resolve();return S.forEach(L=>{R=R.next(()=>y.getEntry(h,L)).next(G=>{const le=g.docVersions.get(L);Ot(null!==le),G.version.compareTo(le)<0&&(I.applyToRemoteDocument(G,g),G.isValidDocument()&&(G.setReadTime(g.commitVersion),y.addEntry(G)))})}),R.next(()=>c.mutationQueue.removeMutationBatch(h,I))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let h=Jt();for(let g=0;g<c.mutationResults.length;++g)c.mutationResults[g].transformResults.length>0&&(h=h.add(c.batch.mutations[g].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function _U(n){const e=Xe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function i3(n,e){const t=Xe(n),r=e.snapshotVersion;let i=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.Ui;const h=[];e.targetChanges.forEach((I,S)=>{const R=i.get(S);if(!R)return;h.push(t.Cs.removeMatchingKeys(a,I.removedDocuments,S).next(()=>t.Cs.addMatchingKeys(a,I.addedDocuments,S)));let L=R.withSequenceNumber(a.currentSequenceNumber);var G,le,de;e.targetMismatches.has(S)?L=L.withResumeToken(oi.EMPTY_BYTE_STRING,Ft.min()).withLastLimboFreeSnapshotVersion(Ft.min()):I.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(I.resumeToken,r)),i=i.insert(S,L),le=L,de=I,(0===(G=R).resumeToken.approximateByteSize()||le.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=3e8||de.addedDocuments.size+de.modifiedDocuments.size+de.removedDocuments.size>0)&&h.push(t.Cs.updateTargetData(a,L))});let g=Ks(),y=Jt();if(e.documentUpdates.forEach(I=>{e.resolvedLimboDocuments.has(I)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,I))}),h.push(yU(a,c,e.documentUpdates).next(I=>{g=I.Wi,y=I.zi})),!r.isEqual(Ft.min())){const I=t.Cs.getLastRemoteSnapshotVersion(a).next(S=>t.Cs.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(I)}return he.waitFor(h).next(()=>c.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,g,y)).next(()=>g)}).then(a=>(t.Ui=i,a))}function yU(n,e,t){let r=Jt(),i=Jt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let c=Ks();return t.forEach((h,g)=>{const y=a.get(h);g.isFoundDocument()!==y.isFoundDocument()&&(i=i.add(h)),g.isNoDocument()&&g.version.isEqual(Ft.min())?(e.removeEntry(h,g.readTime),c=c.insert(h,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||0===g.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(g),c=c.insert(h,g)):He("LocalStore","Ignoring outdated watch update for ",h,". Current version:",y.version," Watch version:",g.version)}),{Wi:c,zi:i}})}function s3(n,e){const t=Xe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Zm(n,e){const t=Xe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(a=>a?(i=a,he.resolve(i)):t.Cs.allocateTargetId(r).next(c=>(i=new ah(e,c,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function zm(n,e,t){return t1.apply(this,arguments)}function t1(){return t1=(0,Ee.Z)(function*(n,e,t){const r=Xe(n),i=r.Ui.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!eh(c))throw c;He("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ui=r.Ui.remove(e),r.qi.delete(i.target)}),t1.apply(this,arguments)}function pT(n,e,t){const r=Xe(n);let i=Ft.min(),a=Jt();return r.persistence.runTransaction("Execute query","readonly",c=>function(h,g,y){const I=Xe(h),S=I.qi.get(y);return void 0!==S?he.resolve(I.Ui.get(S)):I.Cs.getTargetData(g,y)}(r,c,As(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(c,h.targetId).next(g=>{a=g})}).next(()=>r.Li.getDocumentsMatchingQuery(c,e,t?i:Ft.min(),t?a:Jt())).next(h=>(EU(r,nL(e),h),{documents:h,Hi:a})))}function vU(n,e){const t=Xe(n),r=Xe(t.Cs),i=t.Ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.se(a,e).next(c=>c?c.target:null))}function wU(n,e){const t=Xe(n),r=t.Ki.get(e)||Ft.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,MF(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(EU(t,e,i),i))}function EU(n,e,t){let r=n.Ki.get(e)||Ft.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Ki.set(e,r)}function n1(){return n1=(0,Ee.Z)(function*(n,e,t,r){const i=Xe(n);let a=Jt(),c=Ks();for(const y of t){const I=e.Ji(y.metadata.name);y.document&&(a=a.add(I));const S=e.Yi(y);S.setReadTime(e.Xi(y.metadata.readTime)),c=c.insert(I,S)}const h=i.Gi.newChangeBuffer({trackRemovals:!0}),g=yield Zm(i,(y=r,As(Lm(mn.fromString(`__bundle__/docs/${y}`)))));var y;return i.persistence.runTransaction("Apply bundle documents","readwrite",y=>yU(y,h,c).next(I=>(h.apply(y),I)).next(I=>i.Cs.removeMatchingKeysForTargetId(y,g.targetId).next(()=>i.Cs.addMatchingKeys(y,a,g.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(y,I.Wi,I.zi)).next(()=>I.Wi)))}),n1.apply(this,arguments)}function a3(n,e){return r1.apply(this,arguments)}function r1(){return r1=(0,Ee.Z)(function*(n,e,t=Jt()){const r=yield Zm(n,As(WR(e.bundledQuery))),i=Xe(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const c=wi(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.Ns.saveNamedQuery(a,e);const h=r.withResumeToken(oi.EMPTY_BYTE_STRING,c);return i.Ui=i.Ui.insert(h.targetId,h),i.Cs.updateTargetData(a,h).next(()=>i.Cs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Cs.addMatchingKeys(a,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(a,e))})}),r1.apply(this,arguments)}function CU(n,e){return`firestore_clients_${n}_${e}`}function bU(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function i1(n,e){return`firestore_targets_${n}_${e}`}class gT{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let a,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(a=new Le(i.error.code,i.error.message))),c?new gT(e,t,i.state,a):(Ur("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class K0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Le(r.error.code,r.error.message))),a?new K0(e,r.state,i):(Ur("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class mT{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=nT();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=VF(r.activeTargetIds[c]),a=a.add(r.activeTargetIds[c]);return i?new mT(e,a):(Ur("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class s1{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new s1(t.clientId,t.onlineState):(Ur("SharedClientState",`Failed to parse online state: ${e}`),null)}}class o1{constructor(){this.activeTargetIds=nT()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class a1{constructor(e,t,r,i,a){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new xr(Gt),this.started=!1,this.cr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=CU(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new o1),this.lr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const a=e.getItem(CU(e.persistenceKey,i));if(a){const c=mT.Zi(i,a);c&&(e.ur=e.ur.insert(c.clientId,c))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(i1(this.persistenceKey,e));if(r){const i=K0.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(i1(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return He("SharedClientState","READ",e,t),t}setItem(e,t){He("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){He("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(He("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void Ur("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,Ee.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(a){let c=zs.at;if(null!=a)try{const h=JSON.parse(a);Ot("number"==typeof h),c=h}catch(h){Ur("SharedClientState","Failed to read sequence number from WebStorage",h)}return c}(r.newValue);i!==zs.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Or(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Mr(a)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new gT(this.currentUser,e,t,r),a=bU(this.persistenceKey,this.currentUser,e);this.setItem(a,i.tr())}Er(e){const t=bU(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=i1(this.persistenceKey,e),a=new K0(e,t,r);this.setItem(i,a.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return mT.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return gT.Zi(new vi(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return K0.Zi(i,t)}yr(e){return s1.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,Ee.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);He("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),c=[],h=[];return a.forEach(g=>{i.has(g)||c.push(g)}),i.forEach(g=>{a.has(g)||h.push(g)}),this.syncEngine.Br(c,h).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=nT();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class IU{constructor(){this.Lr=new o1,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new o1,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class u3{qr(e){}shutdown(){}}class TU{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){He("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){He("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const l3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class c3{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class d3 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,i,a){const c=this.ho(e,t);He("RestConnection","Sending: ",c,r);const h={};return this.lo(h,i,a),this.fo(e,c,h,r).then(g=>(He("RestConnection","Received: ",g),g),g=>{throw up("RestConnection",`${e} failed with error: `,g,"url: ",c,"request:",r),g})}_o(e,t,r,i,a,c){return this.ao(e,t,r,i,a)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+km,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}ho(e,t){return`${this.oo}/v1/${t}:${l3[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((a,c)=>{const h=new lH;h.setWithCredentials(!0),h.listenOnce(oH.COMPLETE,()=>{var y;try{switch(h.getLastErrorCode()){case CR.NO_ERROR:const I=h.getResponseJson();He("Connection","XHR received:",JSON.stringify(I)),a(I);break;case CR.TIMEOUT:He("Connection",'RPC "'+e+'" timed out'),c(new Le(ye.DEADLINE_EXCEEDED,"Request time out"));break;case CR.HTTP_ERROR:const S=h.getStatus();if(He("Connection",'RPC "'+e+'" failed with status:',S,"response text:",h.getResponseText()),S>0){let R=h.getResponseJson();Array.isArray(R)&&(R=R[0]);const L=null===(y=R)||void 0===y?void 0:y.error;if(L&&L.status&&L.message){const G=function(le){const de=le.toLowerCase().replace(/_/g,"-");return Object.values(ye).indexOf(de)>=0?de:ye.UNKNOWN}(L.status);c(new Le(G,L.message))}else c(new Le(ye.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new Le(ye.UNAVAILABLE,"Connection failed."));break;default:ht()}}finally{He("Connection",'RPC "'+e+'" completed.')}});const g=JSON.stringify(i);h.send(t,"POST",g,r,15)})}wo(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=iH(),c=sH(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new uH({})),this.lo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const g=i.join("");He("Connection","Creating WebChannel: "+g,h);const y=a.createWebChannel(g,h);let I=!1,S=!1;const R=new c3({Hr:G=>{S?He("Connection","Not sending because WebChannel is closed:",G):(I||(He("Connection","Opening WebChannel transport."),y.open(),I=!0),He("Connection","WebChannel sending:",G),y.send(G))},Jr:()=>y.close()}),L=(G,le,de)=>{G.listen(le,Ge=>{try{de(Ge)}catch(at){setTimeout(()=>{throw at},0)}})};return L(y,$I.EventType.OPEN,()=>{S||He("Connection","WebChannel transport opened.")}),L(y,$I.EventType.CLOSE,()=>{S||(S=!0,He("Connection","WebChannel transport closed"),R.io())}),L(y,$I.EventType.ERROR,G=>{S||(S=!0,up("Connection","WebChannel transport errored:",G),R.io(new Le(ye.UNAVAILABLE,"The operation could not be completed")))}),L(y,$I.EventType.MESSAGE,G=>{var le;if(!S){const de=G.data[0];Ot(!!de);const Ge=de,at=Ge.error||(null===(le=Ge[0])||void 0===le?void 0:le.error);if(at){He("Connection","WebChannel received error:",at);const nt=at.status;let ut=function(Vt){const Er=Wr[Vt];if(void 0!==Er)return yL(Er)}(nt),ft=at.message;void 0===ut&&(ut=ye.INTERNAL,ft="Unknown error status: "+nt+" with message "+at.message),S=!0,R.io(new Le(ut,ft)),y.close()}else He("Connection","WebChannel received:",de),R.ro(de)}}),L(c,aH.STAT_EVENT,G=>{G.stat===IF.PROXY?He("Connection","Detected buffering proxy"):G.stat===IF.NOPROXY&&He("Connection","Detected no buffering proxy")}),setTimeout(()=>{R.so()},0),R}}function DU(){return typeof window<"u"?window:null}function _T(){return typeof document<"u"?document:null}function Y0(n){return new n$(n,!0)}class u1{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&He("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class SU{constructor(e,t,r,i,a,c,h,g){this.Hs=e,this.vo=r,this.Vo=i,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=g,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new u1(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,Ee.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,Ee.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,Ee.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===ye.RESOURCE_EXHAUSTED?(Ur(t.toString()),Ur("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===ye.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new Le(ye.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,Ee.Z)(function*(){e.state=0,e.start()}))}Qo(e){return He("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(He("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class h3 extends SU{constructor(e,t,r,i,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.It=a}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function s$(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(g=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===g?1:"REMOVE"===g?2:"CURRENT"===g?3:"RESET"===g?4:ht(),i=e.targetChange.targetIds||[],a=function(g,y){return g.gt?(Ot(void 0===y||"string"==typeof y),oi.fromBase64String(y||"")):(Ot(void 0===y||y instanceof Uint8Array),oi.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&function(g){const y=void 0===g.code?ye.UNKNOWN:yL(g.code);return new Le(y,g.message||"")}(c);t=new bL(r,i,a,h||null)}else if("documentChange"in e){const r=e.documentChange,i=gl(n,r.document.name),a=wi(r.document.updateTime),c=new Hi({mapValue:{fields:r.document.fields}}),h=Qn.newFoundDocument(i,a,c);t=new rT(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=gl(n,r.document),a=r.readTime?wi(r.readTime):Ft.min(),c=Qn.newNoDocument(i,a);t=new rT([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=gl(n,r.document);t=new rT([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ht();{const r=e.filter,a=new zH(r.count||0);t=new CL(r.targetId,a)}}var g;return t}(this.It,e),r=function(i){if(!("targetChange"in i))return Ft.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Ft.min():a.readTime?wi(a.readTime):Ft.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=B0(this.It),t.addTarget=function(i,a){let c;const h=a.target;return c=YI(h)?{documents:NL(i,h)}:{query:jR(i,h)},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?c.resumeToken=SL(i,a.resumeToken):a.snapshotVersion.compareTo(Ft.min())>0&&(c.readTime=U0(i,a.snapshotVersion.toTimestamp())),c}(this.It,e);const r=function a$(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ht()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=B0(this.It),t.removeTarget=e,this.Bo(t)}}class f3 extends SU{constructor(e,t,r,i,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.It=a,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Ot(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function o$(n,e){return n&&n.length>0?(Ot(void 0!==e),n.map(t=>function(r,i){let a=wi(r.updateTime?r.updateTime:i);return a.isEqual(Ft.min())&&(a=wi(i)),new qH(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=wi(e.commitTime);return this.listener.Zo(r,t)}return Ot(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=B0(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>j0(this.It,r))};this.Bo(t)}}class p3 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.It=i,this.nu=!1}su(){if(this.nu)throw new Le(ye.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.ao(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Le(ye.UNKNOWN,i.toString())})}_o(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection._o(e,t,r,a,c,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Le(ye.UNKNOWN,a.toString())})}terminate(){this.nu=!0}}class m3{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Ur(t),this.ou=!1):He("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class _3{constructor(e,t,r,i,a){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.qr(h=>{r.enqueueAndForget((0,Ee.Z)(function*(){var g;Rc(c)&&(He("RemoteStore","Restarting streams for network reachability change."),yield(g=(0,Ee.Z)(function*(y){const I=Xe(y);I._u.add(4),yield Km(I),I.gu.set("Unknown"),I._u.delete(4),yield Q0(I)}),function(y){return g.apply(this,arguments)})(c))}))}),this.gu=new m3(r,i)}}function Q0(n){return c1.apply(this,arguments)}function c1(){return c1=(0,Ee.Z)(function*(n){if(Rc(n))for(const e of n.wu)yield e(!0)}),c1.apply(this,arguments)}function Km(n){return d1.apply(this,arguments)}function d1(){return d1=(0,Ee.Z)(function*(n){for(const e of n.wu)yield e(!1)}),d1.apply(this,arguments)}function yT(n,e){const t=Xe(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),p1(t)?f1(t):Qm(t).ko()&&h1(t,e))}function J0(n,e){const t=Xe(n),r=Qm(t);t.du.delete(e),r.ko()&&AU(t,e),0===t.du.size&&(r.ko()?r.Fo():Rc(t)&&t.gu.set("Unknown"))}function h1(n,e){n.yu.Mt(e.targetId),Qm(n).zo(e)}function AU(n,e){n.yu.Mt(e),Qm(n).Ho(e)}function f1(n){n.yu=new XH({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),Qm(n).start(),n.gu.uu()}function p1(n){return Rc(n)&&!Qm(n).No()&&n.du.size>0}function Rc(n){return 0===Xe(n)._u.size}function xU(n){n.yu=void 0}function y3(n){return g1.apply(this,arguments)}function g1(){return g1=(0,Ee.Z)(function*(n){n.du.forEach((e,t)=>{h1(n,e)})}),g1.apply(this,arguments)}function v3(n,e){return m1.apply(this,arguments)}function m1(){return m1=(0,Ee.Z)(function*(n,e){xU(n),p1(n)?(n.gu.hu(e),f1(n)):n.gu.set("Unknown")}),m1.apply(this,arguments)}function w3(n,e,t){return _1.apply(this,arguments)}function _1(){return _1=(0,Ee.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof bL&&2===e.state&&e.cause)try{yield(r=(0,Ee.Z)(function*(i,a){const c=a.cause;for(const h of a.targetIds)i.du.has(h)&&(yield i.remoteSyncer.rejectListen(h,c),i.du.delete(h),i.yu.removeTarget(h))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){He("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield vT(n,r)}else if(e instanceof rT?n.yu.Gt(e):e instanceof CL?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(Ft.min()))try{const r=yield _U(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const c=i.yu.te(a);return c.targetChanges.forEach((h,g)=>{if(h.resumeToken.approximateByteSize()>0){const y=i.du.get(g);y&&i.du.set(g,y.withResumeToken(h.resumeToken,a))}}),c.targetMismatches.forEach(h=>{const g=i.du.get(h);if(!g)return;i.du.set(h,g.withResumeToken(oi.EMPTY_BYTE_STRING,g.snapshotVersion)),AU(i,h);const y=new ah(g.target,h,1,g.sequenceNumber);h1(i,y)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){He("RemoteStore","Failed to raise snapshot:",r),yield vT(n,r)}var r}),_1.apply(this,arguments)}function vT(n,e,t){return y1.apply(this,arguments)}function y1(){return y1=(0,Ee.Z)(function*(n,e,t){if(!eh(e))throw e;n._u.add(1),yield Km(n),n.gu.set("Offline"),t||(t=()=>_U(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ee.Z)(function*(){He("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield Q0(n)}))}),y1.apply(this,arguments)}function MU(n,e){return e().catch(t=>vT(n,t,e))}function Ym(n){return v1.apply(this,arguments)}function v1(){return v1=(0,Ee.Z)(function*(n){const e=Xe(n),t=ch(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;E3(e);)try{const i=yield s3(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,C3(e,i)}catch(i){yield vT(e,i)}RU(e)&&kU(e)}),v1.apply(this,arguments)}function E3(n){return Rc(n)&&n.fu.length<10}function C3(n,e){n.fu.push(e);const t=ch(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function RU(n){return Rc(n)&&!ch(n).No()&&n.fu.length>0}function kU(n){ch(n).start()}function b3(n){return w1.apply(this,arguments)}function w1(){return w1=(0,Ee.Z)(function*(n){ch(n).eu()}),w1.apply(this,arguments)}function I3(n){return E1.apply(this,arguments)}function E1(){return E1=(0,Ee.Z)(function*(n){const e=ch(n);for(const t of n.fu)e.Xo(t.mutations)}),E1.apply(this,arguments)}function T3(n,e,t){return C1.apply(this,arguments)}function C1(){return C1=(0,Ee.Z)(function*(n,e,t){const r=n.fu.shift(),i=GR.from(r,e,t);yield MU(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Ym(n)}),C1.apply(this,arguments)}function D3(n,e){return b1.apply(this,arguments)}function b1(){return b1=(0,Ee.Z)(function*(n,e){var t;e&&ch(n).Yo&&(yield(t=(0,Ee.Z)(function*(r,i){if(_L(a=i.code)&&a!==ye.ABORTED){const c=r.fu.shift();ch(r).Mo(),yield MU(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield Ym(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),RU(n)&&kU(n)}),b1.apply(this,arguments)}function NU(n,e){return I1.apply(this,arguments)}function I1(){return I1=(0,Ee.Z)(function*(n,e){const t=Xe(n);t.asyncQueue.verifyOperationInProgress(),He("RemoteStore","RemoteStore received new credentials");const r=Rc(t);t._u.add(3),yield Km(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield Q0(t)}),I1.apply(this,arguments)}function T1(n,e){return D1.apply(this,arguments)}function D1(){return D1=(0,Ee.Z)(function*(n,e){const t=Xe(n);e?(t._u.delete(2),yield Q0(t)):e||(t._u.add(2),yield Km(t),t.gu.set("Unknown"))}),D1.apply(this,arguments)}function Qm(n){return n.pu||(n.pu=function(e,t,r){const i=Xe(e);return i.su(),new h3(t,i.connection,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:y3.bind(null,n),Zr:v3.bind(null,n),Wo:w3.bind(null,n)}),n.wu.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.pu.Mo(),p1(n)?f1(n):n.gu.set("Unknown")):(yield n.pu.stop(),xU(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function ch(n){return n.Iu||(n.Iu=function(e,t,r){const i=Xe(e);return i.su(),new f3(t,i.connection,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:b3.bind(null,n),Zr:D3.bind(null,n),tu:I3.bind(null,n),Zo:T3.bind(null,n)}),n.wu.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.Iu.Mo(),yield Ym(n)):(yield n.Iu.stop(),n.fu.length>0&&(He("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class S1{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new si,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,a){const c=Date.now()+r,h=new S1(e,t,c,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Le(ye.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jm(n,e){if(Ur("AsyncQueue",`${e}: ${n}`),eh(n))return new Le(ye.UNAVAILABLE,`${e}: ${n}`);throw n}class Xm{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ke.comparator(t.key,r.key):(t,r)=>Ke.comparator(t.key,r.key),this.keyedMap=P0(),this.sortedSet=new xr(this.comparator)}static emptySet(e){return new Xm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Xm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Xm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class PU{constructor(){this.Tu=new xr(Ke.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):ht():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class e_{constructor(e,t,r,i,a,c,h,g,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,r,i,a){const c=[];return t.forEach(h=>{c.push({type:0,doc:h})}),new e_(e,t,Xm.emptySet(t),c,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&R0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class S3{constructor(){this.Au=void 0,this.listeners=[]}}class A3{constructor(){this.queries=new oh(e=>tL(e),R0),this.onlineState="Unknown",this.Ru=new Set}}function A1(n,e){return x1.apply(this,arguments)}function x1(){return x1=(0,Ee.Z)(function*(n,e){const t=Xe(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new S3),i)try{a.Au=yield t.onListen(r)}catch(c){const h=Jm(c,`Initialization of query '${OR(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,a),a.listeners.push(e),e.bu(t.onlineState),a.Au&&e.Pu(a.Au)&&k1(t)}),x1.apply(this,arguments)}function M1(n,e){return R1.apply(this,arguments)}function R1(){return R1=(0,Ee.Z)(function*(n,e){const t=Xe(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const c=a.listeners.indexOf(e);c>=0&&(a.listeners.splice(c,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),R1.apply(this,arguments)}function x3(n,e){const t=Xe(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const h of c.listeners)h.Pu(i)&&(r=!0);c.Au=i}}r&&k1(t)}function M3(n,e,t){const r=Xe(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function k1(n){n.Ru.forEach(e=>{e.next()})}class N1{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new e_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=e_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class R3{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class OU{constructor(e){this.It=e}Ji(e){return gl(this.It,e)}Yi(e){return e.metadata.exists?kL(this.It,e.document,!1):Qn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return wi(e)}}class k3{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=FU(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=mn.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new OU(this.It);for(const i of e)if(i.metadata.queries){const a=r.Ji(i.metadata.name);for(const c of i.metadata.queries){const h=(t.get(c)||Jt()).add(a);t.set(c,h)}}return t}complete(){var e=this;return(0,Ee.Z)(function*(){const t=yield function o3(n,e,t,r){return n1.apply(this,arguments)}(e.localStore,new OU(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const i of e.queries)yield a3(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function FU(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class LU{constructor(e){this.key=e}}class UU{constructor(e){this.key=e}}class VU{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Jt(),this.mutatedKeys=Jt(),this.Gu=rL(e),this.Qu=new Xm(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new PU,i=t?t.Qu:this.Qu;let a=t?t.mutatedKeys:this.mutatedKeys,c=i,h=!1;const g="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,y="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((I,S)=>{const R=i.get(I),L=FR(this.query,S)?S:null,G=!!R&&this.mutatedKeys.has(R.key),le=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let de=!1;R&&L?R.data.isEqual(L.data)?G!==le&&(r.track({type:3,doc:L}),de=!0):this.Hu(R,L)||(r.track({type:2,doc:L}),de=!0,(g&&this.Gu(L,g)>0||y&&this.Gu(L,y)<0)&&(h=!0)):!R&&L?(r.track({type:0,doc:L}),de=!0):R&&!L&&(r.track({type:1,doc:R}),de=!0,(g||y)&&(h=!0)),de&&(L?(c=c.add(L),a=le?a.add(I):a.delete(I)):(c=c.delete(I),a=a.delete(I)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const I="F"===this.query.limitType?c.last():c.first();c=c.delete(I.key),a=a.delete(I.key),r.track({type:1,doc:I})}return{Qu:c,zu:r,$i:h,mutatedKeys:a}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const a=e.zu.Eu();a.sort((y,I)=>function(S,R){const L=G=>{switch(G){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ht()}};return L(S)-L(R)}(y.type,I.type)||this.Gu(y.doc,I.doc)),this.Ju(r);const c=t?this.Yu():[],h=0===this.Ku.size&&this.current?1:0,g=h!==this.qu;return this.qu=h,0!==a.length||g?{snapshot:new e_(this.query,e.Qu,i,a,e.mutatedKeys,0===h,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:c}:{Xu:c}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new PU,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Jt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new UU(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new LU(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=Jt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return e_.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class N3{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class P3{constructor(e){this.key=e,this.nc=!1}}class O3{constructor(e,t,r,i,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.sc={},this.ic=new oh(h=>tL(h),R0),this.rc=new Map,this.oc=new Set,this.uc=new xr(Ke.comparator),this.cc=new Map,this.ac=new KR,this.hc={},this.lc=new Map,this.fc=Ip.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function F3(n,e){return P1.apply(this,arguments)}function P1(){return P1=(0,Ee.Z)(function*(n,e){const t=rk(n);let r,i;const a=t.ic.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.ec();else{const c=yield Zm(t.localStore,As(e));t.isPrimaryClient&&yT(t.remoteStore,c);const h=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield O1(t,e,r,"current"===h,c.resumeToken)}return i}),P1.apply(this,arguments)}function O1(n,e,t,r,i){return F1.apply(this,arguments)}function F1(){return F1=(0,Ee.Z)(function*(n,e,t,r,i){n._c=(S,R,L)=>{return(G=(0,Ee.Z)(function*(le,de,Ge,at){let nt=de.view.Wu(Ge);nt.$i&&(nt=yield pT(le.localStore,de.query,!1).then(({documents:Vt})=>de.view.Wu(Vt,nt)));const ut=at&&at.targetChanges.get(de.targetId),ft=de.view.applyChanges(nt,le.isPrimaryClient,ut);return W1(le,de.targetId,ft.Xu),ft.snapshot}),function(le,de,Ge,at){return G.apply(this,arguments)})(n,S,R,L);var G};const a=yield pT(n.localStore,e,!0),c=new VU(e,a.Hi),h=c.Wu(a.documents),g=L0.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),y=c.applyChanges(h,n.isPrimaryClient,g);W1(n,t,y.Xu);const I=new N3(e,t,c);return n.ic.set(e,I),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),y.snapshot}),F1.apply(this,arguments)}function L3(n,e){return L1.apply(this,arguments)}function L1(){return L1=(0,Ee.Z)(function*(n,e){const t=Xe(n),r=t.ic.get(e),i=t.rc.get(r.targetId);if(i.length>1)return t.rc.set(r.targetId,i.filter(a=>!R0(a,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield zm(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),J0(t.remoteStore,r.targetId),t_(t,r.targetId)}).catch(Xd))):(t_(t,r.targetId),yield zm(t.localStore,r.targetId,!0))}),L1.apply(this,arguments)}function U1(){return U1=(0,Ee.Z)(function*(n,e,t){const r=ik(n);try{const i=yield function(a,c){const h=Xe(a),g=hr.now(),y=c.reduce((R,L)=>R.add(L.key),Jt());let I,S;return h.persistence.runTransaction("Locally write mutations","readwrite",R=>{let L=Ks(),G=Jt();return h.Gi.getEntries(R,y).next(le=>{L=le,L.forEach((de,Ge)=>{Ge.isValidDocument()||(G=G.add(de))})}).next(()=>h.localDocuments.getOverlayedDocuments(R,L)).next(le=>{I=le;const de=[];for(const Ge of c){const at=ZH(Ge,I.get(Ge.key).overlayedDocument);null!=at&&de.push(new Mc(Ge.key,at,WF(at.value.mapValue),fr.exists(!0)))}return h.mutationQueue.addMutationBatch(R,g,de,c)}).next(le=>{S=le;const de=le.applyToLocalDocumentSet(I,G);return h.documentOverlayCache.saveOverlays(R,le.batchId,de)})}).then(()=>({batchId:S.batchId,changes:wL(I)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,c,h){let g=a.hc[a.currentUser.toKey()];g||(g=new xr(Gt)),g=g.insert(c,h),a.hc[a.currentUser.toKey()]=g}(r,i.batchId,t),yield kc(r,i.changes),yield Ym(r.remoteStore)}catch(i){const a=Jm(i,"Failed to persist write");t.reject(a)}}),U1.apply(this,arguments)}function BU(n,e){return V1.apply(this,arguments)}function V1(){return V1=(0,Ee.Z)(function*(n,e){const t=Xe(n);try{const r=yield i3(t.localStore,e);e.targetChanges.forEach((i,a)=>{const c=t.cc.get(a);c&&(Ot(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.nc=!0:i.modifiedDocuments.size>0?Ot(c.nc):i.removedDocuments.size>0&&(Ot(c.nc),c.nc=!1))}),yield kc(t,r,e)}catch(r){yield Xd(r)}}),V1.apply(this,arguments)}function jU(n,e,t){const r=Xe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ic.forEach((a,c)=>{const h=c.view.bu(e);h.snapshot&&i.push(h.snapshot)}),function(a,c){const h=Xe(a);h.onlineState=c;let g=!1;h.queries.forEach((y,I)=>{for(const S of I.listeners)S.bu(c)&&(g=!0)}),g&&k1(h)}(r.eventManager,e),i.length&&r.sc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function V3(n,e,t){return B1.apply(this,arguments)}function B1(){return B1=(0,Ee.Z)(function*(n,e,t){const r=Xe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.cc.get(e),a=i&&i.key;if(a){let c=new xr(Ke.comparator);c=c.insert(a,Qn.newNoDocument(a,Ft.min()));const h=Jt().add(a),g=new F0(Ft.min(),new Map,new Ln(Gt),c,h);yield BU(r,g),r.uc=r.uc.remove(a),r.cc.delete(e),Z1(r)}else yield zm(r.localStore,e,!1).then(()=>t_(r,e,t)).catch(Xd)}),B1.apply(this,arguments)}function B3(n,e){return j1.apply(this,arguments)}function j1(){return j1=(0,Ee.Z)(function*(n,e){const t=Xe(n),r=e.batch.batchId;try{const i=yield r3(t.localStore,e);q1(t,r,null),G1(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield kc(t,i)}catch(i){yield Xd(i)}}),j1.apply(this,arguments)}function j3(n,e,t){return H1.apply(this,arguments)}function H1(){return H1=(0,Ee.Z)(function*(n,e,t){const r=Xe(n);try{const i=yield function(a,c){const h=Xe(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let y;return h.mutationQueue.lookupMutationBatch(g,c).next(I=>(Ot(null!==I),y=I.keys(),h.mutationQueue.removeMutationBatch(g,I))).next(()=>h.mutationQueue.performConsistencyCheck(g)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(g,y,c)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,y)).next(()=>h.localDocuments.getDocuments(g,y))})}(r.localStore,e);q1(r,e,t),G1(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield kc(r,i)}catch(i){yield Xd(i)}}),H1.apply(this,arguments)}function $1(){return $1=(0,Ee.Z)(function*(n,e){const t=Xe(n);Rc(t.remoteStore)||He("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const c=Xe(a);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>c.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.lc.get(r)||[];i.push(e),t.lc.set(r,i)}catch(r){const i=Jm(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),$1.apply(this,arguments)}function G1(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function q1(n,e,t){const r=Xe(n);let i=r.hc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function t_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||HU(n,r)})}function HU(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(J0(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),Z1(n))}function W1(n,e,t){for(const r of t)r instanceof LU?(n.ac.addReference(r.key,e),$3(n,r)):r instanceof UU?(He("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||HU(n,r.key)):ht()}function $3(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(He("SyncEngine","New document in limbo: "+t),n.oc.add(r),Z1(n))}function Z1(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new Ke(mn.fromString(e)),r=n.fc.next();n.cc.set(r,new P3(t)),n.uc=n.uc.insert(t,r),yT(n.remoteStore,new ah(As(Lm(t.path)),r,2,zs.at))}}function kc(n,e,t){return z1.apply(this,arguments)}function z1(){return z1=(0,Ee.Z)(function*(n,e,t){const r=Xe(n),i=[],a=[],c=[];var h;r.ic.isEmpty()||(r.ic.forEach((h,g)=>{c.push(r._c(g,e,t).then(y=>{if((y||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(g.targetId,y?.fromCache?"not-current":"current"),y){i.push(y);const I=XR.Ci(g.targetId,y);a.push(I)}}))}),yield Promise.all(c),r.sc.Wo(i),yield(h=(0,Ee.Z)(function*(g,y){const I=Xe(g);try{yield I.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>he.forEach(y,R=>he.forEach(R.Si,L=>I.persistence.referenceDelegate.addReference(S,R.targetId,L)).next(()=>he.forEach(R.Di,L=>I.persistence.referenceDelegate.removeReference(S,R.targetId,L)))))}catch(S){if(!eh(S))throw S;He("LocalStore","Failed to update sequence numbers: "+S)}for(const S of y){const R=S.targetId;if(!S.fromCache){const L=I.Ui.get(R),le=L.withLastLimboFreeSnapshotVersion(L.snapshotVersion);I.Ui=I.Ui.insert(R,le)}}}),function(g,y){return h.apply(this,arguments)})(r.localStore,a))}),z1.apply(this,arguments)}function G3(n,e){return K1.apply(this,arguments)}function K1(){return K1=(0,Ee.Z)(function*(n,e){const t=Xe(n);if(!t.currentUser.isEqual(e)){He("SyncEngine","User change. New user:",e.toKey());const r=yield mU(t.localStore,e);t.currentUser=e,(i=t).lc.forEach(c=>{c.forEach(h=>{h.reject(new Le(ye.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield kc(t,r.ji)}var i}),K1.apply(this,arguments)}function q3(n,e){const t=Xe(n),r=t.cc.get(e);if(r&&r.nc)return Jt().add(r.key);{let i=Jt();const a=t.rc.get(e);if(!a)return i;for(const c of a){const h=t.ic.get(c);i=i.unionWith(h.view.ju)}return i}}function W3(n,e){return Y1.apply(this,arguments)}function Y1(){return Y1=(0,Ee.Z)(function*(n,e){const t=Xe(n),r=yield pT(t.localStore,e.query,!0),i=e.view.tc(r);return t.isPrimaryClient&&W1(t,e.targetId,i.Xu),i}),Y1.apply(this,arguments)}function Z3(n,e){return Q1.apply(this,arguments)}function Q1(){return Q1=(0,Ee.Z)(function*(n,e){const t=Xe(n);return wU(t.localStore,e).then(r=>kc(t,r))}),Q1.apply(this,arguments)}function z3(n,e,t,r){return J1.apply(this,arguments)}function J1(){return J1=(0,Ee.Z)(function*(n,e,t,r){const i=Xe(n),a=yield function(c,h){const g=Xe(c),y=Xe(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",I=>y.Tn(I,h).next(S=>S?g.localDocuments.getDocuments(I,S):he.resolve(null)))}(i.localStore,e);var h;null!==a?("pending"===t?yield Ym(i.remoteStore):"acknowledged"===t||"rejected"===t?(q1(i,e,r||null),G1(i,e),h=e,Xe(Xe(i.localStore).mutationQueue).An(h)):ht(),yield kc(i,a)):He("SyncEngine","Cannot apply mutation batch with id: "+e)}),J1.apply(this,arguments)}function X1(){return X1=(0,Ee.Z)(function*(n,e){const t=Xe(n);if(rk(t),ik(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield $U(t,r.toArray());t.dc=!0,yield T1(t.remoteStore,!0);for(const a of i)yT(t.remoteStore,a)}else if(!1===e&&!1!==t.dc){const r=[];let i=Promise.resolve();t.rc.forEach((a,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(t_(t,c),zm(t.localStore,c,!0))),J0(t.remoteStore,c)}),yield i,yield $U(t,r),function(a){const c=Xe(a);c.cc.forEach((h,g)=>{J0(c.remoteStore,g)}),c.ac.fs(),c.cc=new Map,c.uc=new xr(Ke.comparator)}(t),t.dc=!1,yield T1(t.remoteStore,!1)}}),X1.apply(this,arguments)}function $U(n,e,t){return ek.apply(this,arguments)}function ek(){return ek=(0,Ee.Z)(function*(n,e,t){const r=Xe(n),i=[],a=[];for(const c of e){let h;const g=r.rc.get(c);if(g&&0!==g.length){h=yield Zm(r.localStore,As(g[0]));for(const y of g){const I=r.ic.get(y),S=yield W3(r,I);S.snapshot&&a.push(S.snapshot)}}else{const y=yield vU(r.localStore,c);h=yield Zm(r.localStore,y),yield O1(r,GU(y),c,!1,h.resumeToken)}i.push(h)}return r.sc.Wo(a),i}),ek.apply(this,arguments)}function GU(n){return XF(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Y3(n){const e=Xe(n);return Xe(Xe(e.localStore).persistence).vi()}function Q3(n,e,t,r){return tk.apply(this,arguments)}function tk(){return tk=(0,Ee.Z)(function*(n,e,t,r){const i=Xe(n);if(i.dc)return void He("SyncEngine","Ignoring unexpected query state notification.");const a=i.rc.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const c=yield wU(i.localStore,nL(a[0])),h=F0.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,oi.EMPTY_BYTE_STRING);yield kc(i,c,h);break}case"rejected":yield zm(i.localStore,e,!0),t_(i,e,r);break;default:ht()}}),tk.apply(this,arguments)}function J3(n,e,t){return nk.apply(this,arguments)}function nk(){return nk=(0,Ee.Z)(function*(n,e,t){const r=rk(n);if(r.dc){for(const i of e){if(r.rc.has(i)){He("SyncEngine","Adding an already active target "+i);continue}const a=yield vU(r.localStore,i),c=yield Zm(r.localStore,a);yield O1(r,GU(a),c.targetId,!1,c.resumeToken),yT(r.remoteStore,c)}for(const i of t)r.rc.has(i)&&(yield zm(r.localStore,i,!1).then(()=>{J0(r.remoteStore,i),t_(r,i)}).catch(Xd))}}),nk.apply(this,arguments)}function rk(n){const e=Xe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=BU.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=q3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=V3.bind(null,e),e.sc.Wo=x3.bind(null,e.eventManager),e.sc.wc=M3.bind(null,e.eventManager),e}function ik(n){const e=Xe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=B3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=j3.bind(null,e),e}class qU{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ee.Z)(function*(){t.It=Y0(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return gU(this.persistence,new pU,e.initialUser,this.It)}yc(e){return new hU(hT.Bs,this.It)}gc(e){return new IU}terminate(){var e=this;return(0,Ee.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class WU extends qU{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield ik(r.Ac.syncEngine),yield Ym(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return gU(this.persistence,new pU,e.initialUser,this.It)}Tc(e,t){return new H$(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new TH(t,this.persistence);return new IH(e.asyncQueue,r)}yc(e){const t=JR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ys.withCacheSize(this.cacheSizeBytes):Ys.DEFAULT;return new QR(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,DU(),_T(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new IU}}class eG extends WU{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield t().call(r,e);const i=r.Ac.syncEngine;r.sharedClientState instanceof a1&&(r.sharedClientState.syncEngine={Fr:z3.bind(null,i),$r:Q3.bind(null,i),Br:J3.bind(null,i),vi:Y3.bind(null,i),Mr:Z3.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var a=(0,Ee.Z)(function*(c){yield function K3(n,e){return X1.apply(this,arguments)}(r.Ac.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return a.apply(this,arguments)}}())})()}gc(e){const t=DU();if(!a1.C(t))throw new Le(ye.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=JR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new a1(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class sk{initialize(e,t){var r=this;return(0,Ee.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>jU(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=G3.bind(null,r.syncEngine),yield T1(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new A3}createDatastore(e){const t=Y0(e.databaseInfo.databaseId),r=new d3(e.databaseInfo);return new p3(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=h=>jU(this.syncEngine,h,0),c=TU.C()?new TU:new u3,new _3(t,r,i,a,c);var t,r,i,a,c}createSyncEngine(e,t){return function(r,i,a,c,h,g,y){const I=new O3(r,i,a,c,h,g);return y&&(I.dc=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ee.Z)(function*(t){const r=Xe(t);He("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield Km(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function ok(n,e,t){if(!t)throw new Le(ye.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function ZU(n,e,t,r){if(!0===e&&!0===r)throw new Le(ye.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function zU(n){if(!Ke.isDocumentKey(n))throw new Le(ye.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function KU(n){if(Ke.isDocumentKey(n))throw new Le(ye.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function wT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ht()}function dn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Le(ye.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=wT(n);throw new Le(ye.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function YU(n,e){if(e<=0)throw new Le(ye.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const QU=new Map;class JU{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Le(ye.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Le(ye.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,ZU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class X0{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new JU({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Le(ye.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Le(ye.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new JU(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new hH;switch(t.type){case"gapi":return new mH(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Le(ye.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=QU.get(e);t&&(He("ComponentProvider","Removing Datastore"),QU.delete(e),t.terminate())}(this),Promise.resolve()}}class ar{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _l(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ar(this.firestore,e,this._key)}}class os{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new os(this.firestore,e,this._query)}}class _l extends os{constructor(e,t,r){super(e,t,Lm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ar(this.firestore,null,new Ke(e))}withConverter(e){return new _l(this.firestore,e,this._path)}}function e2(n,e,...t){if(n=(0,F.m9)(n),ok("collection","path",e),n instanceof X0){const r=mn.fromString(e,...t);return KU(r),new _l(n,null,r)}{if(!(n instanceof ar||n instanceof _l))throw new Le(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(mn.fromString(e,...t));return KU(r),new _l(n.firestore,null,r)}}function ET(n,e,...t){if(n=(0,F.m9)(n),1===arguments.length&&(e=AF.R()),ok("doc","path",e),n instanceof X0){const r=mn.fromString(e,...t);return zU(r),new ar(n,null,new Ke(r))}{if(!(n instanceof ar||n instanceof _l))throw new Le(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(mn.fromString(e,...t));return zU(r),new ar(n.firestore,n instanceof _l?n.converter:null,new Ke(r))}}function t2(n,e){return n=(0,F.m9)(n),e=(0,F.m9)(e),(n instanceof ar||n instanceof _l)&&(e instanceof ar||e instanceof _l)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function ak(n,e){return n=(0,F.m9)(n),e=(0,F.m9)(e),n instanceof os&&e instanceof os&&n.firestore===e.firestore&&R0(n._query,e._query)&&n.converter===e.converter}function n2(n,e=10240){let t=0;return{read:()=>(0,Ee.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ee.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class CT{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Ur("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class nG{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new si,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,Ee.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,Ee.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),i=Number(r);isNaN(i)&&e.Dc(`length string (${r}) is not valid number`);const a=yield e.Cc(i);return new R3(JSON.parse(a),t.length+i)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,Ee.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,Ee.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class sG{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ee.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Le(ye.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Ee.Z)(function*(a,c){const h=Xe(a),g=B0(h.It)+"/documents",y={documents:c.map(L=>V0(h.It,L))},I=yield h._o("BatchGetDocuments",g,y,c.length),S=new Map;I.forEach(L=>{const G=function i$(n,e){return"found"in e?function(t,r){Ot(!!r.found);const i=gl(t,r.found.name),a=wi(r.found.updateTime),c=new Hi({mapValue:{fields:r.found.fields}});return Qn.newFoundDocument(i,a,c)}(n,e):"missing"in e?function(t,r){Ot(!!r.missing),Ot(!!r.readTime);const i=gl(t,r.missing),a=wi(r.readTime);return Qn.newNoDocument(i,a)}(n,e):ht()}(h.It,L);S.set(G.key.toString(),G)});const R=[];return c.forEach(L=>{const G=S.get(L.toString());Ot(!!G),R.push(G)}),R}),function(a,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Hm(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ee.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=Ke.fromPath(i);e.mutations.push(new LR(a,e.precondition(a)))}),yield(r=(0,Ee.Z)(function*(i,a){const c=Xe(i),h=B0(c.It)+"/documents",g={writes:a.map(y=>j0(c.It,y))};yield c.ao("Commit",h,g)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ht();t=Ft.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Le(ye.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ft.min())?fr.exists(!1):fr.updateTime(t):fr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ft.min()))throw new Le(ye.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return fr.updateTime(t)}return fr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class oG{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.kc=r.maxAttempts,this.xo=new u1(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,Ee.Z)(function*(){const t=new sG(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Fc(a)}))}).catch(i=>{e.Fc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!T0(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!_L(t)}return!1}}class aG{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=vi.UNAUTHENTICATED,this.clientId=AF.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,Ee.Z)(function*(h){He("FirestoreClient","Received user=",h.uid),yield a.authCredentialListener(h),a.user=h});return function(h){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(He("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,Ee.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Le(ye.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new si;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Jm(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function r2(n,e){return uk.apply(this,arguments)}function uk(){return uk=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),He("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Ee.Z)(function*(a){r.isEqual(a)||(yield mU(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),uk.apply(this,arguments)}function i2(n,e){return lk.apply(this,arguments)}function lk(){return lk=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield ck(n);He("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>NU(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>NU(e.remoteStore,a)),n.onlineComponents=e}),lk.apply(this,arguments)}function ck(n){return dk.apply(this,arguments)}function dk(){return dk=(0,Ee.Z)(function*(n){return n.offlineComponents||(He("FirestoreClient","Using default OfflineComponentProvider"),yield r2(n,new qU)),n.offlineComponents}),dk.apply(this,arguments)}function bT(n){return hk.apply(this,arguments)}function hk(){return hk=(0,Ee.Z)(function*(n){return n.onlineComponents||(He("FirestoreClient","Using default OnlineComponentProvider"),yield i2(n,new sk)),n.onlineComponents}),hk.apply(this,arguments)}function s2(n){return ck(n).then(e=>e.persistence)}function IT(n){return ck(n).then(e=>e.localStore)}function fk(n){return bT(n).then(e=>e.remoteStore)}function pk(n){return bT(n).then(e=>e.syncEngine)}function n_(n){return gk.apply(this,arguments)}function gk(){return gk=(0,Ee.Z)(function*(n){const e=yield bT(n),t=e.eventManager;return t.onListen=F3.bind(null,e.syncEngine),t.onUnlisten=L3.bind(null,e.syncEngine),t}),gk.apply(this,arguments)}function a2(n,e,t={}){const r=new si;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(i,a,c,h,g){const y=new CT({next:S=>{a.enqueueAndForget(()=>M1(i,I));const R=S.docs.has(c);!R&&S.fromCache?g.reject(new Le(ye.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&S.fromCache&&h&&"server"===h.source?g.reject(new Le(ye.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(S)},error:S=>g.reject(S)}),I=new N1(Lm(c.path),y,{includeMetadataChanges:!0,Nu:!0});return A1(i,I)}(yield n_(n),n.asyncQueue,e,t,r)})),r.promise}function u2(n,e,t={}){const r=new si;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(i,a,c,h,g){const y=new CT({next:S=>{a.enqueueAndForget(()=>M1(i,I)),S.fromCache&&"server"===h.source?g.reject(new Le(ye.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(S)},error:S=>g.reject(S)}),I=new N1(c,y,{includeMetadataChanges:!0,Nu:!0});return A1(i,I)}(yield n_(n),n.asyncQueue,e,t,r)})),r.promise}class gG{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new u1(this,"async_queue_retry"),this.Wc=()=>{const t=_T();t&&He("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=_T();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=_T();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new si;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,Ee.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!eh(t))throw t;He("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,Ur("INTERNAL UNHANDLED ERROR: ",function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),c}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=S1.createAndSchedule(this,e,t,r,a=>this.Yc(a));return this.qc.push(i),i}zc(){this.Kc&&ht()}verifyOperationInProgress(){}Xc(){var e=this;return(0,Ee.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function mk(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class mG{constructor(){this._progressObserver={},this._taskCompletionResolver=new si,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ur extends X0{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new gG,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||l2(this),this._firestoreClient.terminate()}}function Vr(n){return n._firestoreClient||l2(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function l2(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new AH(n._databaseId,a,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var a,h;n._firestoreClient=new aG(n._authCredentials,n._appCheckCredentials,n._queue,r)}function c2(n,e,t){const r=new si;return n.asyncQueue.enqueue((0,Ee.Z)(function*(){try{yield r2(n,t),yield i2(n,e),r.resolve()}catch(i){const a=i;if(!("FirebaseError"===(c=a).name?c.code===ye.FAILED_PRECONDITION||c.code===ye.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw a;up("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}var c})).then(()=>r.promise)}function d2(n){if(n._initialized||n._terminated)throw new Le(ye.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class yl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new yl(oi.fromBase64String(e))}catch(t){throw new Le(ye.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new yl(oi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Nc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Le(ye.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ar(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Dp{constructor(e){this._methodName=e}}class TT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Le(ye.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Le(ye.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Gt(this._lat,e._lat)||Gt(this._long,e._long)}}const DG=/^__.*__$/;class SG{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Mc(e,this.data,this.fieldMask,t,this.fieldTransforms):new jm(e,this.data,t,this.fieldTransforms)}}class h2{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Mc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function f2(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ht()}}class DT{constructor(e,t,r,i,a,c){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=i,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new DT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return xT(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(f2(this.sa)&&DG.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class AG{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||Y0(e)}da(e,t,r,i=!1){return new DT({sa:e,methodName:t,fa:r,path:Ar.emptyPath(),oa:!1,la:i},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Sp(n){const e=n._freezeSettings(),t=Y0(n._databaseId);return new AG(n._databaseId,!!e.ignoreUndefinedProperties,t)}function ST(n,e,t,r,i,a={}){const c=n.da(a.merge||a.mergeFields?2:0,e,t,i);wk("Data must be an object, but it was:",c,r);const h=m2(r,c);let g,y;if(a.merge)g=new Oo(c.fieldMask),y=c.fieldTransforms;else if(a.mergeFields){const I=[];for(const S of a.mergeFields){const R=Ek(e,S,t);if(!c.contains(R))throw new Le(ye.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);y2(I,R)||I.push(R)}g=new Oo(I),y=c.fieldTransforms.filter(S=>g.covers(S.field))}else g=null,y=c.fieldTransforms;return new SG(new Hi(h),g,y)}class ew extends Dp{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ew}}function p2(n,e,t){return new DT({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class _k extends Dp{_toFieldTransform(e){return new k0(e.path,new Vm)}isEqual(e){return e instanceof _k}}class xG extends Dp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=p2(this,e,!0),r=this._a.map(a=>Ap(a,t)),i=new mp(r);return new k0(e.path,i)}isEqual(e){return this===e}}class MG extends Dp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=p2(this,e,!0),r=this._a.map(a=>Ap(a,t)),i=new _p(r);return new k0(e.path,i)}isEqual(e){return this===e}}class RG extends Dp{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Bm(e.It,oL(e.It,this.wa));return new k0(e.path,t)}isEqual(e){return this===e}}function yk(n,e,t,r){const i=n.da(1,e,t);wk("Data must be an object, but it was:",i,r);const a=[],c=Hi.empty();dp(r,(g,y)=>{const I=AT(e,g,t);y=(0,F.m9)(y);const S=i.ca(I);if(y instanceof ew)a.push(I);else{const R=Ap(y,S);null!=R&&(a.push(I),c.set(I,R))}});const h=new Oo(a);return new h2(c,h,i.fieldTransforms)}function vk(n,e,t,r,i,a){const c=n.da(1,e,t),h=[Ek(e,r,t)],g=[i];if(a.length%2!=0)throw new Le(ye.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<a.length;R+=2)h.push(Ek(e,a[R])),g.push(a[R+1]);const y=[],I=Hi.empty();for(let R=h.length-1;R>=0;--R)if(!y2(y,h[R])){const L=h[R];let G=g[R];G=(0,F.m9)(G);const le=c.ca(L);if(G instanceof ew)y.push(L);else{const de=Ap(G,le);null!=de&&(y.push(L),I.set(L,de))}}const S=new Oo(y);return new h2(I,S,c.fieldTransforms)}function g2(n,e,t,r=!1){return Ap(t,n.da(r?4:3,e))}function Ap(n,e){if(_2(n=(0,F.m9)(n)))return wk("Unsupported field value:",e,n),m2(n,e);if(n instanceof Dp)return function(t,r){if(!f2(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const c of t){let h=Ap(c,r.aa(a));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,F.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return oL(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=hr.fromDate(t);return{timestampValue:U0(r.It,i)}}if(t instanceof hr){const i=new hr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:U0(r.It,i)}}if(t instanceof TT)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof yl)return{bytesValue:SL(r.It,t._byteString)};if(t instanceof ar){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.ha(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:UR(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${wT(t)}`)}(n,e)}function m2(n,e){const t={};return FF(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):dp(n,(r,i)=>{const a=Ap(i,e.ra(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function _2(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof hr||n instanceof TT||n instanceof yl||n instanceof ar||n instanceof Dp)}function wk(n,e,t){if(!_2(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=wT(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function Ek(n,e,t){if((e=(0,F.m9)(e))instanceof Nc)return e._internalPath;if("string"==typeof e)return AT(n,e);throw xT("Field path arguments must be of type string or ",n,!1,void 0,t)}const kG=new RegExp("[~\\*/\\[\\]]");function AT(n,e,t){if(e.search(kG)>=0)throw xT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Nc(...e.split("."))._internalPath}catch{throw xT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function xT(n,e,t,r,i){const a=r&&!r.isEmpty(),c=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let g="";return(a||c)&&(g+=" (found",a&&(g+=` in field ${r}`),c&&(g+=` in document ${i}`),g+=")"),new Le(ye.INVALID_ARGUMENT,h+n+g)}function y2(n,e){return n.some(t=>t.isEqual(e))}class tw{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new ar(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new NG(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(MT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class NG extends tw{data(){return super.data()}}function MT(n,e){return"string"==typeof e?AT(n,e):e instanceof Nc?e._internalPath:e._delegate._internalPath}function v2(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Le(ye.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nw{}function dh(n,...e){for(const t of e)n=t._apply(n);return n}class PG extends nw{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=Sp(e.firestore),r=function(i,a,c,h,g,y,I){let S;if(g.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new Le(ye.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){T2(I,y);const L=[];for(const G of I)L.push(I2(h,i,G));S={arrayValue:{values:L}}}else S=I2(h,i,I)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||T2(I,y),S=g2(c,"where",I,"in"===y||"not-in"===y);const R=$i.create(g,y,S);return function(L,G){if(G.dt()){const de=NR(L);if(null!==de&&!de.isEqual(G.field))throw new Le(ye.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${de.toString()}' and '${G.field.toString()}'`);const Ge=kR(L);null!==Ge&&D2(0,G.field,Ge)}const le=function(de,Ge){for(const at of de.filters)if(Ge.indexOf(at.op)>=0)return at.op;return null}(L,function(de){switch(de){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(G.op));if(null!==le)throw new Le(ye.INVALID_ARGUMENT,le===G.op?`Invalid query. You cannot use more than one '${G.op.toString()}' filter.`:`Invalid query. You cannot use '${G.op.toString()}' filters with '${le.toString()}' filters.`)}(i,R),R}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new os(e.firestore,e.converter,function(i,a){const c=i.filters.concat([a]);return new xc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class FG extends nw{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Le(ye.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Le(ye.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Fm(i,a);return function(h,g){if(null===kR(h)){const y=NR(h);null!==y&&D2(0,y,g.field)}}(r,c),c}(e._query,this.ma,this.pa);return new os(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new xc(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class w2 extends nw{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new os(e.firestore,e.converter,JI(e._query,this.Ia,this.Ta))}}class E2 extends nw{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=b2(e,this.type,this.Ea,this.Aa);return new os(e.firestore,e.converter,(i=t,new xc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class C2 extends nw{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=b2(e,this.type,this.Ea,this.Aa);return new os(e.firestore,e.converter,(i=t,new xc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function b2(n,e,t,r){if(t[0]=(0,F.m9)(t[0]),t[0]instanceof tw)return function(i,a,c,h,g){if(!h)throw new Le(ye.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const y=[];for(const I of Um(i))if(I.field.isKeyField())y.push(pp(a,h.key));else{const S=h.data.field(I.field);if(xR(S))throw new Le(ye.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+I.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const R=I.field.canonicalString();throw new Le(ye.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${R}' (used as the orderBy) does not exist.`)}y.push(S)}return new sh(y,g)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Sp(n.firestore);return function(a,c,h,g,y,I){const S=a.explicitOrderBy;if(y.length>S.length)throw new Le(ye.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const R=[];for(let L=0;L<y.length;L++){const G=y[L];if(S[L].field.isKeyField()){if("string"!=typeof G)throw new Le(ye.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof G}`);if(!PR(a)&&-1!==G.indexOf("/"))throw new Le(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${G}' contains a slash.`);const le=a.path.child(mn.fromString(G));if(!Ke.isDocumentKey(le))throw new Le(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${le}' is not because it contains an odd number of segments.`);const de=new Ke(le);R.push(pp(c,de))}else{const le=g2(h,g,G);R.push(le)}}return new sh(R,I)}(n._query,n.firestore._databaseId,i,e,t,r)}}function I2(n,e,t){if("string"==typeof(t=(0,F.m9)(t))){if(""===t)throw new Le(ye.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!PR(e)&&-1!==t.indexOf("/"))throw new Le(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(mn.fromString(t));if(!Ke.isDocumentKey(r))throw new Le(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return pp(n,new Ke(r))}if(t instanceof ar)return pp(n,t._key);throw new Le(ye.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wT(t)}.`)}function T2(n,e){if(!Array.isArray(n)||0===n.length)throw new Le(ye.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Le(ye.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function D2(n,e,t){if(!t.isEqual(e))throw new Le(ye.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Ck{convertValue(e,t="none"){switch(fp(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Mr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(hp(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ht()}}convertObject(e,t){const r={};return dp(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new TT(Mr(e.latitude),Mr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=UF(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(I0(e));default:return null}}convertTimestamp(e){const t=th(e);return new hr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=mn.fromString(e);Ot(FL(r));const i=new nh(r.get(1),r.get(3)),a=new Ke(r.popFirst(5));return i.isEqual(t)||Ur(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function RT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class GG extends Ck{constructor(e){super(),this.firestore=e}convertBytes(e){return new yl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ar(this.firestore,null,t)}}class xp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Pc extends tw{constructor(e,t,r,i,a,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new rw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(MT("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class rw extends Pc{data(e={}){return super.data(e)}}class hh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new xp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new rw(this._firestore,this._userDataWriter,r.key,r,new xp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Le(ye.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new rw(r._firestore,r._userDataWriter,c.doc.key,c.doc,new xp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const h=new rw(r._firestore,r._userDataWriter,c.doc.key,c.doc,new xp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let g=-1,y=-1;return 0!==c.type&&(g=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),1!==c.type&&(a=a.add(c.doc),y=a.indexOf(c.doc.key)),{type:qG(c.type),doc:h,oldIndex:g,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function qG(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ht()}}function S2(n,e){return n instanceof Pc&&e instanceof Pc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof hh&&e instanceof hh&&n._firestore===e._firestore&&ak(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class fh extends Ck{constructor(e){super(),this.firestore=e}convertBytes(e){return new yl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ar(this.firestore,null,t)}}function A2(n,e,t){n=dn(n,ar);const r=dn(n.firestore,ur),i=RT(n.converter,e,t);return r_(r,[ST(Sp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,fr.none())])}function x2(n,e,t,...r){n=dn(n,ar);const i=dn(n.firestore,ur),a=Sp(i);let c;return c="string"==typeof(e=(0,F.m9)(e))||e instanceof Nc?vk(a,"updateDoc",n._key,e,t,r):yk(a,"updateDoc",n._key,e),r_(i,[c.toMutation(n._key,fr.exists(!0))])}function M2(n,...e){var t,r,i;n=(0,F.m9)(n);let a={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||mk(e[c])||(a=e[c],c++);const h={includeMetadataChanges:a.includeMetadataChanges};if(mk(e[c])){const S=e[c];e[c]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[c+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[c+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let g,y,I;if(n instanceof ar)y=dn(n.firestore,ur),I=Lm(n._key.path),g={next:S=>{e[c]&&e[c](bk(y,n,S))},error:e[c+1],complete:e[c+2]};else{const S=dn(n,os);y=dn(S.firestore,ur),I=S._query;const R=new fh(y);g={next:L=>{e[c]&&e[c](new hh(y,R,S,L))},error:e[c+1],complete:e[c+2]},v2(n._query)}return function(S,R,L,G){const le=new CT(G),de=new N1(R,le,L);return S.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return A1(yield n_(S),de)})),()=>{le.bc(),S.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return M1(yield n_(S),de)}))}}(Vr(y),I,h,g)}function r_(n,e){return function(t,r){const i=new si;return t.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function U3(n,e,t){return U1.apply(this,arguments)}(yield pk(t),r,i)})),i.promise}(Vr(n),e)}function bk(n,e,t){const r=t.docs.get(e._key),i=new fh(n);return new Pc(n,i,e._key,r,new xp(t.hasPendingWrites,t.fromCache),e.converter)}const t6={maxAttempts:5};class R2{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Sp(e)}set(e,t,r){this._verifyNotCommitted();const i=ph(e,this._firestore),a=RT(i.converter,t,r),c=ST(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,fr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=ph(e,this._firestore);let c;return c="string"==typeof(t=(0,F.m9)(t))||t instanceof Nc?vk(this._dataReader,"WriteBatch.update",a._key,t,r,i):yk(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(c.toMutation(a._key,fr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ph(e,this._firestore);return this._mutations=this._mutations.concat(new Hm(t._key,fr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Le(ye.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ph(n,e){if((n=(0,F.m9)(n)).firestore!==e)throw new Le(ye.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class n6 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Sp(e)}get(e){const t=ph(e,this._firestore),r=new GG(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ht();const a=i[0];if(a.isFoundDocument())return new tw(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new tw(this._firestore,r,t._key,null,t.converter);throw ht()})}set(e,t,r){const i=ph(e,this._firestore),a=RT(i.converter,t,r),c=ST(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const a=ph(e,this._firestore);let c;return c="string"==typeof(t=(0,F.m9)(t))||t instanceof Nc?vk(this._dataReader,"Transaction.update",a._key,t,r,i):yk(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,c),this}delete(e){const t=ph(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ph(e,this._firestore),r=new fh(this._firestore);return super.get(e).then(i=>new Pc(this._firestore,r,t._key,i._document,new xp(!1,!1),t.converter))}}function Ik(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Le("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function N2(){if(typeof Uint8Array>"u")throw new Le("unimplemented","Uint8Arrays are not available in this environment.")}function P2(){if(!function DH(){return typeof atob<"u"}())throw new Le("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){km=gi.SDK_VERSION,(0,gi._registerComponent)(new qs.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),c=new ur(new pH(t.getProvider("auth-internal")),new _H(t.getProvider("app-check-internal")),function(h,g){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Le(ye.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nh(h.options.projectId,g)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),(0,gi.registerVersion)(TF,"3.7.3",n),(0,gi.registerVersion)(TF,"3.7.3","esm2017")}();class iw{constructor(e){this._delegate=e}static fromBase64String(e){return P2(),new iw(yl.fromBase64String(e))}static fromUint8Array(e){return N2(),new iw(yl.fromUint8Array(e))}toBase64(){return P2(),this._delegate.toBase64()}toUint8Array(){return N2(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Tk(n){return function d6(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class h6{enableIndexedDbPersistence(e,t){return function yG(n,e){d2(n=dn(n,ur));const t=Vr(n),r=n._freezeSettings(),i=new sk;return c2(t,i,new WU(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function vG(n){d2(n=dn(n,ur));const e=Vr(n),t=n._freezeSettings(),r=new sk;return c2(e,r,new eG(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function wG(n){if(n._initialized&&!n._terminated)throw new Le(ye.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new si;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{yield(t=(0,Ee.Z)(function*(r){if(!Cu.C())return Promise.resolve();const i=r+"main";yield Cu.delete(i)}),function(r){return t.apply(this,arguments)})(JR(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class O2{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof nh||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&up("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function XU(n,e,t,r={}){var i;const a=(n=dn(n,X0))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&up("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,h;if("string"==typeof r.mockUserToken)c=r.mockUserToken,h=vi.MOCK_USER;else{c=(0,F.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Le(ye.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new vi(g)}n._authCredentials=new fH(new DF(c,h))}}(this._delegate,e,t,r)}enableNetwork(){return function CG(n){return function uG(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield s2(n),t=yield fk(n);return e.setNetworkEnabled(!0),function(r){const i=Xe(r);return i._u.delete(0),Q0(i)}(t)}))}(Vr(n=dn(n,ur)))}(this._delegate)}disableNetwork(){return function bG(n){return function lG(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield s2(n),t=yield fk(n);return e.setNetworkEnabled(!1),(r=(0,Ee.Z)(function*(i){const a=Xe(i);a._u.add(0),yield Km(a),a.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Vr(n=dn(n,ur)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,ZU("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function EG(n){return function(e){const t=new si;return e.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function H3(n,e){return $1.apply(this,arguments)}(yield pk(e),t)})),t.promise}(Vr(n=dn(n,ur)))}(this._delegate)}onSnapshotsInSync(e){return function e6(n,e){return function hG(n,e){const t=new CT(e);return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield n_(n),i=t,Xe(r).Ru.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield n_(n),i=t,void Xe(r).Ru.delete(i);var r,i}))}}(Vr(n=dn(n,ur)),mk(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Le("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new i_(this,e2(this._delegate,e))}catch(t){throw Ms(t,"collection()","Firestore.collection()")}}doc(e){try{return new ba(this,ET(this._delegate,e))}catch(t){throw Ms(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Rs(this,function tG(n,e){if(n=dn(n,X0),ok("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Le(ye.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new os(n,null,(t=e,new xc(mn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ms(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function r6(n,e,t){n=dn(n,ur);const r=Object.assign(Object.assign({},t6),t);return function(i){if(i.maxAttempts<1)throw new Le(ye.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,c){const h=new si;return i.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){const g=yield function o2(n){return bT(n).then(e=>e.datastore)}(i);new oG(i.asyncQueue,g,c,a,h).run()})),h.promise}(Vr(n),i=>e(new n6(n,i)),r)}(this._delegate,t=>e(new F2(this,t)))}batch(){return Vr(this._delegate),new L2(new R2(this._delegate,e=>r_(this._delegate,e)))}loadBundle(e){return function IG(n,e){const t=Vr(n=dn(n,ur)),r=new mG;return function fG(n,e,t,r){const i=function(a,c){let h;return h="string"==typeof a?(new TextEncoder).encode(a):a,g=function(g,y){if(g instanceof Uint8Array)return n2(g,y);if(g instanceof ArrayBuffer)return n2(new Uint8Array(g),y);if(g instanceof ReadableStream)return g.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new nG(g,c);var g}(t,Y0(e));n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){!function X3(n,e,t){const r=Xe(n);var i;(i=(0,Ee.Z)(function*(a,c,h){try{const g=yield c.getMetadata();if(yield function(R,L){const G=Xe(R),le=wi(L.createTime);return G.persistence.runTransaction("hasNewerBundle","readonly",de=>G.Ns.getBundleMetadata(de,L.id)).then(de=>!!de&&de.createTime.compareTo(le)>=0)}(a.localStore,g))return yield c.close(),h._completeWith({taskState:"Success",documentsLoaded:(R=g).totalDocuments,bytesLoaded:R.totalBytes,totalDocuments:R.totalDocuments,totalBytes:R.totalBytes}),Promise.resolve(new Set);h._updateProgress(FU(g));const y=new k3(g,a.localStore,c.It);let I=yield c.mc();for(;I;){const R=yield y.Fu(I);R&&h._updateProgress(R),I=yield c.mc()}const S=yield y.complete();return yield kc(a,S.Lu,void 0),yield function(R,L){const G=Xe(R);return G.persistence.runTransaction("Save bundle","readwrite",le=>G.Ns.saveBundleMetadata(le,L))}(a.localStore,g),h._completeWith(S.progress),Promise.resolve(S.Bu)}catch(g){return up("SyncEngine",`Loading bundle failed with ${g}`),h._failWith(g),Promise.resolve(new Set)}var R}),function(a,c,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield pk(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function TG(n,e){return function pG(n,e){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){return function(t,r){const i=Xe(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Ns.getNamedQuery(a,r))}(yield IT(n),e)}))}(Vr(n=dn(n,ur)),e).then(t=>t?new os(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Rs(this,t):null)}}class kT extends Ck{constructor(e){super(),this.firestore=e}convertBytes(e){return new iw(new yl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ba.forKey(t,this.firestore,null)}}class F2{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new kT(e)}get(e){const t=Rp(e);return this._delegate.get(t).then(r=>new sw(this._firestore,new Pc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Rp(e);return r?(Ik("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Rp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Rp(e);return this._delegate.delete(t),this}}class L2{constructor(e){this._delegate=e}set(e,t,r){const i=Rp(e);return r?(Ik("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Rp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Rp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Mp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new rw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ow(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Mp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Mp(e,new kT(e),t),i.set(t,a)),a}}Mp.INSTANCES=new WeakMap;class ba{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new kT(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Le("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ba(t,new ar(t._delegate,r,new Ke(e)))}static forKey(e,t,r){return new ba(t,new ar(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new i_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new i_(this.firestore,e2(this._delegate,e))}catch(t){throw Ms(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,F.m9)(e))instanceof ar&&t2(this._delegate,e)}set(e,t){t=Ik("DocumentReference.set",t);try{return t?A2(this._delegate,e,t):A2(this._delegate,e)}catch(r){throw Ms(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?x2(this._delegate,e):x2(this._delegate,e,t,...r)}catch(i){throw Ms(i,"updateDoc()","DocumentReference.update()")}}delete(){return function JG(n){return r_(dn(n.firestore,ur),[new Hm(n._key,fr.none())])}(this._delegate)}onSnapshot(...e){const t=U2(e),r=V2(e,i=>new sw(this.firestore,new Pc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return M2(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function ZG(n){n=dn(n,ar);const e=dn(n.firestore,ur),t=Vr(e),r=new fh(e);return function cG(n,e){const t=new si;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(i,a,c){try{const h=yield function(g,y){const I=Xe(g);return I.persistence.runTransaction("read document","readonly",S=>I.localDocuments.getDocument(S,y))}(i,a);h.isFoundDocument()?c.resolve(h):h.isNoDocument()?c.resolve(null):c.reject(new Le(ye.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const g=Jm(h,`Failed to get document '${a} from cache`);c.reject(g)}}),function(i,a,c){return r.apply(this,arguments)})(yield IT(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Pc(e,r,n._key,i,new xp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function zG(n){n=dn(n,ar);const e=dn(n.firestore,ur);return a2(Vr(e),n._key,{source:"server"}).then(t=>bk(e,n,t))}(this._delegate):function WG(n){n=dn(n,ar);const e=dn(n.firestore,ur);return a2(Vr(e),n._key).then(t=>bk(e,n,t))}(this._delegate),t.then(r=>new sw(this.firestore,new Pc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ba(this.firestore,this._delegate.withConverter(e?Mp.getInstance(this.firestore,e):null))}}function Ms(n,e,t){return n.message=n.message.replace(e,t),n}function U2(n){for(const e of n)if("object"==typeof e&&!Tk(e))return e;return{}}function V2(n,e){var t,r;let i;return i=Tk(n[0])?n[0]:Tk(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class sw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ba(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return S2(this._delegate,e._delegate)}}class ow extends sw{data(e){const t=this._delegate.data(e);return function dH(n,e){n||ht()}(void 0!==t),t}}class Rs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new kT(e)}where(e,t,r){try{return new Rs(this.firestore,dh(this._delegate,function OG(n,e,t){const r=e,i=MT("where",n);return new PG(i,r,t)}(e,t,r)))}catch(i){throw Ms(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Rs(this.firestore,dh(this._delegate,function LG(n,e="asc"){const t=e,r=MT("orderBy",n);return new FG(r,t)}(e,t)))}catch(r){throw Ms(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Rs(this.firestore,dh(this._delegate,function UG(n){return YU("limit",n),new w2("limit",n,"F")}(e)))}catch(t){throw Ms(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Rs(this.firestore,dh(this._delegate,function VG(n){return YU("limitToLast",n),new w2("limitToLast",n,"L")}(e)))}catch(t){throw Ms(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Rs(this.firestore,dh(this._delegate,function BG(...n){return new E2("startAt",n,!0)}(...e)))}catch(t){throw Ms(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Rs(this.firestore,dh(this._delegate,function jG(...n){return new E2("startAfter",n,!1)}(...e)))}catch(t){throw Ms(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Rs(this.firestore,dh(this._delegate,function HG(...n){return new C2("endBefore",n,!1)}(...e)))}catch(t){throw Ms(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Rs(this.firestore,dh(this._delegate,function $G(...n){return new C2("endAt",n,!0)}(...e)))}catch(t){throw Ms(t,"endAt()","Query.endAt()")}}isEqual(e){return ak(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function YG(n){n=dn(n,os);const e=dn(n.firestore,ur),t=Vr(e),r=new fh(e);return function dG(n,e){const t=new si;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(i,a,c){try{const h=yield pT(i,a,!0),g=new VU(a,h.Hi),y=g.Wu(h.documents),I=g.applyChanges(y,!1);c.resolve(I.snapshot)}catch(h){const g=Jm(h,`Failed to execute query '${a} against cache`);c.reject(g)}}),function(i,a,c){return r.apply(this,arguments)})(yield IT(n),e,t);var r})),t.promise}(t,n._query).then(i=>new hh(e,r,n,i))}(this._delegate):"server"===e?.source?function QG(n){n=dn(n,os);const e=dn(n.firestore,ur),t=Vr(e),r=new fh(e);return u2(t,n._query,{source:"server"}).then(i=>new hh(e,r,n,i))}(this._delegate):function KG(n){n=dn(n,os);const e=dn(n.firestore,ur),t=Vr(e),r=new fh(e);return v2(n._query),u2(t,n._query).then(i=>new hh(e,r,n,i))}(this._delegate),t.then(r=>new Dk(this.firestore,new hh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=U2(e),r=V2(e,i=>new Dk(this.firestore,new hh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return M2(this._delegate,t,r)}withConverter(e){return new Rs(this.firestore,this._delegate.withConverter(e?Mp.getInstance(this.firestore,e):null))}}class p6{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new ow(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Dk{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Rs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ow(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new p6(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new ow(this._firestore,r))})}isEqual(e){return S2(this._delegate,e._delegate)}}class i_ extends Rs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ba(this.firestore,e):null}doc(e){try{return new ba(this.firestore,void 0===e?ET(this._delegate):ET(this._delegate,e))}catch(t){throw Ms(t,"doc()","CollectionReference.doc()")}}add(e){return function XG(n,e){const t=dn(n.firestore,ur),r=ET(n),i=RT(n.converter,e);return r_(t,[ST(Sp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,fr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ba(this.firestore,t))}isEqual(e){return t2(this._delegate,e._delegate)}withConverter(e){return new i_(this.firestore,this._delegate.withConverter(e?Mp.getInstance(this.firestore,e):null))}}function Rp(n){return dn(n,ar)}class Sk{constructor(...e){this._delegate=new Nc(...e)}static documentId(){return new Sk(Ar.keyField().canonicalString())}isEqual(e){return(e=(0,F.m9)(e))instanceof Nc&&this._delegate._internalPath.isEqual(e._internalPath)}}class kp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function s6(){return new _k("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new kp(e)}static delete(){const e=function i6(){return new ew("deleteField")}();return e._methodName="FieldValue.delete",new kp(e)}static arrayUnion(...e){const t=function o6(...n){return new xG("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new kp(t)}static arrayRemove(...e){const t=function a6(...n){return new MG("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new kp(t)}static increment(e){const t=function u6(n){return new RG("increment",n)}(e);return t._methodName="FieldValue.increment",new kp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const g6={Firestore:O2,GeoPoint:TT,Timestamp:hr,Blob:iw,Transaction:F2,WriteBatch:L2,DocumentReference:ba,DocumentSnapshot:sw,Query:Rs,QueryDocumentSnapshot:ow,QuerySnapshot:Dk,CollectionReference:i_,FieldPath:Sk,FieldValue:kp,setLogLevel:function f6(n){!function cH(n){Jd.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function B2(n,e){return function y6(n,e=Bf.z){return new Tr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function Ak(n,e){return B2(n,e).pipe((0,yt.U)(t=>({payload:t,type:"query"})))}function NT(n,e){return Ak(n,e).pipe(rf(void 0),Jv(),(0,yt.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,h)=>{const g=i.find(I=>I.doc.ref.isEqual(c.ref)),y=t?.payload.docs.find(I=>I.ref.isEqual(c.ref));g&&JSON.stringify(g.doc.metadata)===JSON.stringify(c.metadata)||!g&&y&&JSON.stringify(y.metadata)===JSON.stringify(c.metadata)||a.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:c}})}),a}))}function j2(n,e,t){return NT(n,t).pipe(Yu((r,i)=>function w6(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function E6(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return xk(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return xk(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return xk(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),qM(),(0,yt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function xk(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function H2(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function _6(n){(function m6(n,e){n.INTERNAL.registerComponent(new qs.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},g6)))})(n,(e,t)=>new O2(e,t,new h6)),n.registerVersion("@firebase/firestore-compat","0.2.3")}(Yf.Z);class $2{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=NT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,yt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(rf(void 0),Jv(),rs(([r,i])=>i.length>0||!r),(0,yt.U)(([r,i])=>i),Qt.iC)}auditTrail(e){return this.stateChanges(e).pipe(Yu((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=H2(e);return j2(this.query,t,this.afs.schedulers.outsideAngular).pipe(Qt.iC)}valueChanges(e={}){return Ak(this.query,this.afs.schedulers.outsideAngular).pipe((0,yt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Qt.iC)}get(e){return(0,rn.D)(this.query.get(e)).pipe(Qt.iC)}add(e){return this.ref.add(e)}doc(e){return new G2(this.ref.doc(e),this.afs)}}class G2{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=Z2(r,t);return new $2(i,a,this.afs)}snapshotChanges(){return function v6(n,e){return B2(n,e).pipe(rf(void 0),Jv(),(0,yt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Qt.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,yt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,rn.D)(this.ref.get(e)).pipe(Qt.iC)}}class C6{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?NT(this.query,this.afs.schedulers.outsideAngular).pipe((0,yt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),rs(t=>t.length>0),Qt.iC):NT(this.query,this.afs.schedulers.outsideAngular).pipe(Qt.iC)}auditTrail(e){return this.stateChanges(e).pipe(Yu((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=H2(e);return j2(this.query,t,this.afs.schedulers.outsideAngular).pipe(Qt.iC)}valueChanges(e={}){return Ak(this.query,this.afs.schedulers.outsideAngular).pipe((0,yt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Qt.iC)}get(e){return(0,rn.D)(this.query.get(e)).pipe(Qt.iC)}}const q2=new l.OlP("angularfire2.enableFirestorePersistence"),W2=new l.OlP("angularfire2.firestore.persistenceSettings"),b6=new l.OlP("angularfire2.firestore.settings"),I6=new l.OlP("angularfire2.firestore.use-emulator");function Z2(n,e=(t=>t)){return{query:e(n),ref:n}}let T6=(()=>{class n{constructor(t,r,i,a,c,h,g,y,I,S,R,L,G,le,de,Ge,at){this.schedulers=g;const nt=(0,Dr.on)(t,h,r),ut=I;S&&Wv(nt,h,R,G,le,de,L,Ge),[this.firestore,this.persistenceEnabled$]=(0,Dr.cc)(`${nt.name}.firestore`,"AngularFirestore",nt.name,()=>{const ft=h.runOutsideAngular(()=>nt.firestore());if(a&&ft.settings(a),ut&&ft.useEmulator(...ut),i&&!qo(c)){const Vt=()=>{try{return(0,rn.D)(ft.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(Er){return typeof console<"u"&&console.warn(Er),dt(!1)}};return[ft,h.runOutsideAngular(Vt)]}return[ft,dt(!1)]},[a,ut,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:c}=Z2(i,r),h=this.schedulers.ngZone.run(()=>a);return new $2(h,c,this)}collectionGroup(t,r){const i=r||(c=>c),a=this.firestore.collectionGroup(t);return new C6(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new G2(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Dr.Dh),l.LFG(Dr.xv,8),l.LFG(q2,8),l.LFG(b6,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(Qt.HU),l.LFG(W2,8),l.LFG(I6,8),l.LFG(Kf,8),l.LFG(Tm,8),l.LFG(Gv,8),l.LFG(qv,8),l.LFG(gI,8),l.LFG(mI,8),l.LFG(Dm,8),l.LFG(zf,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),D6=(()=>{class n{constructor(){Im.Z.registerVersion("angularfire",Qt.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:q2,useValue:!0},{provide:W2,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[T6]}),n})();var S6=U(5032);const z2="@firebase/database",K2="0.13.10";let Mk="";function Y2(n){Mk=n}class M6{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,F.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,F.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class R6{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,F.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Q2=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new M6(e)}}catch{}return new R6},Np=Q2("localStorage"),Rk=Q2("sessionStorage"),s_=new Ro.Yd("@firebase/database"),J2=function(){let n=1;return function(){return n++}}(),X2=function(n){const e=(0,F.dS)(n),t=new F.gQ;t.update(e);const r=t.digest();return F.US.encodeByteArray(r)},aw=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=aw.apply(null,r):e+="object"==typeof r?(0,F.Wl)(r):r,e+=" "}return e};let Pp=null,eV=!0;const tV=function(n,e){(0,F.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(s_.logLevel=Ro.in.VERBOSE,Pp=s_.log.bind(s_),e&&Rk.set("logging_enabled",!0)):"function"==typeof n?Pp=n:(Pp=null,Rk.remove("logging_enabled"))},bi=function(...n){if(!0===eV&&(eV=!1,null===Pp&&!0===Rk.get("logging_enabled")&&tV(!0)),Pp){const e=aw.apply(null,n);Pp(e)}},uw=function(n){return function(...e){bi(n,...e)}},kk=function(...n){const e="FIREBASE INTERNAL ERROR: "+aw(...n);s_.error(e)},vl=function(...n){const e=`FIREBASE FATAL ERROR: ${aw(...n)}`;throw s_.error(e),new Error(e)},as=function(...n){const e="FIREBASE WARNING: "+aw(...n);s_.warn(e)},PT=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Oc="[MIN_NAME]",wl="[MAX_NAME]",Op=function(n,e){if(n===e)return 0;if(n===Oc||e===wl)return-1;if(e===Oc||n===wl)return 1;{const t=OT(n),r=OT(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},P6=function(n,e){return n===e?0:n<e?-1:1},lw=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,F.Wl)(e))},Nk=function(n){if("object"!=typeof n||null===n)return(0,F.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,F.Wl)(e[r]),t+=":",t+=Nk(n[e[r]]);return t+="}",t},nV=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Ii(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const rV=function(n){(0,F.hu)(!PT(n),"Invalid JSON number");const r=1023;let i,a,c,h,g;0===n?(a=0,c=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=h+r,c=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(a=0,c=Math.round(n/Math.pow(2,-1074))));const y=[];for(g=52;g;g-=1)y.push(c%2?1:0),c=Math.floor(c/2);for(g=11;g;g-=1)y.push(a%2?1:0),a=Math.floor(a/2);y.push(i?1:0),y.reverse();const I=y.join("");let S="";for(g=0;g<64;g+=8){let R=parseInt(I.substr(g,8),2).toString(16);1===R.length&&(R="0"+R),S+=R}return S.toLowerCase()},U6=new RegExp("^-?(0*)\\d{1,10}$"),iV=-2147483648,Pk=2147483647,OT=function(n){if(U6.test(n)){const e=Number(n);if(e>=iV&&e<=Pk)return e}return null},o_=function(n){try{n()}catch(e){setTimeout(()=>{throw as("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},cw=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class B6{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){as(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class j6{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(bi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',as(e)}}let dw=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const lV=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,hV="websocket",fV="long_polling";class Fk{constructor(e,t,r,i,a=!1,c="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=c,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Np.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Np.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function pV(n,e,t){let r;if((0,F.hu)("string"==typeof e,"typeof type must == string"),(0,F.hu)("object"==typeof t,"typeof params must == object"),e===hV)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==fV)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function H6(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Ii(t,(a,c)=>{i.push(a+"="+c)}),r+i.join("&")}class $6{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,F.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,F.p$)(this.counters_)}}const Lk={},Uk={};function Vk(n){const e=n.toString();return Lk[e]||(Lk[e]=new $6),Lk[e]}class q6{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&o_(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class gh{constructor(e,t,r,i,a,c,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=c,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=uw(e),this.stats_=Vk(t),this.urlFn=g=>(this.appCheckToken&&(g.ac=this.appCheckToken),pV(t,fV,g))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new q6(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,F.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Bk((...a)=>{const[c,h,g,y,I]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=h,this.password=g;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[c,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(c,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&lV.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){gh.forceAllow_=!0}static forceDisallow(){gh.forceDisallow_=!0}static isAvailable(){return!((0,F.Yr)()||!gh.forceAllow_&&(gh.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,F.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,F.h$)(t),i=nV(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,F.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,F.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Bk{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,F.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=J2(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Bk.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(h){bi("frame writing exception"),h.stack&&bi(h.stack),bi(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||bi("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+i+"="+c.seg+"&ts"+i+"="+c.ts+"&d"+i+"="+c.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,F.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{bi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let LT=null;typeof MozWebSocket<"u"?LT=MozWebSocket:typeof WebSocket<"u"&&(LT=WebSocket);let a_=(()=>{class n{constructor(t,r,i,a,c,h,g){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=uw(this.connId),this.stats_=Vk(r),this.connURL=n.connectionURL_(r,h,g,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,c){const h={v:"5"};return!(0,F.Yr)()&&typeof location<"u"&&location.hostname&&lV.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),a&&(h.ac=a),c&&(h.p=c),pV(t,hV,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Np.set("previous_websocket_failure",!0);try{let i;if((0,F.Yr)()){i={headers:{"User-Agent":`Firebase/5/${Mk}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,h=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new LT(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==LT&&!n.forceDisallow_}static previouslyFailed(){return Np.isInMemoryStorage||!0===Np.get("previous_websocket_failure")}markConnectionHealthy(){Np.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,F.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,F.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,F.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=nV(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),EV=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[gh,a_]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=a_&&a_.isAvailable();let i=r&&!a_.previouslyFailed();if(t.webSocketOnly&&(r||as("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[a_];else{const a=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&a.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class AV{constructor(e,t,r,i,a,c,h,g,y,I){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=c,this.onReady_=h,this.onDisconnect_=g,this.onKill_=y,this.lastSessionId=I,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=uw("c:"+this.id+":"),this.transportManager_=new EV(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=cw(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=lw("t",e),r=lw("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=lw("t",e),r=lw("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=lw("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?kk("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):kk("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&as("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),cw(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):cw(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Np.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class xV{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class MV{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,F.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,F.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class UT extends MV{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,F.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new UT}getInitialEvent(e){return(0,F.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Rn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function bn(){return new Rn("")}function sn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function mh(n){return n.pieces_.length-n.pieceNum_}function Wn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Rn(n.pieces_,e)}function Hk(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function hw(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function NV(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Rn(e,0)}function pr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Rn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Rn(t,0)}function on(n){return n.pieceNum_>=n.pieces_.length}function ks(n,e){const t=sn(n),r=sn(e);if(null===t)return e;if(t===r)return ks(Wn(n),Wn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function fq(n,e){const t=hw(n,0),r=hw(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=Op(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function $k(n,e){if(mh(n)!==mh(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Ia(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(mh(n)>mh(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class pq{constructor(e,t){this.errorPrefix_=t,this.parts_=hw(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,F.ug)(this.parts_[r]);PV(this)}}function PV(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Fp(n))}function Fp(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class Gk extends MV{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Gk}getInitialEvent(e){return(0,F.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const fw=1e3;let BT,Lp=(()=>{class n extends xV{constructor(t,r,i,a,c,h,g,y){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=c,this.authTokenProvider_=h,this.appCheckTokenProvider_=g,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=uw("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=fw,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,F.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Gk.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&UT.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,c={r:a,a:t,b:r};this.log_((0,F.Wl)(c)),(0,F.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new F.BH,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:h=>{const g=h.d;"ok"===h.s?r.resolve(g):r.reject(g)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const c=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+c),this.listens.has(h)||this.listens.set(h,new Map),(0,F.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,F.hu)(!this.listens.get(h).has(c),"listen() called twice for same path/queryId.");const g={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(h).set(c,g),this.connected_&&this.sendListen_(g)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const c={p:i};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,g=>{const y=g.d,I=g.s;n.warnOnListenWarnings_(y,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",g),"ok"!==I&&this.removeListen_(i,a),t.onComplete&&t.onComplete(I,y))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,F.r3)(t,"w")){const i=(0,F.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();as(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,F.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,F.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const c=a.s,h=a.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,F.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const c={p:t};a&&(c.q=i,c.t=a),this.sendRequest("n",c)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const c={p:r,d:i};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,h=>{a&&setTimeout(()=>{a(h.s,h.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,c){this.initConnection_();const h={p:r,d:i};void 0!==c&&(h.h=c),this.outstandingPuts_.push({action:t,request:h,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,F.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):kk("Unrecognized action received from server: "+(0,F.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,F.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=fw,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=fw,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=fw),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Ee.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let g=!1,y=null;const I=function(){y?y.close():(g=!0,a())};t.realtime_={close:I,sendRequest:function(L){(0,F.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(L)}};const R=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[L,G]=yield Promise.all([t.authTokenProvider_.getToken(R),t.appCheckTokenProvider_.getToken(R)]);g?bi("getToken() completed but was canceled"):(bi("getToken() completed. Creating connection."),t.authToken_=L&&L.accessToken,t.appCheckToken_=G&&G.token,y=new AV(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,le=>{as(le+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(L){t.log_("Failed to get token: "+L),g||(t.repoInfo_.nodeAdmin&&as(L),I())}}})()}interrupt(t){bi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){bi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,F.xb)(this.interruptReasons_)&&(this.reconnectDelay_=fw,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(c=>Nk(c)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new Rn(t).toString();let a;if(this.listens.has(i)){const c=this.listens.get(i);a=c.get(r),c.delete(r),0===c.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){bi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){bi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,F.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+Mk.replace(/\./g,"-")]=1,(0,F.uI)()?t["framework.cordova"]=1:(0,F.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=UT.getInstance().currentlyOnline();return(0,F.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class ln{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new ln(e,t)}}class VT{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new ln(Oc,e),i=new ln(Oc,t);return 0!==this.compare(r,i)}minPost(){return ln.MIN}}class LV extends VT{static get __EMPTY_NODE(){return BT}static set __EMPTY_NODE(e){BT=e}compare(e,t){return Op(e.name,t.name)}isDefinedOn(e){throw(0,F.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return ln.MIN}maxPost(){return new ln(wl,BT)}makePost(e,t){return(0,F.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new ln(e,BT)}toString(){return".key"}}const El=new LV;class jT{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,i&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let Wk,bu=(()=>{class n{constructor(t,r,i,a,c){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??Qs.EMPTY_NODE,this.right=c??Qs.EMPTY_NODE}copy(t,r,i,a,c){return new n(t??this.key,r??this.value,i??this.color,a??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const c=i(t,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===c?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return Qs.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Qs.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Qs{constructor(e,t=Qs.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Qs(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,bu.BLACK,null,null))}remove(e){return new Qs(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,bu.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new jT(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new jT(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new jT(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new jT(this.root_,null,this.comparator_,!0,e)}}function Cq(n,e){return Op(n.name,e.name)}function qk(n,e){return Op(n,e)}Qs.EMPTY_NODE=new class Eq{copy(e,t,r,i,a){return this}insert(e,t,r){return new bu(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const UV=function(n){return"number"==typeof n?"number:"+rV(n):"string:"+n},VV=function(n){if(n.isLeafNode()){const e=n.val();(0,F.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,F.r3)(e,".sv"),"Priority must be a string or number.")}else(0,F.hu)(n===Wk||n.isEmpty(),"priority of unexpected type.");(0,F.hu)(n===Wk||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let BV,jV,HV,u_=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,F.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),VV(this.priorityNode_)}static set __childrenNodeConstructor(t){BV=t}static get __childrenNodeConstructor(){return BV}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return on(t)?this:".priority"===sn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=sn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,F.hu)(".priority"!==i||1===mh(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Wn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+UV(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?rV(this.value_):this.value_,this.lazyHash_=X2(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,F.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(i);return(0,F.hu)(a>=0,"Unknown leaf type: "+r),(0,F.hu)(c>=0,"Unknown leaf type: "+i),a===c?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Jn=new class Dq extends VT{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?Op(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return ln.MIN}maxPost(){return new ln(wl,new u_("[PRIORITY-POST]",HV))}makePost(e,t){const r=jV(e);return new ln(t,new u_("[PRIORITY-POST]",r))}toString(){return".priority"}},Sq=Math.log(2);class Aq{constructor(e){this.count=parseInt(Math.log(e+1)/Sq,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const HT=function(n,e,t,r){n.sort(e);const i=function(g,y){const I=y-g;let S,R;if(0===I)return null;if(1===I)return S=n[g],R=t?t(S):S,new bu(R,S.node,bu.BLACK,null,null);{const L=parseInt(I/2,10)+g,G=i(g,L),le=i(L+1,y);return S=n[L],R=t?t(S):S,new bu(R,S.node,bu.BLACK,G,le)}},h=function(g){let y=null,I=null,S=n.length;const R=function(G,le){const de=S-G,Ge=S;S-=G;const at=i(de+1,Ge),nt=n[de],ut=t?t(nt):nt;L(new bu(ut,nt.node,le,null,at))},L=function(G){y?(y.left=G,y=G):(I=G,y=G)};for(let G=0;G<g.count;++G){const le=g.nextBitIsOne(),de=Math.pow(2,g.count-(G+1));le?R(de,bu.BLACK):(R(de,bu.BLACK),R(de,bu.RED))}return I}(new Aq(n.length));return new Qs(r||e,h)};let Zk;const l_={};class Fc{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,F.hu)(l_&&Jn,"ChildrenNode.ts has not been loaded"),Zk=Zk||new Fc({".priority":l_},{".priority":Jn}),Zk}get(e){const t=(0,F.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Qs?t:null}hasIndex(e){return(0,F.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,F.hu)(e!==El,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(ln.Wrap);let h,c=a.getNext();for(;c;)i=i||e.isDefinedOn(c.node),r.push(c),c=a.getNext();h=i?HT(r,e.getCompare()):l_;const g=e.toString(),y=Object.assign({},this.indexSet_);y[g]=e;const I=Object.assign({},this.indexes_);return I[g]=h,new Fc(I,y)}addToIndexes(e,t){const r=(0,F.UI)(this.indexes_,(i,a)=>{const c=(0,F.DV)(this.indexSet_,a);if((0,F.hu)(c,"Missing index implementation for "+a),i===l_){if(c.isDefinedOn(e.node)){const h=[],g=t.getIterator(ln.Wrap);let y=g.getNext();for(;y;)y.name!==e.name&&h.push(y),y=g.getNext();return h.push(e),HT(h,c.getCompare())}return l_}{const h=t.get(e.name);let g=i;return h&&(g=g.remove(new ln(e.name,h))),g.insert(e,e.node)}});return new Fc(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,F.UI)(this.indexes_,i=>{if(i===l_)return i;{const a=t.get(e.name);return a?i.remove(new ln(e.name,a)):i}});return new Fc(r,this.indexSet_)}}let pw,zt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&VV(this.priorityNode_),this.children_.isEmpty()&&(0,F.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return pw||(pw=new n(new Qs(qk),null,Fc.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||pw}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?pw:r}}getChild(t){const r=sn(t);return null===r?this:this.getImmediateChild(r).getChild(Wn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,F.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new ln(t,r);let a,c;r.isEmpty()?(a=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(i,this.children_));const h=a.isEmpty()?pw:this.priorityNode_;return new n(a,h,c)}}updateChild(t,r){const i=sn(t);if(null===i)return r;{(0,F.hu)(".priority"!==sn(t)||1===mh(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Wn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,c=!0;if(this.forEachChild(Jn,(h,g)=>{r[h]=g.val(t),i++,c&&n.INTEGER_REGEXP_.test(h)?a=Math.max(a,Number(h)):c=!1}),!t&&c&&a<2*i){const h=[];for(const g in r)h[g]=r[g];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+UV(this.getPriority().val())+":"),this.forEachChild(Jn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":X2(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const c=a.getPredecessorKey(new ln(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new ln(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new ln(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,ln.Wrap);let c=a.peek();for(;null!=c&&r.compare(c,t)<0;)a.getNext(),c=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,ln.Wrap);let c=a.peek();for(;null!=c&&r.compare(c,t)>0;)a.getNext(),c=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===gw?-1:0}withIndex(t){if(t===El||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===El||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Jn),a=r.getIterator(Jn);let c=i.getNext(),h=a.getNext();for(;c&&h;){if(c.name!==h.name||!c.node.equals(h.node))return!1;c=i.getNext(),h=a.getNext()}return null===c&&null===h}return!1}return!1}}resolveIndex_(t){return t===El?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const gw=new class xq extends zt{constructor(){super(new Qs(qk),zt.EMPTY_NODE,Fc.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return zt.EMPTY_NODE}isEmpty(){return!1}};function wr(n,e=null){if(null===n)return zt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,F.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new u_(n,wr(e));if(n instanceof Array){let t=zt.EMPTY_NODE;return Ii(n,(r,i)=>{if((0,F.r3)(n,r)&&"."!==r.substring(0,1)){const a=wr(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(wr(e))}{const t=[];let r=!1;if(Ii(n,(c,h)=>{if("."!==c.substring(0,1)){const g=wr(h);g.isEmpty()||(r=r||!g.getPriority().isEmpty(),t.push(new ln(c,g)))}}),0===t.length)return zt.EMPTY_NODE;const a=HT(t,Cq,c=>c.name,qk);if(r){const c=HT(t,Jn.getCompare());return new zt(a,wr(e),new Fc({".priority":c},{".priority":Jn}))}return new zt(a,wr(e),Fc.Default)}}Object.defineProperties(ln,{MIN:{value:new ln(Oc,zt.EMPTY_NODE)},MAX:{value:new ln(wl,gw)}}),LV.__EMPTY_NODE=zt.EMPTY_NODE,u_.__childrenNodeConstructor=zt,function bq(n){Wk=n}(gw),function Tq(n){HV=n}(gw),function Iq(n){jV=n}(wr);class zk extends VT{constructor(e){super(),this.indexPath_=e,(0,F.hu)(!on(e)&&".priority"!==sn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?Op(e.name,t.name):a}makePost(e,t){const r=wr(e),i=zt.EMPTY_NODE.updateChild(this.indexPath_,r);return new ln(t,i)}maxPost(){const e=zt.EMPTY_NODE.updateChild(this.indexPath_,gw);return new ln(wl,e)}toString(){return hw(this.indexPath_,0).join("/")}}const Kk=new class Rq extends VT{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Op(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return ln.MIN}maxPost(){return ln.MAX}makePost(e,t){const r=wr(e);return new ln(t,r)}toString(){return".value"}},c_="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",kq=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=c_.charAt(t%64),t=Math.floor(t/64);(0,F.hu)(0===t,"Cannot push at time == 0");let c=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)c+=c_.charAt(e[i]);return(0,F.hu)(20===c.length,"nextPushId: Length should be 20."),c}}(),qV=function(n){if(n===""+Pk)return"-";const e=OT(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let c=0;c<t.length;c++)t[c]=n.charAt(c);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return wl;const a=c_.charAt(c_.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},WV=function(n){if(n===""+iV)return Oc;const e=OT(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+Pk:(delete t[t.length-1],t.join("")):(t[t.length-1]=c_.charAt(c_.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function ZV(n){return{type:"value",snapshotNode:n}}function d_(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function mw(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function _w(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Qk{constructor(e){this.index_=e}updateChild(e,t,r,i,a,c){(0,F.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=c&&(r.isEmpty()?e.hasChild(t)?c.trackChildChange(mw(t,h)):(0,F.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?c.trackChildChange(d_(t,r)):c.trackChildChange(_w(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Jn,(i,a)=>{t.hasChild(i)||r.trackChildChange(mw(i,a))}),t.isLeafNode()||t.forEachChild(Jn,(i,a)=>{if(e.hasChild(i)){const c=e.getImmediateChild(i);c.equals(a)||r.trackChildChange(_w(i,a,c))}else r.trackChildChange(d_(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?zt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class yw{constructor(e){this.indexedFilter_=new Qk(e.getIndex()),this.index_=e.getIndex(),this.startPost_=yw.getStartPost_(e),this.endPost_=yw.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,c){return this.matches(new ln(t,r))||(r=zt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,c)}updateFullNode(e,t,r){t.isLeafNode()&&(t=zt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(zt.EMPTY_NODE);const a=this;return t.forEachChild(Jn,(c,h)=>{a.matches(new ln(c,h))||(i=i.updateImmediateChild(c,zt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class Pq{constructor(e){this.rangedFilter_=new yw(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,c){return this.rangedFilter_.matches(new ln(t,r))||(r=zt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,c):this.fullLimitUpdateChild_(e,t,r,a,c)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=zt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=zt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;a.hasNext()&&c<this.limit_;){const h=a.getNext();let g;if(g=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!g)break;i=i.updateImmediateChild(h.name,h.node),c++}}else{let a,c,h,g;if(i=t.withIndex(this.index_),i=i.updatePriority(zt.EMPTY_NODE),this.reverse_){g=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();const S=this.index_.getCompare();h=(R,L)=>S(L,R)}else g=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let y=0,I=!1;for(;g.hasNext();){const S=g.getNext();!I&&h(a,S)<=0&&(I=!0),I&&y<this.limit_&&h(S,c)<=0?y++:i=i.updateImmediateChild(S.name,zt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let c;if(this.reverse_){const S=this.index_.getCompare();c=(R,L)=>S(L,R)}else c=this.index_.getCompare();const h=e;(0,F.hu)(h.numChildren()===this.limit_,"");const g=new ln(t,r),y=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),I=this.rangedFilter_.matches(g);if(h.hasChild(t)){const S=h.getImmediateChild(t);let R=i.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=R&&(R.name===t||h.hasChild(R.name));)R=i.getChildAfterChild(this.index_,R,this.reverse_);const L=null==R?1:c(R,g);if(I&&!r.isEmpty()&&L>=0)return a?.trackChildChange(_w(t,r,S)),h.updateImmediateChild(t,r);{a?.trackChildChange(mw(t,S));const le=h.updateImmediateChild(t,zt.EMPTY_NODE);return null!=R&&this.rangedFilter_.matches(R)?(a?.trackChildChange(d_(R.name,R.node)),le.updateImmediateChild(R.name,R.node)):le}}return r.isEmpty()?e:I&&c(y,g)>=0?(null!=a&&(a.trackChildChange(mw(y.name,y.node)),a.trackChildChange(d_(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(y.name,zt.EMPTY_NODE)):e}}class $T{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Jn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,F.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,F.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Oc}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,F.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,F.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:wl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,F.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Jn}copy(){const e=new $T;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Jk(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function Xk(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function GT(n,e){const t=n.copy();return t.index_=e,t}function zV(n){const e={};if(n.isDefault())return e;let t;return n.index_===Jn?t="$priority":n.index_===Kk?t="$value":n.index_===El?t="$key":((0,F.hu)(n.index_ instanceof zk,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,F.Wl)(t),n.startSet_&&(e.startAt=(0,F.Wl)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,F.Wl)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,F.Wl)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,F.Wl)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function KV(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Jn&&(e.i=n.index_.toString()),e}class qT extends xV{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=uw("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,F.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const c=qT.getListenId_(e,r),h={};this.listens_[c]=h;const g=zV(e._queryParams);this.restRequest_(a+".json",g,(y,I)=>{let S=I;if(404===y&&(S=null,y=null),null===y&&this.onDataUpdate_(a,S,!1,r),(0,F.DV)(this.listens_,c)===h){let R;R=y?401===y?"permission_denied":"rest_error:"+y:"ok",i(R,null)}})}unlisten(e,t){const r=qT.getListenId_(e,t);delete this.listens_[r]}get(e){const t=zV(e._queryParams),r=e._path.toString(),i=new F.BH;return this.restRequest_(r+".json",t,(a,c)=>{let h=c;404===a&&(h=null,a=null),null===a?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,F.xO)(t);this.log_("Sending REST request for "+c);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+c+" received. status:",h.status,"response:",h.responseText);let g=null;if(h.status>=200&&h.status<300){try{g=(0,F.cI)(h.responseText)}catch{as("Failed to parse JSON response for "+c+": "+h.responseText)}r(null,g)}else 401!==h.status&&404!==h.status&&as("Got unsuccessful REST response for "+c+" Status: "+h.status),r(h.status);r=null}},h.open("GET",c,!0),h.send()})}}class Bq{constructor(){this.rootNode_=zt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function WT(){return{value:null,children:new Map}}function h_(n,e,t){if(on(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=sn(e);n.children.has(r)||n.children.set(r,WT()),h_(n.children.get(r),e=Wn(e),t)}}function eN(n,e){if(on(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Jn,(r,i)=>{h_(n,new Rn(r),i)}),eN(n,e)}}if(n.children.size>0){const t=sn(e);return e=Wn(e),n.children.has(t)&&eN(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function tN(n,e,t){null!==n.value?t(e,n.value):function jq(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{tN(i,new Rn(e.toString()+"/"+r),t)})}class Hq{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Ii(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class qq{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Hq(e);const r=1e4+2e4*Math.random();cw(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Ii(e,(i,a)=>{a>0&&(0,F.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),cw(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ta=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Ta||(Ta={})),Ta))();function iN(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class ZT{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Ta.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(on(this.path)){if(null!=this.affectedTree.value)return(0,F.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Rn(e));return new ZT(bn(),t,this.revert)}}return(0,F.hu)(sn(this.path)===e,"operationForChild called for unrelated child."),new ZT(Wn(this.path),this.affectedTree,this.revert)}}class vw{constructor(e,t){this.source=e,this.path=t,this.type=Ta.LISTEN_COMPLETE}operationForChild(e){return on(this.path)?new vw(this.source,bn()):new vw(this.source,Wn(this.path))}}class Up{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Ta.OVERWRITE}operationForChild(e){return on(this.path)?new Up(this.source,bn(),this.snap.getImmediateChild(e)):new Up(this.source,Wn(this.path),this.snap)}}class f_{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Ta.MERGE}operationForChild(e){if(on(this.path)){const t=this.children.subtree(new Rn(e));return t.isEmpty()?null:t.value?new Up(this.source,bn(),t.value):new f_(this.source,bn(),t)}return(0,F.hu)(sn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new f_(this.source,Wn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class _h{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(on(e))return this.isFullyInitialized()&&!this.filtered_;const t=sn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Wq{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function ww(n,e,t,r,i,a){const c=r.filter(h=>h.type===t);c.sort((h,g)=>function Kq(n,e,t){if(null==e.childName||null==t.childName)throw(0,F.g5)("Should only compare child_ events.");const r=new ln(e.childName,e.snapshotNode),i=new ln(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,g)),c.forEach(h=>{const g=function zq(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,a);i.forEach(y=>{y.respondsTo(h.type)&&e.push(y.createEvent(g,n.query_))})})}function zT(n,e){return{eventCache:n,serverCache:e}}function Ew(n,e,t,r){return zT(new _h(e,t,r),n.serverCache)}function QV(n,e,t,r){return zT(n.eventCache,new _h(e,t,r))}function KT(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Vp(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let sN;class Xn{constructor(e,t=(()=>(sN||(sN=new Qs(P6)),sN))()){this.value=e,this.children=t}static fromObject(e){let t=new Xn(null);return Ii(e,(r,i)=>{t=t.set(new Rn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:bn(),value:this.value};if(on(e))return null;{const r=sn(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Wn(e),t);return null!=a?{path:pr(new Rn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(on(e))return this;{const t=sn(e),r=this.children.get(t);return null!==r?r.subtree(Wn(e)):new Xn(null)}}set(e,t){if(on(e))return new Xn(t,this.children);{const r=sn(e),a=(this.children.get(r)||new Xn(null)).set(Wn(e),t),c=this.children.insert(r,a);return new Xn(this.value,c)}}remove(e){if(on(e))return this.children.isEmpty()?new Xn(null):new Xn(null,this.children);{const t=sn(e),r=this.children.get(t);if(r){const i=r.remove(Wn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new Xn(null):new Xn(this.value,a)}return this}}get(e){if(on(e))return this.value;{const t=sn(e),r=this.children.get(t);return r?r.get(Wn(e)):null}}setTree(e,t){if(on(e))return t;{const r=sn(e),a=(this.children.get(r)||new Xn(null)).setTree(Wn(e),t);let c;return c=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new Xn(this.value,c)}}fold(e){return this.fold_(bn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(pr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,bn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(on(e))return null;{const a=sn(e),c=this.children.get(a);return c?c.findOnPath_(Wn(e),pr(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,bn(),t)}foreachOnPath_(e,t,r){if(on(e))return this;{this.value&&r(t,this.value);const i=sn(e),a=this.children.get(i);return a?a.foreachOnPath_(Wn(e),pr(t,i),r):new Xn(null)}}foreach(e){this.foreach_(bn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(pr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Iu{constructor(e){this.writeTree_=e}static empty(){return new Iu(new Xn(null))}}function Cw(n,e,t){if(on(e))return new Iu(new Xn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const c=ks(i,e);return a=a.updateChild(c,t),new Iu(n.writeTree_.set(i,a))}{const i=new Xn(t),a=n.writeTree_.setTree(e,i);return new Iu(a)}}}function oN(n,e,t){let r=n;return Ii(t,(i,a)=>{r=Cw(r,pr(e,i),a)}),r}function JV(n,e){if(on(e))return Iu.empty();{const t=n.writeTree_.setTree(e,new Xn(null));return new Iu(t)}}function aN(n,e){return null!=Bp(n,e)}function Bp(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(ks(t.path,e)):null}function XV(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Jn,(r,i)=>{e.push(new ln(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new ln(r,i.value))}),e}function yh(n,e){if(on(e))return n;{const t=Bp(n,e);return new Iu(null!=t?new Xn(t):n.writeTree_.subtree(e))}}function uN(n){return n.writeTree_.isEmpty()}function p_(n,e){return eB(bn(),n.writeTree_,e)}function eB(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,F.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=eB(pr(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(pr(n,".priority"),r)),t}}function YT(n,e){return sB(e,n)}function tW(n,e){if(n.snap)return Ia(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Ia(pr(n.path,t),e))return!0;return!1}function rW(n){return n.visible}function tB(n,e,t){let r=Iu.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const c=a.path;let h;if(a.snap)Ia(t,c)?(h=ks(t,c),r=Cw(r,h,a.snap)):Ia(c,t)&&(h=ks(c,t),r=Cw(r,bn(),a.snap.getChild(h)));else{if(!a.children)throw(0,F.g5)("WriteRecord should have .snap or .children");if(Ia(t,c))h=ks(t,c),r=oN(r,h,a.children);else if(Ia(c,t))if(h=ks(c,t),on(h))r=oN(r,bn(),a.children);else{const g=(0,F.DV)(a.children,sn(h));if(g){const y=g.getChild(Wn(h));r=Cw(r,bn(),y)}}}}}return r}function nB(n,e,t,r,i){if(r||i){const a=yh(n.visibleWrites,e);return!i&&uN(a)?t:i||null!=t||aN(a,bn())?p_(tB(n.allWrites,function(y){return(y.visible||i)&&(!r||!~r.indexOf(y.writeId))&&(Ia(y.path,e)||Ia(e,y.path))},e),t||zt.EMPTY_NODE):null}{const a=Bp(n.visibleWrites,e);if(null!=a)return a;{const c=yh(n.visibleWrites,e);return uN(c)?t:null!=t||aN(c,bn())?p_(c,t||zt.EMPTY_NODE):null}}}function QT(n,e,t,r){return nB(n.writeTree,n.treePath,e,t,r)}function lN(n,e){return function iW(n,e,t){let r=zt.EMPTY_NODE;const i=Bp(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Jn,(a,c)=>{r=r.updateImmediateChild(a,c)}),r;if(t){const a=yh(n.visibleWrites,e);return t.forEachChild(Jn,(c,h)=>{const g=p_(yh(a,new Rn(c)),h);r=r.updateImmediateChild(c,g)}),XV(a).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return XV(yh(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function rB(n,e,t,r){return function sW(n,e,t,r,i){(0,F.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=pr(e,t);if(aN(n.visibleWrites,a))return null;{const c=yh(n.visibleWrites,a);return uN(c)?i.getChild(t):p_(c,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function JT(n,e){return function aW(n,e){return Bp(n.visibleWrites,e)}(n.writeTree,pr(n.treePath,e))}function cN(n,e,t){return function oW(n,e,t,r){const i=pr(e,t),a=Bp(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?p_(yh(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function iB(n,e){return sB(pr(n.treePath,e),n.writeTree)}function sB(n,e){return{treePath:n,writeTree:e}}class dW{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,F.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,F.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,_w(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,mw(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,d_(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,F.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,_w(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const oB=new class hW{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class dN{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new _h(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return cN(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Vp(this.viewCache_),a=function cW(n,e,t,r,i,a){return function uW(n,e,t,r,i,a,c){let h;const g=yh(n.visibleWrites,e),y=Bp(g,bn());if(null!=y)h=y;else{if(null==t)return[];h=p_(g,t)}if(h=h.withIndex(c),h.isEmpty()||h.isLeafNode())return[];{const I=[],S=c.getCompare(),R=a?h.getReverseIteratorFrom(r,c):h.getIteratorFrom(r,c);let L=R.getNext();for(;L&&I.length<i;)0!==S(L,r)&&I.push(L),L=R.getNext();return I}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function aB(n,e,t,r,i,a){const c=e.eventCache;if(null!=JT(r,t))return e;{let h,g;if(on(t))if((0,F.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=Vp(e),S=lN(r,y instanceof zt?y:zt.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),S,a)}else{const y=QT(r,Vp(e));h=n.filter.updateFullNode(e.eventCache.getNode(),y,a)}else{const y=sn(t);if(".priority"===y){(0,F.hu)(1===mh(t),"Can't have a priority with additional path components");const I=c.getNode();g=e.serverCache.getNode();const S=rB(r,t,I,g);h=null!=S?n.filter.updatePriority(I,S):c.getNode()}else{const I=Wn(t);let S;if(c.isCompleteForChild(y)){g=e.serverCache.getNode();const R=rB(r,t,c.getNode(),g);S=null!=R?c.getNode().getImmediateChild(y).updateChild(I,R):c.getNode().getImmediateChild(y)}else S=cN(r,y,e.serverCache);h=null!=S?n.filter.updateChild(c.getNode(),y,S,I,i,a):c.getNode()}}return Ew(e,h,c.isFullyInitialized()||on(t),n.filter.filtersNodes())}}function XT(n,e,t,r,i,a,c,h){const g=e.serverCache;let y;const I=c?n.filter:n.filter.getIndexedFilter();if(on(t))y=I.updateFullNode(g.getNode(),r,null);else if(I.filtersNodes()&&!g.isFiltered()){const L=g.getNode().updateChild(t,r);y=I.updateFullNode(g.getNode(),L,null)}else{const L=sn(t);if(!g.isCompleteForPath(t)&&mh(t)>1)return e;const G=Wn(t),de=g.getNode().getImmediateChild(L).updateChild(G,r);y=".priority"===L?I.updatePriority(g.getNode(),de):I.updateChild(g.getNode(),L,de,G,oB,null)}const S=QV(e,y,g.isFullyInitialized()||on(t),I.filtersNodes());return aB(n,S,t,i,new dN(i,S,a),h)}function hN(n,e,t,r,i,a,c){const h=e.eventCache;let g,y;const I=new dN(i,e,a);if(on(t))y=n.filter.updateFullNode(e.eventCache.getNode(),r,c),g=Ew(e,y,!0,n.filter.filtersNodes());else{const S=sn(t);if(".priority"===S)y=n.filter.updatePriority(e.eventCache.getNode(),r),g=Ew(e,y,h.isFullyInitialized(),h.isFiltered());else{const R=Wn(t),L=h.getNode().getImmediateChild(S);let G;if(on(R))G=r;else{const le=I.getCompleteChild(S);G=null!=le?".priority"===Hk(R)&&le.getChild(NV(R)).isEmpty()?le:le.updateChild(R,r):zt.EMPTY_NODE}g=L.equals(G)?e:Ew(e,n.filter.updateChild(h.getNode(),S,G,R,I,c),h.isFullyInitialized(),n.filter.filtersNodes())}}return g}function uB(n,e){return n.eventCache.isCompleteForChild(e)}function lB(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function fN(n,e,t,r,i,a,c,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,g=e;y=on(t)?r:new Xn(null).setTree(t,r);const I=e.serverCache.getNode();return y.children.inorderTraversal((S,R)=>{if(I.hasChild(S)){const G=lB(0,e.serverCache.getNode().getImmediateChild(S),R);g=XT(n,g,new Rn(S),G,i,a,c,h)}}),y.children.inorderTraversal((S,R)=>{const L=!e.serverCache.isCompleteForChild(S)&&null===R.value;if(!I.hasChild(S)&&!L){const le=lB(0,e.serverCache.getNode().getImmediateChild(S),R);g=XT(n,g,new Rn(S),le,i,a,c,h)}}),g}class EW{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Qk(r.getIndex()),a=function Oq(n){return n.loadsAllData()?new Qk(n.getIndex()):n.hasLimit()?new Pq(n):new yw(n)}(r);this.processor_=function fW(n){return{filter:n}}(a);const c=t.serverCache,h=t.eventCache,g=i.updateFullNode(zt.EMPTY_NODE,c.getNode(),null),y=a.updateFullNode(zt.EMPTY_NODE,h.getNode(),null),I=new _h(g,c.isFullyInitialized(),i.filtersNodes()),S=new _h(y,h.isFullyInitialized(),a.filtersNodes());this.viewCache_=zT(S,I),this.eventGenerator_=new Wq(this.query_)}get query(){return this.query_}}function IW(n,e){const t=Vp(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!on(e)&&!t.getImmediateChild(sn(e)).isEmpty())?t.getChild(e):null}function cB(n){return 0===n.eventRegistrations_.length}function dB(n,e,t){const r=[];if(t){(0,F.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const c=a.createCancelEvent(t,i);c&&r.push(c)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const c=n.eventRegistrations_[a];if(c.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(c)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function hB(n,e,t,r){e.type===Ta.MERGE&&null!==e.source.queryId&&((0,F.hu)(Vp(n.viewCache_),"We should always have a full cache before handling merges"),(0,F.hu)(KT(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function gW(n,e,t,r,i){const a=new dW;let c,h;if(t.type===Ta.OVERWRITE){const y=t;y.source.fromUser?c=hN(n,e,y.path,y.snap,r,i,a):((0,F.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered()&&!on(y.path),c=XT(n,e,y.path,y.snap,r,i,h,a))}else if(t.type===Ta.MERGE){const y=t;y.source.fromUser?c=function _W(n,e,t,r,i,a,c){let h=e;return r.foreach((g,y)=>{const I=pr(t,g);uB(e,sn(I))&&(h=hN(n,h,I,y,i,a,c))}),r.foreach((g,y)=>{const I=pr(t,g);uB(e,sn(I))||(h=hN(n,h,I,y,i,a,c))}),h}(n,e,y.path,y.children,r,i,a):((0,F.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered(),c=fN(n,e,y.path,y.children,r,i,h,a))}else if(t.type===Ta.ACK_USER_WRITE){const y=t;c=y.revert?function wW(n,e,t,r,i,a){let c;if(null!=JT(r,t))return e;{const h=new dN(r,e,i),g=e.eventCache.getNode();let y;if(on(t)||".priority"===sn(t)){let I;if(e.serverCache.isFullyInitialized())I=QT(r,Vp(e));else{const S=e.serverCache.getNode();(0,F.hu)(S instanceof zt,"serverChildren would be complete if leaf node"),I=lN(r,S)}y=n.filter.updateFullNode(g,I,a)}else{const I=sn(t);let S=cN(r,I,e.serverCache);null==S&&e.serverCache.isCompleteForChild(I)&&(S=g.getImmediateChild(I)),y=null!=S?n.filter.updateChild(g,I,S,Wn(t),h,a):e.eventCache.getNode().hasChild(I)?n.filter.updateChild(g,I,zt.EMPTY_NODE,Wn(t),h,a):g,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=QT(r,Vp(e)),c.isLeafNode()&&(y=n.filter.updateFullNode(y,c,a)))}return c=e.serverCache.isFullyInitialized()||null!=JT(r,bn()),Ew(e,y,c,n.filter.filtersNodes())}}(n,e,y.path,r,i,a):function yW(n,e,t,r,i,a,c){if(null!=JT(i,t))return e;const h=e.serverCache.isFiltered(),g=e.serverCache;if(null!=r.value){if(on(t)&&g.isFullyInitialized()||g.isCompleteForPath(t))return XT(n,e,t,g.getNode().getChild(t),i,a,h,c);if(on(t)){let y=new Xn(null);return g.getNode().forEachChild(El,(I,S)=>{y=y.set(new Rn(I),S)}),fN(n,e,t,y,i,a,h,c)}return e}{let y=new Xn(null);return r.foreach((I,S)=>{const R=pr(t,I);g.isCompleteForPath(R)&&(y=y.set(I,g.getNode().getChild(R)))}),fN(n,e,t,y,i,a,h,c)}}(n,e,y.path,y.affectedTree,r,i,a)}else{if(t.type!==Ta.LISTEN_COMPLETE)throw(0,F.g5)("Unknown operation type: "+t.type);c=function vW(n,e,t,r,i){const a=e.serverCache;return aB(n,QV(e,a.getNode(),a.isFullyInitialized()||on(t),a.isFiltered()),t,r,oB,i)}(n,e,t.path,r,a)}const g=a.getChanges();return function mW(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=KT(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(ZV(KT(e)))}}(e,c,g),{viewCache:c,changes:g}}(n.processor_,i,e,t,r);return function pW(n,e){(0,F.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,F.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,F.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,fB(n,a.changes,a.viewCache.eventCache.getNode(),null)}function fB(n,e,t,r){return function Zq(n,e,t,r){const i=[],a=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&a.push(function Nq(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),ww(n,i,"child_removed",e,r,t),ww(n,i,"child_added",e,r,t),ww(n,i,"child_moved",a,r,t),ww(n,i,"child_changed",e,r,t),ww(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let eD,nD;class pB{constructor(){this.views=new Map}}function pN(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,F.hu)(null!=a,"SyncTree gave us an op for an invalid query."),hB(a,e,t,r)}{let a=[];for(const c of n.views.values())a=a.concat(hB(c,e,t,r));return a}}function gB(n,e,t,r,i){const c=n.views.get(e._queryIdentifier);if(!c){let h=QT(t,i?r:null),g=!1;h?g=!0:r instanceof zt?(h=lN(t,r),g=!1):(h=zt.EMPTY_NODE,g=!1);const y=zT(new _h(h,g,!1),new _h(r,i,!1));return new EW(e,y)}return c}function mB(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function vh(n,e){let t=null;for(const r of n.views.values())t=t||IW(r,e);return t}function _B(n,e){return e._queryParams.loadsAllData()?tD(n):n.views.get(e._queryIdentifier)}function yB(n,e){return null!=_B(n,e)}function wh(n){return null!=tD(n)}function tD(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let PW=1;class vB{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Xn(null),this.pendingWriteTree_=function lW(){return{visibleWrites:Iu.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function gN(n,e,t,r,i){return function Qq(n,e,t,r,i){(0,F.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Cw(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?g_(n,new Up({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Eh(n,e,t=!1){const r=function Xq(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function eW(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,F.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,c=n.allWrites.length-1;for(;i&&c>=0;){const h=n.allWrites[c];h.visible&&(c>=t&&tW(h,r.path)?i=!1:Ia(r.path,h.path)&&(a=!0)),c--}return!!i&&(a?(function nW(n){n.visibleWrites=tB(n.allWrites,rW,bn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=JV(n.visibleWrites,r.path):Ii(r.children,g=>{n.visibleWrites=JV(n.visibleWrites,pr(r.path,g))}),!0))}(n.pendingWriteTree_,e)){let a=new Xn(null);return null!=r.snap?a=a.set(bn(),!0):Ii(r.children,c=>{a=a.set(new Rn(c),!0)}),g_(n,new ZT(r.path,a,t))}return[]}function bw(n,e,t){return g_(n,new Up({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function rD(n,e,t,r,i=!1){const a=e._path,c=n.syncPointTree_.get(a);let h=[];if(c&&("default"===e._queryIdentifier||yB(c,e))){const g=function RW(n,e,t,r){const i=e._queryIdentifier,a=[];let c=[];const h=wh(n);if("default"===i)for(const[g,y]of n.views.entries())c=c.concat(dB(y,t,r)),cB(y)&&(n.views.delete(g),y.query._queryParams.loadsAllData()||a.push(y.query));else{const g=n.views.get(i);g&&(c=c.concat(dB(g,t,r)),cB(g)&&(n.views.delete(i),g.query._queryParams.loadsAllData()||a.push(g.query)))}return h&&!wh(n)&&a.push(new(function AW(){return(0,F.hu)(eD,"Reference.ts has not been loaded"),eD}())(e._repo,e._path)),{removed:a,events:c}}(c,e,t,r);(function xW(n){return 0===n.views.size})(c)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const y=g.removed;if(h=g.events,!i){const I=-1!==y.findIndex(R=>R._queryParams.loadsAllData()),S=n.syncPointTree_.findOnPath(a,(R,L)=>wh(L));if(I&&!S){const R=n.syncPointTree_.subtree(a);if(!R.isEmpty()){const L=function jW(n){return n.fold((e,t,r)=>{if(t&&wh(t))return[tD(t)];{let i=[];return t&&(i=mB(t)),Ii(r,(a,c)=>{i=i.concat(c)}),i}})}(R);for(let G=0;G<L.length;++G){const le=L[G],de=le.query,Ge=bB(n,le);n.listenProvider_.startListening(Tw(de),Iw(n,de),Ge.hashFn,Ge.onComplete)}}}!S&&y.length>0&&!r&&(I?n.listenProvider_.stopListening(Tw(e),null):y.forEach(R=>{const L=n.queryToTagMap.get(sD(R));n.listenProvider_.stopListening(Tw(R),L)}))}!function HW(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=sD(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,y)}return h}function wB(n,e,t,r){const i=_N(n,r);if(null!=i){const a=yN(i),c=a.path,h=a.queryId,g=ks(c,e);return vN(n,c,new Up(iN(h),g,t))}return[]}function mN(n,e,t,r=!1){const i=e._path;let a=null,c=!1;n.syncPointTree_.foreachOnPath(i,(R,L)=>{const G=ks(R,i);a=a||vh(L,G),c=c||wh(L)});let g,h=n.syncPointTree_.get(i);h?(c=c||wh(h),a=a||vh(h,bn())):(h=new pB,n.syncPointTree_=n.syncPointTree_.set(i,h)),null!=a?g=!0:(g=!1,a=zt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((L,G)=>{const le=vh(G,bn());le&&(a=a.updateImmediateChild(L,le))}));const y=yB(h,e);if(!y&&!e._queryParams.loadsAllData()){const R=sD(e);(0,F.hu)(!n.queryToTagMap.has(R),"View does not exist, but we have a tag");const L=function $W(){return PW++}();n.queryToTagMap.set(R,L),n.tagToQueryMap.set(L,R)}let S=function MW(n,e,t,r,i,a){const c=gB(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),function TW(n,e){n.eventRegistrations_.push(e)}(c,t),function DW(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Jn,(a,c)=>{r.push(d_(a,c))}),t.isFullyInitialized()&&r.push(ZV(t.getNode())),fB(n,r,t.getNode(),e)}(c,t)}(h,e,t,YT(n.pendingWriteTree_,i),a,g);if(!y&&!c&&!r){const R=_B(h,e);S=S.concat(function GW(n,e,t){const r=e._path,i=Iw(n,e),a=bB(n,t),c=n.listenProvider_.startListening(Tw(e),i,a.hashFn,a.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,F.hu)(!wh(h.value),"If we're adding a query, it shouldn't be shadowed");else{const g=h.fold((y,I,S)=>{if(!on(y)&&I&&wh(I))return[tD(I).query];{let R=[];return I&&(R=R.concat(mB(I).map(L=>L.query))),Ii(S,(L,G)=>{R=R.concat(G)}),R}});for(let y=0;y<g.length;++y){const I=g[y];n.listenProvider_.stopListening(Tw(I),Iw(n,I))}}return c}(n,e,R))}return S}function iD(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(c,h)=>{const y=vh(h,ks(c,e));if(y)return y});return nB(i,e,a,t,!0)}function g_(n,e){return EB(e,n.syncPointTree_,null,YT(n.pendingWriteTree_,bn()))}function EB(n,e,t,r){if(on(n.path))return CB(n,e,t,r);{const i=e.get(bn());null==t&&null!=i&&(t=vh(i,bn()));let a=[];const c=sn(n.path),h=n.operationForChild(c),g=e.children.get(c);if(g&&h){const y=t?t.getImmediateChild(c):null,I=iB(r,c);a=a.concat(EB(h,g,y,I))}return i&&(a=a.concat(pN(i,n,r,t))),a}}function CB(n,e,t,r){const i=e.get(bn());null==t&&null!=i&&(t=vh(i,bn()));let a=[];return e.children.inorderTraversal((c,h)=>{const g=t?t.getImmediateChild(c):null,y=iB(r,c),I=n.operationForChild(c);I&&(a=a.concat(CB(I,h,g,y)))}),i&&(a=a.concat(pN(i,n,r,t))),a}function bB(n,e){const t=e.query,r=Iw(n,t);return{hashFn:()=>(function CW(n){return n.viewCache_.serverCache.getNode()}(e)||zt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function UW(n,e,t){const r=_N(n,t);if(r){const i=yN(r),a=i.path,c=i.queryId,h=ks(a,e);return vN(n,a,new vw(iN(c),h))}return[]}(n,t._path,r):function LW(n,e){return g_(n,new vw({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function L6(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return rD(n,t,null,a)}}}}function Iw(n,e){const t=sD(e);return n.queryToTagMap.get(t)}function sD(n){return n._path.toString()+"$"+n._queryIdentifier}function _N(n,e){return n.tagToQueryMap.get(e)}function yN(n){const e=n.indexOf("$");return(0,F.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Rn(n.substr(0,e))}}function vN(n,e,t){const r=n.syncPointTree_.get(e);return(0,F.hu)(r,"Missing sync point for query tag that we're tracking"),pN(r,t,YT(n.pendingWriteTree_,e),null)}function Tw(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function NW(){return(0,F.hu)(nD,"Reference.ts has not been loaded"),nD}())(n._repo,n._path):n}class wN{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new wN(t)}node(){return this.node_}}class EN{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=pr(this.path_,e);return new EN(this.syncTree_,t)}node(){return iD(this.syncTree_,this.path_)}}const IB=function(n,e,t){return n&&"object"==typeof n?((0,F.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?WW(n[".sv"],e,t):"object"==typeof n[".sv"]?ZW(n[".sv"],e):void(0,F.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},WW=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,F.hu)(!1,"Unexpected server value: "+n)},ZW=function(n,e,t){n.hasOwnProperty("increment")||(0,F.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,F.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,F.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const c=i.getValue();return"number"!=typeof c?r:c+r},TB=function(n,e,t,r){return bN(e,new EN(t,n),r)},CN=function(n,e,t){return bN(n,new wN(e),t)};function bN(n,e,t){const r=n.getPriority().val(),i=IB(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const c=n,h=IB(c.getValue(),e,t);return h!==c.getValue()||i!==c.getPriority().val()?new u_(h,wr(i)):n}{const c=n;return a=c,i!==c.getPriority().val()&&(a=a.updatePriority(new u_(i))),c.forEachChild(Jn,(h,g)=>{const y=bN(g,e.getImmediateChild(h),t);y!==g&&(a=a.updateImmediateChild(h,y))}),a}}class IN{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function oD(n,e){let t=e instanceof Rn?e:new Rn(e),r=n,i=sn(t);for(;null!==i;){const a=(0,F.DV)(r.node.children,i)||{children:{},childCount:0};r=new IN(i,r,a),t=Wn(t),i=sn(t)}return r}function jp(n){return n.node.value}function TN(n,e){n.node.value=e,DN(n)}function DB(n){return n.node.childCount>0}function aD(n,e){Ii(n.node.children,(t,r)=>{e(new IN(t,n,r))})}function SB(n,e,t,r){t&&!r&&e(n),aD(n,i=>{SB(i,e,!0,r)}),t&&r&&e(n)}function Dw(n){return new Rn(null===n.parent?n.name:Dw(n.parent)+"/"+n.name)}function DN(n){null!==n.parent&&function YW(n,e,t){const r=function zW(n){return void 0===jp(n)&&!DB(n)}(t),i=(0,F.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,DN(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,DN(n))}(n.parent,n.name,n)}const QW=/[\[\].#$\/\u0000-\u001F\u007F]/,JW=/[\[\].#$\u0000-\u001F\u007F]/,SN=10485760,uD=function(n){return"string"==typeof n&&0!==n.length&&!QW.test(n)},AB=function(n){return"string"==typeof n&&0!==n.length&&!JW.test(n)},Sw=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!PT(n)||n&&"object"==typeof n&&(0,F.r3)(n,".sv")},Cl=function(n,e,t,r){r&&void 0===e||Aw((0,F.gK)(n,"value"),e,t)},Aw=function(n,e,t){const r=t instanceof Rn?new pq(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Fp(r));if("function"==typeof e)throw new Error(n+"contains a function "+Fp(r)+" with contents = "+e.toString());if(PT(e))throw new Error(n+"contains "+e.toString()+" "+Fp(r));if("string"==typeof e&&e.length>SN/3&&(0,F.ug)(e)>SN)throw new Error(n+"contains a string greater than "+SN+" utf8 bytes "+Fp(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Ii(e,(c,h)=>{if(".value"===c)i=!0;else if(".priority"!==c&&".sv"!==c&&(a=!0,!uD(c)))throw new Error(n+" contains an invalid key ("+c+") "+Fp(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function gq(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,F.ug)(e),PV(n)})(r,c),Aw(n,h,r),function mq(n){const e=n.parts_.pop();n.byteLength_-=(0,F.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+Fp(r)+" in addition to actual children.")}},xB=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,F.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];Ii(e,(c,h)=>{const g=new Rn(c);if(Aw(i,h,pr(t,g)),".priority"===Hk(g)&&!Sw(h))throw new Error(i+"contains an invalid value for '"+g.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(g)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=hw(r);for(let c=0;c<a.length;c++)if((".priority"!==a[c]||c!==a.length-1)&&!uD(a[c]))throw new Error(n+"contains an invalid key ("+a[c]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(fq);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Ia(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},AN=function(n,e,t){if(!t||void 0!==e){if(PT(e))throw new Error((0,F.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Sw(e))throw new Error((0,F.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},xw=function(n,e,t,r){if(!(r&&void 0===t||uD(t)))throw new Error((0,F.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Mw=function(n,e,t,r){if(!(r&&void 0===t||AB(t)))throw new Error((0,F.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Da=function(n,e){if(".info"===sn(e))throw new Error(n+" failed = Can't modify data under /.info/")},MB=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!uD(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),AB(n)}(t))throw new Error((0,F.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class nZ{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function lD(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!$k(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function RB(n,e,t){lD(n,t),kB(n,r=>$k(r,e))}function Fo(n,e,t){lD(n,t),kB(n,r=>Ia(r,e)||Ia(e,r))}function kB(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(rZ(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function rZ(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Pp&&bi("event: "+t.toString()),o_(r)}}}const NB="repo_interrupt";class sZ{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new nZ,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=WT(),this.transactionQueueTree_=new IN,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function PB(n){const t=n.infoData_.getNode(new Rn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Rw(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:PB(n)})}function OB(n,e,t,r,i){n.dataUpdateCount++;const a=new Rn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(i)if(r){const g=(0,F.UI)(t,y=>wr(y));c=function VW(n,e,t,r){const i=_N(n,r);if(i){const a=yN(i),c=a.path,h=a.queryId,g=ks(c,e),y=Xn.fromObject(t);return vN(n,c,new f_(iN(h),g,y))}return[]}(n.serverSyncTree_,a,g,i)}else{const g=wr(t);c=wB(n.serverSyncTree_,a,g,i)}else if(r){const g=(0,F.UI)(t,y=>wr(y));c=function FW(n,e,t){const r=Xn.fromObject(t);return g_(n,new f_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,g)}else{const g=wr(t);c=bw(n.serverSyncTree_,a,g)}let h=a;c.length>0&&(h=__(n,a)),Fo(n.eventQueue_,h,c)}function FB(n,e){xN(n,"connected",e),!1===e&&function cZ(n){m_(n,"onDisconnectEvents");const e=Rw(n),t=WT();tN(n.onDisconnect_,bn(),(i,a)=>{const c=TB(i,a,n.serverSyncTree_,e);h_(t,i,c)});let r=[];tN(t,bn(),(i,a)=>{r=r.concat(bw(n.serverSyncTree_,i,a));const c=NN(n,i);__(n,c)}),n.onDisconnect_=WT(),Fo(n.eventQueue_,bn(),r)}(n)}function xN(n,e,t){const r=new Rn("/.info/"+e),i=wr(t);n.infoData_.updateSnapshot(r,i);const a=bw(n.infoSyncTree_,r,i);Fo(n.eventQueue_,r,a)}function cD(n){return n.nextWriteId_++}function MN(n,e,t,r,i){m_(n,"set",{path:e.toString(),value:t,priority:r});const a=Rw(n),c=wr(t,r),h=iD(n.serverSyncTree_,e),g=CN(c,h,a),y=cD(n),I=gN(n.serverSyncTree_,e,g,y,!0);lD(n.eventQueue_,I),n.server_.put(e.toString(),c.val(!0),(R,L)=>{const G="ok"===R;G||as("set at "+e+" failed: "+R);const le=Eh(n.serverSyncTree_,y,!G);Fo(n.eventQueue_,e,le),Ch(0,i,R,L)});const S=NN(n,e);__(n,S),Fo(n.eventQueue_,S,[])}function dZ(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&eN(n.onDisconnect_,e),Ch(0,t,r,i)})}function LB(n,e,t,r){const i=wr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,c)=>{"ok"===a&&h_(n.onDisconnect_,e,i),Ch(0,r,a,c)})}function RN(n,e,t){let r;r=".info"===sn(e._path)?rD(n.infoSyncTree_,e,t):rD(n.serverSyncTree_,e,t),RB(n.eventQueue_,e._path,r)}function UB(n){n.persistentConnection_&&n.persistentConnection_.interrupt(NB)}function m_(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),bi(t,...e)}function Ch(n,e,t,r){e&&o_(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const c=new Error(a);c.code=i,e(c)}})}function kN(n,e,t){return iD(n.serverSyncTree_,e,t)||zt.EMPTY_NODE}function dD(n,e=n.transactionQueueTree_){if(e||hD(n,e),jp(e)){const t=BB(n,e);(0,F.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function _Z(n,e,t){const r=t.map(y=>y.currentWriteId),i=kN(n,e,r);let a=i;const c=i.hash();for(let y=0;y<t.length;y++){const I=t[y];(0,F.hu)(0===I.status,"tryToSendTransactionQueue_: items in queue should all be run."),I.status=1,I.retryCount++;const S=ks(e,I.path);a=a.updateChild(S,I.currentOutputSnapshotRaw)}const h=a.val(!0),g=e;n.server_.put(g.toString(),h,y=>{m_(n,"transaction put response",{path:g.toString(),status:y});let I=[];if("ok"===y){const S=[];for(let R=0;R<t.length;R++)t[R].status=2,I=I.concat(Eh(n.serverSyncTree_,t[R].currentWriteId)),t[R].onComplete&&S.push(()=>t[R].onComplete(null,!0,t[R].currentOutputSnapshotResolved)),t[R].unwatcher();hD(n,oD(n.transactionQueueTree_,e)),dD(n,n.transactionQueueTree_),Fo(n.eventQueue_,e,I);for(let R=0;R<S.length;R++)o_(S[R])}else{if("datastale"===y)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{as("transaction at "+g.toString()+" failed: "+y);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=y}__(n,e)}},c)}(n,Dw(e),t)}else DB(e)&&aD(e,t=>{dD(n,t)})}function __(n,e){const t=VB(n,e),r=Dw(t);return function yZ(n,e,t){if(0===e.length)return;const r=[];let i=[];const c=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const g=e[h],y=ks(t,g.path);let S,I=!1;if((0,F.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===g.status)I=!0,S=g.abortReason,i=i.concat(Eh(n.serverSyncTree_,g.currentWriteId,!0));else if(0===g.status)if(g.retryCount>=25)I=!0,S="maxretry",i=i.concat(Eh(n.serverSyncTree_,g.currentWriteId,!0));else{const R=kN(n,g.path,c);g.currentInputSnapshot=R;const L=e[h].update(R.val());if(void 0!==L){Aw("transaction failed: Data returned ",L,g.path);let G=wr(L);"object"==typeof L&&null!=L&&(0,F.r3)(L,".priority")||(G=G.updatePriority(R.getPriority()));const de=g.currentWriteId,Ge=Rw(n),at=CN(G,R,Ge);g.currentOutputSnapshotRaw=G,g.currentOutputSnapshotResolved=at,g.currentWriteId=cD(n),c.splice(c.indexOf(de),1),i=i.concat(gN(n.serverSyncTree_,g.path,at,g.currentWriteId,g.applyLocally)),i=i.concat(Eh(n.serverSyncTree_,de,!0))}else I=!0,S="nodata",i=i.concat(Eh(n.serverSyncTree_,g.currentWriteId,!0))}Fo(n.eventQueue_,t,i),i=[],I&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===S?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(S),!1,null)))}hD(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)o_(r[h]);dD(n,n.transactionQueueTree_)}(n,BB(n,t),r),r}function VB(n,e){let t,r=n.transactionQueueTree_;for(t=sn(e);null!==t&&void 0===jp(r);)r=oD(r,t),t=sn(e=Wn(e));return r}function BB(n,e){const t=[];return jB(n,e,t),t.sort((r,i)=>r.order-i.order),t}function jB(n,e,t){const r=jp(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);aD(e,i=>{jB(n,i,t)})}function hD(n,e){const t=jp(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,TN(e,t.length>0?t:void 0)}aD(e,r=>{hD(n,r)})}function NN(n,e){const t=Dw(VB(n,e)),r=oD(n.transactionQueueTree_,e);return function KW(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{PN(n,i)}),PN(n,r),SB(r,i=>{PN(n,i)}),t}function PN(n,e){const t=jp(e);if(t){const r=[];let i=[],a=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,F.hu)(a===c-1,"All SENT items should be at beginning of queue."),a=c,t[c].status=3,t[c].abortReason="set"):((0,F.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),i=i.concat(Eh(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===a?TN(e,void 0):t.length=a+1,Fo(n.eventQueue_,Dw(e),i);for(let c=0;c<r.length;c++)o_(r[c])}}const ON=function(n,e){const t=EZ(n),r=t.namespace;return"firebase.com"===t.domain&&vl(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&vl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&as("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Fk(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Rn(t.pathString)}},EZ=function(n){let e="",t="",r="",i="",a="",c=!0,h="https",g=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(h=n.substring(0,y-1),n=n.substring(y+2));let I=n.indexOf("/");-1===I&&(I=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(I,S)),I<S&&(i=function vZ(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(I,S)));const R=function wZ(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):as(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));y=e.indexOf(":"),y>=0?(c="https"===h||"wss"===h,g=parseInt(e.substring(y+1),10)):y=e.length;const L=e.slice(0,y);if("localhost"===L.toLowerCase())t="localhost";else if(L.split(".").length<=2)t=L;else{const G=e.indexOf(".");r=e.substring(0,G).toLowerCase(),t=e.substring(G+1),a=r}"ns"in R&&(a=R.ns)}return{host:e,port:g,domain:t,subdomain:r,secure:c,scheme:h,pathString:i,namespace:a}};class HB{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,F.Wl)(this.snapshot.exportVal())}}class $B{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class FN{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,F.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class GB{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new F.BH;return dZ(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Da("OnDisconnect.remove",this._path);const e=new F.BH;return LB(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Da("OnDisconnect.set",this._path),Cl("OnDisconnect.set",e,this._path,!1);const t=new F.BH;return LB(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Da("OnDisconnect.setWithPriority",this._path),Cl("OnDisconnect.setWithPriority",e,this._path,!1),AN("OnDisconnect.setWithPriority",t,!1);const r=new F.BH;return function hZ(n,e,t,r,i){const a=wr(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(c,h)=>{"ok"===c&&h_(n.onDisconnect_,e,a),Ch(0,i,c,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Da("OnDisconnect.update",this._path),xB("OnDisconnect.update",e,this._path,!1);const t=new F.BH;return function fZ(n,e,t,r){if((0,F.xb)(t))return bi("onDisconnect().update() called with empty data.  Don't do anything."),void Ch(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&Ii(t,(c,h)=>{const g=wr(h);h_(n.onDisconnect_,pr(e,c),g)}),Ch(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Js{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return on(this._path)?null:Hk(this._path)}get ref(){return new Sa(this._repo,this._path)}get _queryIdentifier(){const e=KV(this._queryParams),t=Nk(e);return"{}"===t?"default":t}get _queryObject(){return KV(this._queryParams)}isEqual(e){if(!((e=(0,F.m9)(e))instanceof Js))return!1;const t=this._repo===e._repo,r=$k(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function hq(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function fD(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function bh(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===El){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Oc)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==wl)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Jn){if(null!=e&&!Sw(e)||null!=t&&!Sw(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,F.hu)(n.getIndex()instanceof zk||n.getIndex()===Kk,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function pD(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Sa extends Js{constructor(e,t){super(e,t,new $T,!1)}get parent(){const e=NV(this._path);return null===e?null:new Sa(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Hp{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Rn(e),r=$p(this.ref,e);return new Hp(this._node.getChild(t),r,Jn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Hp(i,$p(this.ref,r),Jn)))}hasChild(e){const t=new Rn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function qB(n,e){return(n=(0,F.m9)(n))._checkNotDeleted("ref"),void 0!==e?$p(n._root,e):n._root}function WB(n,e){(n=(0,F.m9)(n))._checkNotDeleted("refFromURL");const t=ON(e,n._repo.repoInfo_.nodeAdmin);MB("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&vl("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),qB(n,t.path.toString())}function $p(n,e){return null===sn((n=(0,F.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Mw("child","path",t,!1)):Mw("child","path",e,!1),new Sa(n._repo,pr(n._path,e));var t}function LN(n,e){n=(0,F.m9)(n),Da("set",n._path),Cl("set",e,n._path,!1);const t=new F.BH;return MN(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function DZ(n,e){xB("update",e,n._path,!1);const t=new F.BH;return function lZ(n,e,t,r){m_(n,"update",{path:e.toString(),value:t});let i=!0;const a=Rw(n),c={};if(Ii(t,(h,g)=>{i=!1,c[h]=TB(pr(e,h),wr(g),n.serverSyncTree_,a)}),i)bi("update() called with empty data.  Don't do anything."),Ch(0,r,"ok",void 0);else{const h=cD(n),g=function OW(n,e,t,r){!function Jq(n,e,t,r){(0,F.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=oN(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Xn.fromObject(t);return g_(n,new f_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,c,h);lD(n.eventQueue_,g),n.server_.merge(e.toString(),t,(y,I)=>{const S="ok"===y;S||as("update at "+e+" failed: "+y);const R=Eh(n.serverSyncTree_,h,!S),L=R.length>0?__(n,e):e;Fo(n.eventQueue_,L,R),Ch(0,r,y,I)}),Ii(t,y=>{const I=NN(n,pr(e,y));__(n,I)}),Fo(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function SZ(n){n=(0,F.m9)(n);const e=new FN(()=>{}),t=new kw(e);return function uZ(n,e,t){const r=function BW(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(y,I)=>{const S=ks(y,t);r=r||vh(I,S)});let i=n.syncPointTree_.get(t);i?r=r||vh(i,bn()):(i=new pB,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,c=a?new _h(r,!0,!1):null;return function bW(n){return KT(n.viewCache_)}(gB(i,e,YT(n.pendingWriteTree_,e._path),a?c.getNode():zt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const a=wr(i).withIndex(e._queryParams.getIndex());let c;if(mN(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())c=bw(n.serverSyncTree_,e._path,a);else{const h=Iw(n.serverSyncTree_,e);c=wB(n.serverSyncTree_,e._path,a,h)}return Fo(n.eventQueue_,e._path,c),rD(n.serverSyncTree_,e,t,null,!0),a},i=>(m_(n,"get for query "+(0,F.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Hp(r,new Sa(n._repo,n._path),n._queryParams.getIndex()))}class kw{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new HB("value",this,new Hp(e.snapshotNode,new Sa(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new $B(this,e,t):null}matches(e){return e instanceof kw&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class gD{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new $B(this,e,t):null}createEvent(e,t){(0,F.hu)(null!=e.childName,"Child events should have a childName.");const r=$p(new Sa(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new HB(e.type,this,new Hp(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof gD&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Nw(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const g=t,y=(I,S)=>{RN(n._repo,n,h),g(I,S)};y.userCallback=t.userCallback,y.context=t.context,t=y}const c=new FN(t,a||void 0),h="value"===e?new kw(c):new gD(e,c);return function pZ(n,e,t){let r;r=".info"===sn(e._path)?mN(n.infoSyncTree_,e,t):mN(n.serverSyncTree_,e,t),RB(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>RN(n._repo,n,h)}function UN(n,e,t,r){return Nw(n,"value",e,t,r)}function ZB(n,e,t,r){return Nw(n,"child_added",e,t,r)}function zB(n,e,t,r){return Nw(n,"child_changed",e,t,r)}function KB(n,e,t,r){return Nw(n,"child_moved",e,t,r)}function YB(n,e,t,r){return Nw(n,"child_removed",e,t,r)}function QB(n,e,t){let r=null;const i=t?new FN(t):null;"value"===e?r=new kw(i):e&&(r=new gD(e,i)),RN(n._repo,n,r)}class Tu{}class JB extends Tu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Cl("endAt",this._value,e._path,!0);const t=Xk(e._queryParams,this._value,this._key);if(pD(t),bh(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Js(e._repo,e._path,t,e._orderByCalled)}}class xZ extends Tu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Cl("endBefore",this._value,e._path,!1);const t=function Vq(n,e,t){let r,i;return n.index_===El?("string"==typeof e&&(e=WV(e)),i=Xk(n,e,t)):(r=null==t?Oc:WV(t),i=Xk(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(pD(t),bh(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Js(e._repo,e._path,t,e._orderByCalled)}}class XB extends Tu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Cl("startAt",this._value,e._path,!0);const t=Jk(e._queryParams,this._value,this._key);if(pD(t),bh(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Js(e._repo,e._path,t,e._orderByCalled)}}class kZ extends Tu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Cl("startAfter",this._value,e._path,!1);const t=function Uq(n,e,t){let r;if(n.index_===El)"string"==typeof e&&(e=qV(e)),r=Jk(n,e,t);else{let i;i=null==t?wl:qV(t),r=Jk(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(pD(t),bh(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Js(e._repo,e._path,t,e._orderByCalled)}}class PZ extends Tu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Js(e._repo,e._path,function Fq(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class FZ extends Tu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Js(e._repo,e._path,function Lq(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class UZ extends Tu{constructor(e){super(),this._path=e}_apply(e){fD(e,"orderByChild");const t=new Rn(this._path);if(on(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new zk(t),i=GT(e._queryParams,r);return bh(i),new Js(e._repo,e._path,i,!0)}}class BZ extends Tu{_apply(e){fD(e,"orderByKey");const t=GT(e._queryParams,El);return bh(t),new Js(e._repo,e._path,t,!0)}}class HZ extends Tu{_apply(e){fD(e,"orderByPriority");const t=GT(e._queryParams,Jn);return bh(t),new Js(e._repo,e._path,t,!0)}}class GZ extends Tu{_apply(e){fD(e,"orderByValue");const t=GT(e._queryParams,Kk);return bh(t),new Js(e._repo,e._path,t,!0)}}class WZ extends Tu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Cl("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new JB(this._value,this._key)._apply(new XB(this._value,this._key)._apply(e))}}function Du(n,...e){let t=(0,F.m9)(n);for(const r of e)t=r._apply(t);return t}(function SW(n){(0,F.hu)(!eD,"__referenceConstructor has already been defined"),eD=n})(Sa),function kW(n){(0,F.hu)(!nD,"__referenceConstructor has already been defined"),nD=n}(Sa);const VN={};function tj(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||vl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),bi("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let g,y,c=ON(a,i),h=c.repoInfo;typeof process<"u"&&process.env&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(g=!0,a=`http://${y}?ns=${h.namespace}`,c=ON(a,i),h=c.repoInfo):g=!c.repoInfo.secure;const I=i&&g?new dw(dw.OWNER):new j6(n.name,n.options,e);MB("Invalid Firebase Database URL",c),on(c.path)||vl("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function QZ(n,e,t,r){let i=VN[e.name];i||(i={},VN[e.name]=i);let a=i[n.toURLString()];return a&&vl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new sZ(n,false,t,r),i[n.toURLString()]=a,a}(h,n,I,new B6(n.name,t));return new XZ(S,n)}class XZ{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function oZ(n,e,t){if(n.stats_=Vk(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new qT(n.repoInfo_,(r,i,a,c)=>{OB(n,r,i,a,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>FB(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,F.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Lp(n.repoInfo_,e,(r,i,a,c)=>{OB(n,r,i,a,c)},r=>{FB(n,r)},r=>{!function aZ(n,e){Ii(e,(t,r)=>{xN(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function G6(n,e){const t=n.toString();return Uk[t]||(Uk[t]=e()),Uk[t]}(n.repoInfo_,()=>new qq(n.stats_,n.server_)),n.infoData_=new Bq,n.infoSyncTree_=new vB({startListening:(r,i,a,c)=>{let h=[];const g=n.infoData_.getNode(r._path);return g.isEmpty()||(h=bw(n.infoSyncTree_,r._path,g),setTimeout(()=>{c("ok")},0)),h},stopListening:()=>{}}),xN(n,"connected",!1),n.serverSyncTree_=new vB({startListening:(r,i,a,c)=>(n.server_.listen(r,a,i,(h,g)=>{const y=c(h,g);Fo(n.eventQueue_,r._path,y)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Sa(this._repo,bn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function YZ(n,e){const t=VN[e];(!t||t[n.key]!==n)&&vl(`Database ${e}(${n.repoInfo_}) has already been deleted.`),UB(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&vl("Cannot call "+e+" on a deleted database.")}}function nj(){EV.IS_TRANSPORT_INITIALIZED&&as("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function e4(){nj(),gh.forceDisallow()}function t4(){nj(),a_.forceDisallow(),gh.forceAllow()}function i4(n,e){tV(n,e)}const o4={".sv":"timestamp"};class l4{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Lp.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Lp.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function s4(n){Y2(gi.SDK_VERSION),(0,gi._registerComponent)(new qs.wA("database",(e,{instanceIdentifier:t})=>tj(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,gi.registerVersion)(z2,K2,n),(0,gi.registerVersion)(z2,K2,"esm2017")}();const f4=new Ro.Yd("@firebase/database-compat"),ij=function(n){f4.warn("FIREBASE WARNING: "+n)};class m4{constructor(e){this._delegate=e}cancel(e){(0,F.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,F.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,F.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,F.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,F.Dv)("OnDisconnect.set",1,2,arguments.length),(0,F.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,F.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,F.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,F.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,ij("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,F.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class _4{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,F.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Ih{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,F.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,F.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,F.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,F.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,F.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),Mw("DataSnapshot.child","path",e,!1),new Ih(this._database,this._delegate.child(e))}hasChild(e){return(0,F.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Mw("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,F.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,F.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,F.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Ih(this._database,t)))}hasChildren(){return(0,F.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,F.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,F.Dv)("DataSnapshot.ref",0,0,arguments.length),new Lo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Gi{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,F.Dv)("Query.on",2,4,arguments.length),(0,F.Wj)("Query.on","callback",t,!1);const c=Gi.getCancelAndContextArgs_("Query.on",r,i),h=(y,I)=>{t.call(c.context,new Ih(this.database,y),I)};h.userCallback=t,h.context=c.context;const g=null===(a=c.cancel)||void 0===a?void 0:a.bind(c.context);switch(e){case"value":return UN(this._delegate,h,g),t;case"child_added":return ZB(this._delegate,h,g),t;case"child_removed":return YB(this._delegate,h,g),t;case"child_changed":return zB(this._delegate,h,g),t;case"child_moved":return KB(this._delegate,h,g),t;default:throw new Error((0,F.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,F.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,F.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,F.Wj)("Query.off","callback",t,!0),(0,F.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,QB(this._delegate,e,i)}else QB(this._delegate,e)}get(){return SZ(this._delegate).then(e=>new Ih(this.database,e))}once(e,t,r,i){(0,F.Dv)("Query.once",1,4,arguments.length),(0,F.Wj)("Query.once","callback",t,!0);const a=Gi.getCancelAndContextArgs_("Query.once",r,i),c=new F.BH,h=(y,I)=>{const S=new Ih(this.database,y);t&&t.call(a.context,S,I),c.resolve(S)};h.userCallback=t,h.context=a.context;const g=y=>{a.cancel&&a.cancel.call(a.context,y),c.reject(y)};switch(e){case"value":UN(this._delegate,h,g,{onlyOnce:!0});break;case"child_added":ZB(this._delegate,h,g,{onlyOnce:!0});break;case"child_removed":YB(this._delegate,h,g,{onlyOnce:!0});break;case"child_changed":zB(this._delegate,h,g,{onlyOnce:!0});break;case"child_moved":KB(this._delegate,h,g,{onlyOnce:!0});break;default:throw new Error((0,F.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(e){return(0,F.Dv)("Query.limitToFirst",1,1,arguments.length),new Gi(this.database,Du(this._delegate,function OZ(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new PZ(n)}(e)))}limitToLast(e){return(0,F.Dv)("Query.limitToLast",1,1,arguments.length),new Gi(this.database,Du(this._delegate,function LZ(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new FZ(n)}(e)))}orderByChild(e){return(0,F.Dv)("Query.orderByChild",1,1,arguments.length),new Gi(this.database,Du(this._delegate,function VZ(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Mw("orderByChild","path",n,!1),new UZ(n)}(e)))}orderByKey(){return(0,F.Dv)("Query.orderByKey",0,0,arguments.length),new Gi(this.database,Du(this._delegate,function jZ(){return new BZ}()))}orderByPriority(){return(0,F.Dv)("Query.orderByPriority",0,0,arguments.length),new Gi(this.database,Du(this._delegate,function $Z(){return new HZ}()))}orderByValue(){return(0,F.Dv)("Query.orderByValue",0,0,arguments.length),new Gi(this.database,Du(this._delegate,function qZ(){return new GZ}()))}startAt(e=null,t){return(0,F.Dv)("Query.startAt",0,2,arguments.length),new Gi(this.database,Du(this._delegate,function RZ(n=null,e){return xw("startAt","key",e,!0),new XB(n,e)}(e,t)))}startAfter(e=null,t){return(0,F.Dv)("Query.startAfter",0,2,arguments.length),new Gi(this.database,Du(this._delegate,function NZ(n,e){return xw("startAfter","key",e,!0),new kZ(n,e)}(e,t)))}endAt(e=null,t){return(0,F.Dv)("Query.endAt",0,2,arguments.length),new Gi(this.database,Du(this._delegate,function AZ(n,e){return xw("endAt","key",e,!0),new JB(n,e)}(e,t)))}endBefore(e=null,t){return(0,F.Dv)("Query.endBefore",0,2,arguments.length),new Gi(this.database,Du(this._delegate,function MZ(n,e){return xw("endBefore","key",e,!0),new xZ(n,e)}(e,t)))}equalTo(e,t){return(0,F.Dv)("Query.equalTo",1,2,arguments.length),new Gi(this.database,Du(this._delegate,function ZZ(n,e){return xw("equalTo","key",e,!0),new WZ(n,e)}(e,t)))}toString(){return(0,F.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,F.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,F.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Gi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,F.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,F.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,F.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Lo(this.database,new Sa(this._delegate._repo,this._delegate._path))}}class Lo extends Gi{constructor(e,t){super(e,new Js(t._repo,t._path,new $T,!1)),this.database=e,this._delegate=t}getKey(){return(0,F.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,F.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Lo(this.database,$p(this._delegate,e))}getParent(){(0,F.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Lo(this.database,e):null}getRoot(){return(0,F.Dv)("Reference.root",0,0,arguments.length),new Lo(this.database,this._delegate.root)}set(e,t){(0,F.Dv)("Reference.set",1,2,arguments.length),(0,F.Wj)("Reference.set","onComplete",t,!0);const r=LN(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,F.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,ij("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Da("Reference.update",this._delegate._path),(0,F.Wj)("Reference.update","onComplete",t,!0);const r=DZ(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,F.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,F.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function TZ(n,e,t){if(Da("setWithPriority",n._path),Cl("setWithPriority",e,n._path,!1),AN("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new F.BH;return MN(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,F.Dv)("Reference.remove",0,1,arguments.length),(0,F.Wj)("Reference.remove","onComplete",e,!0);const t=function bZ(n){return Da("remove",n._path),LN(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,F.Dv)("Reference.transaction",1,3,arguments.length),(0,F.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,F.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,F.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function c4(n,e,t){var r;if(n=(0,F.m9)(n),Da("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,a=new F.BH,h=UN(n,()=>{});return function mZ(n,e,t,r,i,a){m_(n,"transaction on "+e);const c={path:e,update:t,onComplete:r,status:null,order:J2(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=kN(n,e,void 0);c.currentInputSnapshot=h;const g=c.update(h.val());if(void 0===g)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{Aw("transaction failed: Data returned ",g,c.path),c.status=0;const y=oD(n.transactionQueueTree_,e),I=jp(y)||[];let S;I.push(c),TN(y,I),"object"==typeof g&&null!==g&&(0,F.r3)(g,".priority")?(S=(0,F.DV)(g,".priority"),(0,F.hu)(Sw(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(iD(n.serverSyncTree_,e)||zt.EMPTY_NODE).getPriority().val();const R=Rw(n),L=wr(g,S),G=CN(L,h,R);c.currentOutputSnapshotRaw=L,c.currentOutputSnapshotResolved=G,c.currentWriteId=cD(n);const le=gN(n.serverSyncTree_,e,G,c.currentWriteId,c.applyLocally);Fo(n.eventQueue_,e,le),dD(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(g,y,I)=>{let S=null;g?a.reject(g):(S=new Hp(I,new Sa(n._repo,n._path),Jn),a.resolve(new l4(y,S)))},h,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new _4(a.committed,new Ih(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,F.Dv)("Reference.setPriority",1,2,arguments.length),(0,F.Wj)("Reference.setPriority","onComplete",t,!0);const r=function IZ(n,e){n=(0,F.m9)(n),Da("setPriority",n._path),AN("setPriority",e,!1);const t=new F.BH;return MN(n._repo,pr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,F.Dv)("Reference.push",0,2,arguments.length),(0,F.Wj)("Reference.push","onComplete",t,!0);const r=function CZ(n,e){n=(0,F.m9)(n),Da("push",n._path),Cl("push",e,n._path,!0);const t=PB(n._repo),r=kq(t),i=$p(n,r),a=$p(n,r);let c;return c=null!=e?LN(a,e).then(()=>a):Promise.resolve(a),i.then=c.then.bind(c),i.catch=c.then.bind(c,void 0),i}(this._delegate,e),i=r.then(c=>new Lo(this.database,c));t&&i.then(()=>t(null),c=>t(c));const a=new Lo(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return Da("Reference.onDisconnect",this._delegate._path),new m4(new GB(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Pw{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:e4,forceLongPolling:t4}}useEmulator(e,t,r={}){!function rj(n,e,t,r={}){(n=(0,F.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&vl("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&vl('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new dw(dw.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,F.Sg)(r.mockUserToken,n.app.options.projectId);a=new dw(c)}!function KZ(n,e,t,r){n.repoInfo_=new Fk(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,F.Dv)("database.ref",0,1,arguments.length),e instanceof Lo){const t=WB(this._delegate,e.toString());return new Lo(this,t)}{const t=qB(this._delegate,e);return new Lo(this,t)}}refFromURL(e){(0,F.Dv)("database.refFromURL",1,1,arguments.length);const r=WB(this._delegate,e);return new Lo(this,r)}goOffline(){return(0,F.Dv)("database.goOffline",0,0,arguments.length),function n4(n){(n=(0,F.m9)(n))._checkNotDeleted("goOffline"),UB(n._repo)}(this._delegate)}goOnline(){return(0,F.Dv)("database.goOnline",0,0,arguments.length),function r4(n){(n=(0,F.m9)(n))._checkNotDeleted("goOnline"),function gZ(n){n.persistentConnection_&&n.persistentConnection_.resume(NB)}(n._repo)}(this._delegate)}}Pw.ServerValue={TIMESTAMP:function a4(){return o4}(),increment:n=>function u4(n){return{".sv":{increment:n}}}(n)};var v4=Object.freeze({__proto__:null,initStandalone:function y4({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){Y2(t);const c=new qs.zt("auth-internal",new qs.H0("database-standalone"));return c.setComponent(new qs.wA("auth-internal",()=>r,"PRIVATE")),{instance:new Pw(tj(n,c,void 0,e,a),n),namespace:i}}});const w4=Pw.ServerValue;function sj(n){return null==n}function oj(n){return"function"==typeof n.set}function aj(n,e){return oj(e)?e:n.ref(e)}function uj(n,e){if(function C4(n){return"string"==typeof n}(n))return e.stringCase();if(oj(n))return e.firebaseCase();if(function b4(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Ow(n,e,t="on",r=Bf.z){return new Tr.y(i=>{let a=null;return a=n[t](e,(c,h)=>{r.schedule(()=>{i.next({snapshot:c,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},c=>{r.schedule(()=>i.error(c))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,yt.U)(i=>{const{snapshot:a,prevKey:c}=i;let h=null;return a.exists()&&(h=a.key),{type:e,payload:a,prevKey:c,key:h}}),(0,Cv.B)())}function lj(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function D4(n,e){const{payload:t,prevKey:r,key:i}=e,a=lj(n,i),c=function T4(n,e){if(sj(e))return 0;{const t=lj(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(g=>{const y={payload:g,type:"value",prevKey:h,key:g.key};return h=g.key,n=[...n,y],!1})}return n;case"child_added":if(a>-1){const h=n[a-1];(h&&h.key||null)!==r&&(n=n.filter(g=>g.payload.key!==t.key)).splice(c,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(c,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(a>-1){const h=n.splice(a,1)[0];return(n=n.slice()).splice(c,0,h),n}return n;default:return n}}function cj(n){return(sj(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function dj(n,e,t){return function I4(n,e,t){return Ow(n,"value","once",t).pipe(cn(r=>{const i=[dt(r)];return e.forEach(a=>i.push(Ow(n,a,"on",t))),(0,wv.T)(...i).pipe(Yu(D4,[]))}),qM())}(n,e=cj(e),t)}function hj(n,e,t){const r=(e=cj(e)).map(i=>Ow(n,i,"on",t));return(0,wv.T)(...r)}function fj(n,e){return function(r,i){return uj(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function M4(n){return function(t){return t?uj(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function pj(n,e){return function(){return Ow(n,"value","on",e)}}!function E4(n){n.INTERNAL.registerComponent(new qs.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new Pw(i,r)},"PUBLIC").setServiceProps({Reference:Lo,Query:Gi,Database:Pw,DataSnapshot:Ih,enableLogging:i4,INTERNAL:v4,ServerValue:w4}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.10")}(Yf.Z);const N4=new l.OlP("angularfire2.realtimeDatabaseURL"),P4=new l.OlP("angularfire2.database.use-emulator");let O4=(()=>{class n{constructor(t,r,i,a,c,h,g,y,I,S,R,L,G,le,de){this.schedulers=h;const Ge=g,at=(0,Dr.on)(t,c,r);y&&Wv(at,c,I,R,L,G,S,le),this.database=(0,Dr.cc)(`${at.name}.database.${i}`,"AngularFireDatabase",at.name,()=>{const nt=c.runOutsideAngular(()=>at.database(i||void 0));return Ge&&nt.useEmulator(...Ge),nt},[Ge])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>aj(this.database,t));let a=i;return r&&(a=r(i)),function R4(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:fj(r,"update"),set:fj(r,"set"),push:i=>r.push(i),remove:M4(r),snapshotChanges:i=>dj(n,i,t).pipe(Qt.iC),stateChanges:i=>hj(n,i,t).pipe(Qt.iC),auditTrail:i=>function S4(n,e,t){return function x4(n,e,t){return function A4(n,e){return Ow(n,"value","on",e).pipe((0,yt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function A6(...n){const e=(0,Vs.jO)(n);return(0,Lr.e)((t,r)=>{const i=n.length,a=new Array(i);let c=n.map(()=>!1),h=!1;for(let g=0;g<i;g++)(0,xi.Xf)(n[g]).subscribe((0,Hn.x)(r,y=>{a[g]=y,!h&&!c[g]&&(c[g]=!0,(h=c.every(zu.y))&&(c=null))},S6.Z));t.subscribe((0,Hn.x)(r,g=>{if(h){const y=[g,...a];r.next(e?e(...y):y)}}))})}(e),(0,yt.U)(([i,a])=>{const c=i.lastKeyToLoad,h=a.map(g=>g.key);return{actions:a,lastKeyToLoad:c,loadedKeys:h}}),function x6(n){return(0,Lr.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,Hn.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,yt.U)(i=>i.actions))}(n,hj(n,e).pipe(Yu((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(Qt.iC),valueChanges:(i,a)=>dj(n,i,t).pipe((0,yt.U)(h=>h.map(g=>a&&a.idField?Object.assign(Object.assign({},g.payload.val()),{[a.idField]:g.key}):g.payload.val())),Qt.iC)}}(a,this)}object(t){return function k4(n,e){return{query:n,snapshotChanges:()=>pj(n,e.schedulers.outsideAngular)().pipe(Qt.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>pj(n,e.schedulers.outsideAngular)().pipe(Qt.iC,(0,yt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>aj(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Dr.Dh),l.LFG(Dr.xv,8),l.LFG(N4,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(Qt.HU),l.LFG(P4,8),l.LFG(Kf,8),l.LFG(Tm,8),l.LFG(Gv,8),l.LFG(qv,8),l.LFG(gI,8),l.LFG(mI,8),l.LFG(Dm,8),l.LFG(zf,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),F4=(()=>{class n{constructor(){Im.Z.registerVersion("angularfire",Qt.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[O4]}),n})();const gj_firebase={apiKey:"AIzaSyBMIXSQe9Nvxc4-e68mjbZ-N_YF6Y0NYXE",authDomain:"romandarioesquivel-9162f.firebaseapp.com",projectId:"romandarioesquivel-9162f",storageBucket:"romandarioesquivel-9162f.appspot.com",locationId:"us-central",messagingSenderId:"268506075830",measurementId:"G-XQXDDBQGV8",appId:"1:268506075830:web:0e1b75aaf956568f668c17"};let L4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n,bootstrap:[Zv]}),n.\u0275inj=l.cJS({providers:[{provide:Ny,useClass:zv,multi:!0}],imports:[ra,_I,Pb.forRoot({}),zN,MC,Dr.hO.initializeApp(gj_firebase),AM,D6,GM,F4]}),n})();(0,l.G48)(),Za().bootstrapModule(L4).catch(n=>console.error(n))},5867:(ct,Ae,U)=>{U.d(Ae,{C6:()=>l.getApps,Mq:()=>l.getApp});var l=U(9681);(0,l.registerVersion)("firebase","9.14.0","app")},127:(ct,Ae,U)=>{U.d(Ae,{Z:()=>l.Z});var l=U(3942);l.Z.registerVersion("firebase","9.14.0","app-compat")},5881:(ct,Ae,U)=>{U.r(Ae);var l=U(5861),$=U(3942),P=U(8247),se=U(2090),ge=(U(9681),U(1877),U(4859));function fe(){return window}function W(){return(W=(0,l.Z)(function*(H,k,B){var re;const{BuildInfo:Oe}=fe();(0,P.ap)(k.sessionId,"AuthEvent did not contain a session ID");const st=yield me(k.sessionId),ot={};return(0,P.aq)()?ot.ibi=Oe.packageName:(0,P.ar)()?ot.apn=Oe.packageName:(0,P.as)(H,"operation-not-supported-in-this-environment"),Oe.displayName&&(ot.appDisplayName=Oe.displayName),ot.sessionId=st,(0,P.at)(H,B,k.type,void 0,null!==(re=k.eventId)&&void 0!==re?re:void 0,ot)})).apply(this,arguments)}function je(){return(je=(0,l.Z)(function*(H){const{BuildInfo:k}=fe(),B={};(0,P.aq)()?B.iosBundleId=k.packageName:(0,P.ar)()?B.androidPackageName=k.packageName:(0,P.as)(H,"operation-not-supported-in-this-environment"),yield(0,P.au)(H,B)})).apply(this,arguments)}function rt(){return(rt=(0,l.Z)(function*(H,k,B){const{cordova:re}=fe();let Oe=()=>{};try{yield new Promise((st,ot)=>{let xe=null;function Ue(){var Pt;st();const pn=null===(Pt=re.plugins.browsertab)||void 0===Pt?void 0:Pt.close;"function"==typeof pn&&pn(),"function"==typeof B?.close&&B.close()}function Mt(){xe||(xe=window.setTimeout(()=>{ot((0,P.aw)(H,"redirect-cancelled-by-user"))},2e3))}function fn(){"visible"===document?.visibilityState&&Mt()}k.addPassiveListener(Ue),document.addEventListener("resume",Mt,!1),(0,P.ar)()&&document.addEventListener("visibilitychange",fn,!1),Oe=()=>{k.removePassiveListener(Ue),document.removeEventListener("resume",Mt,!1),document.removeEventListener("visibilitychange",fn,!1),xe&&window.clearTimeout(xe)}})}finally{Oe()}})).apply(this,arguments)}function me(H){return Je.apply(this,arguments)}function Je(){return(Je=(0,l.Z)(function*(H){const k=Ye(H),B=yield crypto.subtle.digest("SHA-256",k);return Array.from(new Uint8Array(B)).map(Oe=>Oe.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Ye(H){if((0,P.ap)(/[0-9a-zA-Z]+/.test(H),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(H);const k=new ArrayBuffer(H.length),B=new Uint8Array(k);for(let re=0;re<H.length;re++)B[re]=H.charCodeAt(re);return B}class Re extends P.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(k=>{this.resolveInialized=k})}addPassiveListener(k){this.passiveListeners.add(k)}removePassiveListener(k){this.passiveListeners.delete(k)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(k){return this.resolveInialized(),this.passiveListeners.forEach(B=>B(k)),super.onEvent(k)}initialized(){var k=this;return(0,l.Z)(function*(){yield k.initPromise})()}}function ie(H){return ce.apply(this,arguments)}function ce(){return(ce=(0,l.Z)(function*(H){const k=yield ee()._get(pe(H));return k&&(yield ee()._remove(pe(H))),k})).apply(this,arguments)}function Q(){const H=[],k="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let B=0;B<20;B++){const re=Math.floor(Math.random()*k.length);H.push(k.charAt(re))}return H.join("")}function ee(){return(0,P.az)(P.b)}function pe(H){return(0,P.aA)("authEvent",H.config.apiKey,H.name)}function Be(H){if(!H?.includes("?"))return{};const[k,...B]=H.split("?");return(0,se.zd)(B.join("?"))}function Ze(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,P.aw)("no-auth-event")}}function qt(){var H;return(null===(H=self?.location)||void 0===H?void 0:H.protocol)||null}function Cr(H=(0,se.z$)()){return!("file:"!==qt()&&"ionic:"!==qt()&&"capacitor:"!==qt()||!H.toLowerCase().match(/iphone|ipad|ipod|android/))}function Zi(){try{const H=self.localStorage,k=P.aI();if(H)return H.setItem(k,"1"),H.removeItem(k),!function Wi(H=(0,se.z$)()){return function Br(){return(0,se.w1)()&&11===document?.documentMode}()||function On(H=(0,se.z$)()){return/Edge\/\d+/.test(H)}(H)}()||(0,se.hl)()}catch{return jr()&&(0,se.hl)()}return!1}function jr(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Un(){return(function Lt(){return"http:"===qt()||"https:"===qt()}()||(0,se.ru)()||Cr())&&!function qi(){return(0,se.b$)()||(0,se.UG)()}()&&Zi()&&!jr()}function Ti(){return Cr()&&typeof document<"u"}function Qe(){return(Qe=(0,l.Z)(function*(){return!!Ti()&&new Promise(H=>{const k=setTimeout(()=>{H(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(k),H(!0)})})})).apply(this,arguments)}const Zn={LOCAL:"local",NONE:"none",SESSION:"session"},wn=P.ax,gr="persistence";function En(H){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,l.Z)(function*(H){yield H._initializationPromise;const k=mt(),B=P.aA(gr,H.config.apiKey,H.name);k&&k.setItem(B,H._getPersistence())})).apply(this,arguments)}function mt(){var H;try{return(null===(H=function er(){return typeof window<"u"?window:null}())||void 0===H?void 0:H.sessionStorage)||null}catch{return null}}const _t=P.ax;class xt{constructor(){this.browserResolver=P.az(P.k),this.cordovaResolver=P.az(class an{constructor(){this._redirectPersistence=P.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=P.aB,this._overrideRedirectResult=P.aC}_initialize(k){var B=this;return(0,l.Z)(function*(){const re=k._key();let Oe=B.eventManagers.get(re);return Oe||(Oe=new Re(k),B.eventManagers.set(re,Oe),B.attachCallbackListeners(k,Oe)),Oe})()}_openPopup(k){(0,P.as)(k,"operation-not-supported-in-this-environment")}_openRedirect(k,B,re,Oe){var st=this;return(0,l.Z)(function*(){!function Ce(H){var k,B,re,Oe,st,ot,xe,Ue,Mt,fn;const Pt=fe();(0,P.ax)("function"==typeof(null===(k=Pt?.universalLinks)||void 0===k?void 0:k.subscribe),H,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,P.ax)(typeof(null===(B=Pt?.BuildInfo)||void 0===B?void 0:B.packageName)<"u",H,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,P.ax)("function"==typeof(null===(st=null===(Oe=null===(re=Pt?.cordova)||void 0===re?void 0:re.plugins)||void 0===Oe?void 0:Oe.browsertab)||void 0===st?void 0:st.openUrl),H,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.ax)("function"==typeof(null===(Ue=null===(xe=null===(ot=Pt?.cordova)||void 0===ot?void 0:ot.plugins)||void 0===xe?void 0:xe.browsertab)||void 0===Ue?void 0:Ue.isAvailable),H,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.ax)("function"==typeof(null===(fn=null===(Mt=Pt?.cordova)||void 0===Mt?void 0:Mt.InAppBrowser)||void 0===fn?void 0:fn.open),H,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(k);const ot=yield st._initialize(k);yield ot.initialized(),ot.resetRedirect(),(0,P.aD)(),yield st._originValidation(k);const xe=function Ie(H,k,B=null){return{type:k,eventId:B,urlResponse:null,sessionId:Q(),postBody:null,tenantId:H.tenantId,error:(0,P.aw)(H,"no-auth-event")}}(k,re,Oe);yield function qe(H,k){return ee()._set(pe(H),k)}(k,xe);const Ue=yield function z(H,k,B){return W.apply(this,arguments)}(k,xe,B),Mt=yield function Pe(H){const{cordova:k}=fe();return new Promise(B=>{k.plugins.browsertab.isAvailable(re=>{let Oe=null;re?k.plugins.browsertab.openUrl(H):Oe=k.InAppBrowser.open(H,(0,P.av)()?"_blank":"_system","location=yes"),B(Oe)})})}(Ue);return function Te(H,k,B){return rt.apply(this,arguments)}(k,ot,Mt)})()}_isIframeWebStorageSupported(k,B){throw new Error("Method not implemented.")}_originValidation(k){const B=k._key();return this.originValidationPromises[B]||(this.originValidationPromises[B]=function X(H){return je.apply(this,arguments)}(k)),this.originValidationPromises[B]}attachCallbackListeners(k,B){const{universalLinks:re,handleOpenURL:Oe,BuildInfo:st}=fe(),ot=setTimeout((0,l.Z)(function*(){yield ie(k),B.onEvent(Ze())}),500),xe=function(){var fn=(0,l.Z)(function*(Pt){clearTimeout(ot);const pn=yield ie(k);let us=null;pn&&Pt?.url&&(us=function we(H,k){var B,re;const Oe=function Ve(H){const k=Be(H),B=k.link?decodeURIComponent(k.link):void 0,re=Be(B).link,Oe=k.deep_link_id?decodeURIComponent(k.deep_link_id):void 0;return Be(Oe).link||Oe||re||B||H}(k);if(Oe.includes("/__/auth/callback")){const st=Be(Oe),ot=st.firebaseError?function oe(H){try{return JSON.parse(H)}catch{return null}}(decodeURIComponent(st.firebaseError)):null,xe=null===(re=null===(B=ot?.code)||void 0===B?void 0:B.split("auth/"))||void 0===re?void 0:re[1],Ue=xe?(0,P.aw)(xe):null;return Ue?{type:H.type,eventId:H.eventId,tenantId:H.tenantId,error:Ue,urlResponse:null,sessionId:null,postBody:null}:{type:H.type,eventId:H.eventId,tenantId:H.tenantId,sessionId:H.sessionId,urlResponse:Oe,postBody:null}}return null}(pn,Pt.url)),B.onEvent(us||Ze())});return function(pn){return fn.apply(this,arguments)}}();typeof re<"u"&&"function"==typeof re.subscribe&&re.subscribe(null,xe);const Ue=Oe,Mt=`${st.packageName.toLowerCase()}://`;fe().handleOpenURL=function(){var fn=(0,l.Z)(function*(Pt){if(Pt.toLowerCase().startsWith(Mt)&&xe({url:Pt}),"function"==typeof Ue)try{Ue(Pt)}catch(pn){console.error(pn)}});return function(Pt){return fn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=P.a,this._completeRedirectFn=P.aB,this._overrideRedirectResult=P.aC}_initialize(k){var B=this;return(0,l.Z)(function*(){return yield B.selectUnderlyingResolver(),B.assertedUnderlyingResolver._initialize(k)})()}_openPopup(k,B,re,Oe){var st=this;return(0,l.Z)(function*(){return yield st.selectUnderlyingResolver(),st.assertedUnderlyingResolver._openPopup(k,B,re,Oe)})()}_openRedirect(k,B,re,Oe){var st=this;return(0,l.Z)(function*(){return yield st.selectUnderlyingResolver(),st.assertedUnderlyingResolver._openRedirect(k,B,re,Oe)})()}_isIframeWebStorageSupported(k,B){this.assertedUnderlyingResolver._isIframeWebStorageSupported(k,B)}_originValidation(k){return this.assertedUnderlyingResolver._originValidation(k)}get _shouldInitProactively(){return Ti()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return _t(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var k=this;return(0,l.Z)(function*(){if(k.underlyingResolver)return;const B=yield function zi(){return Qe.apply(this,arguments)}();k.underlyingResolver=B?k.cordovaResolver:k.browserResolver})()}}function Hr(H){return H.unwrap()}function Rr(H){return kr(H)}function kr(H){const{_tokenResponse:k}=H instanceof se.ZR?H.customData:H;if(!k)return null;if(!(H instanceof se.ZR)&&"temporaryProof"in k&&"phoneNumber"in k)return P.P.credentialFromResult(H);const B=k.providerId;if(!B||B===P.o.PASSWORD)return null;let re;switch(B){case P.o.GOOGLE:re=P.Q;break;case P.o.FACEBOOK:re=P.N;break;case P.o.GITHUB:re=P.T;break;case P.o.TWITTER:re=P.W;break;default:const{oauthIdToken:Oe,oauthAccessToken:st,oauthTokenSecret:ot,pendingToken:xe,nonce:Ue}=k;return st||ot||Oe||xe?xe?B.startsWith("saml.")?P.aL._create(B,xe):P.J._fromParams({providerId:B,signInMethod:B,pendingToken:xe,idToken:Oe,accessToken:st}):new P.U(B).credential({idToken:Oe,accessToken:st,rawNonce:Ue}):null}return H instanceof se.ZR?re.credentialFromError(H):re.credentialFromResult(H)}function Nt(H,k){return k.catch(B=>{throw B instanceof se.ZR&&function St(H,k){var B,re;const Oe=null===(B=k.customData)||void 0===B?void 0:B._tokenResponse;if("auth/multi-factor-auth-required"===(null===(re=k)||void 0===re?void 0:re.code))k.resolver=new lr(H,P.an(H,k));else if(Oe){const st=kr(k),ot=k;st&&(ot.credential=st,ot.tenantId=Oe.tenantId||void 0,ot.email=Oe.email||void 0,ot.phoneNumber=Oe.phoneNumber||void 0)}}(H,B),B}).then(B=>{const Oe=B.user;return{operationType:B.operationType,credential:Rr(B),additionalUserInfo:P.al(B),user:Mn.getOrCreate(Oe)}})}function Zr(H,k){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,l.Z)(function*(H,k){const B=yield k;return{verificationId:B.verificationId,confirm:re=>Nt(H,B.confirm(re))}})).apply(this,arguments)}class lr{constructor(k,B){this.resolver=B,this.auth=function zn(H){return H.wrapped()}(k)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(k){return Nt(Hr(this.auth),this.resolver.resolveSignIn(k))}}class Mn{constructor(k){this._delegate=k,this.multiFactor=P.ao(k)}static getOrCreate(k){return Mn.USER_MAP.has(k)||Mn.USER_MAP.set(k,new Mn(k)),Mn.USER_MAP.get(k)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(k){return this._delegate.getIdTokenResult(k)}getIdToken(k){return this._delegate.getIdToken(k)}linkAndRetrieveDataWithCredential(k){return this.linkWithCredential(k)}linkWithCredential(k){var B=this;return(0,l.Z)(function*(){return Nt(B.auth,P.Z(B._delegate,k))})()}linkWithPhoneNumber(k,B){var re=this;return(0,l.Z)(function*(){return Zr(re.auth,P.l(re._delegate,k,B))})()}linkWithPopup(k){var B=this;return(0,l.Z)(function*(){return Nt(B.auth,P.d(B._delegate,k,xt))})()}linkWithRedirect(k){var B=this;return(0,l.Z)(function*(){return yield En(P.aE(B.auth)),P.g(B._delegate,k,xt)})()}reauthenticateAndRetrieveDataWithCredential(k){return this.reauthenticateWithCredential(k)}reauthenticateWithCredential(k){var B=this;return(0,l.Z)(function*(){return Nt(B.auth,P._(B._delegate,k))})()}reauthenticateWithPhoneNumber(k,B){return Zr(this.auth,P.r(this._delegate,k,B))}reauthenticateWithPopup(k){return Nt(this.auth,P.e(this._delegate,k,xt))}reauthenticateWithRedirect(k){var B=this;return(0,l.Z)(function*(){return yield En(P.aE(B.auth)),P.h(B._delegate,k,xt)})()}sendEmailVerification(k){return P.ab(this._delegate,k)}unlink(k){var B=this;return(0,l.Z)(function*(){return yield P.ak(B._delegate,k),B})()}updateEmail(k){return P.ag(this._delegate,k)}updatePassword(k){return P.ah(this._delegate,k)}updatePhoneNumber(k){return P.u(this._delegate,k)}updateProfile(k){return P.af(this._delegate,k)}verifyBeforeUpdateEmail(k,B){return P.ac(this._delegate,k,B)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Mn.USER_MAP=new WeakMap;const et=P.ax;let De=(()=>{class H{constructor(B,re){if(this.app=B,re.isInitialized())return this._delegate=re.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Oe}=B.options;et(Oe,"invalid-api-key",{appName:B.name}),et(Oe,"invalid-api-key",{appName:B.name});const st=typeof window<"u"?xt:void 0;this._delegate=re.initialize({options:{persistence:bt(Oe,B.name),popupRedirectResolver:st}}),this._delegate._updateErrorMap(P.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Mn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(B){this._delegate.languageCode=B}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(B){this._delegate.tenantId=B}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(B,re){P.G(this._delegate,B,re)}applyActionCode(B){return P.a2(this._delegate,B)}checkActionCode(B){return P.a3(this._delegate,B)}confirmPasswordReset(B,re){return P.a1(this._delegate,B,re)}createUserWithEmailAndPassword(B,re){var Oe=this;return(0,l.Z)(function*(){return Nt(Oe._delegate,P.a5(Oe._delegate,B,re))})()}fetchProvidersForEmail(B){return this.fetchSignInMethodsForEmail(B)}fetchSignInMethodsForEmail(B){return P.aa(this._delegate,B)}isSignInWithEmailLink(B){return P.a8(this._delegate,B)}getRedirectResult(){var B=this;return(0,l.Z)(function*(){et(Un(),B._delegate,"operation-not-supported-in-this-environment");const re=yield P.j(B._delegate,xt);return re?Nt(B._delegate,Promise.resolve(re)):{credential:null,user:null}})()}addFrameworkForLogging(B){!function hn(H,k){(0,P.aE)(H)._logFramework(k)}(this._delegate,B)}onAuthStateChanged(B,re,Oe){const{next:st,error:ot,complete:xe}=tt(B,re,Oe);return this._delegate.onAuthStateChanged(st,ot,xe)}onIdTokenChanged(B,re,Oe){const{next:st,error:ot,complete:xe}=tt(B,re,Oe);return this._delegate.onIdTokenChanged(st,ot,xe)}sendSignInLinkToEmail(B,re){return P.a7(this._delegate,B,re)}sendPasswordResetEmail(B,re){return P.a0(this._delegate,B,re||void 0)}setPersistence(B){var re=this;return(0,l.Z)(function*(){let Oe;switch(function Xs(H,k){wn(Object.values(Zn).includes(k),H,"invalid-persistence-type"),(0,se.b$)()?wn(k!==Zn.SESSION,H,"unsupported-persistence-type"):(0,se.UG)()?wn(k===Zn.NONE,H,"unsupported-persistence-type"):jr()?wn(k===Zn.NONE||k===Zn.LOCAL&&(0,se.hl)(),H,"unsupported-persistence-type"):wn(k===Zn.NONE||Zi(),H,"unsupported-persistence-type")}(re._delegate,B),B){case Zn.SESSION:Oe=P.a;break;case Zn.LOCAL:Oe=(yield P.az(P.i)._isAvailable())?P.i:P.b;break;case Zn.NONE:Oe=P.L;break;default:return P.as("argument-error",{appName:re._delegate.name})}return re._delegate.setPersistence(Oe)})()}signInAndRetrieveDataWithCredential(B){return this.signInWithCredential(B)}signInAnonymously(){return Nt(this._delegate,P.X(this._delegate))}signInWithCredential(B){return Nt(this._delegate,P.Y(this._delegate,B))}signInWithCustomToken(B){return Nt(this._delegate,P.$(this._delegate,B))}signInWithEmailAndPassword(B,re){return Nt(this._delegate,P.a6(this._delegate,B,re))}signInWithEmailLink(B,re){return Nt(this._delegate,P.a9(this._delegate,B,re))}signInWithPhoneNumber(B,re){return Zr(this._delegate,P.s(this._delegate,B,re))}signInWithPopup(B){var re=this;return(0,l.Z)(function*(){return et(Un(),re._delegate,"operation-not-supported-in-this-environment"),Nt(re._delegate,P.c(re._delegate,B,xt))})()}signInWithRedirect(B){var re=this;return(0,l.Z)(function*(){return et(Un(),re._delegate,"operation-not-supported-in-this-environment"),yield En(re._delegate),P.f(re._delegate,B,xt)})()}updateCurrentUser(B){return this._delegate.updateCurrentUser(B)}verifyPasswordResetCode(B){return P.a4(this._delegate,B)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return H.Persistence=Zn,H})();function tt(H,k,B){let re=H;"function"!=typeof H&&({next:re,error:k,complete:B}=H);const Oe=re;return{next:ot=>Oe(ot&&Mn.getOrCreate(ot)),error:k,complete:B}}function bt(H,k){const B=function yn(H,k){const B=mt();if(!B)return[];const re=P.aA(gr,H,k);switch(B.getItem(re)){case Zn.NONE:return[P.L];case Zn.LOCAL:return[P.i,P.a];case Zn.SESSION:return[P.a];default:return[]}}(H,k);if(typeof self<"u"&&!B.includes(P.i)&&B.push(P.i),typeof window<"u")for(const re of[P.b,P.a])B.includes(re)||B.push(re);return B.includes(P.L)||B.push(P.L),B}class It{constructor(){this.providerId="phone",this._delegate=new P.P(Hr($.Z.auth()))}static credential(k,B){return P.P.credential(k,B)}verifyPhoneNumber(k,B){return this._delegate.verifyPhoneNumber(k,B)}unwrap(){return this._delegate}}It.PHONE_SIGN_IN_METHOD=P.P.PHONE_SIGN_IN_METHOD,It.PROVIDER_ID=P.P.PROVIDER_ID;const Xt=P.ax;class Z{constructor(k,B,re=$.Z.app()){var Oe;Xt(null===(Oe=re.options)||void 0===Oe?void 0:Oe.apiKey,"invalid-api-key",{appName:re.name}),this._delegate=new P.R(k,B,re.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Y(H){H.INTERNAL.registerComponent(new ge.wA("auth-compat",k=>{const B=k.getProvider("app-compat").getImmediate(),re=k.getProvider("auth");return new De(B,re)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:P.A.EMAIL_SIGNIN,PASSWORD_RESET:P.A.PASSWORD_RESET,RECOVER_EMAIL:P.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:P.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:P.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:P.A.VERIFY_EMAIL}},EmailAuthProvider:P.M,FacebookAuthProvider:P.N,GithubAuthProvider:P.T,GoogleAuthProvider:P.Q,OAuthProvider:P.U,SAMLAuthProvider:P.V,PhoneAuthProvider:It,PhoneMultiFactorGenerator:P.m,RecaptchaVerifier:Z,TwitterAuthProvider:P.W,Auth:De,AuthCredential:P.H,Error:se.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),H.registerVersion("@firebase/auth-compat","0.2.24")}($.Z)},9751:(ct,Ae,U)=>{U.d(Ae,{y:()=>fe});var l=U(930),$=U(727),P=U(8822),se=U(9635),ue=U(2416),_e=U(576),ge=U(2806);let fe=(()=>{class X{constructor(Pe){Pe&&(this._subscribe=Pe)}lift(Pe){const Te=new X;return Te.source=this,Te.operator=Pe,Te}subscribe(Pe,Te,rt){const Ce=function W(X){return X&&X instanceof l.Lv||function z(X){return X&&(0,_e.m)(X.next)&&(0,_e.m)(X.error)&&(0,_e.m)(X.complete)}(X)&&(0,$.Nn)(X)}(Pe)?Pe:new l.Hp(Pe,Te,rt);return(0,ge.x)(()=>{const{operator:me,source:Je}=this;Ce.add(me?me.call(Ce,Je):Je?this._subscribe(Ce):this._trySubscribe(Ce))}),Ce}_trySubscribe(Pe){try{return this._subscribe(Pe)}catch(Te){Pe.error(Te)}}forEach(Pe,Te){return new(Te=ve(Te))((rt,Ce)=>{const me=new l.Hp({next:Je=>{try{Pe(Je)}catch(Ye){Ce(Ye),me.unsubscribe()}},error:Ce,complete:rt});this.subscribe(me)})}_subscribe(Pe){var Te;return null===(Te=this.source)||void 0===Te?void 0:Te.subscribe(Pe)}[P.L](){return this}pipe(...Pe){return(0,se.U)(Pe)(this)}toPromise(Pe){return new(Pe=ve(Pe))((Te,rt)=>{let Ce;this.subscribe(me=>Ce=me,me=>rt(me),()=>Te(Ce))})}}return X.create=je=>new X(je),X})();function ve(X){var je;return null!==(je=X??ue.v.Promise)&&void 0!==je?je:Promise}},7579:(ct,Ae,U)=>{U.d(Ae,{x:()=>ge});var l=U(9751),$=U(727);const se=(0,U(3888).d)(ve=>function(){ve(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ue=U(8737),_e=U(2806);let ge=(()=>{class ve extends l.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(W){const X=new fe(this,this);return X.operator=W,X}_throwIfClosed(){if(this.closed)throw new se}next(W){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const X of this.currentObservers)X.next(W)}})}error(W){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=W;const{observers:X}=this;for(;X.length;)X.shift().error(W)}})}complete(){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:W}=this;for(;W.length;)W.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var W;return(null===(W=this.observers)||void 0===W?void 0:W.length)>0}_trySubscribe(W){return this._throwIfClosed(),super._trySubscribe(W)}_subscribe(W){return this._throwIfClosed(),this._checkFinalizedStatuses(W),this._innerSubscribe(W)}_innerSubscribe(W){const{hasError:X,isStopped:je,observers:Pe}=this;return X||je?$.Lc:(this.currentObservers=null,Pe.push(W),new $.w0(()=>{this.currentObservers=null,(0,ue.P)(Pe,W)}))}_checkFinalizedStatuses(W){const{hasError:X,thrownError:je,isStopped:Pe}=this;X?W.error(je):Pe&&W.complete()}asObservable(){const W=new l.y;return W.source=this,W}}return ve.create=(z,W)=>new fe(z,W),ve})();class fe extends ge{constructor(z,W){super(),this.destination=z,this.source=W}next(z){var W,X;null===(X=null===(W=this.destination)||void 0===W?void 0:W.next)||void 0===X||X.call(W,z)}error(z){var W,X;null===(X=null===(W=this.destination)||void 0===W?void 0:W.error)||void 0===X||X.call(W,z)}complete(){var z,W;null===(W=null===(z=this.destination)||void 0===z?void 0:z.complete)||void 0===W||W.call(z)}_subscribe(z){var W,X;return null!==(X=null===(W=this.source)||void 0===W?void 0:W.subscribe(z))&&void 0!==X?X:$.Lc}}},930:(ct,Ae,U)=>{U.d(Ae,{Hp:()=>rt,Lv:()=>X});var l=U(576),$=U(727),P=U(2416),se=U(7849),ue=U(5032);const _e=ve("C",void 0,void 0);function ve(Fe,Re,Ie){return{kind:Fe,value:Re,error:Ie}}var z=U(3410),W=U(2806);class X extends $.w0{constructor(Re){super(),this.isStopped=!1,Re?(this.destination=Re,(0,$.Nn)(Re)&&Re.add(this)):this.destination=Ye}static create(Re,Ie,qe){return new rt(Re,Ie,qe)}next(Re){this.isStopped?Je(function fe(Fe){return ve("N",Fe,void 0)}(Re),this):this._next(Re)}error(Re){this.isStopped?Je(function ge(Fe){return ve("E",void 0,Fe)}(Re),this):(this.isStopped=!0,this._error(Re))}complete(){this.isStopped?Je(_e,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Re){this.destination.next(Re)}_error(Re){try{this.destination.error(Re)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const je=Function.prototype.bind;function Pe(Fe,Re){return je.call(Fe,Re)}class Te{constructor(Re){this.partialObserver=Re}next(Re){const{partialObserver:Ie}=this;if(Ie.next)try{Ie.next(Re)}catch(qe){Ce(qe)}}error(Re){const{partialObserver:Ie}=this;if(Ie.error)try{Ie.error(Re)}catch(qe){Ce(qe)}else Ce(Re)}complete(){const{partialObserver:Re}=this;if(Re.complete)try{Re.complete()}catch(Ie){Ce(Ie)}}}class rt extends X{constructor(Re,Ie,qe){let ie;if(super(),(0,l.m)(Re)||!Re)ie={next:Re??void 0,error:Ie??void 0,complete:qe??void 0};else{let ce;this&&P.v.useDeprecatedNextContext?(ce=Object.create(Re),ce.unsubscribe=()=>this.unsubscribe(),ie={next:Re.next&&Pe(Re.next,ce),error:Re.error&&Pe(Re.error,ce),complete:Re.complete&&Pe(Re.complete,ce)}):ie=Re}this.destination=new Te(ie)}}function Ce(Fe){P.v.useDeprecatedSynchronousErrorHandling?(0,W.O)(Fe):(0,se.h)(Fe)}function Je(Fe,Re){const{onStoppedNotification:Ie}=P.v;Ie&&z.z.setTimeout(()=>Ie(Fe,Re))}const Ye={closed:!0,next:ue.Z,error:function me(Fe){throw Fe},complete:ue.Z}},727:(ct,Ae,U)=>{U.d(Ae,{Lc:()=>_e,w0:()=>ue,Nn:()=>ge});var l=U(576);const P=(0,U(3888).d)(ve=>function(W){ve(this),this.message=W?`${W.length} errors occurred during unsubscription:\n${W.map((X,je)=>`${je+1}) ${X.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=W});var se=U(8737);class ue{constructor(z){this.initialTeardown=z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let z;if(!this.closed){this.closed=!0;const{_parentage:W}=this;if(W)if(this._parentage=null,Array.isArray(W))for(const Pe of W)Pe.remove(this);else W.remove(this);const{initialTeardown:X}=this;if((0,l.m)(X))try{X()}catch(Pe){z=Pe instanceof P?Pe.errors:[Pe]}const{_finalizers:je}=this;if(je){this._finalizers=null;for(const Pe of je)try{fe(Pe)}catch(Te){z=z??[],Te instanceof P?z=[...z,...Te.errors]:z.push(Te)}}if(z)throw new P(z)}}add(z){var W;if(z&&z!==this)if(this.closed)fe(z);else{if(z instanceof ue){if(z.closed||z._hasParent(this))return;z._addParent(this)}(this._finalizers=null!==(W=this._finalizers)&&void 0!==W?W:[]).push(z)}}_hasParent(z){const{_parentage:W}=this;return W===z||Array.isArray(W)&&W.includes(z)}_addParent(z){const{_parentage:W}=this;this._parentage=Array.isArray(W)?(W.push(z),W):W?[W,z]:z}_removeParent(z){const{_parentage:W}=this;W===z?this._parentage=null:Array.isArray(W)&&(0,se.P)(W,z)}remove(z){const{_finalizers:W}=this;W&&(0,se.P)(W,z),z instanceof ue&&z._removeParent(this)}}ue.EMPTY=(()=>{const ve=new ue;return ve.closed=!0,ve})();const _e=ue.EMPTY;function ge(ve){return ve instanceof ue||ve&&"closed"in ve&&(0,l.m)(ve.remove)&&(0,l.m)(ve.add)&&(0,l.m)(ve.unsubscribe)}function fe(ve){(0,l.m)(ve)?ve():ve.unsubscribe()}},2416:(ct,Ae,U)=>{U.d(Ae,{v:()=>l});const l={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ct,Ae,U)=>{U.d(Ae,{E:()=>$});const $=new(U(9751).y)(ue=>ue.complete())},8996:(ct,Ae,U)=>{U.d(Ae,{D:()=>Re});var l=U(8421),$=U(5363),P=U(9468),_e=U(9751),fe=U(2202),ve=U(576),z=U(9672);function X(Ie,qe){if(!Ie)throw new Error("Iterable cannot be null");return new _e.y(ie=>{(0,z.f)(ie,qe,()=>{const ce=Ie[Symbol.asyncIterator]();(0,z.f)(ie,qe,()=>{ce.next().then(we=>{we.done?ie.complete():ie.next(we.value)})},0,!0)})})}var je=U(3670),Pe=U(8239),Te=U(1144),rt=U(6495),Ce=U(2206),me=U(4532),Je=U(3260);function Re(Ie,qe){return qe?function Fe(Ie,qe){if(null!=Ie){if((0,je.c)(Ie))return function se(Ie,qe){return(0,l.Xf)(Ie).pipe((0,P.R)(qe),(0,$.Q)(qe))}(Ie,qe);if((0,Te.z)(Ie))return function ge(Ie,qe){return new _e.y(ie=>{let ce=0;return qe.schedule(function(){ce===Ie.length?ie.complete():(ie.next(Ie[ce++]),ie.closed||this.schedule())})})}(Ie,qe);if((0,Pe.t)(Ie))return function ue(Ie,qe){return(0,l.Xf)(Ie).pipe((0,P.R)(qe),(0,$.Q)(qe))}(Ie,qe);if((0,Ce.D)(Ie))return X(Ie,qe);if((0,rt.T)(Ie))return function W(Ie,qe){return new _e.y(ie=>{let ce;return(0,z.f)(ie,qe,()=>{ce=Ie[fe.h](),(0,z.f)(ie,qe,()=>{let we,Q;try{({value:we,done:Q}=ce.next())}catch(ee){return void ie.error(ee)}Q?ie.complete():ie.next(we)},0,!0)}),()=>(0,ve.m)(ce?.return)&&ce.return()})}(Ie,qe);if((0,Je.L)(Ie))return function Ye(Ie,qe){return X((0,Je.Q)(Ie),qe)}(Ie,qe)}throw(0,me.z)(Ie)}(Ie,qe):(0,l.Xf)(Ie)}},8421:(ct,Ae,U)=>{U.d(Ae,{Xf:()=>je});var l=U(655),$=U(1144),P=U(8239),se=U(9751),ue=U(3670),_e=U(2206),ge=U(4532),fe=U(6495),ve=U(3260),z=U(576),W=U(7849),X=U(8822);function je(Fe){if(Fe instanceof se.y)return Fe;if(null!=Fe){if((0,ue.c)(Fe))return function Pe(Fe){return new se.y(Re=>{const Ie=Fe[X.L]();if((0,z.m)(Ie.subscribe))return Ie.subscribe(Re);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Fe);if((0,$.z)(Fe))return function Te(Fe){return new se.y(Re=>{for(let Ie=0;Ie<Fe.length&&!Re.closed;Ie++)Re.next(Fe[Ie]);Re.complete()})}(Fe);if((0,P.t)(Fe))return function rt(Fe){return new se.y(Re=>{Fe.then(Ie=>{Re.closed||(Re.next(Ie),Re.complete())},Ie=>Re.error(Ie)).then(null,W.h)})}(Fe);if((0,_e.D)(Fe))return me(Fe);if((0,fe.T)(Fe))return function Ce(Fe){return new se.y(Re=>{for(const Ie of Fe)if(Re.next(Ie),Re.closed)return;Re.complete()})}(Fe);if((0,ve.L)(Fe))return function Je(Fe){return me((0,ve.Q)(Fe))}(Fe)}throw(0,ge.z)(Fe)}function me(Fe){return new se.y(Re=>{(function Ye(Fe,Re){var Ie,qe,ie,ce;return(0,l.mG)(this,void 0,void 0,function*(){try{for(Ie=(0,l.KL)(Fe);!(qe=yield Ie.next()).done;)if(Re.next(qe.value),Re.closed)return}catch(we){ie={error:we}}finally{try{qe&&!qe.done&&(ce=Ie.return)&&(yield ce.call(Ie))}finally{if(ie)throw ie.error}}Re.complete()})})(Fe,Re).catch(Ie=>Re.error(Ie))})}},6451:(ct,Ae,U)=>{U.d(Ae,{T:()=>_e});var l=U(8189),$=U(8421),P=U(515),se=U(3269),ue=U(8996);function _e(...ge){const fe=(0,se.yG)(ge),ve=(0,se._6)(ge,1/0),z=ge;return z.length?1===z.length?(0,$.Xf)(z[0]):(0,l.J)(ve)((0,ue.D)(z,fe)):P.E}},5403:(ct,Ae,U)=>{U.d(Ae,{x:()=>$});var l=U(930);function $(se,ue,_e,ge,fe){return new P(se,ue,_e,ge,fe)}class P extends l.Lv{constructor(ue,_e,ge,fe,ve,z){super(ue),this.onFinalize=ve,this.shouldUnsubscribe=z,this._next=_e?function(W){try{_e(W)}catch(X){ue.error(X)}}:super._next,this._error=fe?function(W){try{fe(W)}catch(X){ue.error(X)}finally{this.unsubscribe()}}:super._error,this._complete=ge?function(){try{ge()}catch(W){ue.error(W)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ue;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:_e}=this;super.unsubscribe(),!_e&&(null===(ue=this.onFinalize)||void 0===ue||ue.call(this))}}}},4004:(ct,Ae,U)=>{U.d(Ae,{U:()=>P});var l=U(4482),$=U(5403);function P(se,ue){return(0,l.e)((_e,ge)=>{let fe=0;_e.subscribe((0,$.x)(ge,ve=>{ge.next(se.call(ue,ve,fe++))}))})}},8189:(ct,Ae,U)=>{U.d(Ae,{J:()=>P});var l=U(5577),$=U(4671);function P(se=1/0){return(0,l.z)($.y,se)}},5577:(ct,Ae,U)=>{U.d(Ae,{z:()=>fe});var l=U(4004),$=U(8421),P=U(4482),se=U(9672),ue=U(5403),ge=U(576);function fe(ve,z,W=1/0){return(0,ge.m)(z)?fe((X,je)=>(0,l.U)((Pe,Te)=>z(X,Pe,je,Te))((0,$.Xf)(ve(X,je))),W):("number"==typeof z&&(W=z),(0,P.e)((X,je)=>function _e(ve,z,W,X,je,Pe,Te,rt){const Ce=[];let me=0,Je=0,Ye=!1;const Fe=()=>{Ye&&!Ce.length&&!me&&z.complete()},Re=qe=>me<X?Ie(qe):Ce.push(qe),Ie=qe=>{Pe&&z.next(qe),me++;let ie=!1;(0,$.Xf)(W(qe,Je++)).subscribe((0,ue.x)(z,ce=>{je?.(ce),Pe?Re(ce):z.next(ce)},()=>{ie=!0},void 0,()=>{if(ie)try{for(me--;Ce.length&&me<X;){const ce=Ce.shift();Te?(0,se.f)(z,Te,()=>Ie(ce)):Ie(ce)}Fe()}catch(ce){z.error(ce)}}))};return ve.subscribe((0,ue.x)(z,Re,()=>{Ye=!0,Fe()})),()=>{rt?.()}}(X,je,ve,W)))}},5363:(ct,Ae,U)=>{U.d(Ae,{Q:()=>se});var l=U(9672),$=U(4482),P=U(5403);function se(ue,_e=0){return(0,$.e)((ge,fe)=>{ge.subscribe((0,P.x)(fe,ve=>(0,l.f)(fe,ue,()=>fe.next(ve),_e),()=>(0,l.f)(fe,ue,()=>fe.complete(),_e),ve=>(0,l.f)(fe,ue,()=>fe.error(ve),_e)))})}},3099:(ct,Ae,U)=>{U.d(Ae,{B:()=>ue});var l=U(8421),$=U(7579),P=U(930),se=U(4482);function ue(ge={}){const{connector:fe=(()=>new $.x),resetOnError:ve=!0,resetOnComplete:z=!0,resetOnRefCountZero:W=!0}=ge;return X=>{let je,Pe,Te,rt=0,Ce=!1,me=!1;const Je=()=>{Pe?.unsubscribe(),Pe=void 0},Ye=()=>{Je(),je=Te=void 0,Ce=me=!1},Fe=()=>{const Re=je;Ye(),Re?.unsubscribe()};return(0,se.e)((Re,Ie)=>{rt++,!me&&!Ce&&Je();const qe=Te=Te??fe();Ie.add(()=>{rt--,0===rt&&!me&&!Ce&&(Pe=_e(Fe,W))}),qe.subscribe(Ie),!je&&rt>0&&(je=new P.Hp({next:ie=>qe.next(ie),error:ie=>{me=!0,Je(),Pe=_e(Ye,ve,ie),qe.error(ie)},complete:()=>{Ce=!0,Je(),Pe=_e(Ye,z),qe.complete()}}),(0,l.Xf)(Re).subscribe(je))})(X)}}function _e(ge,fe,...ve){if(!0===fe)return void ge();if(!1===fe)return;const z=new P.Hp({next:()=>{z.unsubscribe(),ge()}});return fe(...ve).subscribe(z)}},9468:(ct,Ae,U)=>{U.d(Ae,{R:()=>$});var l=U(4482);function $(P,se=0){return(0,l.e)((ue,_e)=>{_e.add(P.schedule(()=>ue.subscribe(_e),se))})}},8505:(ct,Ae,U)=>{U.d(Ae,{b:()=>ue});var l=U(576),$=U(4482),P=U(5403),se=U(4671);function ue(_e,ge,fe){const ve=(0,l.m)(_e)||ge||fe?{next:_e,error:ge,complete:fe}:_e;return ve?(0,$.e)((z,W)=>{var X;null===(X=ve.subscribe)||void 0===X||X.call(ve);let je=!0;z.subscribe((0,P.x)(W,Pe=>{var Te;null===(Te=ve.next)||void 0===Te||Te.call(ve,Pe),W.next(Pe)},()=>{var Pe;je=!1,null===(Pe=ve.complete)||void 0===Pe||Pe.call(ve),W.complete()},Pe=>{var Te;je=!1,null===(Te=ve.error)||void 0===Te||Te.call(ve,Pe),W.error(Pe)},()=>{var Pe,Te;je&&(null===(Pe=ve.unsubscribe)||void 0===Pe||Pe.call(ve)),null===(Te=ve.finalize)||void 0===Te||Te.call(ve)}))}):se.y}},4408:(ct,Ae,U)=>{U.d(Ae,{o:()=>ue});var l=U(727);class $ extends l.w0{constructor(ge,fe){super()}schedule(ge,fe=0){return this}}const P={setInterval(_e,ge,...fe){const{delegate:ve}=P;return ve?.setInterval?ve.setInterval(_e,ge,...fe):setInterval(_e,ge,...fe)},clearInterval(_e){const{delegate:ge}=P;return(ge?.clearInterval||clearInterval)(_e)},delegate:void 0};var se=U(8737);class ue extends ${constructor(ge,fe){super(ge,fe),this.scheduler=ge,this.work=fe,this.pending=!1}schedule(ge,fe=0){var ve;if(this.closed)return this;this.state=ge;const z=this.id,W=this.scheduler;return null!=z&&(this.id=this.recycleAsyncId(W,z,fe)),this.pending=!0,this.delay=fe,this.id=null!==(ve=this.id)&&void 0!==ve?ve:this.requestAsyncId(W,this.id,fe),this}requestAsyncId(ge,fe,ve=0){return P.setInterval(ge.flush.bind(ge,this),ve)}recycleAsyncId(ge,fe,ve=0){if(null!=ve&&this.delay===ve&&!1===this.pending)return fe;null!=fe&&P.clearInterval(fe)}execute(ge,fe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ve=this._execute(ge,fe);if(ve)return ve;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ge,fe){let z,ve=!1;try{this.work(ge)}catch(W){ve=!0,z=W||new Error("Scheduled action threw falsy error")}if(ve)return this.unsubscribe(),z}unsubscribe(){if(!this.closed){const{id:ge,scheduler:fe}=this,{actions:ve}=fe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(ve,this),null!=ge&&(this.id=this.recycleAsyncId(fe,ge,null)),this.delay=null,super.unsubscribe()}}}},7565:(ct,Ae,U)=>{U.d(Ae,{v:()=>P});var l=U(6063);class ${constructor(ue,_e=$.now){this.schedulerActionCtor=ue,this.now=_e}schedule(ue,_e=0,ge){return new this.schedulerActionCtor(this,ue).schedule(ge,_e)}}$.now=l.l.now;class P extends ${constructor(ue,_e=$.now){super(ue,_e),this.actions=[],this._active=!1}flush(ue){const{actions:_e}=this;if(this._active)return void _e.push(ue);let ge;this._active=!0;do{if(ge=ue.execute(ue.state,ue.delay))break}while(ue=_e.shift());if(this._active=!1,ge){for(;ue=_e.shift();)ue.unsubscribe();throw ge}}}},4986:(ct,Ae,U)=>{U.d(Ae,{P:()=>se,z:()=>P});var l=U(4408);const P=new(U(7565).v)(l.o),se=P},6063:(ct,Ae,U)=>{U.d(Ae,{l:()=>l});const l={now:()=>(l.delegate||Date).now(),delegate:void 0}},3410:(ct,Ae,U)=>{U.d(Ae,{z:()=>l});const l={setTimeout($,P,...se){const{delegate:ue}=l;return ue?.setTimeout?ue.setTimeout($,P,...se):setTimeout($,P,...se)},clearTimeout($){const{delegate:P}=l;return(P?.clearTimeout||clearTimeout)($)},delegate:void 0}},2202:(ct,Ae,U)=>{U.d(Ae,{h:()=>$});const $=function l(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ct,Ae,U)=>{U.d(Ae,{L:()=>l});const l="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(ct,Ae,U)=>{U.d(Ae,{_6:()=>_e,jO:()=>se,yG:()=>ue});var l=U(576),$=U(3532);function P(ge){return ge[ge.length-1]}function se(ge){return(0,l.m)(P(ge))?ge.pop():void 0}function ue(ge){return(0,$.K)(P(ge))?ge.pop():void 0}function _e(ge,fe){return"number"==typeof P(ge)?ge.pop():fe}},8737:(ct,Ae,U)=>{function l($,P){if($){const se=$.indexOf(P);0<=se&&$.splice(se,1)}}U.d(Ae,{P:()=>l})},3888:(ct,Ae,U)=>{function l($){const se=$(ue=>{Error.call(ue),ue.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}U.d(Ae,{d:()=>l})},2806:(ct,Ae,U)=>{U.d(Ae,{O:()=>se,x:()=>P});var l=U(2416);let $=null;function P(ue){if(l.v.useDeprecatedSynchronousErrorHandling){const _e=!$;if(_e&&($={errorThrown:!1,error:null}),ue(),_e){const{errorThrown:ge,error:fe}=$;if($=null,ge)throw fe}}else ue()}function se(ue){l.v.useDeprecatedSynchronousErrorHandling&&$&&($.errorThrown=!0,$.error=ue)}},9672:(ct,Ae,U)=>{function l($,P,se,ue=0,_e=!1){const ge=P.schedule(function(){se(),_e?$.add(this.schedule(null,ue)):this.unsubscribe()},ue);if($.add(ge),!_e)return ge}U.d(Ae,{f:()=>l})},4671:(ct,Ae,U)=>{function l($){return $}U.d(Ae,{y:()=>l})},1144:(ct,Ae,U)=>{U.d(Ae,{z:()=>l});const l=$=>$&&"number"==typeof $.length&&"function"!=typeof $},2206:(ct,Ae,U)=>{U.d(Ae,{D:()=>$});var l=U(576);function $(P){return Symbol.asyncIterator&&(0,l.m)(P?.[Symbol.asyncIterator])}},576:(ct,Ae,U)=>{function l($){return"function"==typeof $}U.d(Ae,{m:()=>l})},3670:(ct,Ae,U)=>{U.d(Ae,{c:()=>P});var l=U(8822),$=U(576);function P(se){return(0,$.m)(se[l.L])}},6495:(ct,Ae,U)=>{U.d(Ae,{T:()=>P});var l=U(2202),$=U(576);function P(se){return(0,$.m)(se?.[l.h])}},8239:(ct,Ae,U)=>{U.d(Ae,{t:()=>$});var l=U(576);function $(P){return(0,l.m)(P?.then)}},3260:(ct,Ae,U)=>{U.d(Ae,{L:()=>se,Q:()=>P});var l=U(655),$=U(576);function P(ue){return(0,l.FC)(this,arguments,function*(){const ge=ue.getReader();try{for(;;){const{value:fe,done:ve}=yield(0,l.qq)(ge.read());if(ve)return yield(0,l.qq)(void 0);yield yield(0,l.qq)(fe)}}finally{ge.releaseLock()}})}function se(ue){return(0,$.m)(ue?.getReader)}},3532:(ct,Ae,U)=>{U.d(Ae,{K:()=>$});var l=U(576);function $(P){return P&&(0,l.m)(P.schedule)}},4482:(ct,Ae,U)=>{U.d(Ae,{A:()=>$,e:()=>P});var l=U(576);function $(se){return(0,l.m)(se?.lift)}function P(se){return ue=>{if($(ue))return ue.lift(function(_e){try{return se(_e,this)}catch(ge){this.error(ge)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(ct,Ae,U)=>{function l(){}U.d(Ae,{Z:()=>l})},9635:(ct,Ae,U)=>{U.d(Ae,{U:()=>P,z:()=>$});var l=U(4671);function $(...se){return P(se)}function P(se){return 0===se.length?l.y:1===se.length?se[0]:function(_e){return se.reduce((ge,fe)=>fe(ge),_e)}}},7849:(ct,Ae,U)=>{U.d(Ae,{h:()=>P});var l=U(2416),$=U(3410);function P(se){$.z.setTimeout(()=>{const{onUnhandledError:ue}=l.v;if(!ue)throw se;ue(se)})}},4532:(ct,Ae,U)=>{function l($){return new TypeError(`You provided ${null!==$&&"object"==typeof $?"an invalid object":`'${$}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}U.d(Ae,{z:()=>l})},655:(ct,Ae,U)=>{function se(Q,ee){var pe={};for(var oe in Q)Object.prototype.hasOwnProperty.call(Q,oe)&&ee.indexOf(oe)<0&&(pe[oe]=Q[oe]);if(null!=Q&&"function"==typeof Object.getOwnPropertySymbols){var Ve=0;for(oe=Object.getOwnPropertySymbols(Q);Ve<oe.length;Ve++)ee.indexOf(oe[Ve])<0&&Object.prototype.propertyIsEnumerable.call(Q,oe[Ve])&&(pe[oe[Ve]]=Q[oe[Ve]])}return pe}function fe(Q,ee,pe,oe){return new(pe||(pe=Promise))(function(Be,gt){function an(hn){try{Ze(oe.next(hn))}catch(In){gt(In)}}function Bt(hn){try{Ze(oe.throw(hn))}catch(In){gt(In)}}function Ze(hn){hn.done?Be(hn.value):function Ve(Be){return Be instanceof pe?Be:new pe(function(gt){gt(Be)})}(hn.value).then(an,Bt)}Ze((oe=oe.apply(Q,ee||[])).next())})}function Ce(Q){return this instanceof Ce?(this.v=Q,this):new Ce(Q)}function me(Q,ee,pe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ve,oe=pe.apply(Q,ee||[]),Be=[];return Ve={},gt("next"),gt("throw"),gt("return"),Ve[Symbol.asyncIterator]=function(){return this},Ve;function gt(tn){oe[tn]&&(Ve[tn]=function(nn){return new Promise(function(qt,Lt){Be.push([tn,nn,qt,Lt])>1||an(tn,nn)})})}function an(tn,nn){try{!function Bt(tn){tn.value instanceof Ce?Promise.resolve(tn.value.v).then(Ze,hn):In(Be[0][2],tn)}(oe[tn](nn))}catch(qt){In(Be[0][3],qt)}}function Ze(tn){an("next",tn)}function hn(tn){an("throw",tn)}function In(tn,nn){tn(nn),Be.shift(),Be.length&&an(Be[0][0],Be[0][1])}}function Ye(Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var pe,ee=Q[Symbol.asyncIterator];return ee?ee.call(Q):(Q=function X(Q){var ee="function"==typeof Symbol&&Symbol.iterator,pe=ee&&Q[ee],oe=0;if(pe)return pe.call(Q);if(Q&&"number"==typeof Q.length)return{next:function(){return Q&&oe>=Q.length&&(Q=void 0),{value:Q&&Q[oe++],done:!Q}}};throw new TypeError(ee?"Object is not iterable.":"Symbol.iterator is not defined.")}(Q),pe={},oe("next"),oe("throw"),oe("return"),pe[Symbol.asyncIterator]=function(){return this},pe);function oe(Be){pe[Be]=Q[Be]&&function(gt){return new Promise(function(an,Bt){!function Ve(Be,gt,an,Bt){Promise.resolve(Bt).then(function(Ze){Be({value:Ze,done:an})},gt)}(an,Bt,(gt=Q[Be](gt)).done,gt.value)})}}}U.d(Ae,{FC:()=>me,KL:()=>Ye,_T:()=>se,mG:()=>fe,qq:()=>Ce})},4650:(ct,Ae,U)=>{U.d(Ae,{$8M:()=>$u,$Z:()=>pS,AFp:()=>Qb,AaK:()=>fe,AsE:()=>em,BQk:()=>Kg,CHM:()=>xh,CRH:()=>jf,CZH:()=>cl,CqO:()=>SC,D6c:()=>Eu,EJc:()=>kv,EpF:()=>Yg,F4k:()=>Ly,FYo:()=>V_,FiY:()=>Me,G48:()=>qv,GfV:()=>B_,Gpc:()=>W,JOm:()=>Io,KtG:()=>Zo,LFG:()=>$n,LSH:()=>Hw,Lbi:()=>Xb,Lck:()=>sx,MGl:()=>xf,MMx:()=>sv,NdJ:()=>Af,O4$:()=>Nl,OlP:()=>Sn,Oqu:()=>jy,PXZ:()=>dI,Q2q:()=>Ry,Q6J:()=>IC,QGY:()=>Sf,QP$:()=>Oe,Qsj:()=>ND,R0b:()=>Zs,RDi:()=>Vw,Rgc:()=>Vf,SBq:()=>ei,Sil:()=>rI,Suo:()=>Nb,TTD:()=>Ns,TgZ:()=>Py,X6Q:()=>Gv,XFs:()=>Qe,Xpm:()=>De,Xts:()=>A_,Y36:()=>ac,YKP:()=>ix,YNc:()=>bC,Yjl:()=>H,Yz7:()=>nn,Z0I:()=>qi,ZZ4:()=>Yv,_Bn:()=>rx,_UZ:()=>DC,_Vd:()=>vd,_c5:()=>hO,_uU:()=>$C,aQg:()=>Qv,c2e:()=>aM,cJS:()=>Lt,cg1:()=>kf,dDg:()=>cI,dqk:()=>xt,eFA:()=>wM,ekj:()=>By,eoX:()=>Uv,f3M:()=>tu,g9A:()=>Em,h0i:()=>Cc,hGG:()=>WM,hij:()=>vc,iGM:()=>kb,ifc:()=>_t,ip1:()=>xv,jDz:()=>Cb,kL8:()=>Zy,kYT:()=>Z,lG2:()=>Y,lqb:()=>Zu,lri:()=>Fv,n5z:()=>Us,oAB:()=>Xt,oxw:()=>ZS,q4F:()=>nE,qLn:()=>ef,qOj:()=>xy,qZA:()=>Oy,rWj:()=>Lv,s9C:()=>Qt,sBO:()=>Wv,sIi:()=>If,s_b:()=>pm,soG:()=>bc,tb:()=>Rv,tp0:()=>pt,uIk:()=>My,vHH:()=>Te,vpe:()=>Ea,wAp:()=>vt,xp6:()=>IE,ynx:()=>zg,z2F:()=>Hv,zSh:()=>Xh,zs3:()=>pu});var l=U(7579),$=U(727),P=U(9751),se=U(6451),ue=U(3099);function _e(s){for(let o in s)if(s[o]===_e)return o;throw Error("Could not find renamed property on target object.")}function ge(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function fe(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(fe).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function ve(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const z=_e({__forward_ref__:_e});function W(s){return s.__forward_ref__=W,s.toString=function(){return fe(this())},s}function X(s){return je(s)?s():s}function je(s){return"function"==typeof s&&s.hasOwnProperty(z)&&s.__forward_ref__===W}class Te extends Error{constructor(o,u){super(function rt(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,u)),this.code=o}}function Ce(s){return"string"==typeof s?s:null==s?"":String(s)}function Re(s,o){throw new Te(-201,!1)}function Bt(s,o){null==s&&function Ze(s,o,u,d){throw new Error(`ASSERTION ERROR: ${s}`+(null==d?"":` [Expected=> ${u} ${d} ${o} <=Actual]`))}(o,s,null,"!=")}function nn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Lt(s){return{providers:s.providers||[],imports:s.imports||[]}}function Cr(s){return Br(s,jr)||Br(s,Ti)}function qi(s){return null!==Cr(s)}function Br(s,o){return s.hasOwnProperty(o)?s[o]:null}function Zi(s){return s&&(s.hasOwnProperty(Un)||s.hasOwnProperty(zi))?s[Un]:null}const jr=_e({\u0275prov:_e}),Un=_e({\u0275inj:_e}),Ti=_e({ngInjectableDef:_e}),zi=_e({ngInjectorDef:_e});var Qe=(()=>((Qe=Qe||{})[Qe.Default=0]="Default",Qe[Qe.Host=1]="Host",Qe[Qe.Self=2]="Self",Qe[Qe.SkipSelf=4]="SkipSelf",Qe[Qe.Optional=8]="Optional",Qe))();let er;function wn(s){const o=er;return er=s,o}function gr(s,o,u){const d=Cr(s);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:u&Qe.Optional?null:void 0!==o?o:void Re(fe(s))}function En(s){return{toString:s}.toString()}var Tn=(()=>((Tn=Tn||{})[Tn.OnPush=0]="OnPush",Tn[Tn.Default=1]="Default",Tn))(),_t=(()=>{return(s=_t||(_t={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",_t;var s})();const xt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Rr={},St=[],kr=_e({\u0275cmp:_e}),Nt=_e({\u0275dir:_e}),Zr=_e({\u0275pipe:_e}),Kt=_e({\u0275mod:_e}),lr=_e({\u0275fac:_e}),Mn=_e({__NG_ELEMENT_ID__:_e});let et=0;function De(s){return En(()=>{const u=!0===s.standalone,d={},f={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:d,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Tn.OnPush,directiveDefs:null,pipeDefs:null,standalone:u,dependencies:u&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||St,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||_t.Emulated,id:"c"+et++,styles:s.styles||St,_:null,setInput:null,schemas:s.schemas||null,tView:null},p=s.dependencies,v=s.features;return f.inputs=q(s.inputs,d),f.outputs=q(s.outputs),v&&v.forEach(E=>E(f)),f.directiveDefs=p?()=>("function"==typeof p?p():p).map(bt).filter(It):null,f.pipeDefs=p?()=>("function"==typeof p?p():p).map(re).filter(It):null,f})}function bt(s){return k(s)||B(s)}function It(s){return null!==s}function Xt(s){return En(()=>({type:s.type,bootstrap:s.bootstrap||St,declarations:s.declarations||St,imports:s.imports||St,exports:s.exports||St,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function Z(s,o){return En(()=>{const u=st(s,!0);u.declarations=o.declarations||St,u.imports=o.imports||St,u.exports=o.exports||St})}function q(s,o){if(null==s)return Rr;const u={};for(const d in s)if(s.hasOwnProperty(d)){let f=s[d],p=f;Array.isArray(f)&&(p=f[1],f=f[0]),u[f]=d,o&&(o[f]=p)}return u}const Y=De;function H(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function k(s){return s[kr]||null}function B(s){return s[Nt]||null}function re(s){return s[Zr]||null}function Oe(s){const o=k(s)||B(s)||re(s);return null!==o&&o.standalone}function st(s,o){const u=s[Kt]||null;if(!u&&!0===o)throw new Error(`Type ${fe(s)} does not have '\u0275mod' property.`);return u}function tr(s){return Array.isArray(s)&&"object"==typeof s[1]}function li(s){return Array.isArray(s)&&!0===s[1]}function Vo(s){return 0!=(8&s.flags)}function bl(s){return 2==(2&s.flags)}function Ma(s){return 1==(1&s.flags)}function Kr(s){return null!==s.template}function Il(s){return 0!=(256&s[2])}function br(s,o){return s.hasOwnProperty(lr)?s[lr]:null}class $o{constructor(o,u,d){this.previousValue=o,this.currentValue=u,this.firstChange=d}isFirstChange(){return this.firstChange}}function Ns(){return Hc}function Hc(s){return s.type.prototype.ngOnChanges&&(s.setInput=Dl),Ru}function Ru(){const s=Go(this),o=s?.current;if(o){const u=s.previous;if(u===Rr)s.previous=o;else for(let d in o)u[d]=o[d];s.current=null,this.ngOnChanges(o)}}function Dl(s,o,u,d){const f=Go(s)||function Sh(s,o){return s[$c]=o}(s,{previous:Rr,current:null}),p=f.current||(f.current={}),v=f.previous,E=this.declaredInputs[u],b=v[E];p[E]=new $o(b&&b.currentValue,o,v===Rr),s[d]=o}Ns.ngInherit=!0;const $c="__ngSimpleChanges__";function Go(s){return s[$c]||null}function Fn(s){for(;Array.isArray(s);)s=s[0];return s}function Si(s,o){return Fn(o[s])}function Ir(s,o){return Fn(o[s.index])}function uo(s,o){return s.data[o]}function un(s,o){const u=o[s];return tr(u)?u:u[0]}function Ps(s){return 64==(64&s[2])}function hi(s,o){return null==o?null:s[o]}function Na(s){s[18]=0}function Vn(s,o){s[5]+=o;let u=s,d=s[3];for(;null!==d&&(1===o&&1===u[5]||-1===o&&0===u[5]);)d[5]+=o,u=d,d=d[3]}const Rt={lFrame:$a(null),bindingsEnabled:!0};function lo(){return Rt.bindingsEnabled}function ke(){return Rt.lFrame.lView}function Wt(){return Rt.lFrame.tView}function xh(s){return Rt.lFrame.contextLView=s,s[8]}function Zo(s){return Rt.lFrame.contextLView=null,s}function nr(){let s=zo();for(;null!==s&&64===s.type;)s=s.parent;return s}function zo(){return Rt.lFrame.currentTNode}function $r(s,o){const u=Rt.lFrame;u.currentTNode=s,u.isParent=o}function Pu(){return Rt.lFrame.isParent}function Ko(){Rt.lFrame.isParent=!1}function Ba(){return Rt.lFrame.bindingIndex++}function fs(s){const o=Rt.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}function Zc(s,o){const u=Rt.lFrame;u.bindingIndex=u.bindingRootIndex=s,Yo(o)}function Yo(s){Rt.lFrame.currentDirectiveIndex=s}function ja(){return Rt.lFrame.currentQueryIndex}function kl(s){Rt.lFrame.currentQueryIndex=s}function Ha(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function zc(s,o,u){if(u&Qe.SkipSelf){let f=o,p=s;for(;!(f=f.parent,null!==f||u&Qe.Host||(f=Ha(p),null===f||(p=p[15],10&f.type))););if(null===f)return!1;o=f,s=p}const d=Rt.lFrame=kh();return d.currentTNode=o,d.lView=s,!0}function Qo(s){const o=kh(),u=s[1];Rt.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function kh(){const s=Rt.lFrame,o=null===s?null:s.child;return null===o?$a(s):o}function $a(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Nh(){const s=Rt.lFrame;return Rt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Kc=Nh;function Os(){const s=Nh();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function kn(){return Rt.lFrame.selectedIndex}function ps(s){Rt.lFrame.selectedIndex=s}function Nn(){const s=Rt.lFrame;return uo(s.tView,s.selectedIndex)}function Nl(){Rt.lFrame.currentNamespace="svg"}function Ou(s,o){for(let u=o.directiveStart,d=o.directiveEnd;u<d;u++){const p=s.data[u].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:E,ngAfterViewInit:b,ngAfterViewChecked:A,ngOnDestroy:N}=p;v&&(s.contentHooks||(s.contentHooks=[])).push(-u,v),E&&((s.contentHooks||(s.contentHooks=[])).push(u,E),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,E)),b&&(s.viewHooks||(s.viewHooks=[])).push(-u,b),A&&((s.viewHooks||(s.viewHooks=[])).push(u,A),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,A)),null!=N&&(s.destroyHooks||(s.destroyHooks=[])).push(u,N)}}function Jo(s,o,u){ea(s,o,3,u)}function Xo(s,o,u,d){(3&s[2])===u&&ea(s,o,u,d)}function Qc(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function ea(s,o,u,d){const p=d??-1,v=o.length-1;let E=0;for(let b=void 0!==d?65535&s[18]:0;b<v;b++)if("number"==typeof o[b+1]){if(E=o[b],null!=d&&E>=d)break}else o[b]<0&&(s[18]+=65536),(E<p||-1==p)&&(Jc(s,u,o,b),s[18]=(4294901760&s[18])+b+2),b++}function Jc(s,o,u,d){const f=u[d]<0,p=u[d+1],E=s[f?-u[d]:u[d]];if(f){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{p.call(E)}finally{}}}else try{p.call(E)}finally{}}class fi{constructor(o,u,d){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=d}}function gs(s,o,u){let d=0;for(;d<u.length;){const f=u[d];if("number"==typeof f){if(0!==f)break;d++;const p=u[d++],v=u[d++],E=u[d++];s.setAttribute(o,v,E,p)}else{const p=f,v=u[++d];Vl(p)?s.setProperty(o,p,v):s.setAttribute(o,p,v),d++}}return d}function Ga(s){return 3===s||4===s||6===s}function Vl(s){return 64===s.charCodeAt(0)}function qa(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let d=0;d<o.length;d++){const f=o[d];"number"==typeof f?u=f:0===u||ed(s,u,f,null,-1===u||2===u?o[++d]:null)}}return s}function ed(s,o,u,d,f){let p=0,v=s.length;if(-1===o)v=-1;else for(;p<s.length;){const E=s[p++];if("number"==typeof E){if(E===o){v=-1;break}if(E>o){v=p-1;break}}}for(;p<s.length;){const E=s[p];if("number"==typeof E)break;if(E===u){if(null===d)return void(null!==f&&(s[p+1]=f));if(d===s[p+1])return void(s[p+2]=f)}p++,null!==d&&p++,null!==f&&p++}-1!==v&&(s.splice(v,0,o),p=v+1),s.splice(p++,0,u),null!==d&&s.splice(p++,0,d),null!==f&&s.splice(p++,0,f)}function Fh(s){return-1!==s}function ir(s){return 32767&s}function Ls(s,o){let u=function Lh(s){return s>>16}(s),d=o;for(;u>0;)d=d[15],u--;return d}let Bl=!0;function Wa(s){const o=Bl;return Bl=s,o}let td=0;const Qr={};function ms(s,o){const u=Bu(s,o);if(-1!==u)return u;const d=o[1];d.firstCreatePass&&(s.injectorIndex=o.length,jl(d.data,s),jl(o,null),jl(d.blueprint,null));const f=Za(s,o),p=s.injectorIndex;if(Fh(f)){const v=ir(f),E=Ls(f,o),b=E[1].data;for(let A=0;A<8;A++)o[p+A]=E[v+A]|b[v+A]}return o[p+8]=f,p}function jl(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Bu(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Za(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,d=null,f=o;for(;null!==f;){if(d=ua(f),null===d)return-1;if(u++,f=f[15],-1!==d.injectorIndex)return d.injectorIndex|u<<16}return-1}function ho(s,o,u){!function nd(s,o,u){let d;"string"==typeof u?d=u.charCodeAt(0)||0:u.hasOwnProperty(Mn)&&(d=u[Mn]),null==d&&(d=u[Mn]=td++);const f=255&d;o.data[s+(f>>5)]|=1<<f}(s,o,u)}function na(s,o,u){if(u&Qe.Optional||void 0!==s)return s;Re()}function ra(s,o,u,d){if(u&Qe.Optional&&void 0===d&&(d=null),0==(u&(Qe.Self|Qe.Host))){const f=s[9],p=wn(void 0);try{return f?f.get(o,d,u&Qe.Optional):gr(o,d,u&Qe.Optional)}finally{wn(p)}}return na(d,0,u)}function ia(s,o,u,d=Qe.Default,f){if(null!==s){if(1024&o[2]){const v=function Bh(s,o,u,d,f){let p=s,v=o;for(;null!==p&&null!==v&&1024&v[2]&&!(256&v[2]);){const E=rd(p,v,u,d|Qe.Self,Qr);if(E!==Qr)return E;let b=p.parent;if(!b){const A=v[21];if(A){const N=A.get(u,Qr,d);if(N!==Qr)return N}b=ua(v),v=v[15]}p=b}return f}(s,o,u,d,Qr);if(v!==Qr)return v}const p=rd(s,o,u,d,Qr);if(p!==Qr)return p}return ra(o,u,d,f)}function rd(s,o,u,d,f){const p=function Vh(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Mn)?s[Mn]:void 0;return"number"==typeof o?o>=0?255&o:Hl:o}(u);if("function"==typeof p){if(!zc(o,s,d))return d&Qe.Host?na(f,0,d):ra(o,u,d,f);try{const v=p(d);if(null!=v||d&Qe.Optional)return v;Re()}finally{Kc()}}else if("number"==typeof p){let v=null,E=Bu(s,o),b=-1,A=d&Qe.Host?o[16][6]:null;for((-1===E||d&Qe.SkipSelf)&&(b=-1===E?Za(s,o):o[E+8],-1!==b&&Hu(d,!1)?(v=o[1],E=ir(b),o=Ls(b,o)):E=-1);-1!==E;){const N=o[1];if(sa(p,E,N.data)){const V=ju(E,o,u,v,d,A);if(V!==Qr)return V}b=o[E+8],-1!==b&&Hu(d,o[1].data[E+8]===A)&&sa(p,E,o)?(v=N,E=ir(b),o=Ls(b,o)):E=-1}}return f}function ju(s,o,u,d,f,p){const v=o[1],E=v.data[s+8],N=Ka(E,v,u,null==d?bl(E)&&Bl:d!=v&&0!=(3&E.type),f&Qe.Host&&p===E);return null!==N?Qi(o,v,N,E):Qr}function Ka(s,o,u,d,f){const p=s.providerIndexes,v=o.data,E=1048575&p,b=s.directiveStart,N=p>>20,K=f?E+N:s.directiveEnd;for(let te=d?E:E+N;te<K;te++){const be=v[te];if(te<b&&u===be||te>=b&&be.type===u)return te}if(f){const te=v[b];if(te&&Kr(te)&&te.type===u)return b}return null}function Qi(s,o,u,d){let f=s[u];const p=o.data;if(function Ul(s){return s instanceof fi}(f)){const v=f;v.resolving&&function Je(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Te(-200,`Circular dependency in DI detected for ${s}${u}`)}(function me(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Ce(s)}(p[u]));const E=Wa(v.canSeeViewProviders);v.resolving=!0;const b=v.injectImpl?wn(v.injectImpl):null;zc(s,d,Qe.Default);try{f=s[u]=v.factory(void 0,p,s,d),o.firstCreatePass&&u>=d.directiveStart&&function Ll(s,o,u){const{ngOnChanges:d,ngOnInit:f,ngDoCheck:p}=o.type.prototype;if(d){const v=Hc(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,v),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,v)}f&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,f),p&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,p),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,p))}(u,p[u],o)}finally{null!==b&&wn(b),Wa(E),v.resolving=!1,Kc()}}return f}function sa(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function Hu(s,o){return!(s&Qe.Self||s&Qe.Host&&o)}class oa{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,d){return ia(this._tNode,this._lView,o,d,u)}}function Hl(){return new oa(nr(),ke())}function Us(s){return En(()=>{const o=s.prototype.constructor,u=o[lr]||aa(o),d=Object.prototype;let f=Object.getPrototypeOf(s.prototype).constructor;for(;f&&f!==d;){const p=f[lr]||aa(f);if(p&&p!==u)return p;f=Object.getPrototypeOf(f)}return p=>new p})}function aa(s){return je(s)?()=>{const o=aa(X(s));return o&&o()}:br(s)}function ua(s){const o=s[1],u=o.type;return 2===u?o.declTNode:1===u?s[6]:null}function $u(s){return function za(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const d=u.length;let f=0;for(;f<d;){const p=u[f];if(Ga(p))break;if(0===p)f+=2;else if("number"==typeof p)for(f++;f<d&&"string"==typeof u[f];)f++;else{if(p===o)return u[f+1];f+=2}}}return null}(nr(),s)}const la="__parameters__";function da(s,o,u){return En(()=>{const d=function $l(s){return function(...u){if(s){const d=s(...u);for(const f in d)this[f]=d[f]}}}(o);function f(...p){if(this instanceof f)return d.apply(this,p),this;const v=new f(...p);return E.annotation=v,E;function E(b,A,N){const V=b.hasOwnProperty(la)?b[la]:Object.defineProperty(b,la,{value:[]})[la];for(;V.length<=N;)V.push(null);return(V[N]=V[N]||[]).push(v),b}}return u&&(f.prototype=Object.create(u.prototype)),f.prototype.ngMetadataName=s,f.annotationCls=f,f})}class Sn{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=nn({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Pr(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let d=s[u];Array.isArray(d)?(o===s&&(o=s.slice(0,u)),Pr(d,o)):o!==s&&o.push(d)}return o}function _s(s,o){s.forEach(u=>Array.isArray(u)?_s(u,o):o(u))}function Ya(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function po(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Or(s,o,u){let d=Mi(s,o);return d>=0?s[1|d]=u:(d=~d,function yt(s,o,u,d){let f=s.length;if(f==o)s.push(u,d);else if(1===f)s.push(d,s[0]),s[0]=u;else{for(f--,s.push(s[f-1],s[f]);f>o;)s[f]=s[f-2],f--;s[o]=u,s[o+1]=d}}(s,d,o,u)),d}function ql(s,o){const u=Mi(s,o);if(u>=0)return s[1|u]}function Mi(s,o){return function Jr(s,o,u){let d=0,f=s.length>>u;for(;f!==d;){const p=d+(f-d>>1),v=s[p<<u];if(o===v)return p<<u;v>o?f=p:d=p+1}return~(f<<u)}(s,o,1)}const An={},ki="__NG_DI_FLAG__",ha="ngTempTokenPath",es=/\n/gm,ts="__source";let mo;function _o(s){const o=mo;return mo=s,o}function zl(s,o=Qe.Default){if(void 0===mo)throw new Te(-203,!1);return null===mo?gr(s,void 0,o):mo.get(s,o&Qe.Optional?null:void 0,o)}function $n(s,o=Qe.Default){return(function Zn(){return er}()||zl)(X(s),o)}function tu(s,o=Qe.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),$n(s,o)}function T(s){const o=[];for(let u=0;u<s.length;u++){const d=X(s[u]);if(Array.isArray(d)){if(0===d.length)throw new Te(900,!1);let f,p=Qe.Default;for(let v=0;v<d.length;v++){const E=d[v],b=M(E);"number"==typeof b?-1===b?f=E.token:p|=b:f=E}o.push($n(f,p))}else o.push($n(d))}return o}function D(s,o){return s[ki]=o,s.prototype[ki]=o,s}function M(s){return s[ki]}const Me=D(da("Optional"),8),pt=D(da("SkipSelf"),4);let ig;function Vw(s){ig=s}class ld{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function vo(s){return s instanceof ld?s.changingThisBreaksApplicationSecurity:s}const m=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var sr=(()=>((sr=sr||{})[sr.NONE=0]="NONE",sr[sr.HTML=1]="HTML",sr[sr.STYLE=2]="STYLE",sr[sr.SCRIPT=3]="SCRIPT",sr[sr.URL=4]="URL",sr[sr.RESOURCE_URL=5]="RESOURCE_URL",sr))();function Hw(s){const o=function Pi(){const s=ke();return s&&s[12]}();return o?o.sanitize(sr.URL,s)||"":function su(s,o){const u=function fd(s){return s instanceof ld&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}(s,"URL")?vo(s):function _(s){return(s=String(s)).match(m)?s:"unsafe:"+s}(Ce(s))}const A_=new Sn("ENVIRONMENT_INITIALIZER"),x_=new Sn("INJECTOR",-1),Gw=new Sn("INJECTOR_DEF_TYPES");class TD{get(o,u=An){if(u===An){const d=new Error(`NullInjectorError: No provider for ${fe(o)}!`);throw d.name="NullInjectorError",d}return u}}function qw(...s){return{\u0275providers:Ww(0,s)}}function Ww(s,...o){const u=[],d=new Set;let f;return _s(o,p=>{const v=p;R_(v,u,[],d)&&(f||(f=[]),f.push(v))}),void 0!==f&&M_(f,u),u}function M_(s,o){for(let u=0;u<s.length;u++){const{providers:f}=s[u];_s(f,p=>{o.push(p)})}}function R_(s,o,u,d){if(!(s=X(s)))return!1;let f=null,p=Zi(s);const v=!p&&k(s);if(p||v){if(v&&!v.standalone)return!1;f=s}else{const b=s.ngModule;if(p=Zi(b),!p)return!1;f=b}const E=d.has(f);if(v){if(E)return!1;if(d.add(f),v.dependencies){const b="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const A of b)R_(A,o,u,d)}}else{if(!p)return!1;{if(null!=p.imports&&!E){let A;d.add(f);try{_s(p.imports,N=>{R_(N,o,u,d)&&(A||(A=[]),A.push(N))})}finally{}void 0!==A&&M_(A,o)}if(!E){const A=br(f)||(()=>new f);o.push({provide:f,useFactory:A,deps:St},{provide:Gw,useValue:f,multi:!0},{provide:A_,useValue:()=>$n(f),multi:!0})}const b=p.providers;null==b||E||_s(b,N=>{o.push(N)})}}return f!==s&&void 0!==s.providers}const Zw=_e({provide:String,useValue:_e});function k_(s){return null!==s&&"object"==typeof s&&Zw in s}function uu(s){return"function"==typeof s}const Xh=new Sn("Set Injector scope."),ag={},P_={};let ug;function lg(){return void 0===ug&&(ug=new TD),ug}class Zu{}class Kw extends Zu{constructor(o,u,d,f){super(),this.parent=u,this.source=d,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,L_(o,v=>this.processProvider(v)),this.records.set(x_,yd(void 0,this)),f.has("environment")&&this.records.set(Zu,yd(void 0,this));const p=this.records.get(Xh);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(Gw.multi,St,Qe.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const u=_o(this),d=wn(void 0);try{return o()}finally{_o(u),wn(d)}}get(o,u=An,d=Qe.Default){this.assertNotDestroyed();const f=_o(this),p=wn(void 0);try{if(!(d&Qe.SkipSelf)){let E=this.records.get(o);if(void 0===E){const b=function $N(s){return"function"==typeof s||"object"==typeof s&&s instanceof Sn}(o)&&Cr(o);E=b&&this.injectableDefInScope(b)?yd(cg(o),ag):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(d&Qe.Self?lg():this.parent).get(o,u=d&Qe.Optional&&u===An?null:u)}catch(v){if("NullInjectorError"===v.name){if((v[ha]=v[ha]||[]).unshift(fe(o)),f)throw v;return function j(s,o,u,d){const f=s[ha];throw o[ts]&&f.unshift(o[ts]),s.message=function J(s,o,u,d=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let f=fe(o);if(Array.isArray(o))f=o.map(fe).join(" -> ");else if("object"==typeof o){let p=[];for(let v in o)if(o.hasOwnProperty(v)){let E=o[v];p.push(v+":"+("string"==typeof E?JSON.stringify(E):fe(E)))}f=`{${p.join(", ")}}`}return`${u}${d?"("+d+")":""}[${f}]: ${s.replace(es,"\n  ")}`}("\n"+s.message,f,u,d),s.ngTokenPath=f,s[ha]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{wn(p),_o(f)}}resolveInjectorInitializers(){const o=_o(this),u=wn(void 0);try{const d=this.get(A_.multi,St,Qe.Self);for(const f of d)f()}finally{_o(o),wn(u)}}toString(){const o=[],u=this.records;for(const d of u.keys())o.push(fe(d));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Te(205,!1)}processProvider(o){let u=uu(o=X(o))?o:X(o&&o.provide);const d=function O_(s){return k_(s)?yd(void 0,s.useValue):yd(Yw(s),ag)}(o);if(uu(o)||!0!==o.multi)this.records.get(u);else{let f=this.records.get(u);f||(f=yd(void 0,ag,!0),f.factory=()=>T(f.multi),this.records.set(u,f)),u=o,f.multi.push(o)}this.records.set(u,d)}hydrate(o,u){return u.value===ag&&(u.value=P_,u.value=u.factory()),"object"==typeof u.value&&u.value&&function xD(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=X(o.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function cg(s){const o=Cr(s),u=null!==o?o.factory:br(s);if(null!==u)return u;if(s instanceof Sn)throw new Te(204,!1);if(s instanceof Function)return function AD(s){const o=s.length;if(o>0)throw function xi(s,o){const u=[];for(let d=0;d<s;d++)u.push(o);return u}(o,"?"),new Te(204,!1);const u=function On(s){const o=s&&(s[jr]||s[Ti]);if(o){const u=function Wi(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new Te(204,!1)}function Yw(s,o,u){let d;if(uu(s)){const f=X(s);return br(f)||cg(f)}if(k_(s))d=()=>X(s.useValue);else if(function zw(s){return!(!s||!s.useFactory)}(s))d=()=>s.useFactory(...T(s.deps||[]));else if(function N_(s){return!(!s||!s.useExisting)}(s))d=()=>$n(X(s.useExisting));else{const f=X(s&&(s.useClass||s.provide));if(!function Qw(s){return!!s.deps}(s))return br(f)||cg(f);d=()=>new f(...T(s.deps))}return d}function yd(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function F_(s){return!!s.\u0275providers}function L_(s,o){for(const u of s)Array.isArray(u)?L_(u,o):F_(u)?L_(u.\u0275providers,o):o(u)}class U_{}class RD{resolveComponentFactory(o){throw function Jl(s){const o=Error(`No component factory found for ${fe(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let vd=(()=>{class s{}return s.NULL=new RD,s})();function kD(){return wd(nr(),ke())}function wd(s,o){return new ei(Ir(s,o))}let ei=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=kD,s})();function eE(s){return s instanceof ei?s.nativeElement:s}class V_{}let ND=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function tE(){const s=ke(),u=un(nr().index,s);return(tr(u)?u:s)[11]}(),s})(),PD=(()=>{class s{}return s.\u0275prov=nn({token:s,providedIn:"root",factory:()=>null}),s})();class B_{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const nE=new B_("14.2.9"),dg={};function zu(s){return s.ngOriginalError}class ef{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o);this._console.error("ERROR",o),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&zu(o);for(;u&&zu(u);)u=zu(u);return u||null}}const tf=new Map;let nf=0;const rs="__ngContext__";function Cn(s,o){tr(o)?(s[rs]=o[20],function lE(s){tf.set(s[20],s)}(o)):s[rs]=o}function Cs(s){return s instanceof Function?s():s}var Io=(()=>((Io=Io||{})[Io.Important=1]="Important",Io[Io.DashCase=2]="DashCase",Io))();function hE(s,o){return undefined(s,o)}function sf(s){const o=s[3];return li(o)?o[3]:o}function gg(s){return z_(s[13])}function Z_(s){return z_(s[4])}function z_(s){for(;null!==s&&!li(s);)s=s[4];return s}function tc(s,o,u,d,f){if(null!=d){let p,v=!1;li(d)?p=d:tr(d)&&(v=!0,d=d[0]);const E=Fn(d);0===s&&null!==u?null==f?Y_(o,u,E):Qu(o,u,E,f||null,!0):1===s&&null!==u?Qu(o,u,E,f||null,!0):2===s?function QD(s,o,u){const d=ic(s,o);d&&function KD(s,o,u,d){s.removeChild(o,u,d)}(s,d,o,u)}(o,E,v):3===s&&o.destroyNode(E),null!=p&&function hf(s,o,u,d,f){const p=u[7];p!==Fn(u)&&tc(o,s,d,p,f);for(let E=10;E<u.length;E++){const b=u[E];df(b[1],b,s,o,d,p)}}(o,s,p,u,f)}}function Yt(s,o,u){return s.createElement(o,u)}function gE(s,o){const u=s[9],d=u.indexOf(o),f=o[3];512&o[2]&&(o[2]&=-513,Vn(f,-1)),u.splice(d,1)}function bd(s,o){if(s.length<=10)return;const u=10+o,d=s[u];if(d){const f=d[17];null!==f&&f!==s&&gE(f,d),o>0&&(s[u-1][4]=d[4]);const p=po(s,10+o);!function uf(s,o){df(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(d[1],d);const v=p[19];null!==v&&v.detachView(p[1]),d[3]=null,d[4]=null,d[2]&=-65}return d}function Id(s,o){if(!(128&o[2])){const u=o[11];u.destroyNode&&df(s,o,u,3,null,null),function ZD(s){let o=s[13];if(!o)return _g(s[1],s);for(;o;){let u=null;if(tr(o))u=o[13];else{const d=o[10];d&&(u=d)}if(!u){for(;o&&!o[4]&&o!==s;)tr(o)&&_g(o[1],o),o=o[3];null===o&&(o=s),tr(o)&&_g(o[1],o),u=o&&o[4]}o=u}}(o)}}function _g(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function zD(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let d=0;d<u.length;d+=2){const f=o[u[d]];if(!(f instanceof fi)){const p=u[d+1];if(Array.isArray(p))for(let v=0;v<p.length;v+=2){const E=f[p[v]],b=p[v+1];try{b.call(E)}finally{}}else try{p.call(f)}finally{}}}}(s,o),function yg(s,o){const u=s.cleanup,d=o[7];let f=-1;if(null!==u)for(let p=0;p<u.length-1;p+=2)if("string"==typeof u[p]){const v=u[p+1],E="function"==typeof v?v(o):Fn(o[v]),b=d[f=u[p+2]],A=u[p+3];"boolean"==typeof A?E.removeEventListener(u[p],b,A):A>=0?d[f=A]():d[f=-A].unsubscribe(),p+=2}else{const v=d[f=u[p+1]];u[p].call(v)}if(null!==d){for(let p=f+1;p<d.length;p++)(0,d[p])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const u=o[17];if(null!==u&&li(o[3])){u!==o[3]&&gE(u,o);const d=o[19];null!==d&&d.detachView(s)}!function $_(s){tf.delete(s[20])}(o)}}function vg(s,o,u){return function lf(s,o,u){let d=o;for(;null!==d&&40&d.type;)d=(o=d).parent;if(null===d)return u[0];if(2&d.flags){const f=s.data[d.directiveStart].encapsulation;if(f===_t.None||f===_t.Emulated)return null}return Ir(d,u)}(s,o.parent,u)}function Qu(s,o,u,d,f){s.insertBefore(o,u,d,f)}function Y_(s,o,u){s.appendChild(o,u)}function mE(s,o,u,d,f){null!==d?Qu(s,o,u,d,f):Y_(s,o,u)}function ic(s,o){return s.parentNode(o)}let vE=function yE(s,o,u){return 40&s.type?Ir(s,u):null};function sc(s,o,u,d){const f=vg(s,d,o),p=o[11],E=function _E(s,o,u){return vE(s,o,u)}(d.parent||o[6],d,o);if(null!=f)if(Array.isArray(u))for(let b=0;b<u.length;b++)mE(p,f,u[b],E,!1);else mE(p,f,u,E,!1)}function Eg(s,o){if(null!==o){const u=o.type;if(3&u)return Ir(o,s);if(4&u)return cf(-1,s[o.index]);if(8&u){const d=o.child;if(null!==d)return Eg(s,d);{const f=s[o.index];return li(f)?cf(-1,f):Fn(f)}}if(32&u)return hE(o,s)()||Fn(s[o.index]);{const d=Ju(s,o);return null!==d?Array.isArray(d)?d[0]:Eg(sf(s[16]),d):Eg(s,o.next)}}return null}function Ju(s,o){return null!==o?s[16][6].projection[o.projection]:null}function cf(s,o){const u=10+s+1;if(u<o.length){const d=o[u],f=d[1].firstChild;if(null!==f)return Eg(d,f)}return o[7]}function J_(s,o,u,d,f,p,v){for(;null!=u;){const E=d[u.index],b=u.type;if(v&&0===o&&(E&&Cn(Fn(E),d),u.flags|=4),64!=(64&u.flags))if(8&b)J_(s,o,u.child,d,f,p,!1),tc(o,s,f,E,p);else if(32&b){const A=hE(u,d);let N;for(;N=A();)tc(o,s,f,N,p);tc(o,s,f,E,p)}else 16&b?Td(s,o,d,u,f,p):tc(o,s,f,E,p);u=v?u.projectionNext:u.next}}function df(s,o,u,d,f,p){J_(u,d,s.firstChild,o,f,p,!1)}function Td(s,o,u,d,f,p){const v=u[16],b=v[6].projection[d.projection];if(Array.isArray(b))for(let A=0;A<b.length;A++)tc(o,s,f,b[A],p);else J_(s,o,b,v[3],f,p,!0)}function X_(s,o,u){s.setAttribute(o,"style",u)}function Cg(s,o,u){""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u)}function ey(s,o,u){let d=s.length;for(;;){const f=s.indexOf(o,u);if(-1===f)return f;if(0===f||s.charCodeAt(f-1)<=32){const p=o.length;if(f+p===d||s.charCodeAt(f+p)<=32)return f}u=f+1}}const wE="ng-template";function XD(s,o,u){let d=0;for(;d<s.length;){let f=s[d++];if(u&&"class"===f){if(f=s[d],-1!==ey(f.toLowerCase(),o,0))return!0}else if(1===f){for(;d<s.length&&"string"==typeof(f=s[d++]);)if(f.toLowerCase()===o)return!0;return!1}}return!1}function ty(s){return 4===s.type&&s.value!==wE}function eS(s,o,u){return o===(4!==s.type||u?s.value:wE)}function ny(s,o,u){let d=4;const f=s.attrs||[],p=function EE(s){for(let o=0;o<s.length;o++)if(Ga(s[o]))return o;return s.length}(f);let v=!1;for(let E=0;E<o.length;E++){const b=o[E];if("number"!=typeof b){if(!v)if(4&d){if(d=2|1&d,""!==b&&!eS(s,b,u)||""===b&&1===o.length){if(Oi(d))return!1;v=!0}}else{const A=8&d?b:o[++E];if(8&d&&null!==s.attrs){if(!XD(s.attrs,A,u)){if(Oi(d))return!1;v=!0}continue}const V=tS(8&d?"class":b,f,ty(s),u);if(-1===V){if(Oi(d))return!1;v=!0;continue}if(""!==A){let K;K=V>p?"":f[V+1].toLowerCase();const te=8&d?K:null;if(te&&-1!==ey(te,A,0)||2&d&&A!==K){if(Oi(d))return!1;v=!0}}}}else{if(!v&&!Oi(d)&&!Oi(b))return!1;if(v&&Oi(b))continue;v=!1,d=b|1&d}}return Oi(d)||v}function Oi(s){return 0==(1&s)}function tS(s,o,u,d){if(null===o)return-1;let f=0;if(d||!u){let p=!1;for(;f<o.length;){const v=o[f];if(v===s)return f;if(3===v||6===v)p=!0;else{if(1===v||2===v){let E=o[++f];for(;"string"==typeof E;)E=o[++f];continue}if(4===v)break;if(0===v){f+=4;continue}}f+=p?1:2}return-1}return function CE(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const d=s[u];if("number"==typeof d)return-1;if(d===o)return u;u++}return-1}(o,s)}function bg(s,o,u=!1){for(let d=0;d<o.length;d++)if(ny(s,o[d],u))return!0;return!1}function Ig(s,o){return s?":not("+o.trim()+")":o}function oc(s){let o=s[0],u=1,d=2,f="",p=!1;for(;u<s.length;){let v=s[u];if("string"==typeof v)if(2&d){const E=s[++u];f+="["+v+(E.length>0?'="'+E+'"':"")+"]"}else 8&d?f+="."+v:4&d&&(f+=" "+v);else""!==f&&!Oi(v)&&(o+=Ig(p,f),f=""),d=v,p=p||!Oi(d);u++}return""!==f&&(o+=Ig(p,f)),o}const Ht={};function IE(s){TE(Wt(),ke(),kn()+s,!1)}function TE(s,o,u,d){if(!d)if(3==(3&o[2])){const p=s.preOrderCheckHooks;null!==p&&Jo(o,p,u)}else{const p=s.preOrderHooks;null!==p&&Xo(o,p,0,u)}ps(u)}function xE(s,o=null,u=null,d){const f=ry(s,o,u,d);return f.resolveInjectorInitializers(),f}function ry(s,o=null,u=null,d,f=new Set){const p=[u||St,qw(s)];return d=d||("object"==typeof s?void 0:fe(s)),new Kw(p,o||lg(),d||null,f)}let pu=(()=>{class s{static create(u,d){if(Array.isArray(u))return xE({name:""},d,u,"");{const f=u.name??"";return xE({name:f},u.parent,u.providers,f)}}}return s.THROW_IF_NOT_FOUND=An,s.NULL=new TD,s.\u0275prov=nn({token:s,providedIn:"any",factory:()=>$n(x_)}),s.__NG_ELEMENT_ID__=-1,s})();function ac(s,o=Qe.Default){const u=ke();return null===u?$n(s,o):ia(nr(),u,X(s),o)}function pS(){throw new Error("invalid")}function ly(s,o){return s<<17|o<<2}function ga(s){return s>>17&32767}function cy(s){return 2|s}function gu(s){return(131068&s)>>2}function pf(s,o){return-131069&s|o<<2}function Ag(s){return 1|s}function Ef(s,o){const u=s.contentQueries;if(null!==u)for(let d=0;d<u.length;d+=2){const f=u[d],p=u[d+1];if(-1!==p){const v=s.data[p];kl(f),v.contentQueries(2,o[p],p)}}}function lc(s,o,u,d,f,p,v,E,b,A,N){const V=o.blueprint.slice();return V[0]=f,V[2]=76|d,(null!==N||s&&1024&s[2])&&(V[2]|=1024),Na(V),V[3]=V[15]=s,V[8]=u,V[10]=v||s&&s[10],V[11]=E||s&&s[11],V[12]=b||s&&s[12]||null,V[9]=A||s&&s[9]||null,V[6]=p,V[20]=function Xl(){return nf++}(),V[21]=N,V[16]=2==o.type?s[16]:V,V}function mu(s,o,u,d,f){let p=s.data[o];if(null===p)p=function kg(s,o,u,d,f){const p=zo(),v=Pu(),b=s.data[o]=function IS(s,o,u,d,f,p){return{type:u,index:d,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?p:p&&p.parent,u,o,d,f);return null===s.firstChild&&(s.firstChild=b),null!==p&&(v?null==p.child&&null!==b.parent&&(p.child=b):null===p.next&&(p.next=b)),b}(s,o,u,d,f),function Wc(){return Rt.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=u,p.value=d,p.attrs=f;const v=function Nu(){const s=Rt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===v?-1:v.injectorIndex}return $r(p,!0),p}function ma(s,o,u,d){if(0===u)return-1;const f=o.length;for(let p=0;p<u;p++)o.push(d),s.blueprint.push(d),s.data.push(null);return f}function Ng(s,o,u){Qo(o);try{const d=s.viewQuery;null!==d&&Dy(1,d,u);const f=s.template;null!==f&&QE(s,o,f,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Ef(s,o),s.staticViewQueries&&Dy(2,s.viewQuery,u);const p=s.components;null!==p&&function YE(s,o){for(let u=0;u<o.length;u++)PS(s,o[u])}(o,p)}catch(d){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),d}finally{o[2]&=-5,Os()}}function Pg(s,o,u,d){const f=o[2];if(128!=(128&f)){Qo(o);try{Na(o),function Va(s){return Rt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&QE(s,o,u,2,d);const v=3==(3&f);if(v){const A=s.preOrderCheckHooks;null!==A&&Jo(o,A,null)}else{const A=s.preOrderHooks;null!==A&&Xo(o,A,0,null),Qc(o,0)}if(function NS(s){for(let o=gg(s);null!==o;o=Z_(o)){if(!o[2])continue;const u=o[9];for(let d=0;d<u.length;d++){const f=u[d],p=f[3];0==(512&f[2])&&Vn(p,1),f[2]|=512}}}(o),function kS(s){for(let o=gg(s);null!==o;o=Z_(o))for(let u=10;u<o.length;u++){const d=o[u],f=d[1];Ps(d)&&Pg(f,d,f.template,d[8])}}(o),null!==s.contentQueries&&Ef(s,o),v){const A=s.contentCheckHooks;null!==A&&Jo(o,A)}else{const A=s.contentHooks;null!==A&&Xo(o,A,1),Qc(o,1)}!function ES(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let d=0;d<u.length;d++){const f=u[d];if(f<0)ps(~f);else{const p=f,v=u[++d],E=u[++d];Zc(v,p),E(2,o[p])}}}finally{ps(-1)}}(s,o);const E=s.components;null!==E&&function KE(s,o){for(let u=0;u<o.length;u++)Ug(s,o[u])}(o,E);const b=s.viewQuery;if(null!==b&&Dy(2,b,d),v){const A=s.viewCheckHooks;null!==A&&Jo(o,A)}else{const A=s.viewHooks;null!==A&&Xo(o,A,2),Qc(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,Vn(o[3],-1))}finally{Os()}}}function QE(s,o,u,d,f){const p=kn(),v=2&d;try{ps(-1),v&&o.length>22&&TE(s,o,22,!1),u(d,f)}finally{ps(p)}}function JE(s,o,u){if(Vo(o)){const f=o.directiveEnd;for(let p=o.directiveStart;p<f;p++){const v=s.data[p];v.contentQueries&&v.contentQueries(1,u[p],p)}}}function _y(s,o,u){!lo()||(function AS(s,o,u,d){const f=u.directiveStart,p=u.directiveEnd;s.firstCreatePass||ms(u,o),Cn(d,o);const v=u.initialInputs;for(let E=f;E<p;E++){const b=s.data[E],A=Kr(b);A&&RS(o,u,b);const N=Qi(o,s,E,u);Cn(N,o),null!==v&&Fg(0,E-f,N,b,0,v),A&&(un(u.index,o)[8]=N)}}(s,o,u,Ir(u,o)),128==(128&u.flags)&&function xS(s,o,u){const d=u.directiveStart,f=u.directiveEnd,p=u.index,v=function Rh(){return Rt.lFrame.currentDirectiveIndex}();try{ps(p);for(let E=d;E<f;E++){const b=s.data[E],A=o[E];Yo(E),(null!==b.hostBindings||0!==b.hostVars||null!==b.hostAttrs)&&iC(b,A)}}finally{ps(-1),Yo(v)}}(s,o,u))}function yy(s,o,u=Ir){const d=o.localNames;if(null!==d){let f=o.index+1;for(let p=0;p<d.length;p+=2){const v=d[p+1],E=-1===v?u(o,s):s[v];s[f++]=E}}}function Cf(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=vy(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function vy(s,o,u,d,f,p,v,E,b,A){const N=22+d,V=N+f,K=function CS(s,o){const u=[];for(let d=0;d<o;d++)u.push(d<s?null:Ht);return u}(N,V),te="function"==typeof A?A():A;return K[1]={type:s,blueprint:K,template:u,queries:null,viewQuery:E,declTNode:o,data:K.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:V,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:b,consts:te,incompleteFirstPass:!1}}function XE(s,o,u,d){const f=_u(o);null===u?f.push(d):(f.push(u),s.firstCreatePass&&Bg(s).push(d,f.length-1))}function eC(s,o,u){for(let d in s)if(s.hasOwnProperty(d)){const f=s[d];(u=null===u?{}:u).hasOwnProperty(d)?u[d].push(o,f):u[d]=[o,f]}return u}function wy(s,o){const d=o.directiveEnd,f=s.data,p=o.attrs,v=[];let E=null,b=null;for(let A=o.directiveStart;A<d;A++){const N=f[A],V=N.inputs,K=null===p||ty(o)?null:lC(V,p);v.push(K),E=eC(V,A,E),b=eC(N.outputs,A,b)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=E,o.outputs=b}function ss(s,o,u,d,f,p,v,E){const b=Ir(o,u);let N,A=o.inputs;!E&&null!=A&&(N=A[d])?(jg(s,u,N,d,f),bl(o)&&Ey(u,o.index)):3&o.type&&(d=function TS(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(d),f=null!=v?v(f,o.value||"",d):f,p.setProperty(b,d,f))}function Ey(s,o){const u=un(o,s);16&u[2]||(u[2]|=32)}function Cy(s,o,u,d){let f=!1;if(lo()){const p=function sC(s,o,u){const d=s.directiveRegistry;let f=null;if(d)for(let p=0;p<d.length;p++){const v=d[p];bg(u,v.selectors,!1)&&(f||(f=[]),ho(ms(u,o),s,v.type),Kr(v)?(Og(s,u),f.unshift(v)):f.push(v))}return f}(s,o,u),v=null===d?null:{"":-1};if(null!==p){f=!0,MS(u,s.data.length,p.length);for(let N=0;N<p.length;N++){const V=p[N];V.providersResolver&&V.providersResolver(V)}let E=!1,b=!1,A=ma(s,o,p.length,null);for(let N=0;N<p.length;N++){const V=p[N];u.mergedAttrs=qa(u.mergedAttrs,V.hostAttrs),uC(s,u,o,A,V),aC(A,V,v),null!==V.contentQueries&&(u.flags|=8),(null!==V.hostBindings||null!==V.hostAttrs||0!==V.hostVars)&&(u.flags|=128);const K=V.type.prototype;!E&&(K.ngOnChanges||K.ngOnInit||K.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),E=!0),!b&&(K.ngOnChanges||K.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),b=!0),A++}wy(s,u)}v&&function oC(s,o,u){if(o){const d=s.localNames=[];for(let f=0;f<o.length;f+=2){const p=u[o[f+1]];if(null==p)throw new Te(-301,!1);d.push(o[f],p)}}}(u,d,v)}return u.mergedAttrs=qa(u.mergedAttrs,u.attrs),f}function rC(s,o,u,d,f,p){const v=p.hostBindings;if(v){let E=s.hostBindingOpCodes;null===E&&(E=s.hostBindingOpCodes=[]);const b=~o.index;(function SS(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(E)!=b&&E.push(b),E.push(d,f,v)}}function iC(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Og(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function aC(s,o,u){if(u){if(o.exportAs)for(let d=0;d<o.exportAs.length;d++)u[o.exportAs[d]]=s;Kr(o)&&(u[""]=s)}}function MS(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function uC(s,o,u,d,f){s.data[d]=f;const p=f.factory||(f.factory=br(f.type)),v=new fi(p,Kr(f),ac);s.blueprint[d]=v,u[d]=v,rC(s,o,0,d,ma(s,u,f.hostVars,Ht),f)}function RS(s,o,u){const d=Ir(o,s),f=Cf(u),p=s[10],v=Vg(s,lc(s,f,null,u.onPush?32:16,d,o,p,p.createRenderer(d,u),null,null,null));s[o.index]=v}function _a(s,o,u,d,f,p){const v=Ir(s,o);!function by(s,o,u,d,f,p,v){if(null==p)s.removeAttribute(o,f,u);else{const E=null==v?Ce(p):v(p,d||"",f);s.setAttribute(o,f,E,u)}}(o[11],v,p,s.value,u,d,f)}function Fg(s,o,u,d,f,p){const v=p[o];if(null!==v){const E=d.setInput;for(let b=0;b<v.length;){const A=v[b++],N=v[b++],V=v[b++];null!==E?d.setInput(u,V,A,N):u[N]=V}}}function lC(s,o){let u=null,d=0;for(;d<o.length;){const f=o[d];if(0!==f)if(5!==f){if("number"==typeof f)break;s.hasOwnProperty(f)&&(null===u&&(u=[]),u.push(f,s[f],o[d+1])),d+=2}else d+=2;else d+=4}return u}function Lg(s,o,u,d){return new Array(s,!0,!1,o,null,0,d,u,null,null)}function Ug(s,o){const u=un(o,s);if(Ps(u)){const d=u[1];48&u[2]?Pg(d,u,d.template,u[8]):u[5]>0&&Iy(u)}}function Iy(s){for(let d=gg(s);null!==d;d=Z_(d))for(let f=10;f<d.length;f++){const p=d[f];if(Ps(p))if(512&p[2]){const v=p[1];Pg(v,p,v.template,p[8])}else p[5]>0&&Iy(p)}const u=s[1].components;if(null!==u)for(let d=0;d<u.length;d++){const f=un(u[d],s);Ps(f)&&f[5]>0&&Iy(f)}}function PS(s,o){const u=un(o,s),d=u[1];(function OS(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(d,u),Ng(d,u,u[8])}function Vg(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Ty(s){for(;s;){s[2]|=32;const o=sf(s);if(Il(s)&&!o)return s;s=o}return null}function bf(s,o,u,d=!0){const f=o[10];f.begin&&f.begin();try{Pg(s,o,s.template,u)}catch(v){throw d&&hC(o,v),v}finally{f.end&&f.end()}}function Dy(s,o,u){kl(0),o(s,u)}function _u(s){return s[7]||(s[7]=[])}function Bg(s){return s.cleanup||(s.cleanup=[])}function hC(s,o){const u=s[9],d=u?u.get(ef,null):null;d&&d.handleError(o)}function jg(s,o,u,d,f){for(let p=0;p<u.length;){const v=u[p++],E=u[p++],b=o[v],A=s.data[v];null!==A.setInput?A.setInput(b,f,d,E):b[E]=f}}function il(s,o,u){const d=Si(o,s);!function af(s,o,u){s.setValue(o,u)}(s[11],d,u)}function Sy(s,o,u){let d=u?s.styles:null,f=u?s.classes:null,p=0;if(null!==o)for(let v=0;v<o.length;v++){const E=o[v];"number"==typeof E?p=E:1==p?f=ve(f,E):2==p&&(d=ve(d,E+": "+o[++v]+";"))}u?s.styles=d:s.stylesWithoutHost=d,u?s.classes=f:s.classesWithoutHost=f}function Hg(s,o,u,d,f=!1){for(;null!==u;){const p=o[u.index];if(null!==p&&d.push(Fn(p)),li(p))for(let E=10;E<p.length;E++){const b=p[E],A=b[1].firstChild;null!==A&&Hg(b[1],b,A,d)}const v=u.type;if(8&v)Hg(s,o,u.child,d);else if(32&v){const E=hE(u,o);let b;for(;b=E();)d.push(b)}else if(16&v){const E=Ju(o,u);if(Array.isArray(E))d.push(...E);else{const b=sf(o[16]);Hg(b[1],b,E,d,!0)}}u=f?u.projectionNext:u.next}return d}class cc{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return Hg(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(li(o)){const u=o[8],d=u?u.indexOf(this):-1;d>-1&&(bd(o,d),po(u,d))}this._attachedToViewContainer=!1}Id(this._lView[1],this._lView)}onDestroy(o){XE(this._lView[1],this._lView,null,o)}markForCheck(){Ty(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){bf(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Te(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function rc(s,o){df(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Te(902,!1);this._appRef=o}}class fC extends cc{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;bf(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class Rd extends vd{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=k(o);return new dc(u,this.ngModule)}}function LS(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class kd{constructor(o,u){this.injector=o,this.parentInjector=u}get(o,u,d){const f=this.injector.get(o,dg,d);return f!==dg||u===dg?f:this.parentInjector.get(o,u,d)}}class dc extends U_{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function Tg(s){return s.map(oc).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return LS(this.componentDef.inputs)}get outputs(){return LS(this.componentDef.outputs)}create(o,u,d,f){let p=(f=f||this.ngModule)instanceof Zu?f:f?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const v=p?new kd(o,p):o,E=v.get(V_,null);if(null===E)throw new Te(407,!1);const b=v.get(PD,null),A=E.createRenderer(null,this.componentDef),N=this.componentDef.selectors[0][0]||"div",V=d?function bS(s,o,u){return s.selectRootElement(o,u===_t.ShadowDom)}(A,d,this.componentDef.encapsulation):Yt(E.createRenderer(null,this.componentDef),N,function pC(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(N)),K=this.componentDef.onPush?288:272,te=vy(0,null,null,1,0,null,null,null,null,null),be=lc(null,te,null,K,null,null,E,A,b,v,null);let $e,ze;Qo(be);try{const lt=function VS(s,o,u,d,f,p){const v=u[1];u[22]=s;const b=mu(v,22,2,"#host",null),A=b.mergedAttrs=o.hostAttrs;null!==A&&(Sy(b,A,!0),null!==s&&(gs(f,s,A),null!==b.classes&&Cg(f,s,b.classes),null!==b.styles&&X_(f,s,b.styles)));const N=d.createRenderer(s,o),V=lc(u,Cf(o),null,o.onPush?32:16,u[22],b,d,N,p||null,null,null);return v.firstCreatePass&&(ho(ms(b,u),v,o.type),Og(v,b),MS(b,u.length,1)),Vg(u,V),u[22]=V}(V,this.componentDef,be,E,A);if(V)if(d)gs(A,V,["ng-version",nE.full]);else{const{attrs:Dt,classes:Ne}=function bE(s){const o=[],u=[];let d=1,f=2;for(;d<s.length;){let p=s[d];if("string"==typeof p)2===f?""!==p&&o.push(p,s[++d]):8===f&&u.push(p);else{if(!Oi(f))break;f=p}d++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);Dt&&gs(A,V,Dt),Ne&&Ne.length>0&&Cg(A,V,Ne.join(" "))}if(ze=uo(te,22),void 0!==u){const Dt=ze.projection=[];for(let Ne=0;Ne<this.ngContentSelectors.length;Ne++){const At=u[Ne];Dt.push(null!=At?Array.from(At):null)}}$e=function BS(s,o,u,d){const f=u[1],p=function nC(s,o,u){const d=nr();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),uC(s,d,o,ma(s,o,1,null),u),wy(s,d));const f=Qi(o,s,d.directiveStart,d);Cn(f,o);const p=Ir(d,o);return p&&Cn(p,o),f}(f,u,o);if(s[8]=u[8]=p,null!==d)for(const E of d)E(p,o);if(o.contentQueries){const E=nr();o.contentQueries(1,p,E.directiveStart)}const v=nr();return!f.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(ps(v.index),rC(u[1],v,0,v.directiveStart,v.directiveEnd,o),iC(o,p)),p}(lt,this.componentDef,be,[jS]),Ng(te,be,null)}finally{Os()}return new gC(this.componentType,$e,wd(ze,be),be,ze)}}class gC extends class Jw{}{constructor(o,u,d,f,p){super(),this.location=d,this._rootLView=f,this._tNode=p,this.instance=u,this.hostView=this.changeDetectorRef=new fC(f),this.componentType=o}setInput(o,u){const d=this._tNode.inputs;let f;if(null!==d&&(f=d[o])){const p=this._rootLView;jg(p[1],p,f,o,u),Ey(p,this._tNode.index)}}get injector(){return new oa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function jS(){const s=nr();Ou(ke()[1],s)}function xy(s){let o=function Ay(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const d=[s];for(;o;){let f;if(Kr(s))f=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Te(903,!1);f=o.\u0275dir}if(f){if(u){d.push(f);const v=s;v.inputs=Nd(s.inputs),v.declaredInputs=Nd(s.declaredInputs),v.outputs=Nd(s.outputs);const E=f.hostBindings;E&&HS(s,E);const b=f.viewQuery,A=f.contentQueries;if(b&&mP(s,b),A&&_C(s,A),ge(s.inputs,f.inputs),ge(s.declaredInputs,f.declaredInputs),ge(s.outputs,f.outputs),Kr(f)&&f.data.animation){const N=s.data;N.animation=(N.animation||[]).concat(f.data.animation)}}const p=f.features;if(p)for(let v=0;v<p.length;v++){const E=p[v];E&&E.ngInherit&&E(s),E===xy&&(u=!1)}}o=Object.getPrototypeOf(o)}!function gP(s){let o=0,u=null;for(let d=s.length-1;d>=0;d--){const f=s[d];f.hostVars=o+=f.hostVars,f.hostAttrs=qa(f.hostAttrs,u=qa(u,f.hostAttrs))}}(d)}function Nd(s){return s===Rr?{}:s===St?[]:s}function mP(s,o){const u=s.viewQuery;s.viewQuery=u?(d,f)=>{o(d,f),u(d,f)}:o}function _C(s,o){const u=s.contentQueries;s.contentQueries=u?(d,f,p)=>{o(d,f,p),u(d,f,p)}:o}function HS(s,o){const u=s.hostBindings;s.hostBindings=u?(d,f)=>{o(d,f),u(d,f)}:o}let $g=null;function hc(){if(!$g){const s=xt.Symbol;if(s&&s.iterator)$g=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const d=o[u];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&($g=d)}}}return $g}function If(s){return!!wC(s)&&(Array.isArray(s)||!(s instanceof Map)&&hc()in s)}function wC(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Fi(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function My(s,o,u,d){const f=ke();return Fi(f,Ba(),o)&&(Wt(),_a(Nn(),f,s,o,u,d)),My}function yu(s,o,u,d){return Fi(s,Ba(),u)?o+Ce(u)+d:Ht}function Ts(s,o,u,d,f,p){const E=function fc(s,o,u,d){const f=Fi(s,o,u);return Fi(s,o+1,d)||f}(s,function Yi(){return Rt.lFrame.bindingIndex}(),u,f);return fs(2),E?o+Ce(u)+d+Ce(f)+p:Ht}function Ry(s,o,u,d,f,p){const v=ke(),E=yu(v,o,u,d);return E!==Ht&&_a(Nn(),v,s,E,f,p),Ry}function bC(s,o,u,d,f,p,v,E){const b=ke(),A=Wt(),N=s+22,V=A.firstCreatePass?function Ny(s,o,u,d,f,p,v,E,b){const A=o.consts,N=mu(o,s,4,v||null,hi(A,E));Cy(o,u,N,hi(A,b)),Ou(o,N);const V=N.tViews=vy(2,N,d,f,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A);return null!==o.queries&&(o.queries.template(o,N),V.queries=o.queries.embeddedTView(N)),N}(N,A,b,o,u,d,f,p,v):A.data[N];$r(V,!1);const K=b[11].createComment("");sc(A,b,K,V),Cn(K,b),Vg(b,b[N]=Lg(K,b,K,V)),Ma(V)&&_y(A,b,V),null!=v&&yy(b,V,E)}function IC(s,o,u){const d=ke();return Fi(d,Ba(),o)&&ss(Wt(),Nn(),d,s,o,d[11],u,!1),IC}function TC(s,o,u,d,f){const v=f?"class":"style";jg(s,u,o.inputs[v],v,d)}function Py(s,o,u,d){const f=ke(),p=Wt(),v=22+s,E=f[11],b=f[v]=Yt(E,o,function Fl(){return Rt.lFrame.currentNamespace}()),A=p.firstCreatePass?function wP(s,o,u,d,f,p,v){const E=o.consts,A=mu(o,s,2,f,hi(E,p));return Cy(o,u,A,hi(E,v)),null!==A.attrs&&Sy(A,A.attrs,!1),null!==A.mergedAttrs&&Sy(A,A.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,A),A}(v,p,f,0,o,u,d):p.data[v];$r(A,!0);const N=A.mergedAttrs;null!==N&&gs(E,b,N);const V=A.classes;null!==V&&Cg(E,b,V);const K=A.styles;return null!==K&&X_(E,b,K),64!=(64&A.flags)&&sc(p,f,b,A),0===function Oa(){return Rt.lFrame.elementDepthCount}()&&Cn(b,f),function qc(){Rt.lFrame.elementDepthCount++}(),Ma(A)&&(_y(p,f,A),JE(p,A,f)),null!==d&&yy(f,A),Py}function Oy(){let s=nr();Pu()?Ko():(s=s.parent,$r(s,!1));const o=s;!function Fa(){Rt.lFrame.elementDepthCount--}();const u=Wt();return u.firstCreatePass&&(Ou(u,s),Vo(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Lu(s){return 0!=(16&s.flags)}(o)&&TC(u,o,ke(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Uu(s){return 0!=(32&s.flags)}(o)&&TC(u,o,ke(),o.stylesWithoutHost,!1),Oy}function DC(s,o,u,d){return Py(s,o,u,d),Oy(),DC}function zg(s,o,u){const d=ke(),f=Wt(),p=s+22,v=f.firstCreatePass?function EP(s,o,u,d,f){const p=o.consts,v=hi(p,d),E=mu(o,s,8,"ng-container",v);return null!==v&&Sy(E,v,!0),Cy(o,u,E,hi(p,f)),null!==o.queries&&o.queries.elementStart(o,E),E}(p,f,d,o,u):f.data[p];$r(v,!0);const E=d[p]=d[11].createComment("");return sc(f,d,E,v),Cn(E,d),Ma(v)&&(_y(f,d,v),JE(f,v,d)),null!=u&&yy(d,v),zg}function Kg(){let s=nr();const o=Wt();return Pu()?Ko():(s=s.parent,$r(s,!1)),o.firstCreatePass&&(Ou(o,s),Vo(s)&&o.queries.elementEnd(s)),Kg}function Yg(){return ke()}function Sf(s){return!!s&&"function"==typeof s.then}function Ly(s){return!!s&&"function"==typeof s.subscribe}const SC=Ly;function Af(s,o,u,d){const f=ke(),p=Wt(),v=nr();return function WS(s,o,u,d,f,p,v,E){const b=Ma(d),N=s.firstCreatePass&&Bg(s),V=o[8],K=_u(o);let te=!0;if(3&d.type||E){const ze=Ir(d,o),lt=E?E(ze):ze,Dt=K.length,Ne=E?vn=>E(Fn(vn[d.index])):d.index;let At=null;if(!E&&b&&(At=function CP(s,o,u,d){const f=s.cleanup;if(null!=f)for(let p=0;p<f.length-1;p+=2){const v=f[p];if(v===u&&f[p+1]===d){const E=o[7],b=f[p+2];return E.length>b?E[b]:null}"string"==typeof v&&(p+=2)}return null}(s,o,f,d.index)),null!==At)(At.__ngLastListenerFn__||At).__ngNextListenerFn__=p,At.__ngLastListenerFn__=p,te=!1;else{p=MC(d,o,V,p,!1);const vn=u.listen(lt,f,p);K.push(p,vn),N&&N.push(f,Ne,Dt,Dt+1)}}else p=MC(d,o,V,p,!1);const be=d.outputs;let $e;if(te&&null!==be&&($e=be[f])){const ze=$e.length;if(ze)for(let lt=0;lt<ze;lt+=2){const qn=o[$e[lt]][$e[lt+1]].subscribe(p),Ca=K.length;K.push(p,qn),N&&N.push(f,d.index,Ca,-(Ca+1))}}}(p,f,f[11],v,s,o,0,d),Af}function xC(s,o,u,d){try{return!1!==u(d)}catch(f){return hC(s,f),!1}}function MC(s,o,u,d,f){return function p(v){if(v===Function)return d;Ty(2&s.flags?un(s.index,o):o);let b=xC(o,0,d,v),A=p.__ngNextListenerFn__;for(;A;)b=xC(o,0,A,v)&&b,A=A.__ngNextListenerFn__;return f&&!1===b&&(v.preventDefault(),v.returnValue=!1),b}}function ZS(s=1){return function Fs(s){return(Rt.lFrame.contextLView=function Yc(s,o){for(;s>0;)o=o[15],s--;return o}(s,Rt.lFrame.contextLView))[8]}(s)}function Qt(s,o,u){return xf(s,"",o,"",u),Qt}function xf(s,o,u,d,f){const p=ke(),v=yu(p,o,u,d);return v!==Ht&&ss(Wt(),Nn(),p,s,v,p[11],f,!1),xf}function QS(s,o,u,d,f){const p=s[u+1],v=null===o;let E=d?ga(p):gu(p),b=!1;for(;0!==E&&(!1===b||v);){const N=s[E+1];SP(s[E],o)&&(b=!0,s[E+1]=d?Ag(N):cy(N)),E=d?ga(N):gu(N)}b&&(s[u+1]=d?cy(p):Ag(p))}function SP(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Mi(s,o)>=0}function By(s,o){return function Ws(s,o,u,d){const f=ke(),p=Wt(),v=fs(2);p.firstUpdatePass&&function UC(s,o,u,d){const f=s.data;if(null===f[u+1]){const p=f[kn()],v=function LC(s,o){return o>=s.expandoStartIndex}(s,u);(function HC(s,o){return 0!=(s.flags&(o?16:32))})(p,d)&&null===o&&!v&&(o=!1),o=function VC(s,o,u,d){const f=function Rl(s){const o=Rt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=d?o.residualClasses:o.residualStyles;if(null===f)0===(d?o.classBindings:o.styleBindings)&&(u=Ud(u=ol(null,s,o,u,d),o.attrs,d),p=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==f)if(u=ol(f,s,o,u,d),null===p){let b=function rA(s,o,u){const d=u?o.classBindings:o.styleBindings;if(0!==gu(d))return s[ga(d)]}(s,o,d);void 0!==b&&Array.isArray(b)&&(b=ol(null,s,o,b[1],d),b=Ud(b,o.attrs,d),function iA(s,o,u,d){s[ga(u?o.classBindings:o.styleBindings)]=d}(s,o,d,b))}else p=function sA(s,o,u){let d;const f=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<f;p++)d=Ud(d,s[p].hostAttrs,u);return Ud(d,o.attrs,u)}(s,o,d)}return void 0!==p&&(d?o.residualClasses=p:o.residualStyles=p),u}(f,p,o,d),function TP(s,o,u,d,f,p){let v=p?o.classBindings:o.styleBindings,E=ga(v),b=gu(v);s[d]=u;let N,A=!1;if(Array.isArray(u)){const V=u;N=V[1],(null===N||Mi(V,N)>0)&&(A=!0)}else N=u;if(f)if(0!==b){const K=ga(s[E+1]);s[d+1]=ly(K,E),0!==K&&(s[K+1]=pf(s[K+1],d)),s[E+1]=function mS(s,o){return 131071&s|o<<17}(s[E+1],d)}else s[d+1]=ly(E,0),0!==E&&(s[E+1]=pf(s[E+1],d)),E=d;else s[d+1]=ly(b,0),0===E?E=d:s[b+1]=pf(s[b+1],d),b=d;A&&(s[d+1]=cy(s[d+1])),QS(s,N,d,!0),QS(s,N,d,!1),function DP(s,o,u,d,f){const p=f?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&Mi(p,o)>=0&&(u[d+1]=Ag(u[d+1]))}(o,N,s,d,p),v=ly(E,b),p?o.classBindings=v:o.styleBindings=v}(f,p,o,u,v,d)}}(p,s,v,d),o!==Ht&&Fi(f,v,o)&&function ni(s,o,u,d,f,p,v,E){if(!(3&o.type))return;const b=s.data,A=b[E+1];Xg(function bs(s){return 1==(1&s)}(A)?jC(b,o,u,f,gu(A),v):void 0)||(Xg(p)||function Sg(s){return 2==(2&s)}(A)&&(p=jC(b,null,u,f,E,v)),function Dd(s,o,u,d,f){if(o)f?s.addClass(u,d):s.removeClass(u,d);else{let p=-1===d.indexOf("-")?void 0:Io.DashCase;null==f?s.removeStyle(u,d,p):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),p|=Io.Important),s.setStyle(u,d,f,p))}}(d,v,Si(kn(),u),f,p))}(p,p.data[kn()],f,f[11],s,f[v+1]=function oA(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=fe(vo(s)))),s}(o,u),d,v)}(s,o,null,!0),By}function ol(s,o,u,d,f){let p=null;const v=u.directiveEnd;let E=u.directiveStylingLast;for(-1===E?E=u.directiveStart:E++;E<v&&(p=o[E],d=Ud(d,p.hostAttrs,f),p!==s);)E++;return null!==s&&(u.directiveStylingLast=E),d}function Ud(s,o,u){const d=u?1:2;let f=-1;if(null!==o)for(let p=0;p<o.length;p++){const v=o[p];"number"==typeof v?f=v:f===d&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Or(s,v,!!u||o[++p]))}return void 0===s?null:s}function jC(s,o,u,d,f,p){const v=null===o;let E;for(;f>0;){const b=s[f],A=Array.isArray(b),N=A?b[1]:b,V=null===N;let K=u[f+1];K===Ht&&(K=V?St:void 0);let te=V?ql(K,d):N===d?K:void 0;if(A&&!Xg(te)&&(te=ql(b,d)),Xg(te)&&(E=te,v))return E;const be=s[f+1];f=v?ga(be):gu(be)}if(null!==o){let b=p?o.residualClasses:o.residualStyles;null!=b&&(E=ql(b,d))}return E}function Xg(s){return void 0!==s}function $C(s,o=""){const u=ke(),d=Wt(),f=s+22,p=d.firstCreatePass?mu(d,f,1,o,null):d.data[f],v=u[f]=function mg(s,o){return s.createText(o)}(u[11],o);sc(d,u,v,p),$r(p,!1)}function jy(s){return vc("",s,""),jy}function vc(s,o,u){const d=ke(),f=yu(d,s,o,u);return f!==Ht&&il(d,kn(),f),vc}function em(s,o,u,d,f){const p=ke(),v=Ts(p,s,o,u,d,f);return v!==Ht&&il(p,kn(),v),em}const Mo=void 0;var vA=["en",[["a","p"],["AM","PM"],Mo],[["AM","PM"],Mo,Mo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Mo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Mo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Mo,"{1} 'at' {0}",Mo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function yA(s){const u=Math.floor(Math.abs(s)),d=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===d?1:5}];let wc={};function kf(s){const o=function wa(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=eb(o);if(u)return u;const d=o.split("-")[0];if(u=eb(d),u)return u;if("en"===d)return vA;throw new Te(701,!1)}function Zy(s){return kf(s)[vt.PluralCase]}function eb(s){return s in wc||(wc[s]=xt.ng&&xt.ng.common&&xt.ng.common.locales&&xt.ng.common.locales[s]),wc[s]}var vt=(()=>((vt=vt||{})[vt.LocaleId=0]="LocaleId",vt[vt.DayPeriodsFormat=1]="DayPeriodsFormat",vt[vt.DayPeriodsStandalone=2]="DayPeriodsStandalone",vt[vt.DaysFormat=3]="DaysFormat",vt[vt.DaysStandalone=4]="DaysStandalone",vt[vt.MonthsFormat=5]="MonthsFormat",vt[vt.MonthsStandalone=6]="MonthsStandalone",vt[vt.Eras=7]="Eras",vt[vt.FirstDayOfWeek=8]="FirstDayOfWeek",vt[vt.WeekendRange=9]="WeekendRange",vt[vt.DateFormat=10]="DateFormat",vt[vt.TimeFormat=11]="TimeFormat",vt[vt.DateTimeFormat=12]="DateTimeFormat",vt[vt.NumberSymbols=13]="NumberSymbols",vt[vt.NumberFormats=14]="NumberFormats",vt[vt.CurrencyCode=15]="CurrencyCode",vt[vt.CurrencySymbol=16]="CurrencySymbol",vt[vt.CurrencyName=17]="CurrencyName",vt[vt.Currencies=18]="Currencies",vt[vt.Directionality=19]="Directionality",vt[vt.PluralCase=20]="PluralCase",vt[vt.ExtraData=21]="ExtraData",vt))();const Bd="en-US";let tb=Bd;function vb(s,o,u,d,f){if(s=X(s),Array.isArray(s))for(let p=0;p<s.length;p++)vb(s[p],o,u,d,f);else{const p=Wt(),v=ke();let E=uu(s)?s:X(s.provide),b=Yw(s);const A=nr(),N=1048575&A.providerIndexes,V=A.directiveStart,K=A.providerIndexes>>20;if(uu(s)||!s.multi){const te=new fi(b,f,ac),be=iv(E,o,f?N:N+K,V);-1===be?(ho(ms(A,v),p,E),wb(p,s,o.length),o.push(E),A.directiveStart++,A.directiveEnd++,f&&(A.providerIndexes+=1048576),u.push(te),v.push(te)):(u[be]=te,v[be]=te)}else{const te=iv(E,o,N+K,V),be=iv(E,o,N,N+K),$e=te>=0&&u[te],ze=be>=0&&u[be];if(f&&!ze||!f&&!$e){ho(ms(A,v),p,E);const lt=function nx(s,o,u,d,f){const p=new fi(s,u,ac);return p.multi=[],p.index=o,p.componentProviders=0,tx(p,f,d&&!u),p}(f?HP:jP,u.length,f,d,b);!f&&ze&&(u[be].providerFactory=lt),wb(p,s,o.length,0),o.push(E),A.directiveStart++,A.directiveEnd++,f&&(A.providerIndexes+=1048576),u.push(lt),v.push(lt)}else wb(p,s,te>-1?te:be,tx(u[f?be:te],b,!f&&d));!f&&d&&ze&&u[be].componentProviders++}}}function wb(s,o,u,d){const f=uu(o),p=function SD(s){return!!s.useClass}(o);if(f||p){const b=(p?X(o.useClass):o).prototype.ngOnDestroy;if(b){const A=s.destroyHooks||(s.destroyHooks=[]);if(!f&&o.multi){const N=A.indexOf(u);-1===N?A.push(u,[d,b]):A[N+1].push(d,b)}else A.push(u,b)}}}function tx(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function iv(s,o,u,d){for(let f=u;f<d;f++)if(o[f]===s)return f;return-1}function jP(s,o,u,d){return Eb(this.multi,[])}function HP(s,o,u,d){const f=this.multi;let p;if(this.providerFactory){const v=this.providerFactory.componentProviders,E=Qi(u,u[1],this.providerFactory.index,d);p=E.slice(0,v),Eb(f,p);for(let b=v;b<E.length;b++)p.push(E[b])}else p=[],Eb(f,p);return p}function Eb(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function rx(s,o=[]){return u=>{u.providersResolver=(d,f)=>function BP(s,o,u){const d=Wt();if(d.firstCreatePass){const f=Kr(s);vb(u,d.data,d.blueprint,f,!0),vb(o,d.data,d.blueprint,f,!1)}}(d,f?f(s):s,o)}}class Cc{}class ix{}function sx(s,o){return new ox(s,o??null)}class ox extends Cc{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Rd(this);const d=st(o);this._bootstrapComponents=Cs(d.bootstrap),this._r3Injector=ry(o,u,[{provide:Cc,useValue:this},{provide:vd,useValue:this.componentFactoryResolver}],fe(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class wu extends ix{constructor(o){super(),this.moduleType=o}create(o){return new ox(this.moduleType,o)}}class ax extends Cc{constructor(o,u,d){super(),this.componentFactoryResolver=new Rd(this),this.instance=null;const f=new Kw([...o,{provide:Cc,useValue:this},{provide:vd,useValue:this.componentFactoryResolver}],u||lg(),d,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function sv(s,o,u=null){return new ax(s,o,u).injector}let ux=(()=>{class s{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const d=Ww(0,u.type),f=d.length>0?sv([d],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,f)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=nn({token:s,providedIn:"environment",factory:()=>new s($n(Zu))}),s})();function Cb(s){s.getStandaloneInjector=o=>o.get(ux).getOrCreateStandaloneInjector(s)}function lv(s){return o=>{setTimeout(s,void 0,o)}}const Ea=class kx extends l.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,d){let f=o,p=u||(()=>null),v=d;if(o&&"object"==typeof o){const b=o;f=b.next?.bind(b),p=b.error?.bind(b),v=b.complete?.bind(b)}this.__isAsync&&(p=lv(p),f&&(f=lv(f)),v&&(v=lv(v)));const E=super.subscribe({next:f,error:p,complete:v});return o instanceof $.w0&&o.add(E),E}};function Nx(){return this._results[hc()]()}class cv{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=hc(),d=cv.prototype;d[u]||(d[u]=Nx)}get changes(){return this._changes||(this._changes=new Ea)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const d=this;d.dirty=!1;const f=Pr(o);(this._changesDetected=!function sd(s,o,u){if(s.length!==o.length)return!1;for(let d=0;d<s.length;d++){let f=s[d],p=o[d];if(u&&(f=u(f),p=u(p)),p!==f)return!1}return!0}(d._results,f,u))&&(d._results=f,d.length=f.length,d.last=f[this.length-1],d.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Vf=(()=>{class s{}return s.__NG_ELEMENT_ID__=Fx,s})();const Px=Vf,Ox=class extends Px{constructor(o,u,d){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=d}createEmbeddedView(o,u){const d=this._declarationTContainer.tViews,f=lc(this._declarationLView,d,o,16,null,d.declTNode,null,null,null,null,u||null);f[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(f[19]=v.createEmbeddedView(d)),Ng(d,f,o),new cc(f)}};function Fx(){return fm(nr(),ke())}function fm(s,o){return 4&s.type?new Ox(o,s,wd(s,o)):null}let pm=(()=>{class s{}return s.__NG_ELEMENT_ID__=Lx,s})();function Lx(){return gm(nr(),ke())}const Ux=pm,Bf=class extends Ux{constructor(o,u,d){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=d}get element(){return wd(this._hostTNode,this._hostLView)}get injector(){return new oa(this._hostTNode,this._hostLView)}get parentInjector(){const o=Za(this._hostTNode,this._hostLView);if(Fh(o)){const u=Ls(o,this._hostLView),d=ir(o);return new oa(u[1].data[d+8],u)}return new oa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=xb(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,d){let f,p;"number"==typeof d?f=d:null!=d&&(f=d.index,p=d.injector);const v=o.createEmbeddedView(u||{},p);return this.insert(v,f),v}createComponent(o,u,d,f,p){const v=o&&!function Tr(s){return"function"==typeof s}(o);let E;if(v)E=u;else{const V=u||{};E=V.index,d=V.injector,f=V.projectableNodes,p=V.environmentInjector||V.ngModuleRef}const b=v?o:new dc(k(o)),A=d||this.parentInjector;if(!p&&null==b.ngModule){const K=(v?A:this.parentInjector).get(Zu,null);K&&(p=K)}const N=b.create(A,f,void 0,p);return this.insert(N.hostView,E),N}insert(o,u){const d=o._lView,f=d[1];if(function xl(s){return li(s[3])}(d)){const N=this.indexOf(o);if(-1!==N)this.detach(N);else{const V=d[3],K=new Bf(V,V[6],V[3]);K.detach(K.indexOf(o))}}const p=this._adjustIndex(u),v=this._lContainer;!function pE(s,o,u,d){const f=10+d,p=u.length;d>0&&(u[f-1][4]=o),d<p-10?(o[4]=u[f],Ya(u,10+d,o)):(u.push(o),o[4]=null),o[3]=u;const v=o[17];null!==v&&u!==v&&function K_(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(v,o);const E=o[19];null!==E&&E.insertView(s),o[2]|=64}(f,d,v,p);const E=cf(p,v),b=d[11],A=ic(b,v[7]);return null!==A&&function WD(s,o,u,d,f,p){d[0]=f,d[6]=o,df(s,d,u,1,f,p)}(f,v[6],b,d,A,E),o.attachToViewContainerRef(),Ya(dv(v),p,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=xb(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),d=bd(this._lContainer,u);d&&(po(dv(this._lContainer),u),Id(d[1],d))}detach(o){const u=this._adjustIndex(o,-1),d=bd(this._lContainer,u);return d&&null!=po(dv(this._lContainer),u)?new cc(d):null}_adjustIndex(o,u=0){return o??this.length+u}};function xb(s){return s[8]}function dv(s){return s[8]||(s[8]=[])}function gm(s,o){let u;const d=o[s.index];if(li(d))u=d;else{let f;if(8&s.type)f=Fn(d);else{const p=o[11];f=p.createComment("");const v=Ir(s,o);Qu(p,ic(p,v),f,function YD(s,o){return s.nextSibling(o)}(p,v),!1)}o[s.index]=u=Lg(d,o,f,s),Vg(o,u)}return new Bf(u,s,o)}class hv{constructor(o){this.queryList=o,this.matches=null}clone(){return new hv(this.queryList)}setDirty(){this.queryList.setDirty()}}class fv{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const d=null!==o.contentQueries?o.contentQueries[0]:u.length,f=[];for(let p=0;p<d;p++){const v=u.getByIndex(p);f.push(this.queries[v.indexInDeclarationView].clone())}return new fv(f)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==Fb(o,u).matches&&this.queries[u].setDirty()}}class Mb{constructor(o,u,d=null){this.predicate=o,this.flags=u,this.read=d}}class pv{constructor(o=[]){this.queries=o}elementStart(o,u){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let d=0;d<this.length;d++){const f=null!==u?u.length:0,p=this.getByIndex(d).embeddedTView(o,f);p&&(p.indexInDeclarationView=d,null!==u?u.push(p):u=[p])}return null!==u?new pv(u):null}template(o,u){for(let d=0;d<this.queries.length;d++)this.queries[d].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class gv{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new gv(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let d=o.parent;for(;null!==d&&8&d.type&&d.index!==u;)d=d.parent;return u===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const d=this.metadata.predicate;if(Array.isArray(d))for(let f=0;f<d.length;f++){const p=d[f];this.matchTNodeWithReadOption(o,u,jx(u,p)),this.matchTNodeWithReadOption(o,u,Ka(u,o,p,!1,!1))}else d===Vf?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,Ka(u,o,d,!1,!1))}matchTNodeWithReadOption(o,u,d){if(null!==d){const f=this.metadata.read;if(null!==f)if(f===ei||f===pm||f===Vf&&4&u.type)this.addMatch(u.index,-2);else{const p=Ka(u,o,f,!1,!1);null!==p&&this.addMatch(u.index,p)}else this.addMatch(u.index,d)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function jx(s,o){const u=s.localNames;if(null!==u)for(let d=0;d<u.length;d+=2)if(u[d]===o)return u[d+1];return null}function $x(s,o,u,d){return-1===u?function Hx(s,o){return 11&s.type?wd(s,o):4&s.type?fm(s,o):null}(o,s):-2===u?function Gx(s,o,u){return u===ei?wd(o,s):u===Vf?fm(o,s):u===pm?gm(o,s):void 0}(s,o,d):Qi(s,s[1],u,o)}function Rb(s,o,u,d){const f=o[19].queries[d];if(null===f.matches){const p=s.data,v=u.matches,E=[];for(let b=0;b<v.length;b+=2){const A=v[b];E.push(A<0?null:$x(o,p[A],v[b+1],u.metadata.read))}f.matches=E}return f.matches}function mv(s,o,u,d){const f=s.queries.getByIndex(u),p=f.matches;if(null!==p){const v=Rb(s,o,f,u);for(let E=0;E<p.length;E+=2){const b=p[E];if(b>0)d.push(v[E/2]);else{const A=p[E+1],N=o[-b];for(let V=10;V<N.length;V++){const K=N[V];K[17]===K[3]&&mv(K[1],K,A,d)}if(null!==N[9]){const V=N[9];for(let K=0;K<V.length;K++){const te=V[K];mv(te[1],te,A,d)}}}}}return d}function kb(s){const o=ke(),u=Wt(),d=ja();kl(d+1);const f=Fb(u,d);if(s.dirty&&function Al(s){return 4==(4&s[2])}(o)===(2==(2&f.metadata.flags))){if(null===f.matches)s.reset([]);else{const p=f.crossesNgTemplate?mv(u,o,d,[]):Rb(u,o,f,d);s.reset(p,eE),s.notifyOnChanges()}return!0}return!1}function Nb(s,o,u,d){const f=Wt();if(f.firstCreatePass){const p=nr();(function Ob(s,o,u){null===s.queries&&(s.queries=new pv),s.queries.track(new gv(o,u))})(f,new Mb(o,u,d),p.index),function Zx(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(f,s),2==(2&u)&&(f.staticContentQueries=!0)}!function Pb(s,o,u){const d=new cv(4==(4&u));XE(s,o,d,d.destroy),null===o[19]&&(o[19]=new fv),o[19].queries.push(new hv(d))}(f,ke(),u)}function jf(){return function Wx(s,o){return s[19].queries[o].queryList}(ke(),ja())}function Fb(s,o){return s.queries.getByIndex(o)}function Wf(...s){}const xv=new Sn("Application Initializer");let cl=(()=>{class s{constructor(u){this.appInits=u,this.resolve=Wf,this.reject=Wf,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,f)=>{this.resolve=d,this.reject=f})}runInitializers(){if(this.initialized)return;const u=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const p=this.appInits[f]();if(Sf(p))u.push(p);else if(SC(p)){const v=new Promise((E,b)=>{p.subscribe({complete:E,error:b})});u.push(v)}}Promise.all(u).then(()=>{d()}).catch(f=>{this.reject(f)}),0===u.length&&d(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)($n(xv,8))},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Qb=new Sn("AppId",{providedIn:"root",factory:function wm(){return`${Mv()}${Mv()}${Mv()}`}});function Mv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Em=new Sn("Platform Initializer"),Xb=new Sn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Rv=new Sn("appBootstrapListener");let aM=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const bc=new Sn("LocaleId",{providedIn:"root",factory:()=>tu(bc,Qe.Optional|Qe.SkipSelf)||function uM(){return typeof $localize<"u"&&$localize.locale||Bd}()}),kv=new Sn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class cM{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let rI=(()=>{class s{compileModuleSync(u){return new wu(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const d=this.compileModuleSync(u),p=Cs(st(u).declarations).reduce((v,E)=>{const b=k(E);return b&&v.push(new dc(b)),v},[]);return new cM(d,p)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const fM=(()=>Promise.resolve(0))();function Nv(s){typeof Zone>"u"?fM.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Zs{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ea(!1),this.onMicrotaskEmpty=new Ea(!1),this.onStable=new Ea(!1),this.onError=new Ea(!1),typeof Zone>"u")throw new Te(908,!1);Zone.assertZonePatched();const f=this;if(f._nesting=0,f._outer=f._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const p=Zone.AsyncStackTaggingZoneSpec;f._inner=f._inner.fork(new p("Angular"))}Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!d&&u,f.shouldCoalesceRunChangeDetection=d,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function pM(){let s=xt.requestAnimationFrame,o=xt.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const d=o[Zone.__symbol__("OriginalDelegate")];d&&(o=d)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function Pv(s){const o=()=>{!function oI(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(xt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Ov(s),s.isCheckStableRunning=!0,bm(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Ov(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,d,f,p,v,E)=>{try{return aI(s),u.invokeTask(f,p,v,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),uI(s)}},onInvoke:(u,d,f,p,v,E,b)=>{try{return aI(s),u.invoke(f,p,v,E,b)}finally{s.shouldCoalesceRunChangeDetection&&o(),uI(s)}},onHasTask:(u,d,f,p)=>{u.hasTask(f,p),d===f&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,Ov(s),bm(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(u,d,f,p)=>(u.handleError(f,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Zs.isInAngularZone())throw new Te(909,!1)}static assertNotInAngularZone(){if(Zs.isInAngularZone())throw new Te(909,!1)}run(o,u,d){return this._inner.run(o,u,d)}runTask(o,u,d,f){const p=this._inner,v=p.scheduleEventTask("NgZoneEvent: "+f,o,Cm,Wf,Wf);try{return p.runTask(v,u,d)}finally{p.cancelTask(v)}}runGuarded(o,u,d){return this._inner.runGuarded(o,u,d)}runOutsideAngular(o){return this._outer.run(o)}}const Cm={};function bm(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Ov(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function aI(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function uI(s){s._nesting--,bm(s)}class lI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ea,this.onMicrotaskEmpty=new Ea,this.onStable=new Ea,this.onError=new Ea}run(o,u,d){return o.apply(u,d)}runGuarded(o,u,d){return o.apply(u,d)}runOutsideAngular(o){return o()}runTask(o,u,d,f){return o.apply(u,d)}}const Fv=new Sn(""),Lv=new Sn("");let Vv,cI=(()=>{class s{constructor(u,d,f){this._ngZone=u,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Vv||(function rO(s){Vv=s}(f),f.addToWindow(d)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Zs.assertNotInAngularZone(),Nv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Nv(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(u)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,d,f){let p=-1;d&&d>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==p),u(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:u,timeoutId:p,updateCb:f})}whenStable(u,d,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,d,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,d,f){return[]}}return s.\u0275fac=function(u){return new(u||s)($n(Zs),$n(Uv),$n(Lv))},s.\u0275prov=nn({token:s,factory:s.\u0275fac}),s})(),Uv=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,d){this._applications.set(u,d)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,d=!0){return Vv?.findTestabilityInTree(this,u,d)??null}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),Ic=null;const gM=new Sn("AllowMultipleToken"),Zf=new Sn("PlatformDestroyListeners");class dI{constructor(o,u){this.name=o,this.token=u}}function wM(s,o,u=[]){const d=`Platform: ${o}`,f=new Sn(d);return(p=[])=>{let v=jv();if(!v||v.injector.get(gM,!1)){const E=[...u,...p,{provide:f,useValue:!0}];s?s(E):function Bv(s){if(Ic&&!Ic.get(gM,!1))throw new Te(400,!1);Ic=s;const o=s.get(bM);(function vM(s){const o=s.get(Em,null);o&&o.forEach(u=>u())})(s)}(function CM(s=[],o){return pu.create({name:o,providers:[{provide:Xh,useValue:"platform"},{provide:Zf,useValue:new Set([()=>Ic=null])},...s]})}(E,d))}return function EM(s){const o=jv();if(!o)throw new Te(401,!1);return o}()}}function jv(){return Ic?.get(bM)??null}let bM=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,d){const f=function fI(s,o){let u;return u="noop"===s?new lI:("zone.js"===s?void 0:s)||new Zs(o),u}(d?.ngZone,function IM(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(d)),p=[{provide:Zs,useValue:f}];return f.run(()=>{const v=pu.create({providers:p,parent:this.injector,name:u.moduleType.name}),E=u.create(v),b=E.injector.get(ef,null);if(!b)throw new Te(402,!1);return f.runOutsideAngular(()=>{const A=f.onError.subscribe({next:N=>{b.handleError(N)}});E.onDestroy(()=>{$v(this._modules,E),A.unsubscribe()})}),function TM(s,o,u){try{const d=u();return Sf(d)?d.catch(f=>{throw o.runOutsideAngular(()=>s.handleError(f)),f}):d}catch(d){throw o.runOutsideAngular(()=>s.handleError(d)),d}}(b,f,()=>{const A=E.injector.get(cl);return A.runInitializers(),A.donePromise.then(()=>(function nb(s){Bt(s,"Expected localeId to be defined"),"string"==typeof s&&(tb=s.toLowerCase().replace(/_/g,"-"))}(E.injector.get(bc,Bd)||Bd),this._moduleDoBootstrap(E),E))})})}bootstrapModule(u,d=[]){const f=DM({},d);return function mM(s,o,u){const d=new wu(u);return Promise.resolve(d)}(0,0,u).then(p=>this.bootstrapModuleFactory(p,f))}_moduleDoBootstrap(u){const d=u.injector.get(Hv);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(f=>d.bootstrap(f));else{if(!u.instance.ngDoBootstrap)throw new Te(403,!1);u.instance.ngDoBootstrap(d)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Te(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const u=this._injector.get(Zf,null);u&&(u.forEach(d=>d()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)($n(pu))},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function DM(s,o){return Array.isArray(o)?o.reduce(DM,s):{...s,...o}}let Hv=(()=>{class s{constructor(u,d,f){this._zone=u,this._injector=d,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new P.y(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),v=new P.y(E=>{let b;this._zone.runOutsideAngular(()=>{b=this._zone.onStable.subscribe(()=>{Zs.assertNotInAngularZone(),Nv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const A=this._zone.onUnstable.subscribe(()=>{Zs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{b.unsubscribe(),A.unsubscribe()}});this.isStable=(0,se.T)(p,v.pipe((0,ue.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,d){const f=u instanceof U_;if(!this._injector.get(cl).done)throw!f&&Oe(u),new Te(405,false);let v;v=f?u:this._injector.get(vd).resolveComponentFactory(u),this.componentTypes.push(v.componentType);const E=function yM(s){return s.isBoundToModule}(v)?void 0:this._injector.get(Cc),A=v.create(pu.NULL,[],d||v.selector,E),N=A.location.nativeElement,V=A.injector.get(Fv,null);return V?.registerApplication(N),A.onDestroy(()=>{this.detachView(A.hostView),$v(this.components,A),V?.unregisterApplication(N)}),this._loadComponent(A),A}tick(){if(this._runningTick)throw new Te(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const d=u;this._views.push(d),d.attachToAppRef(this)}detachView(u){const d=u;$v(this._views,d),d.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(Rv,[]).concat(this._bootstrapListeners).forEach(f=>f(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>$v(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new Te(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(u){return new(u||s)($n(Zs),$n(Zu),$n(ef))},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function $v(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}let pI=!0,Tm=!1;function Gv(){return Tm=!0,pI}function qv(){if(Tm)throw new Error("Cannot enable prod mode after platform setup.");pI=!1}let Wv=(()=>{class s{}return s.__NG_ELEMENT_ID__=Kf,s})();function Kf(s){return function AM(s,o,u){if(bl(s)&&!u){const d=un(s.index,o);return new cc(d,d)}return 47&s.type?new cc(o[16],o):null}(nr(),ke(),16==(16&s))}class yI{constructor(){}supports(o){return If(o)}create(o){return new UM(o)}}const LM=(s,o)=>o;class UM{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||LM}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,d=this._removalsHead,f=0,p=null;for(;u||d;){const v=!d||u&&u.currentIndex<Kv(d,f,p)?u:d,E=Kv(v,f,p),b=v.currentIndex;if(v===d)f--,d=d._nextRemoved;else if(u=u._next,null==v.previousIndex)f++;else{p||(p=[]);const A=E-f,N=b-f;if(A!=N){for(let K=0;K<A;K++){const te=K<p.length?p[K]:p[K]=0,be=te+K;N<=be&&be<A&&(p[K]=te+1)}p[v.previousIndex]=N-A}}E!==b&&o(v,E,b)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!If(o))throw new Te(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let f,p,v,u=this._itHead,d=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)p=o[E],v=this._trackByFn(E,p),null!==u&&Object.is(u.trackById,v)?(d&&(u=this._verifyReinsertion(u,p,v,E)),Object.is(u.item,p)||this._addIdentityChange(u,p)):(u=this._mismatch(u,p,v,E),d=!0),u=u._next}else f=0,function qS(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[hc()]();let d;for(;!(d=u.next()).done;)o(d.value)}}(o,E=>{v=this._trackByFn(f,E),null!==u&&Object.is(u.trackById,v)?(d&&(u=this._verifyReinsertion(u,E,v,f)),Object.is(u.item,E)||this._addIdentityChange(u,E)):(u=this._mismatch(u,E,v,f),d=!0),u=u._next,f++}),this.length=f;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,d,f){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,p,f)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(d,f))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,p,f)):o=this._addAfter(new VM(u,d),p,f),o}_verifyReinsertion(o,u,d,f){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==p?o=this._reinsertAfter(p,o._prev,f):o.currentIndex!=f&&(o.currentIndex=f,this._addToMoves(o,f)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const f=o._prevRemoved,p=o._nextRemoved;return null===f?this._removalsHead=p:f._nextRemoved=p,null===p?this._removalsTail=f:p._prevRemoved=f,this._insertAfter(o,u,d),this._addToMoves(o,d),o}_moveAfter(o,u,d){return this._unlink(o),this._insertAfter(o,u,d),this._addToMoves(o,d),o}_addAfter(o,u,d){return this._insertAfter(o,u,d),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,d){const f=null===u?this._itHead:u._next;return o._next=f,o._prev=u,null===f?this._itTail=o:f._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new vI),this._linkedRecords.put(o),o.currentIndex=d,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,d=o._next;return null===u?this._itHead=d:u._next=d,null===d?this._itTail=u:d._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new vI),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class VM{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class BM{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===u||u<=d.currentIndex)&&Object.is(d.trackById,o))return d;return null}remove(o){const u=o._prevDup,d=o._nextDup;return null===u?this._head=d:u._nextDup=d,null===d?this._tail=u:d._prevDup=u,null===this._head}}class vI{constructor(){this.map=new Map}put(o){const u=o.trackById;let d=this.map.get(u);d||(d=new BM,this.map.set(u,d)),d.add(o)}get(o,u){const f=this.map.get(o);return f?f.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Kv(s,o,u){const d=s.previousIndex;if(null===d)return d;let f=0;return u&&d<u.length&&(f=u[d]),d+o+f}class Jf{constructor(){}supports(o){return o instanceof Map||wC(o)}create(){return new jM}}class jM{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||wC(o)))throw new Te(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(d,f)=>{if(u&&u.key===f)this._maybeAddToChanges(u,d),this._appendAfter=u,u=u._next;else{const p=this._getOrCreateRecordForKey(f,d);u=this._insertBeforeOrAppend(u,p)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let d=u;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const d=o._prev;return u._next=o,u._prev=d,o._prev=u,d&&(d._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const f=this._records.get(o);this._maybeAddToChanges(f,u);const p=f._prev,v=f._next;return p&&(p._next=v),v&&(v._prev=p),f._next=null,f._prev=null,f}const d=new HM(o);return this._records.set(o,d),d.currentValue=u,this._addToAdditions(d),d}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(d=>u(o[d],d))}}class HM{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function wI(){return new Yv([new yI])}let Yv=(()=>{class s{constructor(u){this.factories=u}static create(u,d){if(null!=d){const f=d.factories.slice();u=u.concat(f)}return new s(u)}static extend(u){return{provide:s,useFactory:d=>s.create(u,d||wI()),deps:[[s,new pt,new Me]]}}find(u){const d=this.factories.find(f=>f.supports(u));if(null!=d)return d;throw new Te(901,!1)}}return s.\u0275prov=nn({token:s,providedIn:"root",factory:wI}),s})();function $M(){return new Qv([new Jf])}let Qv=(()=>{class s{constructor(u){this.factories=u}static create(u,d){if(d){const f=d.factories.slice();u=u.concat(f)}return new s(u)}static extend(u){return{provide:s,useFactory:d=>s.create(u,d||$M()),deps:[[s,new pt,new Me]]}}find(u){const d=this.factories.find(f=>f.supports(u));if(d)return d;throw new Te(901,!1)}}return s.\u0275prov=nn({token:s,providedIn:"root",factory:$M}),s})();const hO=wM(null,"core",[]);let WM=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)($n(Hv))},s.\u0275mod=Xt({type:s}),s.\u0275inj=Lt({}),s})();function Eu(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(ct,Ae,U)=>{U.d(Ae,{Z:()=>Te});var l=U(2090),$=U(4859),P=U(9681),se=U(1877);class ue{constructor(Ce,me){this._delegate=Ce,this.firebase=me,(0,P._addComponent)(Ce,new $.wA("app-compat",()=>this,"PUBLIC")),this.container=Ce.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ce){this._delegate.automaticDataCollectionEnabled=Ce}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ce=>{this._delegate.checkDestroyed(),Ce()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(Ce,me=P._DEFAULT_ENTRY_NAME){var Je;this._delegate.checkDestroyed();const Ye=this._delegate.container.getProvider(Ce);return!Ye.isInitialized()&&"EXPLICIT"===(null===(Je=Ye.getComponent())||void 0===Je?void 0:Je.instantiationMode)&&Ye.initialize(),Ye.getImmediate({identifier:me})}_removeServiceInstance(Ce,me=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ce).clearInstance(me)}_addComponent(Ce){(0,P._addComponent)(this._delegate,Ce)}_addOrOverwriteComponent(Ce){(0,P._addOrOverwriteComponent)(this._delegate,Ce)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ge=new l.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),z=function ve(){const rt=function fe(rt){const Ce={},me={__esModule:!0,initializeApp:function Fe(ie,ce={}){const we=P.initializeApp(ie,ce);if((0,l.r3)(Ce,we.name))return Ce[we.name];const Q=new rt(we,me);return Ce[we.name]=Q,Q},app:Ye,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function Ie(ie){const ce=ie.name,we=ce.replace("-compat","");if(P._registerComponent(ie)&&"PUBLIC"===ie.type){const Q=(ee=Ye())=>{if("function"!=typeof ee[we])throw ge.create("invalid-app-argument",{appName:ce});return ee[we]()};void 0!==ie.serviceProps&&(0,l.ZB)(Q,ie.serviceProps),me[we]=Q,rt.prototype[we]=function(...ee){return this._getService.bind(this,ce).apply(this,ie.multipleInstances?ee:[])}}return"PUBLIC"===ie.type?me[we]:null},removeApp:function Je(ie){delete Ce[ie]},useAsService:function qe(ie,ce){return"serverAuth"===ce?null:ce},modularAPIs:P}};function Ye(ie){if(!(0,l.r3)(Ce,ie=ie||P._DEFAULT_ENTRY_NAME))throw ge.create("no-app",{appName:ie});return Ce[ie]}return me.default=me,Object.defineProperty(me,"apps",{get:function Re(){return Object.keys(Ce).map(ie=>Ce[ie])}}),Ye.App=rt,me}(ue);return rt.INTERNAL=Object.assign(Object.assign({},rt.INTERNAL),{createFirebaseNamespace:ve,extendNamespace:function Ce(me){(0,l.ZB)(rt,me)},createSubscribe:l.ne,ErrorFactory:l.LL,deepExtend:l.ZB}),rt}(),W=new se.Yd("@firebase/app-compat");if((0,l.jU)()&&void 0!==self.firebase){W.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const rt=self.firebase.SDK_VERSION;rt&&rt.indexOf("LITE")>=0&&W.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Te=z;!function Pe(rt){(0,P.registerVersion)("@firebase/app-compat","0.1.39",rt)}()},9681:(ct,Ae,U)=>{U.r(Ae),U.d(Ae,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>Zi,_DEFAULT_ENTRY_NAME:()=>Bt,_addComponent:()=>tn,_addOrOverwriteComponent:()=>nn,_apps:()=>hn,_clearComponents:()=>qi,_components:()=>In,_getProvider:()=>Lt,_registerComponent:()=>qt,_removeServiceInstance:()=>Cr,deleteApp:()=>zi,getApp:()=>Un,getApps:()=>Ti,initializeApp:()=>jr,onLog:()=>Zn,registerVersion:()=>er,setLogLevel:()=>wn});var l=U(5861),$=U(4859),P=U(1877),se=U(2090),ue=U(8766);class _e{constructor(De){this.container=De}getPlatformInfoString(){return this.container.getProviders().map(tt=>{if(function ge(et){return"VERSION"===et.getComponent()?.type}(tt)){const bt=tt.getImmediate();return`${bt.library}/${bt.version}`}return null}).filter(tt=>tt).join(" ")}}const fe="@firebase/app",z=new P.Yd("@firebase/app"),Bt="[DEFAULT]",Ze={[fe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},hn=new Map,In=new Map;function tn(et,De){try{et.container.addComponent(De)}catch(tt){z.debug(`Component ${De.name} failed to register with FirebaseApp ${et.name}`,tt)}}function nn(et,De){et.container.addOrOverwriteComponent(De)}function qt(et){const De=et.name;if(In.has(De))return z.debug(`There were multiple attempts to register component ${De}.`),!1;In.set(De,et);for(const tt of hn.values())tn(tt,et);return!0}function Lt(et,De){const tt=et.container.getProvider("heartbeat").getImmediate({optional:!0});return tt&&tt.triggerHeartbeat(),et.container.getProvider(De)}function Cr(et,De,tt=Bt){Lt(et,De).clearInstance(tt)}function qi(){In.clear()}const On=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Wi{constructor(De,tt,bt){this._isDeleted=!1,this._options=Object.assign({},De),this._config=Object.assign({},tt),this._name=tt.name,this._automaticDataCollectionEnabled=tt.automaticDataCollectionEnabled,this._container=bt,this.container.addComponent(new $.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(De){this.checkDestroyed(),this._automaticDataCollectionEnabled=De}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(De){this._isDeleted=De}checkDestroyed(){if(this.isDeleted)throw On.create("app-deleted",{appName:this._name})}}const Zi="9.14.0";function jr(et,De={}){let tt=et;"object"!=typeof De&&(De={name:De});const bt=Object.assign({name:Bt,automaticDataCollectionEnabled:!1},De),It=bt.name;if("string"!=typeof It||!It)throw On.create("bad-app-name",{appName:String(It)});if(tt||(tt=(0,se.aH)()),!tt)throw On.create("no-options");const Xt=hn.get(It);if(Xt){if((0,se.vZ)(tt,Xt.options)&&(0,se.vZ)(bt,Xt.config))return Xt;throw On.create("duplicate-app",{appName:It})}const Z=new $.H0(It);for(const Y of In.values())Z.addComponent(Y);const q=new Wi(tt,bt,Z);return hn.set(It,q),q}function Un(et=Bt){const De=hn.get(et);if(!De&&et===Bt)return jr();if(!De)throw On.create("no-app",{appName:et});return De}function Ti(){return Array.from(hn.values())}function zi(et){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,l.Z)(function*(et){const De=et.name;hn.has(De)&&(hn.delete(De),yield Promise.all(et.container.getProviders().map(tt=>tt.delete())),et.isDeleted=!0)})).apply(this,arguments)}function er(et,De,tt){var bt;let It=null!==(bt=Ze[et])&&void 0!==bt?bt:et;tt&&(It+=`-${tt}`);const Xt=It.match(/\s|\//),Z=De.match(/\s|\//);if(Xt||Z){const q=[`Unable to register library "${It}" with version "${De}":`];return Xt&&q.push(`library name "${It}" contains illegal characters (whitespace or "/")`),Xt&&Z&&q.push("and"),Z&&q.push(`version name "${De}" contains illegal characters (whitespace or "/")`),void z.warn(q.join(" "))}qt(new $.wA(`${It}-version`,()=>({library:It,version:De}),"VERSION"))}function Zn(et,De){if(null!==et&&"function"!=typeof et)throw On.create("invalid-log-argument");(0,P.Am)(et,De)}function wn(et){(0,P.Ub)(et)}const En="firebase-heartbeat-store";let Tn=null;function yn(){return Tn||(Tn=(0,ue.X3)("firebase-heartbeat-database",1,{upgrade:(et,De)=>{0===De&&et.createObjectStore(En)}}).catch(et=>{throw On.create("idb-open",{originalErrorMessage:et.message})})),Tn}function _t(){return(_t=(0,l.Z)(function*(et){var De;try{return(yield yn()).transaction(En).objectStore(En).get(zn(et))}catch(tt){if(tt instanceof se.ZR)z.warn(tt.message);else{const bt=On.create("idb-get",{originalErrorMessage:null===(De=tt)||void 0===De?void 0:De.message});z.warn(bt.message)}}})).apply(this,arguments)}function xt(et,De){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,l.Z)(function*(et,De){var tt;try{const It=(yield yn()).transaction(En,"readwrite");return yield It.objectStore(En).put(De,zn(et)),It.done}catch(bt){if(bt instanceof se.ZR)z.warn(bt.message);else{const It=On.create("idb-set",{originalErrorMessage:null===(tt=bt)||void 0===tt?void 0:tt.message});z.warn(It.message)}}})).apply(this,arguments)}function zn(et){return`${et.name}!${et.options.appId}`}class kr{constructor(De){this.container=De,this._heartbeatsCache=null;const tt=this.container.getProvider("app").getImmediate();this._storage=new Kt(tt),this._heartbeatsCachePromise=this._storage.read().then(bt=>(this._heartbeatsCache=bt,bt))}triggerHeartbeat(){var De=this;return(0,l.Z)(function*(){const bt=De.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),It=Nt();if(null===De._heartbeatsCache&&(De._heartbeatsCache=yield De._heartbeatsCachePromise),De._heartbeatsCache.lastSentHeartbeatDate!==It&&!De._heartbeatsCache.heartbeats.some(Xt=>Xt.date===It))return De._heartbeatsCache.heartbeats.push({date:It,agent:bt}),De._heartbeatsCache.heartbeats=De._heartbeatsCache.heartbeats.filter(Xt=>{const Z=new Date(Xt.date).valueOf();return Date.now()-Z<=2592e6}),De._storage.overwrite(De._heartbeatsCache)})()}getHeartbeatsHeader(){var De=this;return(0,l.Z)(function*(){if(null===De._heartbeatsCache&&(yield De._heartbeatsCachePromise),null===De._heartbeatsCache||0===De._heartbeatsCache.heartbeats.length)return"";const tt=Nt(),{heartbeatsToSend:bt,unsentEntries:It}=function Zr(et,De=1024){const tt=[];let bt=et.slice();for(const It of et){const Xt=tt.find(Z=>Z.agent===It.agent);if(Xt){if(Xt.dates.push(It.date),lr(tt)>De){Xt.dates.pop();break}}else if(tt.push({agent:It.agent,dates:[It.date]}),lr(tt)>De){tt.pop();break}bt=bt.slice(1)}return{heartbeatsToSend:tt,unsentEntries:bt}}(De._heartbeatsCache.heartbeats),Xt=(0,se.L)(JSON.stringify({version:2,heartbeats:bt}));return De._heartbeatsCache.lastSentHeartbeatDate=tt,It.length>0?(De._heartbeatsCache.heartbeats=It,yield De._storage.overwrite(De._heartbeatsCache)):(De._heartbeatsCache.heartbeats=[],De._storage.overwrite(De._heartbeatsCache)),Xt})()}}function Nt(){return(new Date).toISOString().substring(0,10)}class Kt{constructor(De){this.app=De,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,l.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var De=this;return(0,l.Z)(function*(){return(yield De._canUseIndexedDBPromise)&&(yield function mt(et){return _t.apply(this,arguments)}(De.app))||{heartbeats:[]}})()}overwrite(De){var tt=this;return(0,l.Z)(function*(){var bt;if(yield tt._canUseIndexedDBPromise){const Xt=yield tt.read();return xt(tt.app,{lastSentHeartbeatDate:null!==(bt=De.lastSentHeartbeatDate)&&void 0!==bt?bt:Xt.lastSentHeartbeatDate,heartbeats:De.heartbeats})}})()}add(De){var tt=this;return(0,l.Z)(function*(){var bt;if(yield tt._canUseIndexedDBPromise){const Xt=yield tt.read();return xt(tt.app,{lastSentHeartbeatDate:null!==(bt=De.lastSentHeartbeatDate)&&void 0!==bt?bt:Xt.lastSentHeartbeatDate,heartbeats:[...Xt.heartbeats,...De.heartbeats]})}})()}}function lr(et){return(0,se.L)(JSON.stringify({version:2,heartbeats:et})).length}!function Mn(et){qt(new $.wA("platform-logger",De=>new _e(De),"PRIVATE")),qt(new $.wA("heartbeat",De=>new kr(De),"PRIVATE")),er(fe,"0.8.4",et),er(fe,"0.8.4","esm2017"),er("fire-js","")}("")},4859:(ct,Ae,U)=>{U.d(Ae,{H0:()=>fe,wA:()=>P,zt:()=>ue});var l=U(5861),$=U(2090);class P{constructor(z,W,X){this.name=z,this.instanceFactory=W,this.type=X,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(z){return this.instantiationMode=z,this}setMultipleInstances(z){return this.multipleInstances=z,this}setServiceProps(z){return this.serviceProps=z,this}setInstanceCreatedCallback(z){return this.onInstanceCreated=z,this}}const se="[DEFAULT]";class ue{constructor(z,W){this.name=z,this.container=W,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(z){const W=this.normalizeInstanceIdentifier(z);if(!this.instancesDeferred.has(W)){const X=new $.BH;if(this.instancesDeferred.set(W,X),this.isInitialized(W)||this.shouldAutoInitialize())try{const je=this.getOrInitializeService({instanceIdentifier:W});je&&X.resolve(je)}catch{}}return this.instancesDeferred.get(W).promise}getImmediate(z){var W;const X=this.normalizeInstanceIdentifier(z?.identifier),je=null!==(W=z?.optional)&&void 0!==W&&W;if(!this.isInitialized(X)&&!this.shouldAutoInitialize()){if(je)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:X})}catch(Pe){if(je)return null;throw Pe}}getComponent(){return this.component}setComponent(z){if(z.name!==this.name)throw Error(`Mismatching Component ${z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=z,this.shouldAutoInitialize()){if(function ge(ve){return"EAGER"===ve.instantiationMode}(z))try{this.getOrInitializeService({instanceIdentifier:se})}catch{}for(const[W,X]of this.instancesDeferred.entries()){const je=this.normalizeInstanceIdentifier(W);try{const Pe=this.getOrInitializeService({instanceIdentifier:je});X.resolve(Pe)}catch{}}}}clearInstance(z=se){this.instancesDeferred.delete(z),this.instancesOptions.delete(z),this.instances.delete(z)}delete(){var z=this;return(0,l.Z)(function*(){const W=Array.from(z.instances.values());yield Promise.all([...W.filter(X=>"INTERNAL"in X).map(X=>X.INTERNAL.delete()),...W.filter(X=>"_delete"in X).map(X=>X._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(z=se){return this.instances.has(z)}getOptions(z=se){return this.instancesOptions.get(z)||{}}initialize(z={}){const{options:W={}}=z,X=this.normalizeInstanceIdentifier(z.instanceIdentifier);if(this.isInitialized(X))throw Error(`${this.name}(${X}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const je=this.getOrInitializeService({instanceIdentifier:X,options:W});for(const[Pe,Te]of this.instancesDeferred.entries())X===this.normalizeInstanceIdentifier(Pe)&&Te.resolve(je);return je}onInit(z,W){var X;const je=this.normalizeInstanceIdentifier(W),Pe=null!==(X=this.onInitCallbacks.get(je))&&void 0!==X?X:new Set;Pe.add(z),this.onInitCallbacks.set(je,Pe);const Te=this.instances.get(je);return Te&&z(Te,je),()=>{Pe.delete(z)}}invokeOnInitCallbacks(z,W){const X=this.onInitCallbacks.get(W);if(X)for(const je of X)try{je(z,W)}catch{}}getOrInitializeService({instanceIdentifier:z,options:W={}}){let X=this.instances.get(z);if(!X&&this.component&&(X=this.component.instanceFactory(this.container,{instanceIdentifier:(ve=z,ve===se?void 0:ve),options:W}),this.instances.set(z,X),this.instancesOptions.set(z,W),this.invokeOnInitCallbacks(X,z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,z,X)}catch{}var ve;return X||null}normalizeInstanceIdentifier(z=se){return this.component?this.component.multipleInstances?z:se:z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class fe{constructor(z){this.name=z,this.providers=new Map}addComponent(z){const W=this.getProvider(z.name);if(W.isComponentSet())throw new Error(`Component ${z.name} has already been registered with ${this.name}`);W.setComponent(z)}addOrOverwriteComponent(z){this.getProvider(z.name).isComponentSet()&&this.providers.delete(z.name),this.addComponent(z)}getProvider(z){if(this.providers.has(z))return this.providers.get(z);const W=new ue(z,this);return this.providers.set(z,W),W}getProviders(){return Array.from(this.providers.values())}}},1877:(ct,Ae,U)=>{U.d(Ae,{Am:()=>ve,Ub:()=>fe,Yd:()=>ge,in:()=>$});const l=[];var $=(()=>{return(z=$||($={}))[z.DEBUG=0]="DEBUG",z[z.VERBOSE=1]="VERBOSE",z[z.INFO=2]="INFO",z[z.WARN=3]="WARN",z[z.ERROR=4]="ERROR",z[z.SILENT=5]="SILENT",$;var z})();const P={debug:$.DEBUG,verbose:$.VERBOSE,info:$.INFO,warn:$.WARN,error:$.ERROR,silent:$.SILENT},se=$.INFO,ue={[$.DEBUG]:"log",[$.VERBOSE]:"log",[$.INFO]:"info",[$.WARN]:"warn",[$.ERROR]:"error"},_e=(z,W,...X)=>{if(W<z.logLevel)return;const je=(new Date).toISOString(),Pe=ue[W];if(!Pe)throw new Error(`Attempted to log a message with an invalid logType (value: ${W})`);console[Pe](`[${je}]  ${z.name}:`,...X)};class ge{constructor(W){this.name=W,this._logLevel=se,this._logHandler=_e,this._userLogHandler=null,l.push(this)}get logLevel(){return this._logLevel}set logLevel(W){if(!(W in $))throw new TypeError(`Invalid value "${W}" assigned to \`logLevel\``);this._logLevel=W}setLogLevel(W){this._logLevel="string"==typeof W?P[W]:W}get logHandler(){return this._logHandler}set logHandler(W){if("function"!=typeof W)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=W}get userLogHandler(){return this._userLogHandler}set userLogHandler(W){this._userLogHandler=W}debug(...W){this._userLogHandler&&this._userLogHandler(this,$.DEBUG,...W),this._logHandler(this,$.DEBUG,...W)}log(...W){this._userLogHandler&&this._userLogHandler(this,$.VERBOSE,...W),this._logHandler(this,$.VERBOSE,...W)}info(...W){this._userLogHandler&&this._userLogHandler(this,$.INFO,...W),this._logHandler(this,$.INFO,...W)}warn(...W){this._userLogHandler&&this._userLogHandler(this,$.WARN,...W),this._logHandler(this,$.WARN,...W)}error(...W){this._userLogHandler&&this._userLogHandler(this,$.ERROR,...W),this._logHandler(this,$.ERROR,...W)}}function fe(z){l.forEach(W=>{W.setLogLevel(z)})}function ve(z,W){for(const X of l){let je=null;W&&W.level&&(je=P[W.level]),X.userLogHandler=null===z?null:(Pe,Te,...rt)=>{const Ce=rt.map(me=>{if(null==me)return null;if("string"==typeof me)return me;if("number"==typeof me||"boolean"==typeof me)return me.toString();if(me instanceof Error)return me.message;try{return JSON.stringify(me)}catch{return null}}).filter(me=>me).join(" ");Te>=(je??Pe.logLevel)&&z({level:$[Te].toLowerCase(),message:Ce,args:rt,type:Pe.name})}}}},8766:(ct,Ae,U)=>{U.d(Ae,{Lj:()=>Fe,X3:()=>Ye});var l=U(5861);let P,se;const ge=new WeakMap,fe=new WeakMap,ve=new WeakMap,z=new WeakMap,W=new WeakMap;let Pe={get(ce,we,Q){if(ce instanceof IDBTransaction){if("done"===we)return fe.get(ce);if("objectStoreNames"===we)return ce.objectStoreNames||ve.get(ce);if("store"===we)return Q.objectStoreNames[1]?void 0:Q.objectStore(Q.objectStoreNames[0])}return me(ce[we])},set:(ce,we,Q)=>(ce[we]=Q,!0),has:(ce,we)=>ce instanceof IDBTransaction&&("done"===we||"store"===we)||we in ce};function Ce(ce){return"function"==typeof ce?function rt(ce){return ce!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function _e(){return se||(se=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ce)?function(...we){return ce.apply(Je(this),we),me(ge.get(this))}:function(...we){return me(ce.apply(Je(this),we))}:function(we,...Q){const ee=ce.call(Je(this),we,...Q);return ve.set(ee,we.sort?we.sort():[we]),me(ee)}}(ce):(ce instanceof IDBTransaction&&function je(ce){if(fe.has(ce))return;const we=new Promise((Q,ee)=>{const pe=()=>{ce.removeEventListener("complete",oe),ce.removeEventListener("error",Ve),ce.removeEventListener("abort",Ve)},oe=()=>{Q(),pe()},Ve=()=>{ee(ce.error||new DOMException("AbortError","AbortError")),pe()};ce.addEventListener("complete",oe),ce.addEventListener("error",Ve),ce.addEventListener("abort",Ve)});fe.set(ce,we)}(ce),((ce,we)=>we.some(Q=>ce instanceof Q))(ce,function ue(){return P||(P=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ce,Pe):ce)}function me(ce){if(ce instanceof IDBRequest)return function X(ce){const we=new Promise((Q,ee)=>{const pe=()=>{ce.removeEventListener("success",oe),ce.removeEventListener("error",Ve)},oe=()=>{Q(me(ce.result)),pe()},Ve=()=>{ee(ce.error),pe()};ce.addEventListener("success",oe),ce.addEventListener("error",Ve)});return we.then(Q=>{Q instanceof IDBCursor&&ge.set(Q,ce)}).catch(()=>{}),W.set(we,ce),we}(ce);if(z.has(ce))return z.get(ce);const we=Ce(ce);return we!==ce&&(z.set(ce,we),W.set(we,ce)),we}const Je=ce=>W.get(ce);function Ye(ce,we,{blocked:Q,upgrade:ee,blocking:pe,terminated:oe}={}){const Ve=indexedDB.open(ce,we),Be=me(Ve);return ee&&Ve.addEventListener("upgradeneeded",gt=>{ee(me(Ve.result),gt.oldVersion,gt.newVersion,me(Ve.transaction))}),Q&&Ve.addEventListener("blocked",()=>Q()),Be.then(gt=>{oe&&gt.addEventListener("close",()=>oe()),pe&&gt.addEventListener("versionchange",()=>pe())}).catch(()=>{}),Be}function Fe(ce,{blocked:we}={}){const Q=indexedDB.deleteDatabase(ce);return we&&Q.addEventListener("blocked",()=>we()),me(Q).then(()=>{})}const Re=["get","getKey","getAll","getAllKeys","count"],Ie=["put","add","delete","clear"],qe=new Map;function ie(ce,we){if(!(ce instanceof IDBDatabase)||we in ce||"string"!=typeof we)return;if(qe.get(we))return qe.get(we);const Q=we.replace(/FromIndex$/,""),ee=we!==Q,pe=Ie.includes(Q);if(!(Q in(ee?IDBIndex:IDBObjectStore).prototype)||!pe&&!Re.includes(Q))return;const oe=function(){var Ve=(0,l.Z)(function*(Be,...gt){const an=this.transaction(Be,pe?"readwrite":"readonly");let Bt=an.store;return ee&&(Bt=Bt.index(gt.shift())),(yield Promise.all([Bt[Q](...gt),pe&&an.done]))[0]});return function(gt){return Ve.apply(this,arguments)}}();return qe.set(we,oe),oe}!function Te(ce){Pe=ce(Pe)}(ce=>({...ce,get:(we,Q,ee)=>ie(we,Q)||ce.get(we,Q,ee),has:(we,Q)=>!!ie(we,Q)||ce.has(we,Q)}))},5861:(ct,Ae,U)=>{function l(P,se,ue,_e,ge,fe,ve){try{var z=P[fe](ve),W=z.value}catch(X){return void ue(X)}z.done?se(W):Promise.resolve(W).then(_e,ge)}function $(P){return function(){var se=this,ue=arguments;return new Promise(function(_e,ge){var fe=P.apply(se,ue);function ve(W){l(fe,_e,ge,ve,z,"next",W)}function z(W){l(fe,_e,ge,ve,z,"throw",W)}ve(void 0)})}}U.d(Ae,{Z:()=>$})}},ct=>{ct(ct.s=7233)}]);